(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();function cw(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Em={exports:{}},yu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xE;function l1(){if(xE)return yu;xE=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,s,a){var u=null;if(a!==void 0&&(u=""+a),s.key!==void 0&&(u=""+s.key),"key"in s){a={};for(var d in s)d!=="key"&&(a[d]=s[d])}else a=s;return s=a.ref,{$$typeof:t,type:i,key:u,ref:s!==void 0?s:null,props:a}}return yu.Fragment=e,yu.jsx=n,yu.jsxs=n,yu}var CE;function u1(){return CE||(CE=1,Em.exports=l1()),Em.exports}var T=u1(),Tm={exports:{}},Ne={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var IE;function c1(){if(IE)return Ne;IE=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),S=Symbol.iterator;function C(B){return B===null||typeof B!="object"?null:(B=S&&B[S]||B["@@iterator"],typeof B=="function"?B:null)}var D={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},U=Object.assign,P={};function q(B,se,fe){this.props=B,this.context=se,this.refs=P,this.updater=fe||D}q.prototype.isReactComponent={},q.prototype.setState=function(B,se){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,se,"setState")},q.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function X(){}X.prototype=q.prototype;function H(B,se,fe){this.props=B,this.context=se,this.refs=P,this.updater=fe||D}var ne=H.prototype=new X;ne.constructor=H,U(ne,q.prototype),ne.isPureReactComponent=!0;var le=Array.isArray;function ce(){}var N={H:null,A:null,T:null,S:null},M=Object.prototype.hasOwnProperty;function R(B,se,fe){var ge=fe.ref;return{$$typeof:t,type:B,key:se,ref:ge!==void 0?ge:null,props:fe}}function V(B,se){return R(B.type,se,B.props)}function O(B){return typeof B=="object"&&B!==null&&B.$$typeof===t}function z(B){var se={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(fe){return se[fe]})}var k=/\/+/g;function oe(B,se){return typeof B=="object"&&B!==null&&B.key!=null?z(""+B.key):se.toString(36)}function Ce(B){switch(B.status){case"fulfilled":return B.value;case"rejected":throw B.reason;default:switch(typeof B.status=="string"?B.then(ce,ce):(B.status="pending",B.then(function(se){B.status==="pending"&&(B.status="fulfilled",B.value=se)},function(se){B.status==="pending"&&(B.status="rejected",B.reason=se)})),B.status){case"fulfilled":return B.value;case"rejected":throw B.reason}}throw B}function Y(B,se,fe,ge,Ie){var Ve=typeof B;(Ve==="undefined"||Ve==="boolean")&&(B=null);var je=!1;if(B===null)je=!0;else switch(Ve){case"bigint":case"string":case"number":je=!0;break;case"object":switch(B.$$typeof){case t:case e:je=!0;break;case v:return je=B._init,Y(je(B._payload),se,fe,ge,Ie)}}if(je)return Ie=Ie(B),je=ge===""?"."+oe(B,0):ge,le(Ie)?(fe="",je!=null&&(fe=je.replace(k,"$&/")+"/"),Y(Ie,se,fe,"",function(zs){return zs})):Ie!=null&&(O(Ie)&&(Ie=V(Ie,fe+(Ie.key==null||B&&B.key===Ie.key?"":(""+Ie.key).replace(k,"$&/")+"/")+je)),se.push(Ie)),1;je=0;var Ft=ge===""?".":ge+":";if(le(B))for(var ht=0;ht<B.length;ht++)ge=B[ht],Ve=Ft+oe(ge,ht),je+=Y(ge,se,fe,Ve,Ie);else if(ht=C(B),typeof ht=="function")for(B=ht.call(B),ht=0;!(ge=B.next()).done;)ge=ge.value,Ve=Ft+oe(ge,ht++),je+=Y(ge,se,fe,Ve,Ie);else if(Ve==="object"){if(typeof B.then=="function")return Y(Ce(B),se,fe,ge,Ie);throw se=String(B),Error("Objects are not valid as a React child (found: "+(se==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":se)+"). If you meant to render a collection of children, use an array instead.")}return je}function ue(B,se,fe){if(B==null)return B;var ge=[],Ie=0;return Y(B,ge,"","",function(Ve){return se.call(fe,Ve,Ie++)}),ge}function _e(B){if(B._status===-1){var se=B._result;se=se(),se.then(function(fe){(B._status===0||B._status===-1)&&(B._status=1,B._result=fe)},function(fe){(B._status===0||B._status===-1)&&(B._status=2,B._result=fe)}),B._status===-1&&(B._status=0,B._result=se)}if(B._status===1)return B._result.default;throw B._result}var ke=typeof reportError=="function"?reportError:function(B){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var se=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof B=="object"&&B!==null&&typeof B.message=="string"?String(B.message):String(B),error:B});if(!window.dispatchEvent(se))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",B);return}console.error(B)},Ue={map:ue,forEach:function(B,se,fe){ue(B,function(){se.apply(this,arguments)},fe)},count:function(B){var se=0;return ue(B,function(){se++}),se},toArray:function(B){return ue(B,function(se){return se})||[]},only:function(B){if(!O(B))throw Error("React.Children.only expected to receive a single React element child.");return B}};return Ne.Activity=E,Ne.Children=Ue,Ne.Component=q,Ne.Fragment=n,Ne.Profiler=s,Ne.PureComponent=H,Ne.StrictMode=i,Ne.Suspense=p,Ne.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=N,Ne.__COMPILER_RUNTIME={__proto__:null,c:function(B){return N.H.useMemoCache(B)}},Ne.cache=function(B){return function(){return B.apply(null,arguments)}},Ne.cacheSignal=function(){return null},Ne.cloneElement=function(B,se,fe){if(B==null)throw Error("The argument must be a React element, but you passed "+B+".");var ge=U({},B.props),Ie=B.key;if(se!=null)for(Ve in se.key!==void 0&&(Ie=""+se.key),se)!M.call(se,Ve)||Ve==="key"||Ve==="__self"||Ve==="__source"||Ve==="ref"&&se.ref===void 0||(ge[Ve]=se[Ve]);var Ve=arguments.length-2;if(Ve===1)ge.children=fe;else if(1<Ve){for(var je=Array(Ve),Ft=0;Ft<Ve;Ft++)je[Ft]=arguments[Ft+2];ge.children=je}return R(B.type,Ie,ge)},Ne.createContext=function(B){return B={$$typeof:u,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null},B.Provider=B,B.Consumer={$$typeof:a,_context:B},B},Ne.createElement=function(B,se,fe){var ge,Ie={},Ve=null;if(se!=null)for(ge in se.key!==void 0&&(Ve=""+se.key),se)M.call(se,ge)&&ge!=="key"&&ge!=="__self"&&ge!=="__source"&&(Ie[ge]=se[ge]);var je=arguments.length-2;if(je===1)Ie.children=fe;else if(1<je){for(var Ft=Array(je),ht=0;ht<je;ht++)Ft[ht]=arguments[ht+2];Ie.children=Ft}if(B&&B.defaultProps)for(ge in je=B.defaultProps,je)Ie[ge]===void 0&&(Ie[ge]=je[ge]);return R(B,Ve,Ie)},Ne.createRef=function(){return{current:null}},Ne.forwardRef=function(B){return{$$typeof:d,render:B}},Ne.isValidElement=O,Ne.lazy=function(B){return{$$typeof:v,_payload:{_status:-1,_result:B},_init:_e}},Ne.memo=function(B,se){return{$$typeof:h,type:B,compare:se===void 0?null:se}},Ne.startTransition=function(B){var se=N.T,fe={};N.T=fe;try{var ge=B(),Ie=N.S;Ie!==null&&Ie(fe,ge),typeof ge=="object"&&ge!==null&&typeof ge.then=="function"&&ge.then(ce,ke)}catch(Ve){ke(Ve)}finally{se!==null&&fe.types!==null&&(se.types=fe.types),N.T=se}},Ne.unstable_useCacheRefresh=function(){return N.H.useCacheRefresh()},Ne.use=function(B){return N.H.use(B)},Ne.useActionState=function(B,se,fe){return N.H.useActionState(B,se,fe)},Ne.useCallback=function(B,se){return N.H.useCallback(B,se)},Ne.useContext=function(B){return N.H.useContext(B)},Ne.useDebugValue=function(){},Ne.useDeferredValue=function(B,se){return N.H.useDeferredValue(B,se)},Ne.useEffect=function(B,se){return N.H.useEffect(B,se)},Ne.useEffectEvent=function(B){return N.H.useEffectEvent(B)},Ne.useId=function(){return N.H.useId()},Ne.useImperativeHandle=function(B,se,fe){return N.H.useImperativeHandle(B,se,fe)},Ne.useInsertionEffect=function(B,se){return N.H.useInsertionEffect(B,se)},Ne.useLayoutEffect=function(B,se){return N.H.useLayoutEffect(B,se)},Ne.useMemo=function(B,se){return N.H.useMemo(B,se)},Ne.useOptimistic=function(B,se){return N.H.useOptimistic(B,se)},Ne.useReducer=function(B,se,fe){return N.H.useReducer(B,se,fe)},Ne.useRef=function(B){return N.H.useRef(B)},Ne.useState=function(B){return N.H.useState(B)},Ne.useSyncExternalStore=function(B,se,fe){return N.H.useSyncExternalStore(B,se,fe)},Ne.useTransition=function(){return N.H.useTransition()},Ne.version="19.2.3",Ne}var bE;function Hg(){return bE||(bE=1,Tm.exports=c1()),Tm.exports}var G=Hg();const dw=cw(G);var Sm={exports:{}},vu={},Am={exports:{}},wm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RE;function d1(){return RE||(RE=1,(function(t){function e(Y,ue){var _e=Y.length;Y.push(ue);e:for(;0<_e;){var ke=_e-1>>>1,Ue=Y[ke];if(0<s(Ue,ue))Y[ke]=ue,Y[_e]=Ue,_e=ke;else break e}}function n(Y){return Y.length===0?null:Y[0]}function i(Y){if(Y.length===0)return null;var ue=Y[0],_e=Y.pop();if(_e!==ue){Y[0]=_e;e:for(var ke=0,Ue=Y.length,B=Ue>>>1;ke<B;){var se=2*(ke+1)-1,fe=Y[se],ge=se+1,Ie=Y[ge];if(0>s(fe,_e))ge<Ue&&0>s(Ie,fe)?(Y[ke]=Ie,Y[ge]=_e,ke=ge):(Y[ke]=fe,Y[se]=_e,ke=se);else if(ge<Ue&&0>s(Ie,_e))Y[ke]=Ie,Y[ge]=_e,ke=ge;else break e}}return ue}function s(Y,ue){var _e=Y.sortIndex-ue.sortIndex;return _e!==0?_e:Y.id-ue.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var u=Date,d=u.now();t.unstable_now=function(){return u.now()-d}}var p=[],h=[],v=1,E=null,S=3,C=!1,D=!1,U=!1,P=!1,q=typeof setTimeout=="function"?setTimeout:null,X=typeof clearTimeout=="function"?clearTimeout:null,H=typeof setImmediate<"u"?setImmediate:null;function ne(Y){for(var ue=n(h);ue!==null;){if(ue.callback===null)i(h);else if(ue.startTime<=Y)i(h),ue.sortIndex=ue.expirationTime,e(p,ue);else break;ue=n(h)}}function le(Y){if(U=!1,ne(Y),!D)if(n(p)!==null)D=!0,ce||(ce=!0,z());else{var ue=n(h);ue!==null&&Ce(le,ue.startTime-Y)}}var ce=!1,N=-1,M=5,R=-1;function V(){return P?!0:!(t.unstable_now()-R<M)}function O(){if(P=!1,ce){var Y=t.unstable_now();R=Y;var ue=!0;try{e:{D=!1,U&&(U=!1,X(N),N=-1),C=!0;var _e=S;try{t:{for(ne(Y),E=n(p);E!==null&&!(E.expirationTime>Y&&V());){var ke=E.callback;if(typeof ke=="function"){E.callback=null,S=E.priorityLevel;var Ue=ke(E.expirationTime<=Y);if(Y=t.unstable_now(),typeof Ue=="function"){E.callback=Ue,ne(Y),ue=!0;break t}E===n(p)&&i(p),ne(Y)}else i(p);E=n(p)}if(E!==null)ue=!0;else{var B=n(h);B!==null&&Ce(le,B.startTime-Y),ue=!1}}break e}finally{E=null,S=_e,C=!1}ue=void 0}}finally{ue?z():ce=!1}}}var z;if(typeof H=="function")z=function(){H(O)};else if(typeof MessageChannel<"u"){var k=new MessageChannel,oe=k.port2;k.port1.onmessage=O,z=function(){oe.postMessage(null)}}else z=function(){q(O,0)};function Ce(Y,ue){N=q(function(){Y(t.unstable_now())},ue)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Y){Y.callback=null},t.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<Y?Math.floor(1e3/Y):5},t.unstable_getCurrentPriorityLevel=function(){return S},t.unstable_next=function(Y){switch(S){case 1:case 2:case 3:var ue=3;break;default:ue=S}var _e=S;S=ue;try{return Y()}finally{S=_e}},t.unstable_requestPaint=function(){P=!0},t.unstable_runWithPriority=function(Y,ue){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var _e=S;S=Y;try{return ue()}finally{S=_e}},t.unstable_scheduleCallback=function(Y,ue,_e){var ke=t.unstable_now();switch(typeof _e=="object"&&_e!==null?(_e=_e.delay,_e=typeof _e=="number"&&0<_e?ke+_e:ke):_e=ke,Y){case 1:var Ue=-1;break;case 2:Ue=250;break;case 5:Ue=1073741823;break;case 4:Ue=1e4;break;default:Ue=5e3}return Ue=_e+Ue,Y={id:v++,callback:ue,priorityLevel:Y,startTime:_e,expirationTime:Ue,sortIndex:-1},_e>ke?(Y.sortIndex=_e,e(h,Y),n(p)===null&&Y===n(h)&&(U?(X(N),N=-1):U=!0,Ce(le,_e-ke))):(Y.sortIndex=Ue,e(p,Y),D||C||(D=!0,ce||(ce=!0,z()))),Y},t.unstable_shouldYield=V,t.unstable_wrapCallback=function(Y){var ue=S;return function(){var _e=S;S=ue;try{return Y.apply(this,arguments)}finally{S=_e}}}})(wm)),wm}var NE;function f1(){return NE||(NE=1,Am.exports=d1()),Am.exports}var xm={exports:{}},sn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ME;function h1(){if(ME)return sn;ME=1;var t=Hg();function e(p){var h="https://react.dev/errors/"+p;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)h+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+p+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},s=Symbol.for("react.portal");function a(p,h,v){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:E==null?null:""+E,children:p,containerInfo:h,implementation:v}}var u=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(p,h){if(p==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return sn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,sn.createPortal=function(p,h){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return a(p,h,null,v)},sn.flushSync=function(p){var h=u.T,v=i.p;try{if(u.T=null,i.p=2,p)return p()}finally{u.T=h,i.p=v,i.d.f()}},sn.preconnect=function(p,h){typeof p=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,i.d.C(p,h))},sn.prefetchDNS=function(p){typeof p=="string"&&i.d.D(p)},sn.preinit=function(p,h){if(typeof p=="string"&&h&&typeof h.as=="string"){var v=h.as,E=d(v,h.crossOrigin),S=typeof h.integrity=="string"?h.integrity:void 0,C=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;v==="style"?i.d.S(p,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:E,integrity:S,fetchPriority:C}):v==="script"&&i.d.X(p,{crossOrigin:E,integrity:S,fetchPriority:C,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},sn.preinitModule=function(p,h){if(typeof p=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var v=d(h.as,h.crossOrigin);i.d.M(p,{crossOrigin:v,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&i.d.M(p)},sn.preload=function(p,h){if(typeof p=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var v=h.as,E=d(v,h.crossOrigin);i.d.L(p,v,{crossOrigin:E,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},sn.preloadModule=function(p,h){if(typeof p=="string")if(h){var v=d(h.as,h.crossOrigin);i.d.m(p,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:v,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else i.d.m(p)},sn.requestFormReset=function(p){i.d.r(p)},sn.unstable_batchedUpdates=function(p,h){return p(h)},sn.useFormState=function(p,h,v){return u.H.useFormState(p,h,v)},sn.useFormStatus=function(){return u.H.useHostTransitionStatus()},sn.version="19.2.3",sn}var DE;function p1(){if(DE)return xm.exports;DE=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),xm.exports=h1(),xm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PE;function m1(){if(PE)return vu;PE=1;var t=f1(),e=Hg(),n=p1();function i(r){var o="https://react.dev/errors/"+r;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)o+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+r+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function a(r){var o=r,l=r;if(r.alternate)for(;o.return;)o=o.return;else{r=o;do o=r,(o.flags&4098)!==0&&(l=o.return),r=o.return;while(r)}return o.tag===3?l:null}function u(r){if(r.tag===13){var o=r.memoizedState;if(o===null&&(r=r.alternate,r!==null&&(o=r.memoizedState)),o!==null)return o.dehydrated}return null}function d(r){if(r.tag===31){var o=r.memoizedState;if(o===null&&(r=r.alternate,r!==null&&(o=r.memoizedState)),o!==null)return o.dehydrated}return null}function p(r){if(a(r)!==r)throw Error(i(188))}function h(r){var o=r.alternate;if(!o){if(o=a(r),o===null)throw Error(i(188));return o!==r?null:r}for(var l=r,c=o;;){var y=l.return;if(y===null)break;var _=y.alternate;if(_===null){if(c=y.return,c!==null){l=c;continue}break}if(y.child===_.child){for(_=y.child;_;){if(_===l)return p(y),r;if(_===c)return p(y),o;_=_.sibling}throw Error(i(188))}if(l.return!==c.return)l=y,c=_;else{for(var w=!1,I=y.child;I;){if(I===l){w=!0,l=y,c=_;break}if(I===c){w=!0,c=y,l=_;break}I=I.sibling}if(!w){for(I=_.child;I;){if(I===l){w=!0,l=_,c=y;break}if(I===c){w=!0,c=_,l=y;break}I=I.sibling}if(!w)throw Error(i(189))}}if(l.alternate!==c)throw Error(i(190))}if(l.tag!==3)throw Error(i(188));return l.stateNode.current===l?r:o}function v(r){var o=r.tag;if(o===5||o===26||o===27||o===6)return r;for(r=r.child;r!==null;){if(o=v(r),o!==null)return o;r=r.sibling}return null}var E=Object.assign,S=Symbol.for("react.element"),C=Symbol.for("react.transitional.element"),D=Symbol.for("react.portal"),U=Symbol.for("react.fragment"),P=Symbol.for("react.strict_mode"),q=Symbol.for("react.profiler"),X=Symbol.for("react.consumer"),H=Symbol.for("react.context"),ne=Symbol.for("react.forward_ref"),le=Symbol.for("react.suspense"),ce=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),M=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),O=Symbol.iterator;function z(r){return r===null||typeof r!="object"?null:(r=O&&r[O]||r["@@iterator"],typeof r=="function"?r:null)}var k=Symbol.for("react.client.reference");function oe(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===k?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case U:return"Fragment";case q:return"Profiler";case P:return"StrictMode";case le:return"Suspense";case ce:return"SuspenseList";case R:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case D:return"Portal";case H:return r.displayName||"Context";case X:return(r._context.displayName||"Context")+".Consumer";case ne:var o=r.render;return r=r.displayName,r||(r=o.displayName||o.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case N:return o=r.displayName||null,o!==null?o:oe(r.type)||"Memo";case M:o=r._payload,r=r._init;try{return oe(r(o))}catch{}}return null}var Ce=Array.isArray,Y=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ue=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,_e={pending:!1,data:null,method:null,action:null},ke=[],Ue=-1;function B(r){return{current:r}}function se(r){0>Ue||(r.current=ke[Ue],ke[Ue]=null,Ue--)}function fe(r,o){Ue++,ke[Ue]=r.current,r.current=o}var ge=B(null),Ie=B(null),Ve=B(null),je=B(null);function Ft(r,o){switch(fe(Ve,o),fe(Ie,r),fe(ge,null),o.nodeType){case 9:case 11:r=(r=o.documentElement)&&(r=r.namespaceURI)?K0(r):0;break;default:if(r=o.tagName,o=o.namespaceURI)o=K0(o),r=Y0(o,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}se(ge),fe(ge,r)}function ht(){se(ge),se(Ie),se(Ve)}function zs(r){r.memoizedState!==null&&fe(je,r);var o=ge.current,l=Y0(o,r.type);o!==l&&(fe(Ie,r),fe(ge,l))}function Bo(r){Ie.current===r&&(se(ge),se(Ie)),je.current===r&&(se(je),hu._currentValue=_e)}var zo,Go;function bi(r){if(zo===void 0)try{throw Error()}catch(l){var o=l.stack.trim().match(/\n( *(at )?)/);zo=o&&o[1]||"",Go=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+zo+r+Go}var hl=!1;function Gs(r,o){if(!r||hl)return"";hl=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(o){var ie=function(){throw Error()};if(Object.defineProperty(ie.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ie,[])}catch(Z){var Q=Z}Reflect.construct(r,[],ie)}else{try{ie.call()}catch(Z){Q=Z}r.call(ie.prototype)}}else{try{throw Error()}catch(Z){Q=Z}(ie=r())&&typeof ie.catch=="function"&&ie.catch(function(){})}}catch(Z){if(Z&&Q&&typeof Z.stack=="string")return[Z.stack,Q.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=c.DetermineComponentFrameRoot(),w=_[0],I=_[1];if(w&&I){var L=w.split(`
`),K=I.split(`
`);for(y=c=0;c<L.length&&!L[c].includes("DetermineComponentFrameRoot");)c++;for(;y<K.length&&!K[y].includes("DetermineComponentFrameRoot");)y++;if(c===L.length||y===K.length)for(c=L.length-1,y=K.length-1;1<=c&&0<=y&&L[c]!==K[y];)y--;for(;1<=c&&0<=y;c--,y--)if(L[c]!==K[y]){if(c!==1||y!==1)do if(c--,y--,0>y||L[c]!==K[y]){var ee=`
`+L[c].replace(" at new "," at ");return r.displayName&&ee.includes("<anonymous>")&&(ee=ee.replace("<anonymous>",r.displayName)),ee}while(1<=c&&0<=y);break}}}finally{hl=!1,Error.prepareStackTrace=l}return(l=r?r.displayName||r.name:"")?bi(l):""}function pl(r,o){switch(r.tag){case 26:case 27:case 5:return bi(r.type);case 16:return bi("Lazy");case 13:return r.child!==o&&o!==null?bi("Suspense Fallback"):bi("Suspense");case 19:return bi("SuspenseList");case 0:case 15:return Gs(r.type,!1);case 11:return Gs(r.type.render,!1);case 1:return Gs(r.type,!0);case 31:return bi("Activity");default:return""}}function ml(r){try{var o="",l=null;do o+=pl(r,l),l=r,r=r.return;while(r);return o}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var Ct=Object.prototype.hasOwnProperty,qt=t.unstable_scheduleCallback,qr=t.unstable_cancelCallback,Sh=t.unstable_shouldYield,dc=t.unstable_requestPaint,fn=t.unstable_now,$s=t.unstable_getCurrentPriorityLevel,gl=t.unstable_ImmediatePriority,yl=t.unstable_UserBlockingPriority,Hr=t.unstable_NormalPriority,Ah=t.unstable_LowPriority,fc=t.unstable_IdlePriority,hc=t.log,pc=t.unstable_setDisableYieldValue,oi=null,Yt=null;function Hn(r){if(typeof hc=="function"&&pc(r),Yt&&typeof Yt.setStrictMode=="function")try{Yt.setStrictMode(oi,r)}catch{}}var Et=Math.clz32?Math.clz32:gc,mc=Math.log,$o=Math.LN2;function gc(r){return r>>>=0,r===0?32:31-(mc(r)/$o|0)|0}var Ri=256,js=262144,It=4194304;function Ni(r){var o=r&42;if(o!==0)return o;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return r&261888;case 262144:case 524288:case 1048576:case 2097152:return r&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function Mi(r,o,l){var c=r.pendingLanes;if(c===0)return 0;var y=0,_=r.suspendedLanes,w=r.pingedLanes;r=r.warmLanes;var I=c&134217727;return I!==0?(c=I&~_,c!==0?y=Ni(c):(w&=I,w!==0?y=Ni(w):l||(l=I&~r,l!==0&&(y=Ni(l))))):(I=c&~_,I!==0?y=Ni(I):w!==0?y=Ni(w):l||(l=c&~r,l!==0&&(y=Ni(l)))),y===0?0:o!==0&&o!==y&&(o&_)===0&&(_=y&-y,l=o&-o,_>=l||_===32&&(l&4194048)!==0)?o:y}function ai(r,o){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&o)===0}function wh(r,o){switch(r){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yc(){var r=It;return It<<=1,(It&62914560)===0&&(It=4194304),r}function Di(r){for(var o=[],l=0;31>l;l++)o.push(r);return o}function Js(r,o){r.pendingLanes|=o,o!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function xh(r,o,l,c,y,_){var w=r.pendingLanes;r.pendingLanes=l,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=l,r.entangledLanes&=l,r.errorRecoveryDisabledLanes&=l,r.shellSuspendCounter=0;var I=r.entanglements,L=r.expirationTimes,K=r.hiddenUpdates;for(l=w&~l;0<l;){var ee=31-Et(l),ie=1<<ee;I[ee]=0,L[ee]=-1;var Q=K[ee];if(Q!==null)for(K[ee]=null,ee=0;ee<Q.length;ee++){var Z=Q[ee];Z!==null&&(Z.lane&=-536870913)}l&=~ie}c!==0&&Ks(r,c,0),_!==0&&y===0&&r.tag!==0&&(r.suspendedLanes|=_&~(w&~o))}function Ks(r,o,l){r.pendingLanes|=o,r.suspendedLanes&=~o;var c=31-Et(o);r.entangledLanes|=o,r.entanglements[c]=r.entanglements[c]|1073741824|l&261930}function vl(r,o){var l=r.entangledLanes|=o;for(r=r.entanglements;l;){var c=31-Et(l),y=1<<c;y&o|r[c]&o&&(r[c]|=o),l&=~y}}function _l(r,o){var l=o&-o;return l=(l&42)!==0?1:Ys(l),(l&(r.suspendedLanes|o))!==0?0:l}function Ys(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function ar(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function vc(){var r=ue.p;return r!==0?r:(r=window.event,r===void 0?32:vE(r.type))}function li(r,o){var l=ue.p;try{return ue.p=r,o()}finally{ue.p=l}}var ui=Math.random().toString(36).slice(2),bt="__reactFiber$"+ui,Gt="__reactProps$"+ui,Pi="__reactContainer$"+ui,jo="__reactEvents$"+ui,Ch="__reactListeners$"+ui,_c="__reactHandles$"+ui,Ec="__reactResources$"+ui,ki="__reactMarker$"+ui;function Jo(r){delete r[bt],delete r[Gt],delete r[jo],delete r[Ch],delete r[_c]}function Vi(r){var o=r[bt];if(o)return o;for(var l=r.parentNode;l;){if(o=l[Pi]||l[bt]){if(l=o.alternate,o.child!==null||l!==null&&l.child!==null)for(r=nE(r);r!==null;){if(l=r[bt])return l;r=nE(r)}return o}r=l,l=r.parentNode}return null}function Bn(r){if(r=r[bt]||r[Pi]){var o=r.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return r}return null}function bn(r){var o=r.tag;if(o===5||o===26||o===27||o===6)return r.stateNode;throw Error(i(33))}function Li(r){var o=r[Ec];return o||(o=r[Ec]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function Rt(r){r[ki]=!0}var El=new Set,Tl={};function Ui(r,o){Oi(r,o),Oi(r+"Capture",o)}function Oi(r,o){for(Tl[r]=o,r=0;r<o.length;r++)El.add(o[r])}var Sl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Al={},wl={};function Tc(r){return Ct.call(wl,r)?!0:Ct.call(Al,r)?!1:Sl.test(r)?wl[r]=!0:(Al[r]=!0,!1)}function Ko(r,o,l){if(Tc(o))if(l===null)r.removeAttribute(o);else{switch(typeof l){case"undefined":case"function":case"symbol":r.removeAttribute(o);return;case"boolean":var c=o.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){r.removeAttribute(o);return}}r.setAttribute(o,""+l)}}function Rn(r,o,l){if(l===null)r.removeAttribute(o);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(o);return}r.setAttribute(o,""+l)}}function Nt(r,o,l,c){if(c===null)r.removeAttribute(l);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(l);return}r.setAttributeNS(o,l,""+c)}}function $t(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function Br(r){var o=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function xl(r,o,l){var c=Object.getOwnPropertyDescriptor(r.constructor.prototype,o);if(!r.hasOwnProperty(o)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var y=c.get,_=c.set;return Object.defineProperty(r,o,{configurable:!0,get:function(){return y.call(this)},set:function(w){l=""+w,_.call(this,w)}}),Object.defineProperty(r,o,{enumerable:c.enumerable}),{getValue:function(){return l},setValue:function(w){l=""+w},stopTracking:function(){r._valueTracker=null,delete r[o]}}}}function et(r){if(!r._valueTracker){var o=Br(r)?"checked":"value";r._valueTracker=xl(r,o,""+r[o])}}function Qs(r){if(!r)return!1;var o=r._valueTracker;if(!o)return!0;var l=o.getValue(),c="";return r&&(c=Br(r)?r.checked?"true":"false":r.value),r=c,r!==l?(o.setValue(r),!0):!1}function Fi(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var Xs=/[\n"\\]/g;function _n(r){return r.replace(Xs,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function Yo(r,o,l,c,y,_,w,I){r.name="",w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?r.type=w:r.removeAttribute("type"),o!=null?w==="number"?(o===0&&r.value===""||r.value!=o)&&(r.value=""+$t(o)):r.value!==""+$t(o)&&(r.value=""+$t(o)):w!=="submit"&&w!=="reset"||r.removeAttribute("value"),o!=null?Cl(r,w,$t(o)):l!=null?Cl(r,w,$t(l)):c!=null&&r.removeAttribute("value"),y==null&&_!=null&&(r.defaultChecked=!!_),y!=null&&(r.checked=y&&typeof y!="function"&&typeof y!="symbol"),I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"?r.name=""+$t(I):r.removeAttribute("name")}function Sc(r,o,l,c,y,_,w,I){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(r.type=_),o!=null||l!=null){if(!(_!=="submit"&&_!=="reset"||o!=null)){et(r);return}l=l!=null?""+$t(l):"",o=o!=null?""+$t(o):l,I||o===r.value||(r.value=o),r.defaultValue=o}c=c??y,c=typeof c!="function"&&typeof c!="symbol"&&!!c,r.checked=I?r.checked:!!c,r.defaultChecked=!!c,w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(r.name=w),et(r)}function Cl(r,o,l){o==="number"&&Fi(r.ownerDocument)===r||r.defaultValue===""+l||(r.defaultValue=""+l)}function zr(r,o,l,c){if(r=r.options,o){o={};for(var y=0;y<l.length;y++)o["$"+l[y]]=!0;for(l=0;l<r.length;l++)y=o.hasOwnProperty("$"+r[l].value),r[l].selected!==y&&(r[l].selected=y),y&&c&&(r[l].defaultSelected=!0)}else{for(l=""+$t(l),o=null,y=0;y<r.length;y++){if(r[y].value===l){r[y].selected=!0,c&&(r[y].defaultSelected=!0);return}o!==null||r[y].disabled||(o=r[y])}o!==null&&(o.selected=!0)}}function Ac(r,o,l){if(o!=null&&(o=""+$t(o),o!==r.value&&(r.value=o),l==null)){r.defaultValue!==o&&(r.defaultValue=o);return}r.defaultValue=l!=null?""+$t(l):""}function Gr(r,o,l,c){if(o==null){if(c!=null){if(l!=null)throw Error(i(92));if(Ce(c)){if(1<c.length)throw Error(i(93));c=c[0]}l=c}l==null&&(l=""),o=l}l=$t(o),r.defaultValue=l,c=r.textContent,c===l&&c!==""&&c!==null&&(r.value=c),et(r)}function En(r,o){if(o){var l=r.firstChild;if(l&&l===r.lastChild&&l.nodeType===3){l.nodeValue=o;return}}r.textContent=o}var wc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Il(r,o,l){var c=o.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?c?r.setProperty(o,""):o==="float"?r.cssFloat="":r[o]="":c?r.setProperty(o,l):typeof l!="number"||l===0||wc.has(o)?o==="float"?r.cssFloat=l:r[o]=(""+l).trim():r[o]=l+"px"}function bl(r,o,l){if(o!=null&&typeof o!="object")throw Error(i(62));if(r=r.style,l!=null){for(var c in l)!l.hasOwnProperty(c)||o!=null&&o.hasOwnProperty(c)||(c.indexOf("--")===0?r.setProperty(c,""):c==="float"?r.cssFloat="":r[c]="");for(var y in o)c=o[y],o.hasOwnProperty(y)&&l[y]!==c&&Il(r,y,c)}else for(var _ in o)o.hasOwnProperty(_)&&Il(r,_,o[_])}function Qo(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),$r=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Xo(r){return $r.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}function ci(){}var Rl=null;function zn(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var jr=null,qi=null;function Ws(r){var o=Bn(r);if(o&&(r=o.stateNode)){var l=r[Gt]||null;e:switch(r=o.stateNode,o.type){case"input":if(Yo(r,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),o=l.name,l.type==="radio"&&o!=null){for(l=r;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+_n(""+o)+'"][type="radio"]'),o=0;o<l.length;o++){var c=l[o];if(c!==r&&c.form===r.form){var y=c[Gt]||null;if(!y)throw Error(i(90));Yo(c,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(o=0;o<l.length;o++)c=l[o],c.form===r.form&&Qs(c)}break e;case"textarea":Ac(r,l.value,l.defaultValue);break e;case"select":o=l.value,o!=null&&zr(r,!!l.multiple,o,!1)}}}var Wo=!1;function Jr(r,o,l){if(Wo)return r(o,l);Wo=!0;try{var c=r(o);return c}finally{if(Wo=!1,(jr!==null||qi!==null)&&(vd(),jr&&(o=jr,r=qi,qi=jr=null,Ws(o),r)))for(o=0;o<r.length;o++)Ws(r[o])}}function di(r,o){var l=r.stateNode;if(l===null)return null;var c=l[Gt]||null;if(c===null)return null;l=c[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(r=r.type,c=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!c;break e;default:r=!1}if(r)return null;if(l&&typeof l!="function")throw Error(i(231,o,typeof l));return l}var Gn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Zs=!1;if(Gn)try{var rt={};Object.defineProperty(rt,"passive",{get:function(){Zs=!0}}),window.addEventListener("test",rt,rt),window.removeEventListener("test",rt,rt)}catch{Zs=!1}var Hi=null,Nl=null,eo=null;function Ml(){if(eo)return eo;var r,o=Nl,l=o.length,c,y="value"in Hi?Hi.value:Hi.textContent,_=y.length;for(r=0;r<l&&o[r]===y[r];r++);var w=l-r;for(c=1;c<=w&&o[l-c]===y[_-c];c++);return eo=y.slice(r,1<c?1-c:void 0)}function to(r){var o=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&o===13&&(r=13)):r=o,r===10&&(r=13),32<=r||r===13?r:0}function lr(){return!0}function fi(){return!1}function Qt(r){function o(l,c,y,_,w){this._reactName=l,this._targetInst=y,this.type=c,this.nativeEvent=_,this.target=w,this.currentTarget=null;for(var I in r)r.hasOwnProperty(I)&&(l=r[I],this[I]=l?l(_):_[I]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?lr:fi,this.isPropagationStopped=fi,this}return E(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=lr)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=lr)},persist:function(){},isPersistent:lr}),o}var ur={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Bi=Qt(ur),Kr=E({},ur,{view:0,detail:0}),Dl=Qt(Kr),Yr,Zo,zi,ea=E({},Kr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Qr,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==zi&&(zi&&r.type==="mousemove"?(Yr=r.screenX-zi.screenX,Zo=r.screenY-zi.screenY):Zo=Yr=0,zi=r),Yr)},movementY:function(r){return"movementY"in r?r.movementY:Zo}}),Pl=Qt(ea),no=E({},ea,{dataTransfer:0}),Cc=Qt(no),Ic=E({},Kr,{relatedTarget:0}),io=Qt(Ic),kl=E({},ur,{animationName:0,elapsedTime:0,pseudoElement:0}),bc=Qt(kl),ta=E({},ur,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),Rc=Qt(ta),Nc=E({},ur,{data:0}),Gi=Qt(Nc),Mc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Dc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Pc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kc(r){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(r):(r=Pc[r])?!!o[r]:!1}function Qr(){return kc}var hn=E({},Kr,{key:function(r){if(r.key){var o=Mc[r.key]||r.key;if(o!=="Unidentified")return o}return r.type==="keypress"?(r=to(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Dc[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Qr,charCode:function(r){return r.type==="keypress"?to(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?to(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),Vc=Qt(hn),Lc=E({},ea,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cr=Qt(Lc),g=E({},Kr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Qr}),A=Qt(g),x=E({},ur,{propertyName:0,elapsedTime:0,pseudoElement:0}),b=Qt(x),j=E({},ea,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),W=Qt(j),de=E({},ur,{newState:0,oldState:0}),De=Qt(de),Tt=[9,13,27,32],Xe=Gn&&"CompositionEvent"in window,pt=null;Gn&&"documentMode"in document&&(pt=document.documentMode);var $n=Gn&&"TextEvent"in window&&!pt,$i=Gn&&(!Xe||pt&&8<pt&&11>=pt),hi=" ",pi=!1;function ro(r,o){switch(r){case"keyup":return Tt.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function na(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var ia=!1;function Db(r,o){switch(r){case"compositionend":return na(o);case"keypress":return o.which!==32?null:(pi=!0,hi);case"textInput":return r=o.data,r===hi&&pi?null:r;default:return null}}function Pb(r,o){if(ia)return r==="compositionend"||!Xe&&ro(r,o)?(r=Ml(),eo=Nl=Hi=null,ia=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return $i&&o.locale!=="ko"?null:o.data;default:return null}}var kb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function sv(r){var o=r&&r.nodeName&&r.nodeName.toLowerCase();return o==="input"?!!kb[r.type]:o==="textarea"}function ov(r,o,l,c){jr?qi?qi.push(c):qi=[c]:jr=c,o=xd(o,"onChange"),0<o.length&&(l=new Bi("onChange","change",null,l,c),r.push({event:l,listeners:o}))}var Vl=null,Ll=null;function Vb(r){B0(r,0)}function Uc(r){var o=bn(r);if(Qs(o))return r}function av(r,o){if(r==="change")return o}var lv=!1;if(Gn){var Ih;if(Gn){var bh="oninput"in document;if(!bh){var uv=document.createElement("div");uv.setAttribute("oninput","return;"),bh=typeof uv.oninput=="function"}Ih=bh}else Ih=!1;lv=Ih&&(!document.documentMode||9<document.documentMode)}function cv(){Vl&&(Vl.detachEvent("onpropertychange",dv),Ll=Vl=null)}function dv(r){if(r.propertyName==="value"&&Uc(Ll)){var o=[];ov(o,Ll,r,zn(r)),Jr(Vb,o)}}function Lb(r,o,l){r==="focusin"?(cv(),Vl=o,Ll=l,Vl.attachEvent("onpropertychange",dv)):r==="focusout"&&cv()}function Ub(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Uc(Ll)}function Ob(r,o){if(r==="click")return Uc(o)}function Fb(r,o){if(r==="input"||r==="change")return Uc(o)}function qb(r,o){return r===o&&(r!==0||1/r===1/o)||r!==r&&o!==o}var Nn=typeof Object.is=="function"?Object.is:qb;function Ul(r,o){if(Nn(r,o))return!0;if(typeof r!="object"||r===null||typeof o!="object"||o===null)return!1;var l=Object.keys(r),c=Object.keys(o);if(l.length!==c.length)return!1;for(c=0;c<l.length;c++){var y=l[c];if(!Ct.call(o,y)||!Nn(r[y],o[y]))return!1}return!0}function fv(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function hv(r,o){var l=fv(r);r=0;for(var c;l;){if(l.nodeType===3){if(c=r+l.textContent.length,r<=o&&c>=o)return{node:l,offset:o-r};r=c}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=fv(l)}}function pv(r,o){return r&&o?r===o?!0:r&&r.nodeType===3?!1:o&&o.nodeType===3?pv(r,o.parentNode):"contains"in r?r.contains(o):r.compareDocumentPosition?!!(r.compareDocumentPosition(o)&16):!1:!1}function mv(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var o=Fi(r.document);o instanceof r.HTMLIFrameElement;){try{var l=typeof o.contentWindow.location.href=="string"}catch{l=!1}if(l)r=o.contentWindow;else break;o=Fi(r.document)}return o}function Rh(r){var o=r&&r.nodeName&&r.nodeName.toLowerCase();return o&&(o==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||o==="textarea"||r.contentEditable==="true")}var Hb=Gn&&"documentMode"in document&&11>=document.documentMode,ra=null,Nh=null,Ol=null,Mh=!1;function gv(r,o,l){var c=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Mh||ra==null||ra!==Fi(c)||(c=ra,"selectionStart"in c&&Rh(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Ol&&Ul(Ol,c)||(Ol=c,c=xd(Nh,"onSelect"),0<c.length&&(o=new Bi("onSelect","select",null,o,l),r.push({event:o,listeners:c}),o.target=ra)))}function so(r,o){var l={};return l[r.toLowerCase()]=o.toLowerCase(),l["Webkit"+r]="webkit"+o,l["Moz"+r]="moz"+o,l}var sa={animationend:so("Animation","AnimationEnd"),animationiteration:so("Animation","AnimationIteration"),animationstart:so("Animation","AnimationStart"),transitionrun:so("Transition","TransitionRun"),transitionstart:so("Transition","TransitionStart"),transitioncancel:so("Transition","TransitionCancel"),transitionend:so("Transition","TransitionEnd")},Dh={},yv={};Gn&&(yv=document.createElement("div").style,"AnimationEvent"in window||(delete sa.animationend.animation,delete sa.animationiteration.animation,delete sa.animationstart.animation),"TransitionEvent"in window||delete sa.transitionend.transition);function oo(r){if(Dh[r])return Dh[r];if(!sa[r])return r;var o=sa[r],l;for(l in o)if(o.hasOwnProperty(l)&&l in yv)return Dh[r]=o[l];return r}var vv=oo("animationend"),_v=oo("animationiteration"),Ev=oo("animationstart"),Bb=oo("transitionrun"),zb=oo("transitionstart"),Gb=oo("transitioncancel"),Tv=oo("transitionend"),Sv=new Map,Ph="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ph.push("scrollEnd");function mi(r,o){Sv.set(r,o),Ui(o,[r])}var Oc=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)},jn=[],oa=0,kh=0;function Fc(){for(var r=oa,o=kh=oa=0;o<r;){var l=jn[o];jn[o++]=null;var c=jn[o];jn[o++]=null;var y=jn[o];jn[o++]=null;var _=jn[o];if(jn[o++]=null,c!==null&&y!==null){var w=c.pending;w===null?y.next=y:(y.next=w.next,w.next=y),c.pending=y}_!==0&&Av(l,y,_)}}function qc(r,o,l,c){jn[oa++]=r,jn[oa++]=o,jn[oa++]=l,jn[oa++]=c,kh|=c,r.lanes|=c,r=r.alternate,r!==null&&(r.lanes|=c)}function Vh(r,o,l,c){return qc(r,o,l,c),Hc(r)}function ao(r,o){return qc(r,null,null,o),Hc(r)}function Av(r,o,l){r.lanes|=l;var c=r.alternate;c!==null&&(c.lanes|=l);for(var y=!1,_=r.return;_!==null;)_.childLanes|=l,c=_.alternate,c!==null&&(c.childLanes|=l),_.tag===22&&(r=_.stateNode,r===null||r._visibility&1||(y=!0)),r=_,_=_.return;return r.tag===3?(_=r.stateNode,y&&o!==null&&(y=31-Et(l),r=_.hiddenUpdates,c=r[y],c===null?r[y]=[o]:c.push(o),o.lane=l|536870912),_):null}function Hc(r){if(50<ou)throw ou=0,Gp=null,Error(i(185));for(var o=r.return;o!==null;)r=o,o=r.return;return r.tag===3?r.stateNode:null}var aa={};function $b(r,o,l,c){this.tag=r,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mn(r,o,l,c){return new $b(r,o,l,c)}function Lh(r){return r=r.prototype,!(!r||!r.isReactComponent)}function dr(r,o){var l=r.alternate;return l===null?(l=Mn(r.tag,o,r.key,r.mode),l.elementType=r.elementType,l.type=r.type,l.stateNode=r.stateNode,l.alternate=r,r.alternate=l):(l.pendingProps=o,l.type=r.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=r.flags&65011712,l.childLanes=r.childLanes,l.lanes=r.lanes,l.child=r.child,l.memoizedProps=r.memoizedProps,l.memoizedState=r.memoizedState,l.updateQueue=r.updateQueue,o=r.dependencies,l.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},l.sibling=r.sibling,l.index=r.index,l.ref=r.ref,l.refCleanup=r.refCleanup,l}function wv(r,o){r.flags&=65011714;var l=r.alternate;return l===null?(r.childLanes=0,r.lanes=o,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=l.childLanes,r.lanes=l.lanes,r.child=l.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=l.memoizedProps,r.memoizedState=l.memoizedState,r.updateQueue=l.updateQueue,r.type=l.type,o=l.dependencies,r.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),r}function Bc(r,o,l,c,y,_){var w=0;if(c=r,typeof r=="function")Lh(r)&&(w=1);else if(typeof r=="string")w=QR(r,l,ge.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case R:return r=Mn(31,l,o,y),r.elementType=R,r.lanes=_,r;case U:return lo(l.children,y,_,o);case P:w=8,y|=24;break;case q:return r=Mn(12,l,o,y|2),r.elementType=q,r.lanes=_,r;case le:return r=Mn(13,l,o,y),r.elementType=le,r.lanes=_,r;case ce:return r=Mn(19,l,o,y),r.elementType=ce,r.lanes=_,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case H:w=10;break e;case X:w=9;break e;case ne:w=11;break e;case N:w=14;break e;case M:w=16,c=null;break e}w=29,l=Error(i(130,r===null?"null":typeof r,"")),c=null}return o=Mn(w,l,o,y),o.elementType=r,o.type=c,o.lanes=_,o}function lo(r,o,l,c){return r=Mn(7,r,c,o),r.lanes=l,r}function Uh(r,o,l){return r=Mn(6,r,null,o),r.lanes=l,r}function xv(r){var o=Mn(18,null,null,0);return o.stateNode=r,o}function Oh(r,o,l){return o=Mn(4,r.children!==null?r.children:[],r.key,o),o.lanes=l,o.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},o}var Cv=new WeakMap;function Jn(r,o){if(typeof r=="object"&&r!==null){var l=Cv.get(r);return l!==void 0?l:(o={value:r,source:o,stack:ml(o)},Cv.set(r,o),o)}return{value:r,source:o,stack:ml(o)}}var la=[],ua=0,zc=null,Fl=0,Kn=[],Yn=0,Xr=null,ji=1,Ji="";function fr(r,o){la[ua++]=Fl,la[ua++]=zc,zc=r,Fl=o}function Iv(r,o,l){Kn[Yn++]=ji,Kn[Yn++]=Ji,Kn[Yn++]=Xr,Xr=r;var c=ji;r=Ji;var y=32-Et(c)-1;c&=~(1<<y),l+=1;var _=32-Et(o)+y;if(30<_){var w=y-y%5;_=(c&(1<<w)-1).toString(32),c>>=w,y-=w,ji=1<<32-Et(o)+y|l<<y|c,Ji=_+r}else ji=1<<_|l<<y|c,Ji=r}function Fh(r){r.return!==null&&(fr(r,1),Iv(r,1,0))}function qh(r){for(;r===zc;)zc=la[--ua],la[ua]=null,Fl=la[--ua],la[ua]=null;for(;r===Xr;)Xr=Kn[--Yn],Kn[Yn]=null,Ji=Kn[--Yn],Kn[Yn]=null,ji=Kn[--Yn],Kn[Yn]=null}function bv(r,o){Kn[Yn++]=ji,Kn[Yn++]=Ji,Kn[Yn++]=Xr,ji=o.id,Ji=o.overflow,Xr=r}var Xt=null,ct=null,$e=!1,Wr=null,Qn=!1,Hh=Error(i(519));function Zr(r){var o=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ql(Jn(o,r)),Hh}function Rv(r){var o=r.stateNode,l=r.type,c=r.memoizedProps;switch(o[bt]=r,o[Gt]=c,l){case"dialog":Fe("cancel",o),Fe("close",o);break;case"iframe":case"object":case"embed":Fe("load",o);break;case"video":case"audio":for(l=0;l<lu.length;l++)Fe(lu[l],o);break;case"source":Fe("error",o);break;case"img":case"image":case"link":Fe("error",o),Fe("load",o);break;case"details":Fe("toggle",o);break;case"input":Fe("invalid",o),Sc(o,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":Fe("invalid",o);break;case"textarea":Fe("invalid",o),Gr(o,c.value,c.defaultValue,c.children)}l=c.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||o.textContent===""+l||c.suppressHydrationWarning===!0||j0(o.textContent,l)?(c.popover!=null&&(Fe("beforetoggle",o),Fe("toggle",o)),c.onScroll!=null&&Fe("scroll",o),c.onScrollEnd!=null&&Fe("scrollend",o),c.onClick!=null&&(o.onclick=ci),o=!0):o=!1,o||Zr(r,!0)}function Nv(r){for(Xt=r.return;Xt;)switch(Xt.tag){case 5:case 31:case 13:Qn=!1;return;case 27:case 3:Qn=!0;return;default:Xt=Xt.return}}function ca(r){if(r!==Xt)return!1;if(!$e)return Nv(r),$e=!0,!1;var o=r.tag,l;if((l=o!==3&&o!==27)&&((l=o===5)&&(l=r.type,l=!(l!=="form"&&l!=="button")||sm(r.type,r.memoizedProps)),l=!l),l&&ct&&Zr(r),Nv(r),o===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));ct=tE(r)}else if(o===31){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));ct=tE(r)}else o===27?(o=ct,hs(r.type)?(r=cm,cm=null,ct=r):ct=o):ct=Xt?Wn(r.stateNode.nextSibling):null;return!0}function uo(){ct=Xt=null,$e=!1}function Bh(){var r=Wr;return r!==null&&(wn===null?wn=r:wn.push.apply(wn,r),Wr=null),r}function ql(r){Wr===null?Wr=[r]:Wr.push(r)}var zh=B(null),co=null,hr=null;function es(r,o,l){fe(zh,o._currentValue),o._currentValue=l}function pr(r){r._currentValue=zh.current,se(zh)}function Gh(r,o,l){for(;r!==null;){var c=r.alternate;if((r.childLanes&o)!==o?(r.childLanes|=o,c!==null&&(c.childLanes|=o)):c!==null&&(c.childLanes&o)!==o&&(c.childLanes|=o),r===l)break;r=r.return}}function $h(r,o,l,c){var y=r.child;for(y!==null&&(y.return=r);y!==null;){var _=y.dependencies;if(_!==null){var w=y.child;_=_.firstContext;e:for(;_!==null;){var I=_;_=y;for(var L=0;L<o.length;L++)if(I.context===o[L]){_.lanes|=l,I=_.alternate,I!==null&&(I.lanes|=l),Gh(_.return,l,r),c||(w=null);break e}_=I.next}}else if(y.tag===18){if(w=y.return,w===null)throw Error(i(341));w.lanes|=l,_=w.alternate,_!==null&&(_.lanes|=l),Gh(w,l,r),w=null}else w=y.child;if(w!==null)w.return=y;else for(w=y;w!==null;){if(w===r){w=null;break}if(y=w.sibling,y!==null){y.return=w.return,w=y;break}w=w.return}y=w}}function da(r,o,l,c){r=null;for(var y=o,_=!1;y!==null;){if(!_){if((y.flags&524288)!==0)_=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var w=y.alternate;if(w===null)throw Error(i(387));if(w=w.memoizedProps,w!==null){var I=y.type;Nn(y.pendingProps.value,w.value)||(r!==null?r.push(I):r=[I])}}else if(y===je.current){if(w=y.alternate,w===null)throw Error(i(387));w.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(r!==null?r.push(hu):r=[hu])}y=y.return}r!==null&&$h(o,r,l,c),o.flags|=262144}function Gc(r){for(r=r.firstContext;r!==null;){if(!Nn(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function fo(r){co=r,hr=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function Wt(r){return Mv(co,r)}function $c(r,o){return co===null&&fo(r),Mv(r,o)}function Mv(r,o){var l=o._currentValue;if(o={context:o,memoizedValue:l,next:null},hr===null){if(r===null)throw Error(i(308));hr=o,r.dependencies={lanes:0,firstContext:o},r.flags|=524288}else hr=hr.next=o;return l}var jb=typeof AbortController<"u"?AbortController:function(){var r=[],o=this.signal={aborted:!1,addEventListener:function(l,c){r.push(c)}};this.abort=function(){o.aborted=!0,r.forEach(function(l){return l()})}},Jb=t.unstable_scheduleCallback,Kb=t.unstable_NormalPriority,Mt={$$typeof:H,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function jh(){return{controller:new jb,data:new Map,refCount:0}}function Hl(r){r.refCount--,r.refCount===0&&Jb(Kb,function(){r.controller.abort()})}var Bl=null,Jh=0,fa=0,ha=null;function Yb(r,o){if(Bl===null){var l=Bl=[];Jh=0,fa=Qp(),ha={status:"pending",value:void 0,then:function(c){l.push(c)}}}return Jh++,o.then(Dv,Dv),o}function Dv(){if(--Jh===0&&Bl!==null){ha!==null&&(ha.status="fulfilled");var r=Bl;Bl=null,fa=0,ha=null;for(var o=0;o<r.length;o++)(0,r[o])()}}function Qb(r,o){var l=[],c={status:"pending",value:null,reason:null,then:function(y){l.push(y)}};return r.then(function(){c.status="fulfilled",c.value=o;for(var y=0;y<l.length;y++)(0,l[y])(o)},function(y){for(c.status="rejected",c.reason=y,y=0;y<l.length;y++)(0,l[y])(void 0)}),c}var Pv=Y.S;Y.S=function(r,o){g0=fn(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&Yb(r,o),Pv!==null&&Pv(r,o)};var ho=B(null);function Kh(){var r=ho.current;return r!==null?r:lt.pooledCache}function jc(r,o){o===null?fe(ho,ho.current):fe(ho,o.pool)}function kv(){var r=Kh();return r===null?null:{parent:Mt._currentValue,pool:r}}var pa=Error(i(460)),Yh=Error(i(474)),Jc=Error(i(542)),Kc={then:function(){}};function Vv(r){return r=r.status,r==="fulfilled"||r==="rejected"}function Lv(r,o,l){switch(l=r[l],l===void 0?r.push(o):l!==o&&(o.then(ci,ci),o=l),o.status){case"fulfilled":return o.value;case"rejected":throw r=o.reason,Ov(r),r;default:if(typeof o.status=="string")o.then(ci,ci);else{if(r=lt,r!==null&&100<r.shellSuspendCounter)throw Error(i(482));r=o,r.status="pending",r.then(function(c){if(o.status==="pending"){var y=o;y.status="fulfilled",y.value=c}},function(c){if(o.status==="pending"){var y=o;y.status="rejected",y.reason=c}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw r=o.reason,Ov(r),r}throw mo=o,pa}}function po(r){try{var o=r._init;return o(r._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(mo=l,pa):l}}var mo=null;function Uv(){if(mo===null)throw Error(i(459));var r=mo;return mo=null,r}function Ov(r){if(r===pa||r===Jc)throw Error(i(483))}var ma=null,zl=0;function Yc(r){var o=zl;return zl+=1,ma===null&&(ma=[]),Lv(ma,r,o)}function Gl(r,o){o=o.props.ref,r.ref=o!==void 0?o:null}function Qc(r,o){throw o.$$typeof===S?Error(i(525)):(r=Object.prototype.toString.call(o),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":r)))}function Fv(r){function o($,F){if(r){var J=$.deletions;J===null?($.deletions=[F],$.flags|=16):J.push(F)}}function l($,F){if(!r)return null;for(;F!==null;)o($,F),F=F.sibling;return null}function c($){for(var F=new Map;$!==null;)$.key!==null?F.set($.key,$):F.set($.index,$),$=$.sibling;return F}function y($,F){return $=dr($,F),$.index=0,$.sibling=null,$}function _($,F,J){return $.index=J,r?(J=$.alternate,J!==null?(J=J.index,J<F?($.flags|=67108866,F):J):($.flags|=67108866,F)):($.flags|=1048576,F)}function w($){return r&&$.alternate===null&&($.flags|=67108866),$}function I($,F,J,te){return F===null||F.tag!==6?(F=Uh(J,$.mode,te),F.return=$,F):(F=y(F,J),F.return=$,F)}function L($,F,J,te){var Ee=J.type;return Ee===U?ee($,F,J.props.children,te,J.key):F!==null&&(F.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===M&&po(Ee)===F.type)?(F=y(F,J.props),Gl(F,J),F.return=$,F):(F=Bc(J.type,J.key,J.props,null,$.mode,te),Gl(F,J),F.return=$,F)}function K($,F,J,te){return F===null||F.tag!==4||F.stateNode.containerInfo!==J.containerInfo||F.stateNode.implementation!==J.implementation?(F=Oh(J,$.mode,te),F.return=$,F):(F=y(F,J.children||[]),F.return=$,F)}function ee($,F,J,te,Ee){return F===null||F.tag!==7?(F=lo(J,$.mode,te,Ee),F.return=$,F):(F=y(F,J),F.return=$,F)}function ie($,F,J){if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return F=Uh(""+F,$.mode,J),F.return=$,F;if(typeof F=="object"&&F!==null){switch(F.$$typeof){case C:return J=Bc(F.type,F.key,F.props,null,$.mode,J),Gl(J,F),J.return=$,J;case D:return F=Oh(F,$.mode,J),F.return=$,F;case M:return F=po(F),ie($,F,J)}if(Ce(F)||z(F))return F=lo(F,$.mode,J,null),F.return=$,F;if(typeof F.then=="function")return ie($,Yc(F),J);if(F.$$typeof===H)return ie($,$c($,F),J);Qc($,F)}return null}function Q($,F,J,te){var Ee=F!==null?F.key:null;if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return Ee!==null?null:I($,F,""+J,te);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case C:return J.key===Ee?L($,F,J,te):null;case D:return J.key===Ee?K($,F,J,te):null;case M:return J=po(J),Q($,F,J,te)}if(Ce(J)||z(J))return Ee!==null?null:ee($,F,J,te,null);if(typeof J.then=="function")return Q($,F,Yc(J),te);if(J.$$typeof===H)return Q($,F,$c($,J),te);Qc($,J)}return null}function Z($,F,J,te,Ee){if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return $=$.get(J)||null,I(F,$,""+te,Ee);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case C:return $=$.get(te.key===null?J:te.key)||null,L(F,$,te,Ee);case D:return $=$.get(te.key===null?J:te.key)||null,K(F,$,te,Ee);case M:return te=po(te),Z($,F,J,te,Ee)}if(Ce(te)||z(te))return $=$.get(J)||null,ee(F,$,te,Ee,null);if(typeof te.then=="function")return Z($,F,J,Yc(te),Ee);if(te.$$typeof===H)return Z($,F,J,$c(F,te),Ee);Qc(F,te)}return null}function ye($,F,J,te){for(var Ee=null,Ke=null,ve=F,Le=F=0,He=null;ve!==null&&Le<J.length;Le++){ve.index>Le?(He=ve,ve=null):He=ve.sibling;var Ye=Q($,ve,J[Le],te);if(Ye===null){ve===null&&(ve=He);break}r&&ve&&Ye.alternate===null&&o($,ve),F=_(Ye,F,Le),Ke===null?Ee=Ye:Ke.sibling=Ye,Ke=Ye,ve=He}if(Le===J.length)return l($,ve),$e&&fr($,Le),Ee;if(ve===null){for(;Le<J.length;Le++)ve=ie($,J[Le],te),ve!==null&&(F=_(ve,F,Le),Ke===null?Ee=ve:Ke.sibling=ve,Ke=ve);return $e&&fr($,Le),Ee}for(ve=c(ve);Le<J.length;Le++)He=Z(ve,$,Le,J[Le],te),He!==null&&(r&&He.alternate!==null&&ve.delete(He.key===null?Le:He.key),F=_(He,F,Le),Ke===null?Ee=He:Ke.sibling=He,Ke=He);return r&&ve.forEach(function(vs){return o($,vs)}),$e&&fr($,Le),Ee}function Se($,F,J,te){if(J==null)throw Error(i(151));for(var Ee=null,Ke=null,ve=F,Le=F=0,He=null,Ye=J.next();ve!==null&&!Ye.done;Le++,Ye=J.next()){ve.index>Le?(He=ve,ve=null):He=ve.sibling;var vs=Q($,ve,Ye.value,te);if(vs===null){ve===null&&(ve=He);break}r&&ve&&vs.alternate===null&&o($,ve),F=_(vs,F,Le),Ke===null?Ee=vs:Ke.sibling=vs,Ke=vs,ve=He}if(Ye.done)return l($,ve),$e&&fr($,Le),Ee;if(ve===null){for(;!Ye.done;Le++,Ye=J.next())Ye=ie($,Ye.value,te),Ye!==null&&(F=_(Ye,F,Le),Ke===null?Ee=Ye:Ke.sibling=Ye,Ke=Ye);return $e&&fr($,Le),Ee}for(ve=c(ve);!Ye.done;Le++,Ye=J.next())Ye=Z(ve,$,Le,Ye.value,te),Ye!==null&&(r&&Ye.alternate!==null&&ve.delete(Ye.key===null?Le:Ye.key),F=_(Ye,F,Le),Ke===null?Ee=Ye:Ke.sibling=Ye,Ke=Ye);return r&&ve.forEach(function(a1){return o($,a1)}),$e&&fr($,Le),Ee}function at($,F,J,te){if(typeof J=="object"&&J!==null&&J.type===U&&J.key===null&&(J=J.props.children),typeof J=="object"&&J!==null){switch(J.$$typeof){case C:e:{for(var Ee=J.key;F!==null;){if(F.key===Ee){if(Ee=J.type,Ee===U){if(F.tag===7){l($,F.sibling),te=y(F,J.props.children),te.return=$,$=te;break e}}else if(F.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===M&&po(Ee)===F.type){l($,F.sibling),te=y(F,J.props),Gl(te,J),te.return=$,$=te;break e}l($,F);break}else o($,F);F=F.sibling}J.type===U?(te=lo(J.props.children,$.mode,te,J.key),te.return=$,$=te):(te=Bc(J.type,J.key,J.props,null,$.mode,te),Gl(te,J),te.return=$,$=te)}return w($);case D:e:{for(Ee=J.key;F!==null;){if(F.key===Ee)if(F.tag===4&&F.stateNode.containerInfo===J.containerInfo&&F.stateNode.implementation===J.implementation){l($,F.sibling),te=y(F,J.children||[]),te.return=$,$=te;break e}else{l($,F);break}else o($,F);F=F.sibling}te=Oh(J,$.mode,te),te.return=$,$=te}return w($);case M:return J=po(J),at($,F,J,te)}if(Ce(J))return ye($,F,J,te);if(z(J)){if(Ee=z(J),typeof Ee!="function")throw Error(i(150));return J=Ee.call(J),Se($,F,J,te)}if(typeof J.then=="function")return at($,F,Yc(J),te);if(J.$$typeof===H)return at($,F,$c($,J),te);Qc($,J)}return typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint"?(J=""+J,F!==null&&F.tag===6?(l($,F.sibling),te=y(F,J),te.return=$,$=te):(l($,F),te=Uh(J,$.mode,te),te.return=$,$=te),w($)):l($,F)}return function($,F,J,te){try{zl=0;var Ee=at($,F,J,te);return ma=null,Ee}catch(ve){if(ve===pa||ve===Jc)throw ve;var Ke=Mn(29,ve,null,$.mode);return Ke.lanes=te,Ke.return=$,Ke}finally{}}}var go=Fv(!0),qv=Fv(!1),ts=!1;function Qh(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Xh(r,o){r=r.updateQueue,o.updateQueue===r&&(o.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function ns(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function is(r,o,l){var c=r.updateQueue;if(c===null)return null;if(c=c.shared,(We&2)!==0){var y=c.pending;return y===null?o.next=o:(o.next=y.next,y.next=o),c.pending=o,o=Hc(r),Av(r,null,l),o}return qc(r,c,o,l),Hc(r)}function $l(r,o,l){if(o=o.updateQueue,o!==null&&(o=o.shared,(l&4194048)!==0)){var c=o.lanes;c&=r.pendingLanes,l|=c,o.lanes=l,vl(r,l)}}function Wh(r,o){var l=r.updateQueue,c=r.alternate;if(c!==null&&(c=c.updateQueue,l===c)){var y=null,_=null;if(l=l.firstBaseUpdate,l!==null){do{var w={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};_===null?y=_=w:_=_.next=w,l=l.next}while(l!==null);_===null?y=_=o:_=_.next=o}else y=_=o;l={baseState:c.baseState,firstBaseUpdate:y,lastBaseUpdate:_,shared:c.shared,callbacks:c.callbacks},r.updateQueue=l;return}r=l.lastBaseUpdate,r===null?l.firstBaseUpdate=o:r.next=o,l.lastBaseUpdate=o}var Zh=!1;function jl(){if(Zh){var r=ha;if(r!==null)throw r}}function Jl(r,o,l,c){Zh=!1;var y=r.updateQueue;ts=!1;var _=y.firstBaseUpdate,w=y.lastBaseUpdate,I=y.shared.pending;if(I!==null){y.shared.pending=null;var L=I,K=L.next;L.next=null,w===null?_=K:w.next=K,w=L;var ee=r.alternate;ee!==null&&(ee=ee.updateQueue,I=ee.lastBaseUpdate,I!==w&&(I===null?ee.firstBaseUpdate=K:I.next=K,ee.lastBaseUpdate=L))}if(_!==null){var ie=y.baseState;w=0,ee=K=L=null,I=_;do{var Q=I.lane&-536870913,Z=Q!==I.lane;if(Z?(qe&Q)===Q:(c&Q)===Q){Q!==0&&Q===fa&&(Zh=!0),ee!==null&&(ee=ee.next={lane:0,tag:I.tag,payload:I.payload,callback:null,next:null});e:{var ye=r,Se=I;Q=o;var at=l;switch(Se.tag){case 1:if(ye=Se.payload,typeof ye=="function"){ie=ye.call(at,ie,Q);break e}ie=ye;break e;case 3:ye.flags=ye.flags&-65537|128;case 0:if(ye=Se.payload,Q=typeof ye=="function"?ye.call(at,ie,Q):ye,Q==null)break e;ie=E({},ie,Q);break e;case 2:ts=!0}}Q=I.callback,Q!==null&&(r.flags|=64,Z&&(r.flags|=8192),Z=y.callbacks,Z===null?y.callbacks=[Q]:Z.push(Q))}else Z={lane:Q,tag:I.tag,payload:I.payload,callback:I.callback,next:null},ee===null?(K=ee=Z,L=ie):ee=ee.next=Z,w|=Q;if(I=I.next,I===null){if(I=y.shared.pending,I===null)break;Z=I,I=Z.next,Z.next=null,y.lastBaseUpdate=Z,y.shared.pending=null}}while(!0);ee===null&&(L=ie),y.baseState=L,y.firstBaseUpdate=K,y.lastBaseUpdate=ee,_===null&&(y.shared.lanes=0),ls|=w,r.lanes=w,r.memoizedState=ie}}function Hv(r,o){if(typeof r!="function")throw Error(i(191,r));r.call(o)}function Bv(r,o){var l=r.callbacks;if(l!==null)for(r.callbacks=null,r=0;r<l.length;r++)Hv(l[r],o)}var ga=B(null),Xc=B(0);function zv(r,o){r=Ar,fe(Xc,r),fe(ga,o),Ar=r|o.baseLanes}function ep(){fe(Xc,Ar),fe(ga,ga.current)}function tp(){Ar=Xc.current,se(ga),se(Xc)}var Dn=B(null),Xn=null;function rs(r){var o=r.alternate;fe(St,St.current&1),fe(Dn,r),Xn===null&&(o===null||ga.current!==null||o.memoizedState!==null)&&(Xn=r)}function np(r){fe(St,St.current),fe(Dn,r),Xn===null&&(Xn=r)}function Gv(r){r.tag===22?(fe(St,St.current),fe(Dn,r),Xn===null&&(Xn=r)):ss()}function ss(){fe(St,St.current),fe(Dn,Dn.current)}function Pn(r){se(Dn),Xn===r&&(Xn=null),se(St)}var St=B(0);function Wc(r){for(var o=r;o!==null;){if(o.tag===13){var l=o.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||lm(l)||um(l)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var mr=0,Pe=null,st=null,Dt=null,Zc=!1,ya=!1,yo=!1,ed=0,Kl=0,va=null,Xb=0;function vt(){throw Error(i(321))}function ip(r,o){if(o===null)return!1;for(var l=0;l<o.length&&l<r.length;l++)if(!Nn(r[l],o[l]))return!1;return!0}function rp(r,o,l,c,y,_){return mr=_,Pe=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,Y.H=r===null||r.memoizedState===null?I_:_p,yo=!1,_=l(c,y),yo=!1,ya&&(_=jv(o,l,c,y)),$v(r),_}function $v(r){Y.H=Xl;var o=st!==null&&st.next!==null;if(mr=0,Dt=st=Pe=null,Zc=!1,Kl=0,va=null,o)throw Error(i(300));r===null||Pt||(r=r.dependencies,r!==null&&Gc(r)&&(Pt=!0))}function jv(r,o,l,c){Pe=r;var y=0;do{if(ya&&(va=null),Kl=0,ya=!1,25<=y)throw Error(i(301));if(y+=1,Dt=st=null,r.updateQueue!=null){var _=r.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}Y.H=b_,_=o(l,c)}while(ya);return _}function Wb(){var r=Y.H,o=r.useState()[0];return o=typeof o.then=="function"?Yl(o):o,r=r.useState()[0],(st!==null?st.memoizedState:null)!==r&&(Pe.flags|=1024),o}function sp(){var r=ed!==0;return ed=0,r}function op(r,o,l){o.updateQueue=r.updateQueue,o.flags&=-2053,r.lanes&=~l}function ap(r){if(Zc){for(r=r.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}Zc=!1}mr=0,Dt=st=Pe=null,ya=!1,Kl=ed=0,va=null}function pn(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Dt===null?Pe.memoizedState=Dt=r:Dt=Dt.next=r,Dt}function At(){if(st===null){var r=Pe.alternate;r=r!==null?r.memoizedState:null}else r=st.next;var o=Dt===null?Pe.memoizedState:Dt.next;if(o!==null)Dt=o,st=r;else{if(r===null)throw Pe.alternate===null?Error(i(467)):Error(i(310));st=r,r={memoizedState:st.memoizedState,baseState:st.baseState,baseQueue:st.baseQueue,queue:st.queue,next:null},Dt===null?Pe.memoizedState=Dt=r:Dt=Dt.next=r}return Dt}function td(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Yl(r){var o=Kl;return Kl+=1,va===null&&(va=[]),r=Lv(va,r,o),o=Pe,(Dt===null?o.memoizedState:Dt.next)===null&&(o=o.alternate,Y.H=o===null||o.memoizedState===null?I_:_p),r}function nd(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return Yl(r);if(r.$$typeof===H)return Wt(r)}throw Error(i(438,String(r)))}function lp(r){var o=null,l=Pe.updateQueue;if(l!==null&&(o=l.memoCache),o==null){var c=Pe.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(o={data:c.data.map(function(y){return y.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),l===null&&(l=td(),Pe.updateQueue=l),l.memoCache=o,l=o.data[o.index],l===void 0)for(l=o.data[o.index]=Array(r),c=0;c<r;c++)l[c]=V;return o.index++,l}function gr(r,o){return typeof o=="function"?o(r):o}function id(r){var o=At();return up(o,st,r)}function up(r,o,l){var c=r.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=l;var y=r.baseQueue,_=c.pending;if(_!==null){if(y!==null){var w=y.next;y.next=_.next,_.next=w}o.baseQueue=y=_,c.pending=null}if(_=r.baseState,y===null)r.memoizedState=_;else{o=y.next;var I=w=null,L=null,K=o,ee=!1;do{var ie=K.lane&-536870913;if(ie!==K.lane?(qe&ie)===ie:(mr&ie)===ie){var Q=K.revertLane;if(Q===0)L!==null&&(L=L.next={lane:0,revertLane:0,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null}),ie===fa&&(ee=!0);else if((mr&Q)===Q){K=K.next,Q===fa&&(ee=!0);continue}else ie={lane:0,revertLane:K.revertLane,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},L===null?(I=L=ie,w=_):L=L.next=ie,Pe.lanes|=Q,ls|=Q;ie=K.action,yo&&l(_,ie),_=K.hasEagerState?K.eagerState:l(_,ie)}else Q={lane:ie,revertLane:K.revertLane,gesture:K.gesture,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},L===null?(I=L=Q,w=_):L=L.next=Q,Pe.lanes|=ie,ls|=ie;K=K.next}while(K!==null&&K!==o);if(L===null?w=_:L.next=I,!Nn(_,r.memoizedState)&&(Pt=!0,ee&&(l=ha,l!==null)))throw l;r.memoizedState=_,r.baseState=w,r.baseQueue=L,c.lastRenderedState=_}return y===null&&(c.lanes=0),[r.memoizedState,c.dispatch]}function cp(r){var o=At(),l=o.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=r;var c=l.dispatch,y=l.pending,_=o.memoizedState;if(y!==null){l.pending=null;var w=y=y.next;do _=r(_,w.action),w=w.next;while(w!==y);Nn(_,o.memoizedState)||(Pt=!0),o.memoizedState=_,o.baseQueue===null&&(o.baseState=_),l.lastRenderedState=_}return[_,c]}function Jv(r,o,l){var c=Pe,y=At(),_=$e;if(_){if(l===void 0)throw Error(i(407));l=l()}else l=o();var w=!Nn((st||y).memoizedState,l);if(w&&(y.memoizedState=l,Pt=!0),y=y.queue,hp(Qv.bind(null,c,y,r),[r]),y.getSnapshot!==o||w||Dt!==null&&Dt.memoizedState.tag&1){if(c.flags|=2048,_a(9,{destroy:void 0},Yv.bind(null,c,y,l,o),null),lt===null)throw Error(i(349));_||(mr&127)!==0||Kv(c,o,l)}return l}function Kv(r,o,l){r.flags|=16384,r={getSnapshot:o,value:l},o=Pe.updateQueue,o===null?(o=td(),Pe.updateQueue=o,o.stores=[r]):(l=o.stores,l===null?o.stores=[r]:l.push(r))}function Yv(r,o,l,c){o.value=l,o.getSnapshot=c,Xv(o)&&Wv(r)}function Qv(r,o,l){return l(function(){Xv(o)&&Wv(r)})}function Xv(r){var o=r.getSnapshot;r=r.value;try{var l=o();return!Nn(r,l)}catch{return!0}}function Wv(r){var o=ao(r,2);o!==null&&xn(o,r,2)}function dp(r){var o=pn();if(typeof r=="function"){var l=r;if(r=l(),yo){Hn(!0);try{l()}finally{Hn(!1)}}}return o.memoizedState=o.baseState=r,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:gr,lastRenderedState:r},o}function Zv(r,o,l,c){return r.baseState=l,up(r,st,typeof c=="function"?c:gr)}function Zb(r,o,l,c,y){if(od(r))throw Error(i(485));if(r=o.action,r!==null){var _={payload:y,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(w){_.listeners.push(w)}};Y.T!==null?l(!0):_.isTransition=!1,c(_),l=o.pending,l===null?(_.next=o.pending=_,e_(o,_)):(_.next=l.next,o.pending=l.next=_)}}function e_(r,o){var l=o.action,c=o.payload,y=r.state;if(o.isTransition){var _=Y.T,w={};Y.T=w;try{var I=l(y,c),L=Y.S;L!==null&&L(w,I),t_(r,o,I)}catch(K){fp(r,o,K)}finally{_!==null&&w.types!==null&&(_.types=w.types),Y.T=_}}else try{_=l(y,c),t_(r,o,_)}catch(K){fp(r,o,K)}}function t_(r,o,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(c){n_(r,o,c)},function(c){return fp(r,o,c)}):n_(r,o,l)}function n_(r,o,l){o.status="fulfilled",o.value=l,i_(o),r.state=l,o=r.pending,o!==null&&(l=o.next,l===o?r.pending=null:(l=l.next,o.next=l,e_(r,l)))}function fp(r,o,l){var c=r.pending;if(r.pending=null,c!==null){c=c.next;do o.status="rejected",o.reason=l,i_(o),o=o.next;while(o!==c)}r.action=null}function i_(r){r=r.listeners;for(var o=0;o<r.length;o++)(0,r[o])()}function r_(r,o){return o}function s_(r,o){if($e){var l=lt.formState;if(l!==null){e:{var c=Pe;if($e){if(ct){t:{for(var y=ct,_=Qn;y.nodeType!==8;){if(!_){y=null;break t}if(y=Wn(y.nextSibling),y===null){y=null;break t}}_=y.data,y=_==="F!"||_==="F"?y:null}if(y){ct=Wn(y.nextSibling),c=y.data==="F!";break e}}Zr(c)}c=!1}c&&(o=l[0])}}return l=pn(),l.memoizedState=l.baseState=o,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r_,lastRenderedState:o},l.queue=c,l=w_.bind(null,Pe,c),c.dispatch=l,c=dp(!1),_=vp.bind(null,Pe,!1,c.queue),c=pn(),y={state:o,dispatch:null,action:r,pending:null},c.queue=y,l=Zb.bind(null,Pe,y,_,l),y.dispatch=l,c.memoizedState=r,[o,l,!1]}function o_(r){var o=At();return a_(o,st,r)}function a_(r,o,l){if(o=up(r,o,r_)[0],r=id(gr)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var c=Yl(o)}catch(w){throw w===pa?Jc:w}else c=o;o=At();var y=o.queue,_=y.dispatch;return l!==o.memoizedState&&(Pe.flags|=2048,_a(9,{destroy:void 0},eR.bind(null,y,l),null)),[c,_,r]}function eR(r,o){r.action=o}function l_(r){var o=At(),l=st;if(l!==null)return a_(o,l,r);At(),o=o.memoizedState,l=At();var c=l.queue.dispatch;return l.memoizedState=r,[o,c,!1]}function _a(r,o,l,c){return r={tag:r,create:l,deps:c,inst:o,next:null},o=Pe.updateQueue,o===null&&(o=td(),Pe.updateQueue=o),l=o.lastEffect,l===null?o.lastEffect=r.next=r:(c=l.next,l.next=r,r.next=c,o.lastEffect=r),r}function u_(){return At().memoizedState}function rd(r,o,l,c){var y=pn();Pe.flags|=r,y.memoizedState=_a(1|o,{destroy:void 0},l,c===void 0?null:c)}function sd(r,o,l,c){var y=At();c=c===void 0?null:c;var _=y.memoizedState.inst;st!==null&&c!==null&&ip(c,st.memoizedState.deps)?y.memoizedState=_a(o,_,l,c):(Pe.flags|=r,y.memoizedState=_a(1|o,_,l,c))}function c_(r,o){rd(8390656,8,r,o)}function hp(r,o){sd(2048,8,r,o)}function tR(r){Pe.flags|=4;var o=Pe.updateQueue;if(o===null)o=td(),Pe.updateQueue=o,o.events=[r];else{var l=o.events;l===null?o.events=[r]:l.push(r)}}function d_(r){var o=At().memoizedState;return tR({ref:o,nextImpl:r}),function(){if((We&2)!==0)throw Error(i(440));return o.impl.apply(void 0,arguments)}}function f_(r,o){return sd(4,2,r,o)}function h_(r,o){return sd(4,4,r,o)}function p_(r,o){if(typeof o=="function"){r=r();var l=o(r);return function(){typeof l=="function"?l():o(null)}}if(o!=null)return r=r(),o.current=r,function(){o.current=null}}function m_(r,o,l){l=l!=null?l.concat([r]):null,sd(4,4,p_.bind(null,o,r),l)}function pp(){}function g_(r,o){var l=At();o=o===void 0?null:o;var c=l.memoizedState;return o!==null&&ip(o,c[1])?c[0]:(l.memoizedState=[r,o],r)}function y_(r,o){var l=At();o=o===void 0?null:o;var c=l.memoizedState;if(o!==null&&ip(o,c[1]))return c[0];if(c=r(),yo){Hn(!0);try{r()}finally{Hn(!1)}}return l.memoizedState=[c,o],c}function mp(r,o,l){return l===void 0||(mr&1073741824)!==0&&(qe&261930)===0?r.memoizedState=o:(r.memoizedState=l,r=v0(),Pe.lanes|=r,ls|=r,l)}function v_(r,o,l,c){return Nn(l,o)?l:ga.current!==null?(r=mp(r,l,c),Nn(r,o)||(Pt=!0),r):(mr&42)===0||(mr&1073741824)!==0&&(qe&261930)===0?(Pt=!0,r.memoizedState=l):(r=v0(),Pe.lanes|=r,ls|=r,o)}function __(r,o,l,c,y){var _=ue.p;ue.p=_!==0&&8>_?_:8;var w=Y.T,I={};Y.T=I,vp(r,!1,o,l);try{var L=y(),K=Y.S;if(K!==null&&K(I,L),L!==null&&typeof L=="object"&&typeof L.then=="function"){var ee=Qb(L,c);Ql(r,o,ee,Ln(r))}else Ql(r,o,c,Ln(r))}catch(ie){Ql(r,o,{then:function(){},status:"rejected",reason:ie},Ln())}finally{ue.p=_,w!==null&&I.types!==null&&(w.types=I.types),Y.T=w}}function nR(){}function gp(r,o,l,c){if(r.tag!==5)throw Error(i(476));var y=E_(r).queue;__(r,y,o,_e,l===null?nR:function(){return T_(r),l(c)})}function E_(r){var o=r.memoizedState;if(o!==null)return o;o={memoizedState:_e,baseState:_e,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:gr,lastRenderedState:_e},next:null};var l={};return o.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:gr,lastRenderedState:l},next:null},r.memoizedState=o,r=r.alternate,r!==null&&(r.memoizedState=o),o}function T_(r){var o=E_(r);o.next===null&&(o=r.alternate.memoizedState),Ql(r,o.next.queue,{},Ln())}function yp(){return Wt(hu)}function S_(){return At().memoizedState}function A_(){return At().memoizedState}function iR(r){for(var o=r.return;o!==null;){switch(o.tag){case 24:case 3:var l=Ln();r=ns(l);var c=is(o,r,l);c!==null&&(xn(c,o,l),$l(c,o,l)),o={cache:jh()},r.payload=o;return}o=o.return}}function rR(r,o,l){var c=Ln();l={lane:c,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},od(r)?x_(o,l):(l=Vh(r,o,l,c),l!==null&&(xn(l,r,c),C_(l,o,c)))}function w_(r,o,l){var c=Ln();Ql(r,o,l,c)}function Ql(r,o,l,c){var y={lane:c,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(od(r))x_(o,y);else{var _=r.alternate;if(r.lanes===0&&(_===null||_.lanes===0)&&(_=o.lastRenderedReducer,_!==null))try{var w=o.lastRenderedState,I=_(w,l);if(y.hasEagerState=!0,y.eagerState=I,Nn(I,w))return qc(r,o,y,0),lt===null&&Fc(),!1}catch{}finally{}if(l=Vh(r,o,y,c),l!==null)return xn(l,r,c),C_(l,o,c),!0}return!1}function vp(r,o,l,c){if(c={lane:2,revertLane:Qp(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},od(r)){if(o)throw Error(i(479))}else o=Vh(r,l,c,2),o!==null&&xn(o,r,2)}function od(r){var o=r.alternate;return r===Pe||o!==null&&o===Pe}function x_(r,o){ya=Zc=!0;var l=r.pending;l===null?o.next=o:(o.next=l.next,l.next=o),r.pending=o}function C_(r,o,l){if((l&4194048)!==0){var c=o.lanes;c&=r.pendingLanes,l|=c,o.lanes=l,vl(r,l)}}var Xl={readContext:Wt,use:nd,useCallback:vt,useContext:vt,useEffect:vt,useImperativeHandle:vt,useLayoutEffect:vt,useInsertionEffect:vt,useMemo:vt,useReducer:vt,useRef:vt,useState:vt,useDebugValue:vt,useDeferredValue:vt,useTransition:vt,useSyncExternalStore:vt,useId:vt,useHostTransitionStatus:vt,useFormState:vt,useActionState:vt,useOptimistic:vt,useMemoCache:vt,useCacheRefresh:vt};Xl.useEffectEvent=vt;var I_={readContext:Wt,use:nd,useCallback:function(r,o){return pn().memoizedState=[r,o===void 0?null:o],r},useContext:Wt,useEffect:c_,useImperativeHandle:function(r,o,l){l=l!=null?l.concat([r]):null,rd(4194308,4,p_.bind(null,o,r),l)},useLayoutEffect:function(r,o){return rd(4194308,4,r,o)},useInsertionEffect:function(r,o){rd(4,2,r,o)},useMemo:function(r,o){var l=pn();o=o===void 0?null:o;var c=r();if(yo){Hn(!0);try{r()}finally{Hn(!1)}}return l.memoizedState=[c,o],c},useReducer:function(r,o,l){var c=pn();if(l!==void 0){var y=l(o);if(yo){Hn(!0);try{l(o)}finally{Hn(!1)}}}else y=o;return c.memoizedState=c.baseState=y,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:y},c.queue=r,r=r.dispatch=rR.bind(null,Pe,r),[c.memoizedState,r]},useRef:function(r){var o=pn();return r={current:r},o.memoizedState=r},useState:function(r){r=dp(r);var o=r.queue,l=w_.bind(null,Pe,o);return o.dispatch=l,[r.memoizedState,l]},useDebugValue:pp,useDeferredValue:function(r,o){var l=pn();return mp(l,r,o)},useTransition:function(){var r=dp(!1);return r=__.bind(null,Pe,r.queue,!0,!1),pn().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,o,l){var c=Pe,y=pn();if($e){if(l===void 0)throw Error(i(407));l=l()}else{if(l=o(),lt===null)throw Error(i(349));(qe&127)!==0||Kv(c,o,l)}y.memoizedState=l;var _={value:l,getSnapshot:o};return y.queue=_,c_(Qv.bind(null,c,_,r),[r]),c.flags|=2048,_a(9,{destroy:void 0},Yv.bind(null,c,_,l,o),null),l},useId:function(){var r=pn(),o=lt.identifierPrefix;if($e){var l=Ji,c=ji;l=(c&~(1<<32-Et(c)-1)).toString(32)+l,o="_"+o+"R_"+l,l=ed++,0<l&&(o+="H"+l.toString(32)),o+="_"}else l=Xb++,o="_"+o+"r_"+l.toString(32)+"_";return r.memoizedState=o},useHostTransitionStatus:yp,useFormState:s_,useActionState:s_,useOptimistic:function(r){var o=pn();o.memoizedState=o.baseState=r;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=l,o=vp.bind(null,Pe,!0,l),l.dispatch=o,[r,o]},useMemoCache:lp,useCacheRefresh:function(){return pn().memoizedState=iR.bind(null,Pe)},useEffectEvent:function(r){var o=pn(),l={impl:r};return o.memoizedState=l,function(){if((We&2)!==0)throw Error(i(440));return l.impl.apply(void 0,arguments)}}},_p={readContext:Wt,use:nd,useCallback:g_,useContext:Wt,useEffect:hp,useImperativeHandle:m_,useInsertionEffect:f_,useLayoutEffect:h_,useMemo:y_,useReducer:id,useRef:u_,useState:function(){return id(gr)},useDebugValue:pp,useDeferredValue:function(r,o){var l=At();return v_(l,st.memoizedState,r,o)},useTransition:function(){var r=id(gr)[0],o=At().memoizedState;return[typeof r=="boolean"?r:Yl(r),o]},useSyncExternalStore:Jv,useId:S_,useHostTransitionStatus:yp,useFormState:o_,useActionState:o_,useOptimistic:function(r,o){var l=At();return Zv(l,st,r,o)},useMemoCache:lp,useCacheRefresh:A_};_p.useEffectEvent=d_;var b_={readContext:Wt,use:nd,useCallback:g_,useContext:Wt,useEffect:hp,useImperativeHandle:m_,useInsertionEffect:f_,useLayoutEffect:h_,useMemo:y_,useReducer:cp,useRef:u_,useState:function(){return cp(gr)},useDebugValue:pp,useDeferredValue:function(r,o){var l=At();return st===null?mp(l,r,o):v_(l,st.memoizedState,r,o)},useTransition:function(){var r=cp(gr)[0],o=At().memoizedState;return[typeof r=="boolean"?r:Yl(r),o]},useSyncExternalStore:Jv,useId:S_,useHostTransitionStatus:yp,useFormState:l_,useActionState:l_,useOptimistic:function(r,o){var l=At();return st!==null?Zv(l,st,r,o):(l.baseState=r,[r,l.queue.dispatch])},useMemoCache:lp,useCacheRefresh:A_};b_.useEffectEvent=d_;function Ep(r,o,l,c){o=r.memoizedState,l=l(c,o),l=l==null?o:E({},o,l),r.memoizedState=l,r.lanes===0&&(r.updateQueue.baseState=l)}var Tp={enqueueSetState:function(r,o,l){r=r._reactInternals;var c=Ln(),y=ns(c);y.payload=o,l!=null&&(y.callback=l),o=is(r,y,c),o!==null&&(xn(o,r,c),$l(o,r,c))},enqueueReplaceState:function(r,o,l){r=r._reactInternals;var c=Ln(),y=ns(c);y.tag=1,y.payload=o,l!=null&&(y.callback=l),o=is(r,y,c),o!==null&&(xn(o,r,c),$l(o,r,c))},enqueueForceUpdate:function(r,o){r=r._reactInternals;var l=Ln(),c=ns(l);c.tag=2,o!=null&&(c.callback=o),o=is(r,c,l),o!==null&&(xn(o,r,l),$l(o,r,l))}};function R_(r,o,l,c,y,_,w){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(c,_,w):o.prototype&&o.prototype.isPureReactComponent?!Ul(l,c)||!Ul(y,_):!0}function N_(r,o,l,c){r=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(l,c),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(l,c),o.state!==r&&Tp.enqueueReplaceState(o,o.state,null)}function vo(r,o){var l=o;if("ref"in o){l={};for(var c in o)c!=="ref"&&(l[c]=o[c])}if(r=r.defaultProps){l===o&&(l=E({},l));for(var y in r)l[y]===void 0&&(l[y]=r[y])}return l}function M_(r){Oc(r)}function D_(r){console.error(r)}function P_(r){Oc(r)}function ad(r,o){try{var l=r.onUncaughtError;l(o.value,{componentStack:o.stack})}catch(c){setTimeout(function(){throw c})}}function k_(r,o,l){try{var c=r.onCaughtError;c(l.value,{componentStack:l.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function Sp(r,o,l){return l=ns(l),l.tag=3,l.payload={element:null},l.callback=function(){ad(r,o)},l}function V_(r){return r=ns(r),r.tag=3,r}function L_(r,o,l,c){var y=l.type.getDerivedStateFromError;if(typeof y=="function"){var _=c.value;r.payload=function(){return y(_)},r.callback=function(){k_(o,l,c)}}var w=l.stateNode;w!==null&&typeof w.componentDidCatch=="function"&&(r.callback=function(){k_(o,l,c),typeof y!="function"&&(us===null?us=new Set([this]):us.add(this));var I=c.stack;this.componentDidCatch(c.value,{componentStack:I!==null?I:""})})}function sR(r,o,l,c,y){if(l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(o=l.alternate,o!==null&&da(o,l,y,!0),l=Dn.current,l!==null){switch(l.tag){case 31:case 13:return Xn===null?_d():l.alternate===null&&_t===0&&(_t=3),l.flags&=-257,l.flags|=65536,l.lanes=y,c===Kc?l.flags|=16384:(o=l.updateQueue,o===null?l.updateQueue=new Set([c]):o.add(c),Jp(r,c,y)),!1;case 22:return l.flags|=65536,c===Kc?l.flags|=16384:(o=l.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([c])},l.updateQueue=o):(l=o.retryQueue,l===null?o.retryQueue=new Set([c]):l.add(c)),Jp(r,c,y)),!1}throw Error(i(435,l.tag))}return Jp(r,c,y),_d(),!1}if($e)return o=Dn.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=y,c!==Hh&&(r=Error(i(422),{cause:c}),ql(Jn(r,l)))):(c!==Hh&&(o=Error(i(423),{cause:c}),ql(Jn(o,l))),r=r.current.alternate,r.flags|=65536,y&=-y,r.lanes|=y,c=Jn(c,l),y=Sp(r.stateNode,c,y),Wh(r,y),_t!==4&&(_t=2)),!1;var _=Error(i(520),{cause:c});if(_=Jn(_,l),su===null?su=[_]:su.push(_),_t!==4&&(_t=2),o===null)return!0;c=Jn(c,l),l=o;do{switch(l.tag){case 3:return l.flags|=65536,r=y&-y,l.lanes|=r,r=Sp(l.stateNode,c,r),Wh(l,r),!1;case 1:if(o=l.type,_=l.stateNode,(l.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(us===null||!us.has(_))))return l.flags|=65536,y&=-y,l.lanes|=y,y=V_(y),L_(y,r,l,c),Wh(l,y),!1}l=l.return}while(l!==null);return!1}var Ap=Error(i(461)),Pt=!1;function Zt(r,o,l,c){o.child=r===null?qv(o,null,l,c):go(o,r.child,l,c)}function U_(r,o,l,c,y){l=l.render;var _=o.ref;if("ref"in c){var w={};for(var I in c)I!=="ref"&&(w[I]=c[I])}else w=c;return fo(o),c=rp(r,o,l,w,_,y),I=sp(),r!==null&&!Pt?(op(r,o,y),yr(r,o,y)):($e&&I&&Fh(o),o.flags|=1,Zt(r,o,c,y),o.child)}function O_(r,o,l,c,y){if(r===null){var _=l.type;return typeof _=="function"&&!Lh(_)&&_.defaultProps===void 0&&l.compare===null?(o.tag=15,o.type=_,F_(r,o,_,c,y)):(r=Bc(l.type,null,c,o,o.mode,y),r.ref=o.ref,r.return=o,o.child=r)}if(_=r.child,!Mp(r,y)){var w=_.memoizedProps;if(l=l.compare,l=l!==null?l:Ul,l(w,c)&&r.ref===o.ref)return yr(r,o,y)}return o.flags|=1,r=dr(_,c),r.ref=o.ref,r.return=o,o.child=r}function F_(r,o,l,c,y){if(r!==null){var _=r.memoizedProps;if(Ul(_,c)&&r.ref===o.ref)if(Pt=!1,o.pendingProps=c=_,Mp(r,y))(r.flags&131072)!==0&&(Pt=!0);else return o.lanes=r.lanes,yr(r,o,y)}return wp(r,o,l,c,y)}function q_(r,o,l,c){var y=c.children,_=r!==null?r.memoizedState:null;if(r===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((o.flags&128)!==0){if(_=_!==null?_.baseLanes|l:l,r!==null){for(c=o.child=r.child,y=0;c!==null;)y=y|c.lanes|c.childLanes,c=c.sibling;c=y&~_}else c=0,o.child=null;return H_(r,o,_,l,c)}if((l&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},r!==null&&jc(o,_!==null?_.cachePool:null),_!==null?zv(o,_):ep(),Gv(o);else return c=o.lanes=536870912,H_(r,o,_!==null?_.baseLanes|l:l,l,c)}else _!==null?(jc(o,_.cachePool),zv(o,_),ss(),o.memoizedState=null):(r!==null&&jc(o,null),ep(),ss());return Zt(r,o,y,l),o.child}function Wl(r,o){return r!==null&&r.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function H_(r,o,l,c,y){var _=Kh();return _=_===null?null:{parent:Mt._currentValue,pool:_},o.memoizedState={baseLanes:l,cachePool:_},r!==null&&jc(o,null),ep(),Gv(o),r!==null&&da(r,o,c,!0),o.childLanes=y,null}function ld(r,o){return o=cd({mode:o.mode,children:o.children},r.mode),o.ref=r.ref,r.child=o,o.return=r,o}function B_(r,o,l){return go(o,r.child,null,l),r=ld(o,o.pendingProps),r.flags|=2,Pn(o),o.memoizedState=null,r}function oR(r,o,l){var c=o.pendingProps,y=(o.flags&128)!==0;if(o.flags&=-129,r===null){if($e){if(c.mode==="hidden")return r=ld(o,c),o.lanes=536870912,Wl(null,r);if(np(o),(r=ct)?(r=eE(r,Qn),r=r!==null&&r.data==="&"?r:null,r!==null&&(o.memoizedState={dehydrated:r,treeContext:Xr!==null?{id:ji,overflow:Ji}:null,retryLane:536870912,hydrationErrors:null},l=xv(r),l.return=o,o.child=l,Xt=o,ct=null)):r=null,r===null)throw Zr(o);return o.lanes=536870912,null}return ld(o,c)}var _=r.memoizedState;if(_!==null){var w=_.dehydrated;if(np(o),y)if(o.flags&256)o.flags&=-257,o=B_(r,o,l);else if(o.memoizedState!==null)o.child=r.child,o.flags|=128,o=null;else throw Error(i(558));else if(Pt||da(r,o,l,!1),y=(l&r.childLanes)!==0,Pt||y){if(c=lt,c!==null&&(w=_l(c,l),w!==0&&w!==_.retryLane))throw _.retryLane=w,ao(r,w),xn(c,r,w),Ap;_d(),o=B_(r,o,l)}else r=_.treeContext,ct=Wn(w.nextSibling),Xt=o,$e=!0,Wr=null,Qn=!1,r!==null&&bv(o,r),o=ld(o,c),o.flags|=4096;return o}return r=dr(r.child,{mode:c.mode,children:c.children}),r.ref=o.ref,o.child=r,r.return=o,r}function ud(r,o){var l=o.ref;if(l===null)r!==null&&r.ref!==null&&(o.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(i(284));(r===null||r.ref!==l)&&(o.flags|=4194816)}}function wp(r,o,l,c,y){return fo(o),l=rp(r,o,l,c,void 0,y),c=sp(),r!==null&&!Pt?(op(r,o,y),yr(r,o,y)):($e&&c&&Fh(o),o.flags|=1,Zt(r,o,l,y),o.child)}function z_(r,o,l,c,y,_){return fo(o),o.updateQueue=null,l=jv(o,c,l,y),$v(r),c=sp(),r!==null&&!Pt?(op(r,o,_),yr(r,o,_)):($e&&c&&Fh(o),o.flags|=1,Zt(r,o,l,_),o.child)}function G_(r,o,l,c,y){if(fo(o),o.stateNode===null){var _=aa,w=l.contextType;typeof w=="object"&&w!==null&&(_=Wt(w)),_=new l(c,_),o.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=Tp,o.stateNode=_,_._reactInternals=o,_=o.stateNode,_.props=c,_.state=o.memoizedState,_.refs={},Qh(o),w=l.contextType,_.context=typeof w=="object"&&w!==null?Wt(w):aa,_.state=o.memoizedState,w=l.getDerivedStateFromProps,typeof w=="function"&&(Ep(o,l,w,c),_.state=o.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(w=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),w!==_.state&&Tp.enqueueReplaceState(_,_.state,null),Jl(o,c,_,y),jl(),_.state=o.memoizedState),typeof _.componentDidMount=="function"&&(o.flags|=4194308),c=!0}else if(r===null){_=o.stateNode;var I=o.memoizedProps,L=vo(l,I);_.props=L;var K=_.context,ee=l.contextType;w=aa,typeof ee=="object"&&ee!==null&&(w=Wt(ee));var ie=l.getDerivedStateFromProps;ee=typeof ie=="function"||typeof _.getSnapshotBeforeUpdate=="function",I=o.pendingProps!==I,ee||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(I||K!==w)&&N_(o,_,c,w),ts=!1;var Q=o.memoizedState;_.state=Q,Jl(o,c,_,y),jl(),K=o.memoizedState,I||Q!==K||ts?(typeof ie=="function"&&(Ep(o,l,ie,c),K=o.memoizedState),(L=ts||R_(o,l,L,c,Q,K,w))?(ee||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(o.flags|=4194308)):(typeof _.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=c,o.memoizedState=K),_.props=c,_.state=K,_.context=w,c=L):(typeof _.componentDidMount=="function"&&(o.flags|=4194308),c=!1)}else{_=o.stateNode,Xh(r,o),w=o.memoizedProps,ee=vo(l,w),_.props=ee,ie=o.pendingProps,Q=_.context,K=l.contextType,L=aa,typeof K=="object"&&K!==null&&(L=Wt(K)),I=l.getDerivedStateFromProps,(K=typeof I=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(w!==ie||Q!==L)&&N_(o,_,c,L),ts=!1,Q=o.memoizedState,_.state=Q,Jl(o,c,_,y),jl();var Z=o.memoizedState;w!==ie||Q!==Z||ts||r!==null&&r.dependencies!==null&&Gc(r.dependencies)?(typeof I=="function"&&(Ep(o,l,I,c),Z=o.memoizedState),(ee=ts||R_(o,l,ee,c,Q,Z,L)||r!==null&&r.dependencies!==null&&Gc(r.dependencies))?(K||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(c,Z,L),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(c,Z,L)),typeof _.componentDidUpdate=="function"&&(o.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof _.componentDidUpdate!="function"||w===r.memoizedProps&&Q===r.memoizedState||(o.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||w===r.memoizedProps&&Q===r.memoizedState||(o.flags|=1024),o.memoizedProps=c,o.memoizedState=Z),_.props=c,_.state=Z,_.context=L,c=ee):(typeof _.componentDidUpdate!="function"||w===r.memoizedProps&&Q===r.memoizedState||(o.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||w===r.memoizedProps&&Q===r.memoizedState||(o.flags|=1024),c=!1)}return _=c,ud(r,o),c=(o.flags&128)!==0,_||c?(_=o.stateNode,l=c&&typeof l.getDerivedStateFromError!="function"?null:_.render(),o.flags|=1,r!==null&&c?(o.child=go(o,r.child,null,y),o.child=go(o,null,l,y)):Zt(r,o,l,y),o.memoizedState=_.state,r=o.child):r=yr(r,o,y),r}function $_(r,o,l,c){return uo(),o.flags|=256,Zt(r,o,l,c),o.child}var xp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Cp(r){return{baseLanes:r,cachePool:kv()}}function Ip(r,o,l){return r=r!==null?r.childLanes&~l:0,o&&(r|=Vn),r}function j_(r,o,l){var c=o.pendingProps,y=!1,_=(o.flags&128)!==0,w;if((w=_)||(w=r!==null&&r.memoizedState===null?!1:(St.current&2)!==0),w&&(y=!0,o.flags&=-129),w=(o.flags&32)!==0,o.flags&=-33,r===null){if($e){if(y?rs(o):ss(),(r=ct)?(r=eE(r,Qn),r=r!==null&&r.data!=="&"?r:null,r!==null&&(o.memoizedState={dehydrated:r,treeContext:Xr!==null?{id:ji,overflow:Ji}:null,retryLane:536870912,hydrationErrors:null},l=xv(r),l.return=o,o.child=l,Xt=o,ct=null)):r=null,r===null)throw Zr(o);return um(r)?o.lanes=32:o.lanes=536870912,null}var I=c.children;return c=c.fallback,y?(ss(),y=o.mode,I=cd({mode:"hidden",children:I},y),c=lo(c,y,l,null),I.return=o,c.return=o,I.sibling=c,o.child=I,c=o.child,c.memoizedState=Cp(l),c.childLanes=Ip(r,w,l),o.memoizedState=xp,Wl(null,c)):(rs(o),bp(o,I))}var L=r.memoizedState;if(L!==null&&(I=L.dehydrated,I!==null)){if(_)o.flags&256?(rs(o),o.flags&=-257,o=Rp(r,o,l)):o.memoizedState!==null?(ss(),o.child=r.child,o.flags|=128,o=null):(ss(),I=c.fallback,y=o.mode,c=cd({mode:"visible",children:c.children},y),I=lo(I,y,l,null),I.flags|=2,c.return=o,I.return=o,c.sibling=I,o.child=c,go(o,r.child,null,l),c=o.child,c.memoizedState=Cp(l),c.childLanes=Ip(r,w,l),o.memoizedState=xp,o=Wl(null,c));else if(rs(o),um(I)){if(w=I.nextSibling&&I.nextSibling.dataset,w)var K=w.dgst;w=K,c=Error(i(419)),c.stack="",c.digest=w,ql({value:c,source:null,stack:null}),o=Rp(r,o,l)}else if(Pt||da(r,o,l,!1),w=(l&r.childLanes)!==0,Pt||w){if(w=lt,w!==null&&(c=_l(w,l),c!==0&&c!==L.retryLane))throw L.retryLane=c,ao(r,c),xn(w,r,c),Ap;lm(I)||_d(),o=Rp(r,o,l)}else lm(I)?(o.flags|=192,o.child=r.child,o=null):(r=L.treeContext,ct=Wn(I.nextSibling),Xt=o,$e=!0,Wr=null,Qn=!1,r!==null&&bv(o,r),o=bp(o,c.children),o.flags|=4096);return o}return y?(ss(),I=c.fallback,y=o.mode,L=r.child,K=L.sibling,c=dr(L,{mode:"hidden",children:c.children}),c.subtreeFlags=L.subtreeFlags&65011712,K!==null?I=dr(K,I):(I=lo(I,y,l,null),I.flags|=2),I.return=o,c.return=o,c.sibling=I,o.child=c,Wl(null,c),c=o.child,I=r.child.memoizedState,I===null?I=Cp(l):(y=I.cachePool,y!==null?(L=Mt._currentValue,y=y.parent!==L?{parent:L,pool:L}:y):y=kv(),I={baseLanes:I.baseLanes|l,cachePool:y}),c.memoizedState=I,c.childLanes=Ip(r,w,l),o.memoizedState=xp,Wl(r.child,c)):(rs(o),l=r.child,r=l.sibling,l=dr(l,{mode:"visible",children:c.children}),l.return=o,l.sibling=null,r!==null&&(w=o.deletions,w===null?(o.deletions=[r],o.flags|=16):w.push(r)),o.child=l,o.memoizedState=null,l)}function bp(r,o){return o=cd({mode:"visible",children:o},r.mode),o.return=r,r.child=o}function cd(r,o){return r=Mn(22,r,null,o),r.lanes=0,r}function Rp(r,o,l){return go(o,r.child,null,l),r=bp(o,o.pendingProps.children),r.flags|=2,o.memoizedState=null,r}function J_(r,o,l){r.lanes|=o;var c=r.alternate;c!==null&&(c.lanes|=o),Gh(r.return,o,l)}function Np(r,o,l,c,y,_){var w=r.memoizedState;w===null?r.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:c,tail:l,tailMode:y,treeForkCount:_}:(w.isBackwards=o,w.rendering=null,w.renderingStartTime=0,w.last=c,w.tail=l,w.tailMode=y,w.treeForkCount=_)}function K_(r,o,l){var c=o.pendingProps,y=c.revealOrder,_=c.tail;c=c.children;var w=St.current,I=(w&2)!==0;if(I?(w=w&1|2,o.flags|=128):w&=1,fe(St,w),Zt(r,o,c,l),c=$e?Fl:0,!I&&r!==null&&(r.flags&128)!==0)e:for(r=o.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&J_(r,l,o);else if(r.tag===19)J_(r,l,o);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===o)break e;for(;r.sibling===null;){if(r.return===null||r.return===o)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}switch(y){case"forwards":for(l=o.child,y=null;l!==null;)r=l.alternate,r!==null&&Wc(r)===null&&(y=l),l=l.sibling;l=y,l===null?(y=o.child,o.child=null):(y=l.sibling,l.sibling=null),Np(o,!1,y,l,_,c);break;case"backwards":case"unstable_legacy-backwards":for(l=null,y=o.child,o.child=null;y!==null;){if(r=y.alternate,r!==null&&Wc(r)===null){o.child=y;break}r=y.sibling,y.sibling=l,l=y,y=r}Np(o,!0,l,null,_,c);break;case"together":Np(o,!1,null,null,void 0,c);break;default:o.memoizedState=null}return o.child}function yr(r,o,l){if(r!==null&&(o.dependencies=r.dependencies),ls|=o.lanes,(l&o.childLanes)===0)if(r!==null){if(da(r,o,l,!1),(l&o.childLanes)===0)return null}else return null;if(r!==null&&o.child!==r.child)throw Error(i(153));if(o.child!==null){for(r=o.child,l=dr(r,r.pendingProps),o.child=l,l.return=o;r.sibling!==null;)r=r.sibling,l=l.sibling=dr(r,r.pendingProps),l.return=o;l.sibling=null}return o.child}function Mp(r,o){return(r.lanes&o)!==0?!0:(r=r.dependencies,!!(r!==null&&Gc(r)))}function aR(r,o,l){switch(o.tag){case 3:Ft(o,o.stateNode.containerInfo),es(o,Mt,r.memoizedState.cache),uo();break;case 27:case 5:zs(o);break;case 4:Ft(o,o.stateNode.containerInfo);break;case 10:es(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,np(o),null;break;case 13:var c=o.memoizedState;if(c!==null)return c.dehydrated!==null?(rs(o),o.flags|=128,null):(l&o.child.childLanes)!==0?j_(r,o,l):(rs(o),r=yr(r,o,l),r!==null?r.sibling:null);rs(o);break;case 19:var y=(r.flags&128)!==0;if(c=(l&o.childLanes)!==0,c||(da(r,o,l,!1),c=(l&o.childLanes)!==0),y){if(c)return K_(r,o,l);o.flags|=128}if(y=o.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),fe(St,St.current),c)break;return null;case 22:return o.lanes=0,q_(r,o,l,o.pendingProps);case 24:es(o,Mt,r.memoizedState.cache)}return yr(r,o,l)}function Y_(r,o,l){if(r!==null)if(r.memoizedProps!==o.pendingProps)Pt=!0;else{if(!Mp(r,l)&&(o.flags&128)===0)return Pt=!1,aR(r,o,l);Pt=(r.flags&131072)!==0}else Pt=!1,$e&&(o.flags&1048576)!==0&&Iv(o,Fl,o.index);switch(o.lanes=0,o.tag){case 16:e:{var c=o.pendingProps;if(r=po(o.elementType),o.type=r,typeof r=="function")Lh(r)?(c=vo(r,c),o.tag=1,o=G_(null,o,r,c,l)):(o.tag=0,o=wp(null,o,r,c,l));else{if(r!=null){var y=r.$$typeof;if(y===ne){o.tag=11,o=U_(null,o,r,c,l);break e}else if(y===N){o.tag=14,o=O_(null,o,r,c,l);break e}}throw o=oe(r)||r,Error(i(306,o,""))}}return o;case 0:return wp(r,o,o.type,o.pendingProps,l);case 1:return c=o.type,y=vo(c,o.pendingProps),G_(r,o,c,y,l);case 3:e:{if(Ft(o,o.stateNode.containerInfo),r===null)throw Error(i(387));c=o.pendingProps;var _=o.memoizedState;y=_.element,Xh(r,o),Jl(o,c,null,l);var w=o.memoizedState;if(c=w.cache,es(o,Mt,c),c!==_.cache&&$h(o,[Mt],l,!0),jl(),c=w.element,_.isDehydrated)if(_={element:c,isDehydrated:!1,cache:w.cache},o.updateQueue.baseState=_,o.memoizedState=_,o.flags&256){o=$_(r,o,c,l);break e}else if(c!==y){y=Jn(Error(i(424)),o),ql(y),o=$_(r,o,c,l);break e}else{switch(r=o.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(ct=Wn(r.firstChild),Xt=o,$e=!0,Wr=null,Qn=!0,l=qv(o,null,c,l),o.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(uo(),c===y){o=yr(r,o,l);break e}Zt(r,o,c,l)}o=o.child}return o;case 26:return ud(r,o),r===null?(l=oE(o.type,null,o.pendingProps,null))?o.memoizedState=l:$e||(l=o.type,r=o.pendingProps,c=Cd(Ve.current).createElement(l),c[bt]=o,c[Gt]=r,en(c,l,r),Rt(c),o.stateNode=c):o.memoizedState=oE(o.type,r.memoizedProps,o.pendingProps,r.memoizedState),null;case 27:return zs(o),r===null&&$e&&(c=o.stateNode=iE(o.type,o.pendingProps,Ve.current),Xt=o,Qn=!0,y=ct,hs(o.type)?(cm=y,ct=Wn(c.firstChild)):ct=y),Zt(r,o,o.pendingProps.children,l),ud(r,o),r===null&&(o.flags|=4194304),o.child;case 5:return r===null&&$e&&((y=c=ct)&&(c=UR(c,o.type,o.pendingProps,Qn),c!==null?(o.stateNode=c,Xt=o,ct=Wn(c.firstChild),Qn=!1,y=!0):y=!1),y||Zr(o)),zs(o),y=o.type,_=o.pendingProps,w=r!==null?r.memoizedProps:null,c=_.children,sm(y,_)?c=null:w!==null&&sm(y,w)&&(o.flags|=32),o.memoizedState!==null&&(y=rp(r,o,Wb,null,null,l),hu._currentValue=y),ud(r,o),Zt(r,o,c,l),o.child;case 6:return r===null&&$e&&((r=l=ct)&&(l=OR(l,o.pendingProps,Qn),l!==null?(o.stateNode=l,Xt=o,ct=null,r=!0):r=!1),r||Zr(o)),null;case 13:return j_(r,o,l);case 4:return Ft(o,o.stateNode.containerInfo),c=o.pendingProps,r===null?o.child=go(o,null,c,l):Zt(r,o,c,l),o.child;case 11:return U_(r,o,o.type,o.pendingProps,l);case 7:return Zt(r,o,o.pendingProps,l),o.child;case 8:return Zt(r,o,o.pendingProps.children,l),o.child;case 12:return Zt(r,o,o.pendingProps.children,l),o.child;case 10:return c=o.pendingProps,es(o,o.type,c.value),Zt(r,o,c.children,l),o.child;case 9:return y=o.type._context,c=o.pendingProps.children,fo(o),y=Wt(y),c=c(y),o.flags|=1,Zt(r,o,c,l),o.child;case 14:return O_(r,o,o.type,o.pendingProps,l);case 15:return F_(r,o,o.type,o.pendingProps,l);case 19:return K_(r,o,l);case 31:return oR(r,o,l);case 22:return q_(r,o,l,o.pendingProps);case 24:return fo(o),c=Wt(Mt),r===null?(y=Kh(),y===null&&(y=lt,_=jh(),y.pooledCache=_,_.refCount++,_!==null&&(y.pooledCacheLanes|=l),y=_),o.memoizedState={parent:c,cache:y},Qh(o),es(o,Mt,y)):((r.lanes&l)!==0&&(Xh(r,o),Jl(o,null,null,l),jl()),y=r.memoizedState,_=o.memoizedState,y.parent!==c?(y={parent:c,cache:c},o.memoizedState=y,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=y),es(o,Mt,c)):(c=_.cache,es(o,Mt,c),c!==y.cache&&$h(o,[Mt],l,!0))),Zt(r,o,o.pendingProps.children,l),o.child;case 29:throw o.pendingProps}throw Error(i(156,o.tag))}function vr(r){r.flags|=4}function Dp(r,o,l,c,y){if((o=(r.mode&32)!==0)&&(o=!1),o){if(r.flags|=16777216,(y&335544128)===y)if(r.stateNode.complete)r.flags|=8192;else if(S0())r.flags|=8192;else throw mo=Kc,Yh}else r.flags&=-16777217}function Q_(r,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!dE(o))if(S0())r.flags|=8192;else throw mo=Kc,Yh}function dd(r,o){o!==null&&(r.flags|=4),r.flags&16384&&(o=r.tag!==22?yc():536870912,r.lanes|=o,Aa|=o)}function Zl(r,o){if(!$e)switch(r.tailMode){case"hidden":o=r.tail;for(var l=null;o!==null;)o.alternate!==null&&(l=o),o=o.sibling;l===null?r.tail=null:l.sibling=null;break;case"collapsed":l=r.tail;for(var c=null;l!==null;)l.alternate!==null&&(c=l),l=l.sibling;c===null?o||r.tail===null?r.tail=null:r.tail.sibling=null:c.sibling=null}}function dt(r){var o=r.alternate!==null&&r.alternate.child===r.child,l=0,c=0;if(o)for(var y=r.child;y!==null;)l|=y.lanes|y.childLanes,c|=y.subtreeFlags&65011712,c|=y.flags&65011712,y.return=r,y=y.sibling;else for(y=r.child;y!==null;)l|=y.lanes|y.childLanes,c|=y.subtreeFlags,c|=y.flags,y.return=r,y=y.sibling;return r.subtreeFlags|=c,r.childLanes=l,o}function lR(r,o,l){var c=o.pendingProps;switch(qh(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return dt(o),null;case 1:return dt(o),null;case 3:return l=o.stateNode,c=null,r!==null&&(c=r.memoizedState.cache),o.memoizedState.cache!==c&&(o.flags|=2048),pr(Mt),ht(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(r===null||r.child===null)&&(ca(o)?vr(o):r===null||r.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,Bh())),dt(o),null;case 26:var y=o.type,_=o.memoizedState;return r===null?(vr(o),_!==null?(dt(o),Q_(o,_)):(dt(o),Dp(o,y,null,c,l))):_?_!==r.memoizedState?(vr(o),dt(o),Q_(o,_)):(dt(o),o.flags&=-16777217):(r=r.memoizedProps,r!==c&&vr(o),dt(o),Dp(o,y,r,c,l)),null;case 27:if(Bo(o),l=Ve.current,y=o.type,r!==null&&o.stateNode!=null)r.memoizedProps!==c&&vr(o);else{if(!c){if(o.stateNode===null)throw Error(i(166));return dt(o),null}r=ge.current,ca(o)?Rv(o):(r=iE(y,c,l),o.stateNode=r,vr(o))}return dt(o),null;case 5:if(Bo(o),y=o.type,r!==null&&o.stateNode!=null)r.memoizedProps!==c&&vr(o);else{if(!c){if(o.stateNode===null)throw Error(i(166));return dt(o),null}if(_=ge.current,ca(o))Rv(o);else{var w=Cd(Ve.current);switch(_){case 1:_=w.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:_=w.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":_=w.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":_=w.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":_=w.createElement("div"),_.innerHTML="<script><\/script>",_=_.removeChild(_.firstChild);break;case"select":_=typeof c.is=="string"?w.createElement("select",{is:c.is}):w.createElement("select"),c.multiple?_.multiple=!0:c.size&&(_.size=c.size);break;default:_=typeof c.is=="string"?w.createElement(y,{is:c.is}):w.createElement(y)}}_[bt]=o,_[Gt]=c;e:for(w=o.child;w!==null;){if(w.tag===5||w.tag===6)_.appendChild(w.stateNode);else if(w.tag!==4&&w.tag!==27&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===o)break e;for(;w.sibling===null;){if(w.return===null||w.return===o)break e;w=w.return}w.sibling.return=w.return,w=w.sibling}o.stateNode=_;e:switch(en(_,y,c),y){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&vr(o)}}return dt(o),Dp(o,o.type,r===null?null:r.memoizedProps,o.pendingProps,l),null;case 6:if(r&&o.stateNode!=null)r.memoizedProps!==c&&vr(o);else{if(typeof c!="string"&&o.stateNode===null)throw Error(i(166));if(r=Ve.current,ca(o)){if(r=o.stateNode,l=o.memoizedProps,c=null,y=Xt,y!==null)switch(y.tag){case 27:case 5:c=y.memoizedProps}r[bt]=o,r=!!(r.nodeValue===l||c!==null&&c.suppressHydrationWarning===!0||j0(r.nodeValue,l)),r||Zr(o,!0)}else r=Cd(r).createTextNode(c),r[bt]=o,o.stateNode=r}return dt(o),null;case 31:if(l=o.memoizedState,r===null||r.memoizedState!==null){if(c=ca(o),l!==null){if(r===null){if(!c)throw Error(i(318));if(r=o.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(557));r[bt]=o}else uo(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;dt(o),r=!1}else l=Bh(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=l),r=!0;if(!r)return o.flags&256?(Pn(o),o):(Pn(o),null);if((o.flags&128)!==0)throw Error(i(558))}return dt(o),null;case 13:if(c=o.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(y=ca(o),c!==null&&c.dehydrated!==null){if(r===null){if(!y)throw Error(i(318));if(y=o.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(i(317));y[bt]=o}else uo(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;dt(o),y=!1}else y=Bh(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=y),y=!0;if(!y)return o.flags&256?(Pn(o),o):(Pn(o),null)}return Pn(o),(o.flags&128)!==0?(o.lanes=l,o):(l=c!==null,r=r!==null&&r.memoizedState!==null,l&&(c=o.child,y=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(y=c.alternate.memoizedState.cachePool.pool),_=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(_=c.memoizedState.cachePool.pool),_!==y&&(c.flags|=2048)),l!==r&&l&&(o.child.flags|=8192),dd(o,o.updateQueue),dt(o),null);case 4:return ht(),r===null&&em(o.stateNode.containerInfo),dt(o),null;case 10:return pr(o.type),dt(o),null;case 19:if(se(St),c=o.memoizedState,c===null)return dt(o),null;if(y=(o.flags&128)!==0,_=c.rendering,_===null)if(y)Zl(c,!1);else{if(_t!==0||r!==null&&(r.flags&128)!==0)for(r=o.child;r!==null;){if(_=Wc(r),_!==null){for(o.flags|=128,Zl(c,!1),r=_.updateQueue,o.updateQueue=r,dd(o,r),o.subtreeFlags=0,r=l,l=o.child;l!==null;)wv(l,r),l=l.sibling;return fe(St,St.current&1|2),$e&&fr(o,c.treeForkCount),o.child}r=r.sibling}c.tail!==null&&fn()>gd&&(o.flags|=128,y=!0,Zl(c,!1),o.lanes=4194304)}else{if(!y)if(r=Wc(_),r!==null){if(o.flags|=128,y=!0,r=r.updateQueue,o.updateQueue=r,dd(o,r),Zl(c,!0),c.tail===null&&c.tailMode==="hidden"&&!_.alternate&&!$e)return dt(o),null}else 2*fn()-c.renderingStartTime>gd&&l!==536870912&&(o.flags|=128,y=!0,Zl(c,!1),o.lanes=4194304);c.isBackwards?(_.sibling=o.child,o.child=_):(r=c.last,r!==null?r.sibling=_:o.child=_,c.last=_)}return c.tail!==null?(r=c.tail,c.rendering=r,c.tail=r.sibling,c.renderingStartTime=fn(),r.sibling=null,l=St.current,fe(St,y?l&1|2:l&1),$e&&fr(o,c.treeForkCount),r):(dt(o),null);case 22:case 23:return Pn(o),tp(),c=o.memoizedState!==null,r!==null?r.memoizedState!==null!==c&&(o.flags|=8192):c&&(o.flags|=8192),c?(l&536870912)!==0&&(o.flags&128)===0&&(dt(o),o.subtreeFlags&6&&(o.flags|=8192)):dt(o),l=o.updateQueue,l!==null&&dd(o,l.retryQueue),l=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),c=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(c=o.memoizedState.cachePool.pool),c!==l&&(o.flags|=2048),r!==null&&se(ho),null;case 24:return l=null,r!==null&&(l=r.memoizedState.cache),o.memoizedState.cache!==l&&(o.flags|=2048),pr(Mt),dt(o),null;case 25:return null;case 30:return null}throw Error(i(156,o.tag))}function uR(r,o){switch(qh(o),o.tag){case 1:return r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 3:return pr(Mt),ht(),r=o.flags,(r&65536)!==0&&(r&128)===0?(o.flags=r&-65537|128,o):null;case 26:case 27:case 5:return Bo(o),null;case 31:if(o.memoizedState!==null){if(Pn(o),o.alternate===null)throw Error(i(340));uo()}return r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 13:if(Pn(o),r=o.memoizedState,r!==null&&r.dehydrated!==null){if(o.alternate===null)throw Error(i(340));uo()}return r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 19:return se(St),null;case 4:return ht(),null;case 10:return pr(o.type),null;case 22:case 23:return Pn(o),tp(),r!==null&&se(ho),r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 24:return pr(Mt),null;case 25:return null;default:return null}}function X_(r,o){switch(qh(o),o.tag){case 3:pr(Mt),ht();break;case 26:case 27:case 5:Bo(o);break;case 4:ht();break;case 31:o.memoizedState!==null&&Pn(o);break;case 13:Pn(o);break;case 19:se(St);break;case 10:pr(o.type);break;case 22:case 23:Pn(o),tp(),r!==null&&se(ho);break;case 24:pr(Mt)}}function eu(r,o){try{var l=o.updateQueue,c=l!==null?l.lastEffect:null;if(c!==null){var y=c.next;l=y;do{if((l.tag&r)===r){c=void 0;var _=l.create,w=l.inst;c=_(),w.destroy=c}l=l.next}while(l!==y)}}catch(I){nt(o,o.return,I)}}function os(r,o,l){try{var c=o.updateQueue,y=c!==null?c.lastEffect:null;if(y!==null){var _=y.next;c=_;do{if((c.tag&r)===r){var w=c.inst,I=w.destroy;if(I!==void 0){w.destroy=void 0,y=o;var L=l,K=I;try{K()}catch(ee){nt(y,L,ee)}}}c=c.next}while(c!==_)}}catch(ee){nt(o,o.return,ee)}}function W_(r){var o=r.updateQueue;if(o!==null){var l=r.stateNode;try{Bv(o,l)}catch(c){nt(r,r.return,c)}}}function Z_(r,o,l){l.props=vo(r.type,r.memoizedProps),l.state=r.memoizedState;try{l.componentWillUnmount()}catch(c){nt(r,o,c)}}function tu(r,o){try{var l=r.ref;if(l!==null){switch(r.tag){case 26:case 27:case 5:var c=r.stateNode;break;case 30:c=r.stateNode;break;default:c=r.stateNode}typeof l=="function"?r.refCleanup=l(c):l.current=c}}catch(y){nt(r,o,y)}}function Ki(r,o){var l=r.ref,c=r.refCleanup;if(l!==null)if(typeof c=="function")try{c()}catch(y){nt(r,o,y)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(y){nt(r,o,y)}else l.current=null}function e0(r){var o=r.type,l=r.memoizedProps,c=r.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":l.autoFocus&&c.focus();break e;case"img":l.src?c.src=l.src:l.srcSet&&(c.srcset=l.srcSet)}}catch(y){nt(r,r.return,y)}}function Pp(r,o,l){try{var c=r.stateNode;MR(c,r.type,l,o),c[Gt]=o}catch(y){nt(r,r.return,y)}}function t0(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&hs(r.type)||r.tag===4}function kp(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||t0(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&hs(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Vp(r,o,l){var c=r.tag;if(c===5||c===6)r=r.stateNode,o?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(r,o):(o=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,o.appendChild(r),l=l._reactRootContainer,l!=null||o.onclick!==null||(o.onclick=ci));else if(c!==4&&(c===27&&hs(r.type)&&(l=r.stateNode,o=null),r=r.child,r!==null))for(Vp(r,o,l),r=r.sibling;r!==null;)Vp(r,o,l),r=r.sibling}function fd(r,o,l){var c=r.tag;if(c===5||c===6)r=r.stateNode,o?l.insertBefore(r,o):l.appendChild(r);else if(c!==4&&(c===27&&hs(r.type)&&(l=r.stateNode),r=r.child,r!==null))for(fd(r,o,l),r=r.sibling;r!==null;)fd(r,o,l),r=r.sibling}function n0(r){var o=r.stateNode,l=r.memoizedProps;try{for(var c=r.type,y=o.attributes;y.length;)o.removeAttributeNode(y[0]);en(o,c,l),o[bt]=r,o[Gt]=l}catch(_){nt(r,r.return,_)}}var _r=!1,kt=!1,Lp=!1,i0=typeof WeakSet=="function"?WeakSet:Set,jt=null;function cR(r,o){if(r=r.containerInfo,im=Pd,r=mv(r),Rh(r)){if("selectionStart"in r)var l={start:r.selectionStart,end:r.selectionEnd};else e:{l=(l=r.ownerDocument)&&l.defaultView||window;var c=l.getSelection&&l.getSelection();if(c&&c.rangeCount!==0){l=c.anchorNode;var y=c.anchorOffset,_=c.focusNode;c=c.focusOffset;try{l.nodeType,_.nodeType}catch{l=null;break e}var w=0,I=-1,L=-1,K=0,ee=0,ie=r,Q=null;t:for(;;){for(var Z;ie!==l||y!==0&&ie.nodeType!==3||(I=w+y),ie!==_||c!==0&&ie.nodeType!==3||(L=w+c),ie.nodeType===3&&(w+=ie.nodeValue.length),(Z=ie.firstChild)!==null;)Q=ie,ie=Z;for(;;){if(ie===r)break t;if(Q===l&&++K===y&&(I=w),Q===_&&++ee===c&&(L=w),(Z=ie.nextSibling)!==null)break;ie=Q,Q=ie.parentNode}ie=Z}l=I===-1||L===-1?null:{start:I,end:L}}else l=null}l=l||{start:0,end:0}}else l=null;for(rm={focusedElem:r,selectionRange:l},Pd=!1,jt=o;jt!==null;)if(o=jt,r=o.child,(o.subtreeFlags&1028)!==0&&r!==null)r.return=o,jt=r;else for(;jt!==null;){switch(o=jt,_=o.alternate,r=o.flags,o.tag){case 0:if((r&4)!==0&&(r=o.updateQueue,r=r!==null?r.events:null,r!==null))for(l=0;l<r.length;l++)y=r[l],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((r&1024)!==0&&_!==null){r=void 0,l=o,y=_.memoizedProps,_=_.memoizedState,c=l.stateNode;try{var ye=vo(l.type,y);r=c.getSnapshotBeforeUpdate(ye,_),c.__reactInternalSnapshotBeforeUpdate=r}catch(Se){nt(l,l.return,Se)}}break;case 3:if((r&1024)!==0){if(r=o.stateNode.containerInfo,l=r.nodeType,l===9)am(r);else if(l===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":am(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(i(163))}if(r=o.sibling,r!==null){r.return=o.return,jt=r;break}jt=o.return}}function r0(r,o,l){var c=l.flags;switch(l.tag){case 0:case 11:case 15:Tr(r,l),c&4&&eu(5,l);break;case 1:if(Tr(r,l),c&4)if(r=l.stateNode,o===null)try{r.componentDidMount()}catch(w){nt(l,l.return,w)}else{var y=vo(l.type,o.memoizedProps);o=o.memoizedState;try{r.componentDidUpdate(y,o,r.__reactInternalSnapshotBeforeUpdate)}catch(w){nt(l,l.return,w)}}c&64&&W_(l),c&512&&tu(l,l.return);break;case 3:if(Tr(r,l),c&64&&(r=l.updateQueue,r!==null)){if(o=null,l.child!==null)switch(l.child.tag){case 27:case 5:o=l.child.stateNode;break;case 1:o=l.child.stateNode}try{Bv(r,o)}catch(w){nt(l,l.return,w)}}break;case 27:o===null&&c&4&&n0(l);case 26:case 5:Tr(r,l),o===null&&c&4&&e0(l),c&512&&tu(l,l.return);break;case 12:Tr(r,l);break;case 31:Tr(r,l),c&4&&a0(r,l);break;case 13:Tr(r,l),c&4&&l0(r,l),c&64&&(r=l.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(l=_R.bind(null,l),FR(r,l))));break;case 22:if(c=l.memoizedState!==null||_r,!c){o=o!==null&&o.memoizedState!==null||kt,y=_r;var _=kt;_r=c,(kt=o)&&!_?Sr(r,l,(l.subtreeFlags&8772)!==0):Tr(r,l),_r=y,kt=_}break;case 30:break;default:Tr(r,l)}}function s0(r){var o=r.alternate;o!==null&&(r.alternate=null,s0(o)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(o=r.stateNode,o!==null&&Jo(o)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var mt=null,Tn=!1;function Er(r,o,l){for(l=l.child;l!==null;)o0(r,o,l),l=l.sibling}function o0(r,o,l){if(Yt&&typeof Yt.onCommitFiberUnmount=="function")try{Yt.onCommitFiberUnmount(oi,l)}catch{}switch(l.tag){case 26:kt||Ki(l,o),Er(r,o,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:kt||Ki(l,o);var c=mt,y=Tn;hs(l.type)&&(mt=l.stateNode,Tn=!1),Er(r,o,l),cu(l.stateNode),mt=c,Tn=y;break;case 5:kt||Ki(l,o);case 6:if(c=mt,y=Tn,mt=null,Er(r,o,l),mt=c,Tn=y,mt!==null)if(Tn)try{(mt.nodeType===9?mt.body:mt.nodeName==="HTML"?mt.ownerDocument.body:mt).removeChild(l.stateNode)}catch(_){nt(l,o,_)}else try{mt.removeChild(l.stateNode)}catch(_){nt(l,o,_)}break;case 18:mt!==null&&(Tn?(r=mt,W0(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,l.stateNode),Ma(r)):W0(mt,l.stateNode));break;case 4:c=mt,y=Tn,mt=l.stateNode.containerInfo,Tn=!0,Er(r,o,l),mt=c,Tn=y;break;case 0:case 11:case 14:case 15:os(2,l,o),kt||os(4,l,o),Er(r,o,l);break;case 1:kt||(Ki(l,o),c=l.stateNode,typeof c.componentWillUnmount=="function"&&Z_(l,o,c)),Er(r,o,l);break;case 21:Er(r,o,l);break;case 22:kt=(c=kt)||l.memoizedState!==null,Er(r,o,l),kt=c;break;default:Er(r,o,l)}}function a0(r,o){if(o.memoizedState===null&&(r=o.alternate,r!==null&&(r=r.memoizedState,r!==null))){r=r.dehydrated;try{Ma(r)}catch(l){nt(o,o.return,l)}}}function l0(r,o){if(o.memoizedState===null&&(r=o.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{Ma(r)}catch(l){nt(o,o.return,l)}}function dR(r){switch(r.tag){case 31:case 13:case 19:var o=r.stateNode;return o===null&&(o=r.stateNode=new i0),o;case 22:return r=r.stateNode,o=r._retryCache,o===null&&(o=r._retryCache=new i0),o;default:throw Error(i(435,r.tag))}}function hd(r,o){var l=dR(r);o.forEach(function(c){if(!l.has(c)){l.add(c);var y=ER.bind(null,r,c);c.then(y,y)}})}function Sn(r,o){var l=o.deletions;if(l!==null)for(var c=0;c<l.length;c++){var y=l[c],_=r,w=o,I=w;e:for(;I!==null;){switch(I.tag){case 27:if(hs(I.type)){mt=I.stateNode,Tn=!1;break e}break;case 5:mt=I.stateNode,Tn=!1;break e;case 3:case 4:mt=I.stateNode.containerInfo,Tn=!0;break e}I=I.return}if(mt===null)throw Error(i(160));o0(_,w,y),mt=null,Tn=!1,_=y.alternate,_!==null&&(_.return=null),y.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)u0(o,r),o=o.sibling}var gi=null;function u0(r,o){var l=r.alternate,c=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:Sn(o,r),An(r),c&4&&(os(3,r,r.return),eu(3,r),os(5,r,r.return));break;case 1:Sn(o,r),An(r),c&512&&(kt||l===null||Ki(l,l.return)),c&64&&_r&&(r=r.updateQueue,r!==null&&(c=r.callbacks,c!==null&&(l=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=l===null?c:l.concat(c))));break;case 26:var y=gi;if(Sn(o,r),An(r),c&512&&(kt||l===null||Ki(l,l.return)),c&4){var _=l!==null?l.memoizedState:null;if(c=r.memoizedState,l===null)if(c===null)if(r.stateNode===null){e:{c=r.type,l=r.memoizedProps,y=y.ownerDocument||y;t:switch(c){case"title":_=y.getElementsByTagName("title")[0],(!_||_[ki]||_[bt]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=y.createElement(c),y.head.insertBefore(_,y.querySelector("head > title"))),en(_,c,l),_[bt]=r,Rt(_),c=_;break e;case"link":var w=uE("link","href",y).get(c+(l.href||""));if(w){for(var I=0;I<w.length;I++)if(_=w[I],_.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&_.getAttribute("rel")===(l.rel==null?null:l.rel)&&_.getAttribute("title")===(l.title==null?null:l.title)&&_.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){w.splice(I,1);break t}}_=y.createElement(c),en(_,c,l),y.head.appendChild(_);break;case"meta":if(w=uE("meta","content",y).get(c+(l.content||""))){for(I=0;I<w.length;I++)if(_=w[I],_.getAttribute("content")===(l.content==null?null:""+l.content)&&_.getAttribute("name")===(l.name==null?null:l.name)&&_.getAttribute("property")===(l.property==null?null:l.property)&&_.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&_.getAttribute("charset")===(l.charSet==null?null:l.charSet)){w.splice(I,1);break t}}_=y.createElement(c),en(_,c,l),y.head.appendChild(_);break;default:throw Error(i(468,c))}_[bt]=r,Rt(_),c=_}r.stateNode=c}else cE(y,r.type,r.stateNode);else r.stateNode=lE(y,c,r.memoizedProps);else _!==c?(_===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):_.count--,c===null?cE(y,r.type,r.stateNode):lE(y,c,r.memoizedProps)):c===null&&r.stateNode!==null&&Pp(r,r.memoizedProps,l.memoizedProps)}break;case 27:Sn(o,r),An(r),c&512&&(kt||l===null||Ki(l,l.return)),l!==null&&c&4&&Pp(r,r.memoizedProps,l.memoizedProps);break;case 5:if(Sn(o,r),An(r),c&512&&(kt||l===null||Ki(l,l.return)),r.flags&32){y=r.stateNode;try{En(y,"")}catch(ye){nt(r,r.return,ye)}}c&4&&r.stateNode!=null&&(y=r.memoizedProps,Pp(r,y,l!==null?l.memoizedProps:y)),c&1024&&(Lp=!0);break;case 6:if(Sn(o,r),An(r),c&4){if(r.stateNode===null)throw Error(i(162));c=r.memoizedProps,l=r.stateNode;try{l.nodeValue=c}catch(ye){nt(r,r.return,ye)}}break;case 3:if(Rd=null,y=gi,gi=Id(o.containerInfo),Sn(o,r),gi=y,An(r),c&4&&l!==null&&l.memoizedState.isDehydrated)try{Ma(o.containerInfo)}catch(ye){nt(r,r.return,ye)}Lp&&(Lp=!1,c0(r));break;case 4:c=gi,gi=Id(r.stateNode.containerInfo),Sn(o,r),An(r),gi=c;break;case 12:Sn(o,r),An(r);break;case 31:Sn(o,r),An(r),c&4&&(c=r.updateQueue,c!==null&&(r.updateQueue=null,hd(r,c)));break;case 13:Sn(o,r),An(r),r.child.flags&8192&&r.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(md=fn()),c&4&&(c=r.updateQueue,c!==null&&(r.updateQueue=null,hd(r,c)));break;case 22:y=r.memoizedState!==null;var L=l!==null&&l.memoizedState!==null,K=_r,ee=kt;if(_r=K||y,kt=ee||L,Sn(o,r),kt=ee,_r=K,An(r),c&8192)e:for(o=r.stateNode,o._visibility=y?o._visibility&-2:o._visibility|1,y&&(l===null||L||_r||kt||_o(r)),l=null,o=r;;){if(o.tag===5||o.tag===26){if(l===null){L=l=o;try{if(_=L.stateNode,y)w=_.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none";else{I=L.stateNode;var ie=L.memoizedProps.style,Q=ie!=null&&ie.hasOwnProperty("display")?ie.display:null;I.style.display=Q==null||typeof Q=="boolean"?"":(""+Q).trim()}}catch(ye){nt(L,L.return,ye)}}}else if(o.tag===6){if(l===null){L=o;try{L.stateNode.nodeValue=y?"":L.memoizedProps}catch(ye){nt(L,L.return,ye)}}}else if(o.tag===18){if(l===null){L=o;try{var Z=L.stateNode;y?Z0(Z,!0):Z0(L.stateNode,!1)}catch(ye){nt(L,L.return,ye)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===r)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break e;for(;o.sibling===null;){if(o.return===null||o.return===r)break e;l===o&&(l=null),o=o.return}l===o&&(l=null),o.sibling.return=o.return,o=o.sibling}c&4&&(c=r.updateQueue,c!==null&&(l=c.retryQueue,l!==null&&(c.retryQueue=null,hd(r,l))));break;case 19:Sn(o,r),An(r),c&4&&(c=r.updateQueue,c!==null&&(r.updateQueue=null,hd(r,c)));break;case 30:break;case 21:break;default:Sn(o,r),An(r)}}function An(r){var o=r.flags;if(o&2){try{for(var l,c=r.return;c!==null;){if(t0(c)){l=c;break}c=c.return}if(l==null)throw Error(i(160));switch(l.tag){case 27:var y=l.stateNode,_=kp(r);fd(r,_,y);break;case 5:var w=l.stateNode;l.flags&32&&(En(w,""),l.flags&=-33);var I=kp(r);fd(r,I,w);break;case 3:case 4:var L=l.stateNode.containerInfo,K=kp(r);Vp(r,K,L);break;default:throw Error(i(161))}}catch(ee){nt(r,r.return,ee)}r.flags&=-3}o&4096&&(r.flags&=-4097)}function c0(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var o=r;c0(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),r=r.sibling}}function Tr(r,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)r0(r,o.alternate,o),o=o.sibling}function _o(r){for(r=r.child;r!==null;){var o=r;switch(o.tag){case 0:case 11:case 14:case 15:os(4,o,o.return),_o(o);break;case 1:Ki(o,o.return);var l=o.stateNode;typeof l.componentWillUnmount=="function"&&Z_(o,o.return,l),_o(o);break;case 27:cu(o.stateNode);case 26:case 5:Ki(o,o.return),_o(o);break;case 22:o.memoizedState===null&&_o(o);break;case 30:_o(o);break;default:_o(o)}r=r.sibling}}function Sr(r,o,l){for(l=l&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var c=o.alternate,y=r,_=o,w=_.flags;switch(_.tag){case 0:case 11:case 15:Sr(y,_,l),eu(4,_);break;case 1:if(Sr(y,_,l),c=_,y=c.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(K){nt(c,c.return,K)}if(c=_,y=c.updateQueue,y!==null){var I=c.stateNode;try{var L=y.shared.hiddenCallbacks;if(L!==null)for(y.shared.hiddenCallbacks=null,y=0;y<L.length;y++)Hv(L[y],I)}catch(K){nt(c,c.return,K)}}l&&w&64&&W_(_),tu(_,_.return);break;case 27:n0(_);case 26:case 5:Sr(y,_,l),l&&c===null&&w&4&&e0(_),tu(_,_.return);break;case 12:Sr(y,_,l);break;case 31:Sr(y,_,l),l&&w&4&&a0(y,_);break;case 13:Sr(y,_,l),l&&w&4&&l0(y,_);break;case 22:_.memoizedState===null&&Sr(y,_,l),tu(_,_.return);break;case 30:break;default:Sr(y,_,l)}o=o.sibling}}function Up(r,o){var l=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),r=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(r=o.memoizedState.cachePool.pool),r!==l&&(r!=null&&r.refCount++,l!=null&&Hl(l))}function Op(r,o){r=null,o.alternate!==null&&(r=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==r&&(o.refCount++,r!=null&&Hl(r))}function yi(r,o,l,c){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)d0(r,o,l,c),o=o.sibling}function d0(r,o,l,c){var y=o.flags;switch(o.tag){case 0:case 11:case 15:yi(r,o,l,c),y&2048&&eu(9,o);break;case 1:yi(r,o,l,c);break;case 3:yi(r,o,l,c),y&2048&&(r=null,o.alternate!==null&&(r=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==r&&(o.refCount++,r!=null&&Hl(r)));break;case 12:if(y&2048){yi(r,o,l,c),r=o.stateNode;try{var _=o.memoizedProps,w=_.id,I=_.onPostCommit;typeof I=="function"&&I(w,o.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(L){nt(o,o.return,L)}}else yi(r,o,l,c);break;case 31:yi(r,o,l,c);break;case 13:yi(r,o,l,c);break;case 23:break;case 22:_=o.stateNode,w=o.alternate,o.memoizedState!==null?_._visibility&2?yi(r,o,l,c):nu(r,o):_._visibility&2?yi(r,o,l,c):(_._visibility|=2,Ea(r,o,l,c,(o.subtreeFlags&10256)!==0||!1)),y&2048&&Up(w,o);break;case 24:yi(r,o,l,c),y&2048&&Op(o.alternate,o);break;default:yi(r,o,l,c)}}function Ea(r,o,l,c,y){for(y=y&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var _=r,w=o,I=l,L=c,K=w.flags;switch(w.tag){case 0:case 11:case 15:Ea(_,w,I,L,y),eu(8,w);break;case 23:break;case 22:var ee=w.stateNode;w.memoizedState!==null?ee._visibility&2?Ea(_,w,I,L,y):nu(_,w):(ee._visibility|=2,Ea(_,w,I,L,y)),y&&K&2048&&Up(w.alternate,w);break;case 24:Ea(_,w,I,L,y),y&&K&2048&&Op(w.alternate,w);break;default:Ea(_,w,I,L,y)}o=o.sibling}}function nu(r,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var l=r,c=o,y=c.flags;switch(c.tag){case 22:nu(l,c),y&2048&&Up(c.alternate,c);break;case 24:nu(l,c),y&2048&&Op(c.alternate,c);break;default:nu(l,c)}o=o.sibling}}var iu=8192;function Ta(r,o,l){if(r.subtreeFlags&iu)for(r=r.child;r!==null;)f0(r,o,l),r=r.sibling}function f0(r,o,l){switch(r.tag){case 26:Ta(r,o,l),r.flags&iu&&r.memoizedState!==null&&XR(l,gi,r.memoizedState,r.memoizedProps);break;case 5:Ta(r,o,l);break;case 3:case 4:var c=gi;gi=Id(r.stateNode.containerInfo),Ta(r,o,l),gi=c;break;case 22:r.memoizedState===null&&(c=r.alternate,c!==null&&c.memoizedState!==null?(c=iu,iu=16777216,Ta(r,o,l),iu=c):Ta(r,o,l));break;default:Ta(r,o,l)}}function h0(r){var o=r.alternate;if(o!==null&&(r=o.child,r!==null)){o.child=null;do o=r.sibling,r.sibling=null,r=o;while(r!==null)}}function ru(r){var o=r.deletions;if((r.flags&16)!==0){if(o!==null)for(var l=0;l<o.length;l++){var c=o[l];jt=c,m0(c,r)}h0(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)p0(r),r=r.sibling}function p0(r){switch(r.tag){case 0:case 11:case 15:ru(r),r.flags&2048&&os(9,r,r.return);break;case 3:ru(r);break;case 12:ru(r);break;case 22:var o=r.stateNode;r.memoizedState!==null&&o._visibility&2&&(r.return===null||r.return.tag!==13)?(o._visibility&=-3,pd(r)):ru(r);break;default:ru(r)}}function pd(r){var o=r.deletions;if((r.flags&16)!==0){if(o!==null)for(var l=0;l<o.length;l++){var c=o[l];jt=c,m0(c,r)}h0(r)}for(r=r.child;r!==null;){switch(o=r,o.tag){case 0:case 11:case 15:os(8,o,o.return),pd(o);break;case 22:l=o.stateNode,l._visibility&2&&(l._visibility&=-3,pd(o));break;default:pd(o)}r=r.sibling}}function m0(r,o){for(;jt!==null;){var l=jt;switch(l.tag){case 0:case 11:case 15:os(8,l,o);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var c=l.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:Hl(l.memoizedState.cache)}if(c=l.child,c!==null)c.return=l,jt=c;else e:for(l=r;jt!==null;){c=jt;var y=c.sibling,_=c.return;if(s0(c),c===l){jt=null;break e}if(y!==null){y.return=_,jt=y;break e}jt=_}}}var fR={getCacheForType:function(r){var o=Wt(Mt),l=o.data.get(r);return l===void 0&&(l=r(),o.data.set(r,l)),l},cacheSignal:function(){return Wt(Mt).controller.signal}},hR=typeof WeakMap=="function"?WeakMap:Map,We=0,lt=null,Oe=null,qe=0,tt=0,kn=null,as=!1,Sa=!1,Fp=!1,Ar=0,_t=0,ls=0,Eo=0,qp=0,Vn=0,Aa=0,su=null,wn=null,Hp=!1,md=0,g0=0,gd=1/0,yd=null,us=null,Ht=0,cs=null,wa=null,wr=0,Bp=0,zp=null,y0=null,ou=0,Gp=null;function Ln(){return(We&2)!==0&&qe!==0?qe&-qe:Y.T!==null?Qp():vc()}function v0(){if(Vn===0)if((qe&536870912)===0||$e){var r=js;js<<=1,(js&3932160)===0&&(js=262144),Vn=r}else Vn=536870912;return r=Dn.current,r!==null&&(r.flags|=32),Vn}function xn(r,o,l){(r===lt&&(tt===2||tt===9)||r.cancelPendingCommit!==null)&&(xa(r,0),ds(r,qe,Vn,!1)),Js(r,l),((We&2)===0||r!==lt)&&(r===lt&&((We&2)===0&&(Eo|=l),_t===4&&ds(r,qe,Vn,!1)),Yi(r))}function _0(r,o,l){if((We&6)!==0)throw Error(i(327));var c=!l&&(o&127)===0&&(o&r.expiredLanes)===0||ai(r,o),y=c?gR(r,o):jp(r,o,!0),_=c;do{if(y===0){Sa&&!c&&ds(r,o,0,!1);break}else{if(l=r.current.alternate,_&&!pR(l)){y=jp(r,o,!1),_=!1;continue}if(y===2){if(_=o,r.errorRecoveryDisabledLanes&_)var w=0;else w=r.pendingLanes&-536870913,w=w!==0?w:w&536870912?536870912:0;if(w!==0){o=w;e:{var I=r;y=su;var L=I.current.memoizedState.isDehydrated;if(L&&(xa(I,w).flags|=256),w=jp(I,w,!1),w!==2){if(Fp&&!L){I.errorRecoveryDisabledLanes|=_,Eo|=_,y=4;break e}_=wn,wn=y,_!==null&&(wn===null?wn=_:wn.push.apply(wn,_))}y=w}if(_=!1,y!==2)continue}}if(y===1){xa(r,0),ds(r,o,0,!0);break}e:{switch(c=r,_=y,_){case 0:case 1:throw Error(i(345));case 4:if((o&4194048)!==o)break;case 6:ds(c,o,Vn,!as);break e;case 2:wn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((o&62914560)===o&&(y=md+300-fn(),10<y)){if(ds(c,o,Vn,!as),Mi(c,0,!0)!==0)break e;wr=o,c.timeoutHandle=Q0(E0.bind(null,c,l,wn,yd,Hp,o,Vn,Eo,Aa,as,_,"Throttled",-0,0),y);break e}E0(c,l,wn,yd,Hp,o,Vn,Eo,Aa,as,_,null,-0,0)}}break}while(!0);Yi(r)}function E0(r,o,l,c,y,_,w,I,L,K,ee,ie,Q,Z){if(r.timeoutHandle=-1,ie=o.subtreeFlags,ie&8192||(ie&16785408)===16785408){ie={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ci},f0(o,_,ie);var ye=(_&62914560)===_?md-fn():(_&4194048)===_?g0-fn():0;if(ye=WR(ie,ye),ye!==null){wr=_,r.cancelPendingCommit=ye(b0.bind(null,r,o,_,l,c,y,w,I,L,ee,ie,null,Q,Z)),ds(r,_,w,!K);return}}b0(r,o,_,l,c,y,w,I,L)}function pR(r){for(var o=r;;){var l=o.tag;if((l===0||l===11||l===15)&&o.flags&16384&&(l=o.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var c=0;c<l.length;c++){var y=l[c],_=y.getSnapshot;y=y.value;try{if(!Nn(_(),y))return!1}catch{return!1}}if(l=o.child,o.subtreeFlags&16384&&l!==null)l.return=o,o=l;else{if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function ds(r,o,l,c){o&=~qp,o&=~Eo,r.suspendedLanes|=o,r.pingedLanes&=~o,c&&(r.warmLanes|=o),c=r.expirationTimes;for(var y=o;0<y;){var _=31-Et(y),w=1<<_;c[_]=-1,y&=~w}l!==0&&Ks(r,l,o)}function vd(){return(We&6)===0?(au(0),!1):!0}function $p(){if(Oe!==null){if(tt===0)var r=Oe.return;else r=Oe,hr=co=null,ap(r),ma=null,zl=0,r=Oe;for(;r!==null;)X_(r.alternate,r),r=r.return;Oe=null}}function xa(r,o){var l=r.timeoutHandle;l!==-1&&(r.timeoutHandle=-1,kR(l)),l=r.cancelPendingCommit,l!==null&&(r.cancelPendingCommit=null,l()),wr=0,$p(),lt=r,Oe=l=dr(r.current,null),qe=o,tt=0,kn=null,as=!1,Sa=ai(r,o),Fp=!1,Aa=Vn=qp=Eo=ls=_t=0,wn=su=null,Hp=!1,(o&8)!==0&&(o|=o&32);var c=r.entangledLanes;if(c!==0)for(r=r.entanglements,c&=o;0<c;){var y=31-Et(c),_=1<<y;o|=r[y],c&=~_}return Ar=o,Fc(),l}function T0(r,o){Pe=null,Y.H=Xl,o===pa||o===Jc?(o=Uv(),tt=3):o===Yh?(o=Uv(),tt=4):tt=o===Ap?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,kn=o,Oe===null&&(_t=1,ad(r,Jn(o,r.current)))}function S0(){var r=Dn.current;return r===null?!0:(qe&4194048)===qe?Xn===null:(qe&62914560)===qe||(qe&536870912)!==0?r===Xn:!1}function A0(){var r=Y.H;return Y.H=Xl,r===null?Xl:r}function w0(){var r=Y.A;return Y.A=fR,r}function _d(){_t=4,as||(qe&4194048)!==qe&&Dn.current!==null||(Sa=!0),(ls&134217727)===0&&(Eo&134217727)===0||lt===null||ds(lt,qe,Vn,!1)}function jp(r,o,l){var c=We;We|=2;var y=A0(),_=w0();(lt!==r||qe!==o)&&(yd=null,xa(r,o)),o=!1;var w=_t;e:do try{if(tt!==0&&Oe!==null){var I=Oe,L=kn;switch(tt){case 8:$p(),w=6;break e;case 3:case 2:case 9:case 6:Dn.current===null&&(o=!0);var K=tt;if(tt=0,kn=null,Ca(r,I,L,K),l&&Sa){w=0;break e}break;default:K=tt,tt=0,kn=null,Ca(r,I,L,K)}}mR(),w=_t;break}catch(ee){T0(r,ee)}while(!0);return o&&r.shellSuspendCounter++,hr=co=null,We=c,Y.H=y,Y.A=_,Oe===null&&(lt=null,qe=0,Fc()),w}function mR(){for(;Oe!==null;)x0(Oe)}function gR(r,o){var l=We;We|=2;var c=A0(),y=w0();lt!==r||qe!==o?(yd=null,gd=fn()+500,xa(r,o)):Sa=ai(r,o);e:do try{if(tt!==0&&Oe!==null){o=Oe;var _=kn;t:switch(tt){case 1:tt=0,kn=null,Ca(r,o,_,1);break;case 2:case 9:if(Vv(_)){tt=0,kn=null,C0(o);break}o=function(){tt!==2&&tt!==9||lt!==r||(tt=7),Yi(r)},_.then(o,o);break e;case 3:tt=7;break e;case 4:tt=5;break e;case 7:Vv(_)?(tt=0,kn=null,C0(o)):(tt=0,kn=null,Ca(r,o,_,7));break;case 5:var w=null;switch(Oe.tag){case 26:w=Oe.memoizedState;case 5:case 27:var I=Oe;if(w?dE(w):I.stateNode.complete){tt=0,kn=null;var L=I.sibling;if(L!==null)Oe=L;else{var K=I.return;K!==null?(Oe=K,Ed(K)):Oe=null}break t}}tt=0,kn=null,Ca(r,o,_,5);break;case 6:tt=0,kn=null,Ca(r,o,_,6);break;case 8:$p(),_t=6;break e;default:throw Error(i(462))}}yR();break}catch(ee){T0(r,ee)}while(!0);return hr=co=null,Y.H=c,Y.A=y,We=l,Oe!==null?0:(lt=null,qe=0,Fc(),_t)}function yR(){for(;Oe!==null&&!Sh();)x0(Oe)}function x0(r){var o=Y_(r.alternate,r,Ar);r.memoizedProps=r.pendingProps,o===null?Ed(r):Oe=o}function C0(r){var o=r,l=o.alternate;switch(o.tag){case 15:case 0:o=z_(l,o,o.pendingProps,o.type,void 0,qe);break;case 11:o=z_(l,o,o.pendingProps,o.type.render,o.ref,qe);break;case 5:ap(o);default:X_(l,o),o=Oe=wv(o,Ar),o=Y_(l,o,Ar)}r.memoizedProps=r.pendingProps,o===null?Ed(r):Oe=o}function Ca(r,o,l,c){hr=co=null,ap(o),ma=null,zl=0;var y=o.return;try{if(sR(r,y,o,l,qe)){_t=1,ad(r,Jn(l,r.current)),Oe=null;return}}catch(_){if(y!==null)throw Oe=y,_;_t=1,ad(r,Jn(l,r.current)),Oe=null;return}o.flags&32768?($e||c===1?r=!0:Sa||(qe&536870912)!==0?r=!1:(as=r=!0,(c===2||c===9||c===3||c===6)&&(c=Dn.current,c!==null&&c.tag===13&&(c.flags|=16384))),I0(o,r)):Ed(o)}function Ed(r){var o=r;do{if((o.flags&32768)!==0){I0(o,as);return}r=o.return;var l=lR(o.alternate,o,Ar);if(l!==null){Oe=l;return}if(o=o.sibling,o!==null){Oe=o;return}Oe=o=r}while(o!==null);_t===0&&(_t=5)}function I0(r,o){do{var l=uR(r.alternate,r);if(l!==null){l.flags&=32767,Oe=l;return}if(l=r.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!o&&(r=r.sibling,r!==null)){Oe=r;return}Oe=r=l}while(r!==null);_t=6,Oe=null}function b0(r,o,l,c,y,_,w,I,L){r.cancelPendingCommit=null;do Td();while(Ht!==0);if((We&6)!==0)throw Error(i(327));if(o!==null){if(o===r.current)throw Error(i(177));if(_=o.lanes|o.childLanes,_|=kh,xh(r,l,_,w,I,L),r===lt&&(Oe=lt=null,qe=0),wa=o,cs=r,wr=l,Bp=_,zp=y,y0=c,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,TR(Hr,function(){return P0(),null})):(r.callbackNode=null,r.callbackPriority=0),c=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||c){c=Y.T,Y.T=null,y=ue.p,ue.p=2,w=We,We|=4;try{cR(r,o,l)}finally{We=w,ue.p=y,Y.T=c}}Ht=1,R0(),N0(),M0()}}function R0(){if(Ht===1){Ht=0;var r=cs,o=wa,l=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||l){l=Y.T,Y.T=null;var c=ue.p;ue.p=2;var y=We;We|=4;try{u0(o,r);var _=rm,w=mv(r.containerInfo),I=_.focusedElem,L=_.selectionRange;if(w!==I&&I&&I.ownerDocument&&pv(I.ownerDocument.documentElement,I)){if(L!==null&&Rh(I)){var K=L.start,ee=L.end;if(ee===void 0&&(ee=K),"selectionStart"in I)I.selectionStart=K,I.selectionEnd=Math.min(ee,I.value.length);else{var ie=I.ownerDocument||document,Q=ie&&ie.defaultView||window;if(Q.getSelection){var Z=Q.getSelection(),ye=I.textContent.length,Se=Math.min(L.start,ye),at=L.end===void 0?Se:Math.min(L.end,ye);!Z.extend&&Se>at&&(w=at,at=Se,Se=w);var $=hv(I,Se),F=hv(I,at);if($&&F&&(Z.rangeCount!==1||Z.anchorNode!==$.node||Z.anchorOffset!==$.offset||Z.focusNode!==F.node||Z.focusOffset!==F.offset)){var J=ie.createRange();J.setStart($.node,$.offset),Z.removeAllRanges(),Se>at?(Z.addRange(J),Z.extend(F.node,F.offset)):(J.setEnd(F.node,F.offset),Z.addRange(J))}}}}for(ie=[],Z=I;Z=Z.parentNode;)Z.nodeType===1&&ie.push({element:Z,left:Z.scrollLeft,top:Z.scrollTop});for(typeof I.focus=="function"&&I.focus(),I=0;I<ie.length;I++){var te=ie[I];te.element.scrollLeft=te.left,te.element.scrollTop=te.top}}Pd=!!im,rm=im=null}finally{We=y,ue.p=c,Y.T=l}}r.current=o,Ht=2}}function N0(){if(Ht===2){Ht=0;var r=cs,o=wa,l=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||l){l=Y.T,Y.T=null;var c=ue.p;ue.p=2;var y=We;We|=4;try{r0(r,o.alternate,o)}finally{We=y,ue.p=c,Y.T=l}}Ht=3}}function M0(){if(Ht===4||Ht===3){Ht=0,dc();var r=cs,o=wa,l=wr,c=y0;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?Ht=5:(Ht=0,wa=cs=null,D0(r,r.pendingLanes));var y=r.pendingLanes;if(y===0&&(us=null),ar(l),o=o.stateNode,Yt&&typeof Yt.onCommitFiberRoot=="function")try{Yt.onCommitFiberRoot(oi,o,void 0,(o.current.flags&128)===128)}catch{}if(c!==null){o=Y.T,y=ue.p,ue.p=2,Y.T=null;try{for(var _=r.onRecoverableError,w=0;w<c.length;w++){var I=c[w];_(I.value,{componentStack:I.stack})}}finally{Y.T=o,ue.p=y}}(wr&3)!==0&&Td(),Yi(r),y=r.pendingLanes,(l&261930)!==0&&(y&42)!==0?r===Gp?ou++:(ou=0,Gp=r):ou=0,au(0)}}function D0(r,o){(r.pooledCacheLanes&=o)===0&&(o=r.pooledCache,o!=null&&(r.pooledCache=null,Hl(o)))}function Td(){return R0(),N0(),M0(),P0()}function P0(){if(Ht!==5)return!1;var r=cs,o=Bp;Bp=0;var l=ar(wr),c=Y.T,y=ue.p;try{ue.p=32>l?32:l,Y.T=null,l=zp,zp=null;var _=cs,w=wr;if(Ht=0,wa=cs=null,wr=0,(We&6)!==0)throw Error(i(331));var I=We;if(We|=4,p0(_.current),d0(_,_.current,w,l),We=I,au(0,!1),Yt&&typeof Yt.onPostCommitFiberRoot=="function")try{Yt.onPostCommitFiberRoot(oi,_)}catch{}return!0}finally{ue.p=y,Y.T=c,D0(r,o)}}function k0(r,o,l){o=Jn(l,o),o=Sp(r.stateNode,o,2),r=is(r,o,2),r!==null&&(Js(r,2),Yi(r))}function nt(r,o,l){if(r.tag===3)k0(r,r,l);else for(;o!==null;){if(o.tag===3){k0(o,r,l);break}else if(o.tag===1){var c=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(us===null||!us.has(c))){r=Jn(l,r),l=V_(2),c=is(o,l,2),c!==null&&(L_(l,c,o,r),Js(c,2),Yi(c));break}}o=o.return}}function Jp(r,o,l){var c=r.pingCache;if(c===null){c=r.pingCache=new hR;var y=new Set;c.set(o,y)}else y=c.get(o),y===void 0&&(y=new Set,c.set(o,y));y.has(l)||(Fp=!0,y.add(l),r=vR.bind(null,r,o,l),o.then(r,r))}function vR(r,o,l){var c=r.pingCache;c!==null&&c.delete(o),r.pingedLanes|=r.suspendedLanes&l,r.warmLanes&=~l,lt===r&&(qe&l)===l&&(_t===4||_t===3&&(qe&62914560)===qe&&300>fn()-md?(We&2)===0&&xa(r,0):qp|=l,Aa===qe&&(Aa=0)),Yi(r)}function V0(r,o){o===0&&(o=yc()),r=ao(r,o),r!==null&&(Js(r,o),Yi(r))}function _R(r){var o=r.memoizedState,l=0;o!==null&&(l=o.retryLane),V0(r,l)}function ER(r,o){var l=0;switch(r.tag){case 31:case 13:var c=r.stateNode,y=r.memoizedState;y!==null&&(l=y.retryLane);break;case 19:c=r.stateNode;break;case 22:c=r.stateNode._retryCache;break;default:throw Error(i(314))}c!==null&&c.delete(o),V0(r,l)}function TR(r,o){return qt(r,o)}var Sd=null,Ia=null,Kp=!1,Ad=!1,Yp=!1,fs=0;function Yi(r){r!==Ia&&r.next===null&&(Ia===null?Sd=Ia=r:Ia=Ia.next=r),Ad=!0,Kp||(Kp=!0,AR())}function au(r,o){if(!Yp&&Ad){Yp=!0;do for(var l=!1,c=Sd;c!==null;){if(r!==0){var y=c.pendingLanes;if(y===0)var _=0;else{var w=c.suspendedLanes,I=c.pingedLanes;_=(1<<31-Et(42|r)+1)-1,_&=y&~(w&~I),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(l=!0,F0(c,_))}else _=qe,_=Mi(c,c===lt?_:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(_&3)===0||ai(c,_)||(l=!0,F0(c,_));c=c.next}while(l);Yp=!1}}function SR(){L0()}function L0(){Ad=Kp=!1;var r=0;fs!==0&&PR()&&(r=fs);for(var o=fn(),l=null,c=Sd;c!==null;){var y=c.next,_=U0(c,o);_===0?(c.next=null,l===null?Sd=y:l.next=y,y===null&&(Ia=l)):(l=c,(r!==0||(_&3)!==0)&&(Ad=!0)),c=y}Ht!==0&&Ht!==5||au(r),fs!==0&&(fs=0)}function U0(r,o){for(var l=r.suspendedLanes,c=r.pingedLanes,y=r.expirationTimes,_=r.pendingLanes&-62914561;0<_;){var w=31-Et(_),I=1<<w,L=y[w];L===-1?((I&l)===0||(I&c)!==0)&&(y[w]=wh(I,o)):L<=o&&(r.expiredLanes|=I),_&=~I}if(o=lt,l=qe,l=Mi(r,r===o?l:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),c=r.callbackNode,l===0||r===o&&(tt===2||tt===9)||r.cancelPendingCommit!==null)return c!==null&&c!==null&&qr(c),r.callbackNode=null,r.callbackPriority=0;if((l&3)===0||ai(r,l)){if(o=l&-l,o===r.callbackPriority)return o;switch(c!==null&&qr(c),ar(l)){case 2:case 8:l=yl;break;case 32:l=Hr;break;case 268435456:l=fc;break;default:l=Hr}return c=O0.bind(null,r),l=qt(l,c),r.callbackPriority=o,r.callbackNode=l,o}return c!==null&&c!==null&&qr(c),r.callbackPriority=2,r.callbackNode=null,2}function O0(r,o){if(Ht!==0&&Ht!==5)return r.callbackNode=null,r.callbackPriority=0,null;var l=r.callbackNode;if(Td()&&r.callbackNode!==l)return null;var c=qe;return c=Mi(r,r===lt?c:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),c===0?null:(_0(r,c,o),U0(r,fn()),r.callbackNode!=null&&r.callbackNode===l?O0.bind(null,r):null)}function F0(r,o){if(Td())return null;_0(r,o,!0)}function AR(){VR(function(){(We&6)!==0?qt(gl,SR):L0()})}function Qp(){if(fs===0){var r=fa;r===0&&(r=Ri,Ri<<=1,(Ri&261888)===0&&(Ri=256)),fs=r}return fs}function q0(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:Xo(""+r)}function H0(r,o){var l=o.ownerDocument.createElement("input");return l.name=o.name,l.value=o.value,r.id&&l.setAttribute("form",r.id),o.parentNode.insertBefore(l,o),r=new FormData(r),l.parentNode.removeChild(l),r}function wR(r,o,l,c,y){if(o==="submit"&&l&&l.stateNode===y){var _=q0((y[Gt]||null).action),w=c.submitter;w&&(o=(o=w[Gt]||null)?q0(o.formAction):w.getAttribute("formAction"),o!==null&&(_=o,w=null));var I=new Bi("action","action",null,c,y);r.push({event:I,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(fs!==0){var L=w?H0(y,w):new FormData(y);gp(l,{pending:!0,data:L,method:y.method,action:_},null,L)}}else typeof _=="function"&&(I.preventDefault(),L=w?H0(y,w):new FormData(y),gp(l,{pending:!0,data:L,method:y.method,action:_},_,L))},currentTarget:y}]})}}for(var Xp=0;Xp<Ph.length;Xp++){var Wp=Ph[Xp],xR=Wp.toLowerCase(),CR=Wp[0].toUpperCase()+Wp.slice(1);mi(xR,"on"+CR)}mi(vv,"onAnimationEnd"),mi(_v,"onAnimationIteration"),mi(Ev,"onAnimationStart"),mi("dblclick","onDoubleClick"),mi("focusin","onFocus"),mi("focusout","onBlur"),mi(Bb,"onTransitionRun"),mi(zb,"onTransitionStart"),mi(Gb,"onTransitionCancel"),mi(Tv,"onTransitionEnd"),Oi("onMouseEnter",["mouseout","mouseover"]),Oi("onMouseLeave",["mouseout","mouseover"]),Oi("onPointerEnter",["pointerout","pointerover"]),Oi("onPointerLeave",["pointerout","pointerover"]),Ui("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ui("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ui("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ui("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ui("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ui("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),IR=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(lu));function B0(r,o){o=(o&4)!==0;for(var l=0;l<r.length;l++){var c=r[l],y=c.event;c=c.listeners;e:{var _=void 0;if(o)for(var w=c.length-1;0<=w;w--){var I=c[w],L=I.instance,K=I.currentTarget;if(I=I.listener,L!==_&&y.isPropagationStopped())break e;_=I,y.currentTarget=K;try{_(y)}catch(ee){Oc(ee)}y.currentTarget=null,_=L}else for(w=0;w<c.length;w++){if(I=c[w],L=I.instance,K=I.currentTarget,I=I.listener,L!==_&&y.isPropagationStopped())break e;_=I,y.currentTarget=K;try{_(y)}catch(ee){Oc(ee)}y.currentTarget=null,_=L}}}}function Fe(r,o){var l=o[jo];l===void 0&&(l=o[jo]=new Set);var c=r+"__bubble";l.has(c)||(z0(o,r,2,!1),l.add(c))}function Zp(r,o,l){var c=0;o&&(c|=4),z0(l,r,c,o)}var wd="_reactListening"+Math.random().toString(36).slice(2);function em(r){if(!r[wd]){r[wd]=!0,El.forEach(function(l){l!=="selectionchange"&&(IR.has(l)||Zp(l,!1,r),Zp(l,!0,r))});var o=r.nodeType===9?r:r.ownerDocument;o===null||o[wd]||(o[wd]=!0,Zp("selectionchange",!1,o))}}function z0(r,o,l,c){switch(vE(o)){case 2:var y=t1;break;case 8:y=n1;break;default:y=mm}l=y.bind(null,o,l,r),y=void 0,!Zs||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(y=!0),c?y!==void 0?r.addEventListener(o,l,{capture:!0,passive:y}):r.addEventListener(o,l,!0):y!==void 0?r.addEventListener(o,l,{passive:y}):r.addEventListener(o,l,!1)}function tm(r,o,l,c,y){var _=c;if((o&1)===0&&(o&2)===0&&c!==null)e:for(;;){if(c===null)return;var w=c.tag;if(w===3||w===4){var I=c.stateNode.containerInfo;if(I===y)break;if(w===4)for(w=c.return;w!==null;){var L=w.tag;if((L===3||L===4)&&w.stateNode.containerInfo===y)return;w=w.return}for(;I!==null;){if(w=Vi(I),w===null)return;if(L=w.tag,L===5||L===6||L===26||L===27){c=_=w;continue e}I=I.parentNode}}c=c.return}Jr(function(){var K=_,ee=zn(l),ie=[];e:{var Q=Sv.get(r);if(Q!==void 0){var Z=Bi,ye=r;switch(r){case"keypress":if(to(l)===0)break e;case"keydown":case"keyup":Z=Vc;break;case"focusin":ye="focus",Z=io;break;case"focusout":ye="blur",Z=io;break;case"beforeblur":case"afterblur":Z=io;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Z=Pl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Z=Cc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Z=A;break;case vv:case _v:case Ev:Z=bc;break;case Tv:Z=b;break;case"scroll":case"scrollend":Z=Dl;break;case"wheel":Z=W;break;case"copy":case"cut":case"paste":Z=Rc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Z=cr;break;case"toggle":case"beforetoggle":Z=De}var Se=(o&4)!==0,at=!Se&&(r==="scroll"||r==="scrollend"),$=Se?Q!==null?Q+"Capture":null:Q;Se=[];for(var F=K,J;F!==null;){var te=F;if(J=te.stateNode,te=te.tag,te!==5&&te!==26&&te!==27||J===null||$===null||(te=di(F,$),te!=null&&Se.push(uu(F,te,J))),at)break;F=F.return}0<Se.length&&(Q=new Z(Q,ye,null,l,ee),ie.push({event:Q,listeners:Se}))}}if((o&7)===0){e:{if(Q=r==="mouseover"||r==="pointerover",Z=r==="mouseout"||r==="pointerout",Q&&l!==Rl&&(ye=l.relatedTarget||l.fromElement)&&(Vi(ye)||ye[Pi]))break e;if((Z||Q)&&(Q=ee.window===ee?ee:(Q=ee.ownerDocument)?Q.defaultView||Q.parentWindow:window,Z?(ye=l.relatedTarget||l.toElement,Z=K,ye=ye?Vi(ye):null,ye!==null&&(at=a(ye),Se=ye.tag,ye!==at||Se!==5&&Se!==27&&Se!==6)&&(ye=null)):(Z=null,ye=K),Z!==ye)){if(Se=Pl,te="onMouseLeave",$="onMouseEnter",F="mouse",(r==="pointerout"||r==="pointerover")&&(Se=cr,te="onPointerLeave",$="onPointerEnter",F="pointer"),at=Z==null?Q:bn(Z),J=ye==null?Q:bn(ye),Q=new Se(te,F+"leave",Z,l,ee),Q.target=at,Q.relatedTarget=J,te=null,Vi(ee)===K&&(Se=new Se($,F+"enter",ye,l,ee),Se.target=J,Se.relatedTarget=at,te=Se),at=te,Z&&ye)t:{for(Se=bR,$=Z,F=ye,J=0,te=$;te;te=Se(te))J++;te=0;for(var Ee=F;Ee;Ee=Se(Ee))te++;for(;0<J-te;)$=Se($),J--;for(;0<te-J;)F=Se(F),te--;for(;J--;){if($===F||F!==null&&$===F.alternate){Se=$;break t}$=Se($),F=Se(F)}Se=null}else Se=null;Z!==null&&G0(ie,Q,Z,Se,!1),ye!==null&&at!==null&&G0(ie,at,ye,Se,!0)}}e:{if(Q=K?bn(K):window,Z=Q.nodeName&&Q.nodeName.toLowerCase(),Z==="select"||Z==="input"&&Q.type==="file")var Ke=av;else if(sv(Q))if(lv)Ke=Fb;else{Ke=Ub;var ve=Lb}else Z=Q.nodeName,!Z||Z.toLowerCase()!=="input"||Q.type!=="checkbox"&&Q.type!=="radio"?K&&Qo(K.elementType)&&(Ke=av):Ke=Ob;if(Ke&&(Ke=Ke(r,K))){ov(ie,Ke,l,ee);break e}ve&&ve(r,Q,K),r==="focusout"&&K&&Q.type==="number"&&K.memoizedProps.value!=null&&Cl(Q,"number",Q.value)}switch(ve=K?bn(K):window,r){case"focusin":(sv(ve)||ve.contentEditable==="true")&&(ra=ve,Nh=K,Ol=null);break;case"focusout":Ol=Nh=ra=null;break;case"mousedown":Mh=!0;break;case"contextmenu":case"mouseup":case"dragend":Mh=!1,gv(ie,l,ee);break;case"selectionchange":if(Hb)break;case"keydown":case"keyup":gv(ie,l,ee)}var Le;if(Xe)e:{switch(r){case"compositionstart":var He="onCompositionStart";break e;case"compositionend":He="onCompositionEnd";break e;case"compositionupdate":He="onCompositionUpdate";break e}He=void 0}else ia?ro(r,l)&&(He="onCompositionEnd"):r==="keydown"&&l.keyCode===229&&(He="onCompositionStart");He&&($i&&l.locale!=="ko"&&(ia||He!=="onCompositionStart"?He==="onCompositionEnd"&&ia&&(Le=Ml()):(Hi=ee,Nl="value"in Hi?Hi.value:Hi.textContent,ia=!0)),ve=xd(K,He),0<ve.length&&(He=new Gi(He,r,null,l,ee),ie.push({event:He,listeners:ve}),Le?He.data=Le:(Le=na(l),Le!==null&&(He.data=Le)))),(Le=$n?Db(r,l):Pb(r,l))&&(He=xd(K,"onBeforeInput"),0<He.length&&(ve=new Gi("onBeforeInput","beforeinput",null,l,ee),ie.push({event:ve,listeners:He}),ve.data=Le)),wR(ie,r,K,l,ee)}B0(ie,o)})}function uu(r,o,l){return{instance:r,listener:o,currentTarget:l}}function xd(r,o){for(var l=o+"Capture",c=[];r!==null;){var y=r,_=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||_===null||(y=di(r,l),y!=null&&c.unshift(uu(r,y,_)),y=di(r,o),y!=null&&c.push(uu(r,y,_))),r.tag===3)return c;r=r.return}return[]}function bR(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function G0(r,o,l,c,y){for(var _=o._reactName,w=[];l!==null&&l!==c;){var I=l,L=I.alternate,K=I.stateNode;if(I=I.tag,L!==null&&L===c)break;I!==5&&I!==26&&I!==27||K===null||(L=K,y?(K=di(l,_),K!=null&&w.unshift(uu(l,K,L))):y||(K=di(l,_),K!=null&&w.push(uu(l,K,L)))),l=l.return}w.length!==0&&r.push({event:o,listeners:w})}var RR=/\r\n?/g,NR=/\u0000|\uFFFD/g;function $0(r){return(typeof r=="string"?r:""+r).replace(RR,`
`).replace(NR,"")}function j0(r,o){return o=$0(o),$0(r)===o}function ot(r,o,l,c,y,_){switch(l){case"children":typeof c=="string"?o==="body"||o==="textarea"&&c===""||En(r,c):(typeof c=="number"||typeof c=="bigint")&&o!=="body"&&En(r,""+c);break;case"className":Rn(r,"class",c);break;case"tabIndex":Rn(r,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":Rn(r,l,c);break;case"style":bl(r,c,_);break;case"data":if(o!=="object"){Rn(r,"data",c);break}case"src":case"href":if(c===""&&(o!=="a"||l!=="href")){r.removeAttribute(l);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){r.removeAttribute(l);break}c=Xo(""+c),r.setAttribute(l,c);break;case"action":case"formAction":if(typeof c=="function"){r.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(l==="formAction"?(o!=="input"&&ot(r,o,"name",y.name,y,null),ot(r,o,"formEncType",y.formEncType,y,null),ot(r,o,"formMethod",y.formMethod,y,null),ot(r,o,"formTarget",y.formTarget,y,null)):(ot(r,o,"encType",y.encType,y,null),ot(r,o,"method",y.method,y,null),ot(r,o,"target",y.target,y,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){r.removeAttribute(l);break}c=Xo(""+c),r.setAttribute(l,c);break;case"onClick":c!=null&&(r.onclick=ci);break;case"onScroll":c!=null&&Fe("scroll",r);break;case"onScrollEnd":c!=null&&Fe("scrollend",r);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(l=c.__html,l!=null){if(y.children!=null)throw Error(i(60));r.innerHTML=l}}break;case"multiple":r.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":r.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){r.removeAttribute("xlink:href");break}l=Xo(""+c),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?r.setAttribute(l,""+c):r.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?r.setAttribute(l,""):r.removeAttribute(l);break;case"capture":case"download":c===!0?r.setAttribute(l,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?r.setAttribute(l,c):r.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?r.setAttribute(l,c):r.removeAttribute(l);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?r.removeAttribute(l):r.setAttribute(l,c);break;case"popover":Fe("beforetoggle",r),Fe("toggle",r),Ko(r,"popover",c);break;case"xlinkActuate":Nt(r,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Nt(r,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Nt(r,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Nt(r,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Nt(r,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Nt(r,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Nt(r,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Nt(r,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Nt(r,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Ko(r,"is",c);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=xc.get(l)||l,Ko(r,l,c))}}function nm(r,o,l,c,y,_){switch(l){case"style":bl(r,c,_);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(l=c.__html,l!=null){if(y.children!=null)throw Error(i(60));r.innerHTML=l}}break;case"children":typeof c=="string"?En(r,c):(typeof c=="number"||typeof c=="bigint")&&En(r,""+c);break;case"onScroll":c!=null&&Fe("scroll",r);break;case"onScrollEnd":c!=null&&Fe("scrollend",r);break;case"onClick":c!=null&&(r.onclick=ci);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Tl.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(y=l.endsWith("Capture"),o=l.slice(2,y?l.length-7:void 0),_=r[Gt]||null,_=_!=null?_[l]:null,typeof _=="function"&&r.removeEventListener(o,_,y),typeof c=="function")){typeof _!="function"&&_!==null&&(l in r?r[l]=null:r.hasAttribute(l)&&r.removeAttribute(l)),r.addEventListener(o,c,y);break e}l in r?r[l]=c:c===!0?r.setAttribute(l,""):Ko(r,l,c)}}}function en(r,o,l){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Fe("error",r),Fe("load",r);var c=!1,y=!1,_;for(_ in l)if(l.hasOwnProperty(_)){var w=l[_];if(w!=null)switch(_){case"src":c=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,o));default:ot(r,o,_,w,l,null)}}y&&ot(r,o,"srcSet",l.srcSet,l,null),c&&ot(r,o,"src",l.src,l,null);return;case"input":Fe("invalid",r);var I=_=w=y=null,L=null,K=null;for(c in l)if(l.hasOwnProperty(c)){var ee=l[c];if(ee!=null)switch(c){case"name":y=ee;break;case"type":w=ee;break;case"checked":L=ee;break;case"defaultChecked":K=ee;break;case"value":_=ee;break;case"defaultValue":I=ee;break;case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(i(137,o));break;default:ot(r,o,c,ee,l,null)}}Sc(r,_,I,L,K,w,y,!1);return;case"select":Fe("invalid",r),c=w=_=null;for(y in l)if(l.hasOwnProperty(y)&&(I=l[y],I!=null))switch(y){case"value":_=I;break;case"defaultValue":w=I;break;case"multiple":c=I;default:ot(r,o,y,I,l,null)}o=_,l=w,r.multiple=!!c,o!=null?zr(r,!!c,o,!1):l!=null&&zr(r,!!c,l,!0);return;case"textarea":Fe("invalid",r),_=y=c=null;for(w in l)if(l.hasOwnProperty(w)&&(I=l[w],I!=null))switch(w){case"value":c=I;break;case"defaultValue":y=I;break;case"children":_=I;break;case"dangerouslySetInnerHTML":if(I!=null)throw Error(i(91));break;default:ot(r,o,w,I,l,null)}Gr(r,c,y,_);return;case"option":for(L in l)if(l.hasOwnProperty(L)&&(c=l[L],c!=null))switch(L){case"selected":r.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:ot(r,o,L,c,l,null)}return;case"dialog":Fe("beforetoggle",r),Fe("toggle",r),Fe("cancel",r),Fe("close",r);break;case"iframe":case"object":Fe("load",r);break;case"video":case"audio":for(c=0;c<lu.length;c++)Fe(lu[c],r);break;case"image":Fe("error",r),Fe("load",r);break;case"details":Fe("toggle",r);break;case"embed":case"source":case"link":Fe("error",r),Fe("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(K in l)if(l.hasOwnProperty(K)&&(c=l[K],c!=null))switch(K){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,o));default:ot(r,o,K,c,l,null)}return;default:if(Qo(o)){for(ee in l)l.hasOwnProperty(ee)&&(c=l[ee],c!==void 0&&nm(r,o,ee,c,l,void 0));return}}for(I in l)l.hasOwnProperty(I)&&(c=l[I],c!=null&&ot(r,o,I,c,l,null))}function MR(r,o,l,c){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,_=null,w=null,I=null,L=null,K=null,ee=null;for(Z in l){var ie=l[Z];if(l.hasOwnProperty(Z)&&ie!=null)switch(Z){case"checked":break;case"value":break;case"defaultValue":L=ie;default:c.hasOwnProperty(Z)||ot(r,o,Z,null,c,ie)}}for(var Q in c){var Z=c[Q];if(ie=l[Q],c.hasOwnProperty(Q)&&(Z!=null||ie!=null))switch(Q){case"type":_=Z;break;case"name":y=Z;break;case"checked":K=Z;break;case"defaultChecked":ee=Z;break;case"value":w=Z;break;case"defaultValue":I=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(i(137,o));break;default:Z!==ie&&ot(r,o,Q,Z,c,ie)}}Yo(r,w,I,L,K,ee,_,y);return;case"select":Z=w=I=Q=null;for(_ in l)if(L=l[_],l.hasOwnProperty(_)&&L!=null)switch(_){case"value":break;case"multiple":Z=L;default:c.hasOwnProperty(_)||ot(r,o,_,null,c,L)}for(y in c)if(_=c[y],L=l[y],c.hasOwnProperty(y)&&(_!=null||L!=null))switch(y){case"value":Q=_;break;case"defaultValue":I=_;break;case"multiple":w=_;default:_!==L&&ot(r,o,y,_,c,L)}o=I,l=w,c=Z,Q!=null?zr(r,!!l,Q,!1):!!c!=!!l&&(o!=null?zr(r,!!l,o,!0):zr(r,!!l,l?[]:"",!1));return;case"textarea":Z=Q=null;for(I in l)if(y=l[I],l.hasOwnProperty(I)&&y!=null&&!c.hasOwnProperty(I))switch(I){case"value":break;case"children":break;default:ot(r,o,I,null,c,y)}for(w in c)if(y=c[w],_=l[w],c.hasOwnProperty(w)&&(y!=null||_!=null))switch(w){case"value":Q=y;break;case"defaultValue":Z=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(i(91));break;default:y!==_&&ot(r,o,w,y,c,_)}Ac(r,Q,Z);return;case"option":for(var ye in l)if(Q=l[ye],l.hasOwnProperty(ye)&&Q!=null&&!c.hasOwnProperty(ye))switch(ye){case"selected":r.selected=!1;break;default:ot(r,o,ye,null,c,Q)}for(L in c)if(Q=c[L],Z=l[L],c.hasOwnProperty(L)&&Q!==Z&&(Q!=null||Z!=null))switch(L){case"selected":r.selected=Q&&typeof Q!="function"&&typeof Q!="symbol";break;default:ot(r,o,L,Q,c,Z)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Se in l)Q=l[Se],l.hasOwnProperty(Se)&&Q!=null&&!c.hasOwnProperty(Se)&&ot(r,o,Se,null,c,Q);for(K in c)if(Q=c[K],Z=l[K],c.hasOwnProperty(K)&&Q!==Z&&(Q!=null||Z!=null))switch(K){case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(i(137,o));break;default:ot(r,o,K,Q,c,Z)}return;default:if(Qo(o)){for(var at in l)Q=l[at],l.hasOwnProperty(at)&&Q!==void 0&&!c.hasOwnProperty(at)&&nm(r,o,at,void 0,c,Q);for(ee in c)Q=c[ee],Z=l[ee],!c.hasOwnProperty(ee)||Q===Z||Q===void 0&&Z===void 0||nm(r,o,ee,Q,c,Z);return}}for(var $ in l)Q=l[$],l.hasOwnProperty($)&&Q!=null&&!c.hasOwnProperty($)&&ot(r,o,$,null,c,Q);for(ie in c)Q=c[ie],Z=l[ie],!c.hasOwnProperty(ie)||Q===Z||Q==null&&Z==null||ot(r,o,ie,Q,c,Z)}function J0(r){switch(r){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function DR(){if(typeof performance.getEntriesByType=="function"){for(var r=0,o=0,l=performance.getEntriesByType("resource"),c=0;c<l.length;c++){var y=l[c],_=y.transferSize,w=y.initiatorType,I=y.duration;if(_&&I&&J0(w)){for(w=0,I=y.responseEnd,c+=1;c<l.length;c++){var L=l[c],K=L.startTime;if(K>I)break;var ee=L.transferSize,ie=L.initiatorType;ee&&J0(ie)&&(L=L.responseEnd,w+=ee*(L<I?1:(I-K)/(L-K)))}if(--c,o+=8*(_+w)/(y.duration/1e3),r++,10<r)break}}if(0<r)return o/r/1e6}return navigator.connection&&(r=navigator.connection.downlink,typeof r=="number")?r:5}var im=null,rm=null;function Cd(r){return r.nodeType===9?r:r.ownerDocument}function K0(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Y0(r,o){if(r===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&o==="foreignObject"?0:r}function sm(r,o){return r==="textarea"||r==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var om=null;function PR(){var r=window.event;return r&&r.type==="popstate"?r===om?!1:(om=r,!0):(om=null,!1)}var Q0=typeof setTimeout=="function"?setTimeout:void 0,kR=typeof clearTimeout=="function"?clearTimeout:void 0,X0=typeof Promise=="function"?Promise:void 0,VR=typeof queueMicrotask=="function"?queueMicrotask:typeof X0<"u"?function(r){return X0.resolve(null).then(r).catch(LR)}:Q0;function LR(r){setTimeout(function(){throw r})}function hs(r){return r==="head"}function W0(r,o){var l=o,c=0;do{var y=l.nextSibling;if(r.removeChild(l),y&&y.nodeType===8)if(l=y.data,l==="/$"||l==="/&"){if(c===0){r.removeChild(y),Ma(o);return}c--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")c++;else if(l==="html")cu(r.ownerDocument.documentElement);else if(l==="head"){l=r.ownerDocument.head,cu(l);for(var _=l.firstChild;_;){var w=_.nextSibling,I=_.nodeName;_[ki]||I==="SCRIPT"||I==="STYLE"||I==="LINK"&&_.rel.toLowerCase()==="stylesheet"||l.removeChild(_),_=w}}else l==="body"&&cu(r.ownerDocument.body);l=y}while(l);Ma(o)}function Z0(r,o){var l=r;r=0;do{var c=l.nextSibling;if(l.nodeType===1?o?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(o?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),c&&c.nodeType===8)if(l=c.data,l==="/$"){if(r===0)break;r--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||r++;l=c}while(l)}function am(r){var o=r.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var l=o;switch(o=o.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":am(l),Jo(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}r.removeChild(l)}}function UR(r,o,l,c){for(;r.nodeType===1;){var y=l;if(r.nodeName.toLowerCase()!==o.toLowerCase()){if(!c&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(c){if(!r[ki])switch(o){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(_=r.getAttribute("rel"),_==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(_!==y.rel||r.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||r.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||r.getAttribute("title")!==(y.title==null?null:y.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(_=r.getAttribute("src"),(_!==(y.src==null?null:y.src)||r.getAttribute("type")!==(y.type==null?null:y.type)||r.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&_&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(o==="input"&&r.type==="hidden"){var _=y.name==null?null:""+y.name;if(y.type==="hidden"&&r.getAttribute("name")===_)return r}else return r;if(r=Wn(r.nextSibling),r===null)break}return null}function OR(r,o,l){if(o==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!l||(r=Wn(r.nextSibling),r===null))return null;return r}function eE(r,o){for(;r.nodeType!==8;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!o||(r=Wn(r.nextSibling),r===null))return null;return r}function lm(r){return r.data==="$?"||r.data==="$~"}function um(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState!=="loading"}function FR(r,o){var l=r.ownerDocument;if(r.data==="$~")r._reactRetry=o;else if(r.data!=="$?"||l.readyState!=="loading")o();else{var c=function(){o(),l.removeEventListener("DOMContentLoaded",c)};l.addEventListener("DOMContentLoaded",c),r._reactRetry=c}}function Wn(r){for(;r!=null;r=r.nextSibling){var o=r.nodeType;if(o===1||o===3)break;if(o===8){if(o=r.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return r}var cm=null;function tE(r){r=r.nextSibling;for(var o=0;r;){if(r.nodeType===8){var l=r.data;if(l==="/$"||l==="/&"){if(o===0)return Wn(r.nextSibling);o--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||o++}r=r.nextSibling}return null}function nE(r){r=r.previousSibling;for(var o=0;r;){if(r.nodeType===8){var l=r.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(o===0)return r;o--}else l!=="/$"&&l!=="/&"||o++}r=r.previousSibling}return null}function iE(r,o,l){switch(o=Cd(l),r){case"html":if(r=o.documentElement,!r)throw Error(i(452));return r;case"head":if(r=o.head,!r)throw Error(i(453));return r;case"body":if(r=o.body,!r)throw Error(i(454));return r;default:throw Error(i(451))}}function cu(r){for(var o=r.attributes;o.length;)r.removeAttributeNode(o[0]);Jo(r)}var Zn=new Map,rE=new Set;function Id(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var xr=ue.d;ue.d={f:qR,r:HR,D:BR,C:zR,L:GR,m:$R,X:JR,S:jR,M:KR};function qR(){var r=xr.f(),o=vd();return r||o}function HR(r){var o=Bn(r);o!==null&&o.tag===5&&o.type==="form"?T_(o):xr.r(r)}var ba=typeof document>"u"?null:document;function sE(r,o,l){var c=ba;if(c&&typeof o=="string"&&o){var y=_n(o);y='link[rel="'+r+'"][href="'+y+'"]',typeof l=="string"&&(y+='[crossorigin="'+l+'"]'),rE.has(y)||(rE.add(y),r={rel:r,crossOrigin:l,href:o},c.querySelector(y)===null&&(o=c.createElement("link"),en(o,"link",r),Rt(o),c.head.appendChild(o)))}}function BR(r){xr.D(r),sE("dns-prefetch",r,null)}function zR(r,o){xr.C(r,o),sE("preconnect",r,o)}function GR(r,o,l){xr.L(r,o,l);var c=ba;if(c&&r&&o){var y='link[rel="preload"][as="'+_n(o)+'"]';o==="image"&&l&&l.imageSrcSet?(y+='[imagesrcset="'+_n(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(y+='[imagesizes="'+_n(l.imageSizes)+'"]')):y+='[href="'+_n(r)+'"]';var _=y;switch(o){case"style":_=Ra(r);break;case"script":_=Na(r)}Zn.has(_)||(r=E({rel:"preload",href:o==="image"&&l&&l.imageSrcSet?void 0:r,as:o},l),Zn.set(_,r),c.querySelector(y)!==null||o==="style"&&c.querySelector(du(_))||o==="script"&&c.querySelector(fu(_))||(o=c.createElement("link"),en(o,"link",r),Rt(o),c.head.appendChild(o)))}}function $R(r,o){xr.m(r,o);var l=ba;if(l&&r){var c=o&&typeof o.as=="string"?o.as:"script",y='link[rel="modulepreload"][as="'+_n(c)+'"][href="'+_n(r)+'"]',_=y;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=Na(r)}if(!Zn.has(_)&&(r=E({rel:"modulepreload",href:r},o),Zn.set(_,r),l.querySelector(y)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(fu(_)))return}c=l.createElement("link"),en(c,"link",r),Rt(c),l.head.appendChild(c)}}}function jR(r,o,l){xr.S(r,o,l);var c=ba;if(c&&r){var y=Li(c).hoistableStyles,_=Ra(r);o=o||"default";var w=y.get(_);if(!w){var I={loading:0,preload:null};if(w=c.querySelector(du(_)))I.loading=5;else{r=E({rel:"stylesheet",href:r,"data-precedence":o},l),(l=Zn.get(_))&&dm(r,l);var L=w=c.createElement("link");Rt(L),en(L,"link",r),L._p=new Promise(function(K,ee){L.onload=K,L.onerror=ee}),L.addEventListener("load",function(){I.loading|=1}),L.addEventListener("error",function(){I.loading|=2}),I.loading|=4,bd(w,o,c)}w={type:"stylesheet",instance:w,count:1,state:I},y.set(_,w)}}}function JR(r,o){xr.X(r,o);var l=ba;if(l&&r){var c=Li(l).hoistableScripts,y=Na(r),_=c.get(y);_||(_=l.querySelector(fu(y)),_||(r=E({src:r,async:!0},o),(o=Zn.get(y))&&fm(r,o),_=l.createElement("script"),Rt(_),en(_,"link",r),l.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},c.set(y,_))}}function KR(r,o){xr.M(r,o);var l=ba;if(l&&r){var c=Li(l).hoistableScripts,y=Na(r),_=c.get(y);_||(_=l.querySelector(fu(y)),_||(r=E({src:r,async:!0,type:"module"},o),(o=Zn.get(y))&&fm(r,o),_=l.createElement("script"),Rt(_),en(_,"link",r),l.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},c.set(y,_))}}function oE(r,o,l,c){var y=(y=Ve.current)?Id(y):null;if(!y)throw Error(i(446));switch(r){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(o=Ra(l.href),l=Li(y).hoistableStyles,c=l.get(o),c||(c={type:"style",instance:null,count:0,state:null},l.set(o,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){r=Ra(l.href);var _=Li(y).hoistableStyles,w=_.get(r);if(w||(y=y.ownerDocument||y,w={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(r,w),(_=y.querySelector(du(r)))&&!_._p&&(w.instance=_,w.state.loading=5),Zn.has(r)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Zn.set(r,l),_||YR(y,r,l,w.state))),o&&c===null)throw Error(i(528,""));return w}if(o&&c!==null)throw Error(i(529,""));return null;case"script":return o=l.async,l=l.src,typeof l=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=Na(l),l=Li(y).hoistableScripts,c=l.get(o),c||(c={type:"script",instance:null,count:0,state:null},l.set(o,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,r))}}function Ra(r){return'href="'+_n(r)+'"'}function du(r){return'link[rel="stylesheet"]['+r+"]"}function aE(r){return E({},r,{"data-precedence":r.precedence,precedence:null})}function YR(r,o,l,c){r.querySelector('link[rel="preload"][as="style"]['+o+"]")?c.loading=1:(o=r.createElement("link"),c.preload=o,o.addEventListener("load",function(){return c.loading|=1}),o.addEventListener("error",function(){return c.loading|=2}),en(o,"link",l),Rt(o),r.head.appendChild(o))}function Na(r){return'[src="'+_n(r)+'"]'}function fu(r){return"script[async]"+r}function lE(r,o,l){if(o.count++,o.instance===null)switch(o.type){case"style":var c=r.querySelector('style[data-href~="'+_n(l.href)+'"]');if(c)return o.instance=c,Rt(c),c;var y=E({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return c=(r.ownerDocument||r).createElement("style"),Rt(c),en(c,"style",y),bd(c,l.precedence,r),o.instance=c;case"stylesheet":y=Ra(l.href);var _=r.querySelector(du(y));if(_)return o.state.loading|=4,o.instance=_,Rt(_),_;c=aE(l),(y=Zn.get(y))&&dm(c,y),_=(r.ownerDocument||r).createElement("link"),Rt(_);var w=_;return w._p=new Promise(function(I,L){w.onload=I,w.onerror=L}),en(_,"link",c),o.state.loading|=4,bd(_,l.precedence,r),o.instance=_;case"script":return _=Na(l.src),(y=r.querySelector(fu(_)))?(o.instance=y,Rt(y),y):(c=l,(y=Zn.get(_))&&(c=E({},l),fm(c,y)),r=r.ownerDocument||r,y=r.createElement("script"),Rt(y),en(y,"link",c),r.head.appendChild(y),o.instance=y);case"void":return null;default:throw Error(i(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(c=o.instance,o.state.loading|=4,bd(c,l.precedence,r));return o.instance}function bd(r,o,l){for(var c=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=c.length?c[c.length-1]:null,_=y,w=0;w<c.length;w++){var I=c[w];if(I.dataset.precedence===o)_=I;else if(_!==y)break}_?_.parentNode.insertBefore(r,_.nextSibling):(o=l.nodeType===9?l.head:l,o.insertBefore(r,o.firstChild))}function dm(r,o){r.crossOrigin==null&&(r.crossOrigin=o.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=o.referrerPolicy),r.title==null&&(r.title=o.title)}function fm(r,o){r.crossOrigin==null&&(r.crossOrigin=o.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=o.referrerPolicy),r.integrity==null&&(r.integrity=o.integrity)}var Rd=null;function uE(r,o,l){if(Rd===null){var c=new Map,y=Rd=new Map;y.set(l,c)}else y=Rd,c=y.get(l),c||(c=new Map,y.set(l,c));if(c.has(r))return c;for(c.set(r,null),l=l.getElementsByTagName(r),y=0;y<l.length;y++){var _=l[y];if(!(_[ki]||_[bt]||r==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var w=_.getAttribute(o)||"";w=r+w;var I=c.get(w);I?I.push(_):c.set(w,[_])}}return c}function cE(r,o,l){r=r.ownerDocument||r,r.head.insertBefore(l,o==="title"?r.querySelector("head > title"):null)}function QR(r,o,l){if(l===1||o.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return r=o.disabled,typeof o.precedence=="string"&&r==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function dE(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}function XR(r,o,l,c){if(l.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var y=Ra(c.href),_=o.querySelector(du(y));if(_){o=_._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(r.count++,r=Nd.bind(r),o.then(r,r)),l.state.loading|=4,l.instance=_,Rt(_);return}_=o.ownerDocument||o,c=aE(c),(y=Zn.get(y))&&dm(c,y),_=_.createElement("link"),Rt(_);var w=_;w._p=new Promise(function(I,L){w.onload=I,w.onerror=L}),en(_,"link",c),l.instance=_}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(l,o),(o=l.state.preload)&&(l.state.loading&3)===0&&(r.count++,l=Nd.bind(r),o.addEventListener("load",l),o.addEventListener("error",l))}}var hm=0;function WR(r,o){return r.stylesheets&&r.count===0&&Dd(r,r.stylesheets),0<r.count||0<r.imgCount?function(l){var c=setTimeout(function(){if(r.stylesheets&&Dd(r,r.stylesheets),r.unsuspend){var _=r.unsuspend;r.unsuspend=null,_()}},6e4+o);0<r.imgBytes&&hm===0&&(hm=62500*DR());var y=setTimeout(function(){if(r.waitingForImages=!1,r.count===0&&(r.stylesheets&&Dd(r,r.stylesheets),r.unsuspend)){var _=r.unsuspend;r.unsuspend=null,_()}},(r.imgBytes>hm?50:800)+o);return r.unsuspend=l,function(){r.unsuspend=null,clearTimeout(c),clearTimeout(y)}}:null}function Nd(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Dd(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var Md=null;function Dd(r,o){r.stylesheets=null,r.unsuspend!==null&&(r.count++,Md=new Map,o.forEach(ZR,r),Md=null,Nd.call(r))}function ZR(r,o){if(!(o.state.loading&4)){var l=Md.get(r);if(l)var c=l.get(null);else{l=new Map,Md.set(r,l);for(var y=r.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<y.length;_++){var w=y[_];(w.nodeName==="LINK"||w.getAttribute("media")!=="not all")&&(l.set(w.dataset.precedence,w),c=w)}c&&l.set(null,c)}y=o.instance,w=y.getAttribute("data-precedence"),_=l.get(w)||c,_===c&&l.set(null,y),l.set(w,y),this.count++,c=Nd.bind(this),y.addEventListener("load",c),y.addEventListener("error",c),_?_.parentNode.insertBefore(y,_.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(y,r.firstChild)),o.state.loading|=4}}var hu={$$typeof:H,Provider:null,Consumer:null,_currentValue:_e,_currentValue2:_e,_threadCount:0};function e1(r,o,l,c,y,_,w,I,L){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Di(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Di(0),this.hiddenUpdates=Di(null),this.identifierPrefix=c,this.onUncaughtError=y,this.onCaughtError=_,this.onRecoverableError=w,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=L,this.incompleteTransitions=new Map}function fE(r,o,l,c,y,_,w,I,L,K,ee,ie){return r=new e1(r,o,l,w,L,K,ee,ie,I),o=1,_===!0&&(o|=24),_=Mn(3,null,null,o),r.current=_,_.stateNode=r,o=jh(),o.refCount++,r.pooledCache=o,o.refCount++,_.memoizedState={element:c,isDehydrated:l,cache:o},Qh(_),r}function hE(r){return r?(r=aa,r):aa}function pE(r,o,l,c,y,_){y=hE(y),c.context===null?c.context=y:c.pendingContext=y,c=ns(o),c.payload={element:l},_=_===void 0?null:_,_!==null&&(c.callback=_),l=is(r,c,o),l!==null&&(xn(l,r,o),$l(l,r,o))}function mE(r,o){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var l=r.retryLane;r.retryLane=l!==0&&l<o?l:o}}function pm(r,o){mE(r,o),(r=r.alternate)&&mE(r,o)}function gE(r){if(r.tag===13||r.tag===31){var o=ao(r,67108864);o!==null&&xn(o,r,67108864),pm(r,67108864)}}function yE(r){if(r.tag===13||r.tag===31){var o=Ln();o=Ys(o);var l=ao(r,o);l!==null&&xn(l,r,o),pm(r,o)}}var Pd=!0;function t1(r,o,l,c){var y=Y.T;Y.T=null;var _=ue.p;try{ue.p=2,mm(r,o,l,c)}finally{ue.p=_,Y.T=y}}function n1(r,o,l,c){var y=Y.T;Y.T=null;var _=ue.p;try{ue.p=8,mm(r,o,l,c)}finally{ue.p=_,Y.T=y}}function mm(r,o,l,c){if(Pd){var y=gm(c);if(y===null)tm(r,o,c,kd,l),_E(r,c);else if(r1(y,r,o,l,c))c.stopPropagation();else if(_E(r,c),o&4&&-1<i1.indexOf(r)){for(;y!==null;){var _=Bn(y);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var w=Ni(_.pendingLanes);if(w!==0){var I=_;for(I.pendingLanes|=2,I.entangledLanes|=2;w;){var L=1<<31-Et(w);I.entanglements[1]|=L,w&=~L}Yi(_),(We&6)===0&&(gd=fn()+500,au(0))}}break;case 31:case 13:I=ao(_,2),I!==null&&xn(I,_,2),vd(),pm(_,2)}if(_=gm(c),_===null&&tm(r,o,c,kd,l),_===y)break;y=_}y!==null&&c.stopPropagation()}else tm(r,o,c,null,l)}}function gm(r){return r=zn(r),ym(r)}var kd=null;function ym(r){if(kd=null,r=Vi(r),r!==null){var o=a(r);if(o===null)r=null;else{var l=o.tag;if(l===13){if(r=u(o),r!==null)return r;r=null}else if(l===31){if(r=d(o),r!==null)return r;r=null}else if(l===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;r=null}else o!==r&&(r=null)}}return kd=r,null}function vE(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch($s()){case gl:return 2;case yl:return 8;case Hr:case Ah:return 32;case fc:return 268435456;default:return 32}default:return 32}}var vm=!1,ps=null,ms=null,gs=null,pu=new Map,mu=new Map,ys=[],i1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function _E(r,o){switch(r){case"focusin":case"focusout":ps=null;break;case"dragenter":case"dragleave":ms=null;break;case"mouseover":case"mouseout":gs=null;break;case"pointerover":case"pointerout":pu.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":mu.delete(o.pointerId)}}function gu(r,o,l,c,y,_){return r===null||r.nativeEvent!==_?(r={blockedOn:o,domEventName:l,eventSystemFlags:c,nativeEvent:_,targetContainers:[y]},o!==null&&(o=Bn(o),o!==null&&gE(o)),r):(r.eventSystemFlags|=c,o=r.targetContainers,y!==null&&o.indexOf(y)===-1&&o.push(y),r)}function r1(r,o,l,c,y){switch(o){case"focusin":return ps=gu(ps,r,o,l,c,y),!0;case"dragenter":return ms=gu(ms,r,o,l,c,y),!0;case"mouseover":return gs=gu(gs,r,o,l,c,y),!0;case"pointerover":var _=y.pointerId;return pu.set(_,gu(pu.get(_)||null,r,o,l,c,y)),!0;case"gotpointercapture":return _=y.pointerId,mu.set(_,gu(mu.get(_)||null,r,o,l,c,y)),!0}return!1}function EE(r){var o=Vi(r.target);if(o!==null){var l=a(o);if(l!==null){if(o=l.tag,o===13){if(o=u(l),o!==null){r.blockedOn=o,li(r.priority,function(){yE(l)});return}}else if(o===31){if(o=d(l),o!==null){r.blockedOn=o,li(r.priority,function(){yE(l)});return}}else if(o===3&&l.stateNode.current.memoizedState.isDehydrated){r.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Vd(r){if(r.blockedOn!==null)return!1;for(var o=r.targetContainers;0<o.length;){var l=gm(r.nativeEvent);if(l===null){l=r.nativeEvent;var c=new l.constructor(l.type,l);Rl=c,l.target.dispatchEvent(c),Rl=null}else return o=Bn(l),o!==null&&gE(o),r.blockedOn=l,!1;o.shift()}return!0}function TE(r,o,l){Vd(r)&&l.delete(o)}function s1(){vm=!1,ps!==null&&Vd(ps)&&(ps=null),ms!==null&&Vd(ms)&&(ms=null),gs!==null&&Vd(gs)&&(gs=null),pu.forEach(TE),mu.forEach(TE)}function Ld(r,o){r.blockedOn===o&&(r.blockedOn=null,vm||(vm=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,s1)))}var Ud=null;function SE(r){Ud!==r&&(Ud=r,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Ud===r&&(Ud=null);for(var o=0;o<r.length;o+=3){var l=r[o],c=r[o+1],y=r[o+2];if(typeof c!="function"){if(ym(c||l)===null)continue;break}var _=Bn(l);_!==null&&(r.splice(o,3),o-=3,gp(_,{pending:!0,data:y,method:l.method,action:c},c,y))}}))}function Ma(r){function o(L){return Ld(L,r)}ps!==null&&Ld(ps,r),ms!==null&&Ld(ms,r),gs!==null&&Ld(gs,r),pu.forEach(o),mu.forEach(o);for(var l=0;l<ys.length;l++){var c=ys[l];c.blockedOn===r&&(c.blockedOn=null)}for(;0<ys.length&&(l=ys[0],l.blockedOn===null);)EE(l),l.blockedOn===null&&ys.shift();if(l=(r.ownerDocument||r).$$reactFormReplay,l!=null)for(c=0;c<l.length;c+=3){var y=l[c],_=l[c+1],w=y[Gt]||null;if(typeof _=="function")w||SE(l);else if(w){var I=null;if(_&&_.hasAttribute("formAction")){if(y=_,w=_[Gt]||null)I=w.formAction;else if(ym(y)!==null)continue}else I=w.action;typeof I=="function"?l[c+1]=I:(l.splice(c,3),c-=3),SE(l)}}}function AE(){function r(_){_.canIntercept&&_.info==="react-transition"&&_.intercept({handler:function(){return new Promise(function(w){return y=w})},focusReset:"manual",scroll:"manual"})}function o(){y!==null&&(y(),y=null),c||setTimeout(l,20)}function l(){if(!c&&!navigation.transition){var _=navigation.currentEntry;_&&_.url!=null&&navigation.navigate(_.url,{state:_.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,y=null;return navigation.addEventListener("navigate",r),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(l,100),function(){c=!0,navigation.removeEventListener("navigate",r),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),y!==null&&(y(),y=null)}}}function _m(r){this._internalRoot=r}Od.prototype.render=_m.prototype.render=function(r){var o=this._internalRoot;if(o===null)throw Error(i(409));var l=o.current,c=Ln();pE(l,c,r,o,null,null)},Od.prototype.unmount=_m.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var o=r.containerInfo;pE(r.current,2,null,r,null,null),vd(),o[Pi]=null}};function Od(r){this._internalRoot=r}Od.prototype.unstable_scheduleHydration=function(r){if(r){var o=vc();r={blockedOn:null,target:r,priority:o};for(var l=0;l<ys.length&&o!==0&&o<ys[l].priority;l++);ys.splice(l,0,r),l===0&&EE(r)}};var wE=e.version;if(wE!=="19.2.3")throw Error(i(527,wE,"19.2.3"));ue.findDOMNode=function(r){var o=r._reactInternals;if(o===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=h(o),r=r!==null?v(r):null,r=r===null?null:r.stateNode,r};var o1={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:Y,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Fd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Fd.isDisabled&&Fd.supportsFiber)try{oi=Fd.inject(o1),Yt=Fd}catch{}}return vu.createRoot=function(r,o){if(!s(r))throw Error(i(299));var l=!1,c="",y=M_,_=D_,w=P_;return o!=null&&(o.unstable_strictMode===!0&&(l=!0),o.identifierPrefix!==void 0&&(c=o.identifierPrefix),o.onUncaughtError!==void 0&&(y=o.onUncaughtError),o.onCaughtError!==void 0&&(_=o.onCaughtError),o.onRecoverableError!==void 0&&(w=o.onRecoverableError)),o=fE(r,1,!1,null,null,l,c,null,y,_,w,AE),r[Pi]=o.current,em(r),new _m(o)},vu.hydrateRoot=function(r,o,l){if(!s(r))throw Error(i(299));var c=!1,y="",_=M_,w=D_,I=P_,L=null;return l!=null&&(l.unstable_strictMode===!0&&(c=!0),l.identifierPrefix!==void 0&&(y=l.identifierPrefix),l.onUncaughtError!==void 0&&(_=l.onUncaughtError),l.onCaughtError!==void 0&&(w=l.onCaughtError),l.onRecoverableError!==void 0&&(I=l.onRecoverableError),l.formState!==void 0&&(L=l.formState)),o=fE(r,1,!0,o,l??null,c,y,L,_,w,I,AE),o.context=hE(null),l=o.current,c=Ln(),c=Ys(c),y=ns(c),y.callback=null,is(l,y,c),l=c,o.current.lanes=l,Js(o,l),Yi(o),r[Pi]=o.current,em(r),new Od(o)},vu.version="19.2.3",vu}var kE;function g1(){if(kE)return Sm.exports;kE=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Sm.exports=m1(),Sm.exports}var y1=g1();const v1=cw(y1);/**
 * react-router v7.11.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var VE="popstate";function _1(t={}){function e(s,a){let{pathname:u="/",search:d="",hash:p=""}=Po(s.location.hash.substring(1));return!u.startsWith("/")&&!u.startsWith(".")&&(u="/"+u),Ym("",{pathname:u,search:d,hash:p},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(s,a){let u=s.document.querySelector("base"),d="";if(u&&u.getAttribute("href")){let p=s.location.href,h=p.indexOf("#");d=h===-1?p:p.slice(0,h)}return d+"#"+(typeof a=="string"?a:Lu(a))}function i(s,a){qn(s.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(a)})`)}return T1(e,n,i,t)}function gt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function qn(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function E1(){return Math.random().toString(36).substring(2,10)}function LE(t,e){return{usr:t.state,key:t.key,idx:e}}function Ym(t,e,n=null,i){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Po(e):e,state:n,key:e&&e.key||i||E1()}}function Lu({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Po(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substring(i),t=t.substring(0,i)),t&&(e.pathname=t)}return e}function T1(t,e,n,i={}){let{window:s=document.defaultView,v5Compat:a=!1}=i,u=s.history,d="POP",p=null,h=v();h==null&&(h=0,u.replaceState({...u.state,idx:h},""));function v(){return(u.state||{idx:null}).idx}function E(){d="POP";let P=v(),q=P==null?null:P-h;h=P,p&&p({action:d,location:U.location,delta:q})}function S(P,q){d="PUSH";let X=Ym(U.location,P,q);n&&n(X,P),h=v()+1;let H=LE(X,h),ne=U.createHref(X);try{u.pushState(H,"",ne)}catch(le){if(le instanceof DOMException&&le.name==="DataCloneError")throw le;s.location.assign(ne)}a&&p&&p({action:d,location:U.location,delta:1})}function C(P,q){d="REPLACE";let X=Ym(U.location,P,q);n&&n(X,P),h=v();let H=LE(X,h),ne=U.createHref(X);u.replaceState(H,"",ne),a&&p&&p({action:d,location:U.location,delta:0})}function D(P){return S1(P)}let U={get action(){return d},get location(){return t(s,u)},listen(P){if(p)throw new Error("A history only accepts one active listener");return s.addEventListener(VE,E),p=P,()=>{s.removeEventListener(VE,E),p=null}},createHref(P){return e(s,P)},createURL:D,encodeLocation(P){let q=D(P);return{pathname:q.pathname,search:q.search,hash:q.hash}},push:S,replace:C,go(P){return u.go(P)}};return U}function S1(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),gt(n,"No window.location.(origin|href) available to create URL");let i=typeof t=="string"?t:Lu(t);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=n+i),new URL(i,n)}function fw(t,e,n="/"){return A1(t,e,n,!1)}function A1(t,e,n,i){let s=typeof e=="string"?Po(e):e,a=Mr(s.pathname||"/",n);if(a==null)return null;let u=hw(t);w1(u);let d=null;for(let p=0;d==null&&p<u.length;++p){let h=V1(a);d=P1(u[p],h,i)}return d}function hw(t,e=[],n=[],i="",s=!1){let a=(u,d,p=s,h)=>{let v={relativePath:h===void 0?u.path||"":h,caseSensitive:u.caseSensitive===!0,childrenIndex:d,route:u};if(v.relativePath.startsWith("/")){if(!v.relativePath.startsWith(i)&&p)return;gt(v.relativePath.startsWith(i),`Absolute route path "${v.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),v.relativePath=v.relativePath.slice(i.length)}let E=Rr([i,v.relativePath]),S=n.concat(v);u.children&&u.children.length>0&&(gt(u.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${E}".`),hw(u.children,e,S,E,p)),!(u.path==null&&!u.index)&&e.push({path:E,score:M1(E,u.index),routesMeta:S})};return t.forEach((u,d)=>{var p;if(u.path===""||!((p=u.path)!=null&&p.includes("?")))a(u,d);else for(let h of pw(u.path))a(u,d,!0,h)}),e}function pw(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,s=n.endsWith("?"),a=n.replace(/\?$/,"");if(i.length===0)return s?[a,""]:[a];let u=pw(i.join("/")),d=[];return d.push(...u.map(p=>p===""?a:[a,p].join("/"))),s&&d.push(...u),d.map(p=>t.startsWith("/")&&p===""?"/":p)}function w1(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:D1(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}var x1=/^:[\w-]+$/,C1=3,I1=2,b1=1,R1=10,N1=-2,UE=t=>t==="*";function M1(t,e){let n=t.split("/"),i=n.length;return n.some(UE)&&(i+=N1),e&&(i+=I1),n.filter(s=>!UE(s)).reduce((s,a)=>s+(x1.test(a)?C1:a===""?b1:R1),i)}function D1(t,e){return t.length===e.length&&t.slice(0,-1).every((i,s)=>i===e[s])?t[t.length-1]-e[e.length-1]:0}function P1(t,e,n=!1){let{routesMeta:i}=t,s={},a="/",u=[];for(let d=0;d<i.length;++d){let p=i[d],h=d===i.length-1,v=a==="/"?e:e.slice(a.length)||"/",E=gf({path:p.relativePath,caseSensitive:p.caseSensitive,end:h},v),S=p.route;if(!E&&h&&n&&!i[i.length-1].route.index&&(E=gf({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},v)),!E)return null;Object.assign(s,E.params),u.push({params:s,pathname:Rr([a,E.pathname]),pathnameBase:F1(Rr([a,E.pathnameBase])),route:S}),E.pathnameBase!=="/"&&(a=Rr([a,E.pathnameBase]))}return u}function gf(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=k1(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let a=s[0],u=a.replace(/(.)\/+$/,"$1"),d=s.slice(1);return{params:i.reduce((h,{paramName:v,isOptional:E},S)=>{if(v==="*"){let D=d[S]||"";u=a.slice(0,a.length-D.length).replace(/(.)\/+$/,"$1")}const C=d[S];return E&&!C?h[v]=void 0:h[v]=(C||"").replace(/%2F/g,"/"),h},{}),pathname:a,pathnameBase:u,pattern:t}}function k1(t,e=!1,n=!0){qn(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let i=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,d,p)=>(i.push({paramName:d,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(i.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),i]}function V1(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return qn(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Mr(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}var mw=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,L1=t=>mw.test(t);function U1(t,e="/"){let{pathname:n,search:i="",hash:s=""}=typeof t=="string"?Po(t):t,a;if(n)if(L1(n))a=n;else{if(n.includes("//")){let u=n;n=n.replace(/\/\/+/g,"/"),qn(!1,`Pathnames cannot have embedded double slashes - normalizing ${u} -> ${n}`)}n.startsWith("/")?a=OE(n.substring(1),"/"):a=OE(n,e)}else a=e;return{pathname:a,search:q1(i),hash:H1(s)}}function OE(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Cm(t,e,n,i){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function O1(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function gw(t){let e=O1(t);return e.map((n,i)=>i===e.length-1?n.pathname:n.pathnameBase)}function yw(t,e,n,i=!1){let s;typeof t=="string"?s=Po(t):(s={...t},gt(!s.pathname||!s.pathname.includes("?"),Cm("?","pathname","search",s)),gt(!s.pathname||!s.pathname.includes("#"),Cm("#","pathname","hash",s)),gt(!s.search||!s.search.includes("#"),Cm("#","search","hash",s)));let a=t===""||s.pathname==="",u=a?"/":s.pathname,d;if(u==null)d=n;else{let E=e.length-1;if(!i&&u.startsWith("..")){let S=u.split("/");for(;S[0]==="..";)S.shift(),E-=1;s.pathname=S.join("/")}d=E>=0?e[E]:"/"}let p=U1(s,d),h=u&&u!=="/"&&u.endsWith("/"),v=(a||u===".")&&n.endsWith("/");return!p.pathname.endsWith("/")&&(h||v)&&(p.pathname+="/"),p}var Rr=t=>t.join("/").replace(/\/\/+/g,"/"),F1=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),q1=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,H1=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,B1=class{constructor(t,e,n,i=!1){this.status=t,this.statusText=e||"",this.internal=i,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function z1(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}function G1(t){return t.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var vw=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function _w(t,e){let n=t;if(typeof n!="string"||!mw.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let i=n,s=!1;if(vw)try{let a=new URL(window.location.href),u=n.startsWith("//")?new URL(a.protocol+n):new URL(n),d=Mr(u.pathname,e);u.origin===a.origin&&d!=null?n=d+u.search+u.hash:s=!0}catch{qn(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:i,isExternal:s,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Ew=["POST","PUT","PATCH","DELETE"];new Set(Ew);var $1=["GET",...Ew];new Set($1);var tl=G.createContext(null);tl.displayName="DataRouter";var zf=G.createContext(null);zf.displayName="DataRouterState";var j1=G.createContext(!1),Tw=G.createContext({isTransitioning:!1});Tw.displayName="ViewTransition";var J1=G.createContext(new Map);J1.displayName="Fetchers";var K1=G.createContext(null);K1.displayName="Await";var si=G.createContext(null);si.displayName="Navigation";var Qu=G.createContext(null);Qu.displayName="Location";var or=G.createContext({outlet:null,matches:[],isDataRoute:!1});or.displayName="Route";var Bg=G.createContext(null);Bg.displayName="RouteError";var Sw="REACT_ROUTER_ERROR",Y1="REDIRECT",Q1="ROUTE_ERROR_RESPONSE";function X1(t){if(t.startsWith(`${Sw}:${Y1}:{`))try{let e=JSON.parse(t.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function W1(t){if(t.startsWith(`${Sw}:${Q1}:{`))try{let e=JSON.parse(t.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new B1(e.status,e.statusText,e.data)}catch{}}function Z1(t,{relative:e}={}){gt(Xu(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:i}=G.useContext(si),{hash:s,pathname:a,search:u}=Wu(t,{relative:e}),d=a;return n!=="/"&&(d=a==="/"?n:Rr([n,a])),i.createHref({pathname:d,search:u,hash:s})}function Xu(){return G.useContext(Qu)!=null}function Ur(){return gt(Xu(),"useLocation() may be used only in the context of a <Router> component."),G.useContext(Qu).location}var Aw="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function ww(t){G.useContext(si).static||G.useLayoutEffect(t)}function Us(){let{isDataRoute:t}=G.useContext(or);return t?hN():eN()}function eN(){gt(Xu(),"useNavigate() may be used only in the context of a <Router> component.");let t=G.useContext(tl),{basename:e,navigator:n}=G.useContext(si),{matches:i}=G.useContext(or),{pathname:s}=Ur(),a=JSON.stringify(gw(i)),u=G.useRef(!1);return ww(()=>{u.current=!0}),G.useCallback((p,h={})=>{if(qn(u.current,Aw),!u.current)return;if(typeof p=="number"){n.go(p);return}let v=yw(p,JSON.parse(a),s,h.relative==="path");t==null&&e!=="/"&&(v.pathname=v.pathname==="/"?e:Rr([e,v.pathname])),(h.replace?n.replace:n.push)(v,h.state,h)},[e,n,a,s,t])}G.createContext(null);function tN(){let{matches:t}=G.useContext(or),e=t[t.length-1];return e?e.params:{}}function Wu(t,{relative:e}={}){let{matches:n}=G.useContext(or),{pathname:i}=Ur(),s=JSON.stringify(gw(n));return G.useMemo(()=>yw(t,JSON.parse(s),i,e==="path"),[t,s,i,e])}function nN(t,e){return xw(t,e)}function xw(t,e,n,i,s){var X;gt(Xu(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=G.useContext(si),{matches:u}=G.useContext(or),d=u[u.length-1],p=d?d.params:{},h=d?d.pathname:"/",v=d?d.pathnameBase:"/",E=d&&d.route;{let H=E&&E.path||"";Iw(h,!E||H.endsWith("*")||H.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${H}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${H}"> to <Route path="${H==="/"?"*":`${H}/*`}">.`)}let S=Ur(),C;if(e){let H=typeof e=="string"?Po(e):e;gt(v==="/"||((X=H.pathname)==null?void 0:X.startsWith(v)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${v}" but pathname "${H.pathname}" was given in the \`location\` prop.`),C=H}else C=S;let D=C.pathname||"/",U=D;if(v!=="/"){let H=v.replace(/^\//,"").split("/");U="/"+D.replace(/^\//,"").split("/").slice(H.length).join("/")}let P=fw(t,{pathname:U});qn(E||P!=null,`No routes matched location "${C.pathname}${C.search}${C.hash}" `),qn(P==null||P[P.length-1].route.element!==void 0||P[P.length-1].route.Component!==void 0||P[P.length-1].route.lazy!==void 0,`Matched leaf route at location "${C.pathname}${C.search}${C.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let q=aN(P&&P.map(H=>Object.assign({},H,{params:Object.assign({},p,H.params),pathname:Rr([v,a.encodeLocation?a.encodeLocation(H.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:H.pathname]),pathnameBase:H.pathnameBase==="/"?v:Rr([v,a.encodeLocation?a.encodeLocation(H.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:H.pathnameBase])})),u,n,i,s);return e&&q?G.createElement(Qu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...C},navigationType:"POP"}},q):q}function iN(){let t=fN(),e=z1(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:i},a={padding:"2px 4px",backgroundColor:i},u=null;return console.error("Error handled by React Router default ErrorBoundary:",t),u=G.createElement(G.Fragment,null,G.createElement("p",null," Hey developer "),G.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",G.createElement("code",{style:a},"ErrorBoundary")," or"," ",G.createElement("code",{style:a},"errorElement")," prop on your route.")),G.createElement(G.Fragment,null,G.createElement("h2",null,"Unexpected Application Error!"),G.createElement("h3",{style:{fontStyle:"italic"}},e),n?G.createElement("pre",{style:s},n):null,u)}var rN=G.createElement(iN,null),Cw=class extends G.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){let t=this.state.error;if(this.context&&typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){const n=W1(t.digest);n&&(t=n)}let e=t!==void 0?G.createElement(or.Provider,{value:this.props.routeContext},G.createElement(Bg.Provider,{value:t,children:this.props.component})):this.props.children;return this.context?G.createElement(sN,{error:t},e):e}};Cw.contextType=j1;var Im=new WeakMap;function sN({children:t,error:e}){let{basename:n}=G.useContext(si);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let i=X1(e.digest);if(i){let s=Im.get(e);if(s)throw s;let a=_w(i.location,n);if(vw&&!Im.get(e))if(a.isExternal||i.reloadDocument)window.location.href=a.absoluteURL||a.to;else{const u=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(a.to,{replace:i.replace}));throw Im.set(e,u),u}return G.createElement("meta",{httpEquiv:"refresh",content:`0;url=${a.absoluteURL||a.to}`})}}return t}function oN({routeContext:t,match:e,children:n}){let i=G.useContext(tl);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),G.createElement(or.Provider,{value:t},n)}function aN(t,e=[],n=null,i=null,s=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,u=n==null?void 0:n.errors;if(u!=null){let v=a.findIndex(E=>E.route.id&&(u==null?void 0:u[E.route.id])!==void 0);gt(v>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),a=a.slice(0,Math.min(a.length,v+1))}let d=!1,p=-1;if(n)for(let v=0;v<a.length;v++){let E=a[v];if((E.route.HydrateFallback||E.route.hydrateFallbackElement)&&(p=v),E.route.id){let{loaderData:S,errors:C}=n,D=E.route.loader&&!S.hasOwnProperty(E.route.id)&&(!C||C[E.route.id]===void 0);if(E.route.lazy||D){d=!0,p>=0?a=a.slice(0,p+1):a=[a[0]];break}}}let h=n&&i?(v,E)=>{var S,C;i(v,{location:n.location,params:((C=(S=n.matches)==null?void 0:S[0])==null?void 0:C.params)??{},unstable_pattern:G1(n.matches),errorInfo:E})}:void 0;return a.reduceRight((v,E,S)=>{let C,D=!1,U=null,P=null;n&&(C=u&&E.route.id?u[E.route.id]:void 0,U=E.route.errorElement||rN,d&&(p<0&&S===0?(Iw("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),D=!0,P=null):p===S&&(D=!0,P=E.route.hydrateFallbackElement||null)));let q=e.concat(a.slice(0,S+1)),X=()=>{let H;return C?H=U:D?H=P:E.route.Component?H=G.createElement(E.route.Component,null):E.route.element?H=E.route.element:H=v,G.createElement(oN,{match:E,routeContext:{outlet:v,matches:q,isDataRoute:n!=null},children:H})};return n&&(E.route.ErrorBoundary||E.route.errorElement||S===0)?G.createElement(Cw,{location:n.location,revalidation:n.revalidation,component:U,error:C,children:X(),routeContext:{outlet:null,matches:q,isDataRoute:!0},onError:h}):X()},null)}function zg(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function lN(t){let e=G.useContext(tl);return gt(e,zg(t)),e}function uN(t){let e=G.useContext(zf);return gt(e,zg(t)),e}function cN(t){let e=G.useContext(or);return gt(e,zg(t)),e}function Gg(t){let e=cN(t),n=e.matches[e.matches.length-1];return gt(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function dN(){return Gg("useRouteId")}function fN(){var i;let t=G.useContext(Bg),e=uN("useRouteError"),n=Gg("useRouteError");return t!==void 0?t:(i=e.errors)==null?void 0:i[n]}function hN(){let{router:t}=lN("useNavigate"),e=Gg("useNavigate"),n=G.useRef(!1);return ww(()=>{n.current=!0}),G.useCallback(async(s,a={})=>{qn(n.current,Aw),n.current&&(typeof s=="number"?await t.navigate(s):await t.navigate(s,{fromRouteId:e,...a}))},[t,e])}var FE={};function Iw(t,e,n){!e&&!FE[t]&&(FE[t]=!0,qn(!1,n))}G.memo(pN);function pN({routes:t,future:e,state:n,onError:i}){return xw(t,void 0,n,i,e)}function Un(t){gt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function mN({basename:t="/",children:e=null,location:n,navigationType:i="POP",navigator:s,static:a=!1,unstable_useTransitions:u}){gt(!Xu(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let d=t.replace(/^\/*/,"/"),p=G.useMemo(()=>({basename:d,navigator:s,static:a,unstable_useTransitions:u,future:{}}),[d,s,a,u]);typeof n=="string"&&(n=Po(n));let{pathname:h="/",search:v="",hash:E="",state:S=null,key:C="default"}=n,D=G.useMemo(()=>{let U=Mr(h,d);return U==null?null:{location:{pathname:U,search:v,hash:E,state:S,key:C},navigationType:i}},[d,h,v,E,S,C,i]);return qn(D!=null,`<Router basename="${d}"> is not able to match the URL "${h}${v}${E}" because it does not start with the basename, so the <Router> won't render anything.`),D==null?null:G.createElement(si.Provider,{value:p},G.createElement(Qu.Provider,{children:e,value:D}))}function gN({children:t,location:e}){return nN(Qm(t),e)}function Qm(t,e=[]){let n=[];return G.Children.forEach(t,(i,s)=>{if(!G.isValidElement(i))return;let a=[...e,s];if(i.type===G.Fragment){n.push.apply(n,Qm(i.props.children,a));return}gt(i.type===Un,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),gt(!i.props.index||!i.props.children,"An index route cannot have child routes.");let u={id:i.props.id||a.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(u.children=Qm(i.props.children,a)),n.push(u)}),n}var tf="get",nf="application/x-www-form-urlencoded";function Gf(t){return typeof HTMLElement<"u"&&t instanceof HTMLElement}function yN(t){return Gf(t)&&t.tagName.toLowerCase()==="button"}function vN(t){return Gf(t)&&t.tagName.toLowerCase()==="form"}function _N(t){return Gf(t)&&t.tagName.toLowerCase()==="input"}function EN(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function TN(t,e){return t.button===0&&(!e||e==="_self")&&!EN(t)}function Xm(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let i=t[n];return e.concat(Array.isArray(i)?i.map(s=>[n,s]):[[n,i]])},[]))}function SN(t,e){let n=Xm(t);return e&&e.forEach((i,s)=>{n.has(s)||e.getAll(s).forEach(a=>{n.append(s,a)})}),n}var qd=null;function AN(){if(qd===null)try{new FormData(document.createElement("form"),0),qd=!1}catch{qd=!0}return qd}var wN=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function bm(t){return t!=null&&!wN.has(t)?(qn(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${nf}"`),null):t}function xN(t,e){let n,i,s,a,u;if(vN(t)){let d=t.getAttribute("action");i=d?Mr(d,e):null,n=t.getAttribute("method")||tf,s=bm(t.getAttribute("enctype"))||nf,a=new FormData(t)}else if(yN(t)||_N(t)&&(t.type==="submit"||t.type==="image")){let d=t.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=t.getAttribute("formaction")||d.getAttribute("action");if(i=p?Mr(p,e):null,n=t.getAttribute("formmethod")||d.getAttribute("method")||tf,s=bm(t.getAttribute("formenctype"))||bm(d.getAttribute("enctype"))||nf,a=new FormData(d,t),!AN()){let{name:h,type:v,value:E}=t;if(v==="image"){let S=h?`${h}.`:"";a.append(`${S}x`,"0"),a.append(`${S}y`,"0")}else h&&a.append(h,E)}}else{if(Gf(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=tf,i=null,s=nf,u=t}return a&&s==="text/plain"&&(u=a,a=void 0),{action:i,method:n.toLowerCase(),encType:s,formData:a,body:u}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function $g(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function CN(t,e,n){let i=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return i.pathname==="/"?i.pathname=`_root.${n}`:e&&Mr(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${n}`,i}async function IN(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function bN(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function RN(t,e,n){let i=await Promise.all(t.map(async s=>{let a=e.routes[s.route.id];if(a){let u=await IN(a,n);return u.links?u.links():[]}return[]}));return PN(i.flat(1).filter(bN).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function qE(t,e,n,i,s,a){let u=(p,h)=>n[h]?p.route.id!==n[h].route.id:!0,d=(p,h)=>{var v;return n[h].pathname!==p.pathname||((v=n[h].route.path)==null?void 0:v.endsWith("*"))&&n[h].params["*"]!==p.params["*"]};return a==="assets"?e.filter((p,h)=>u(p,h)||d(p,h)):a==="data"?e.filter((p,h)=>{var E;let v=i.routes[p.route.id];if(!v||!v.hasLoader)return!1;if(u(p,h)||d(p,h))return!0;if(p.route.shouldRevalidate){let S=p.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((E=n[0])==null?void 0:E.params)||{},nextUrl:new URL(t,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof S=="boolean")return S}return!0}):[]}function NN(t,e,{includeHydrateFallback:n}={}){return MN(t.map(i=>{let s=e.routes[i.route.id];if(!s)return[];let a=[s.module];return s.clientActionModule&&(a=a.concat(s.clientActionModule)),s.clientLoaderModule&&(a=a.concat(s.clientLoaderModule)),n&&s.hydrateFallbackModule&&(a=a.concat(s.hydrateFallbackModule)),s.imports&&(a=a.concat(s.imports)),a}).flat(1))}function MN(t){return[...new Set(t)]}function DN(t){let e={},n=Object.keys(t).sort();for(let i of n)e[i]=t[i];return e}function PN(t,e){let n=new Set;return new Set(e),t.reduce((i,s)=>{let a=JSON.stringify(DN(s));return n.has(a)||(n.add(a),i.push({key:a,link:s})),i},[])}function bw(){let t=G.useContext(tl);return $g(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function kN(){let t=G.useContext(zf);return $g(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var jg=G.createContext(void 0);jg.displayName="FrameworkContext";function Rw(){let t=G.useContext(jg);return $g(t,"You must render this element inside a <HydratedRouter> element"),t}function VN(t,e){let n=G.useContext(jg),[i,s]=G.useState(!1),[a,u]=G.useState(!1),{onFocus:d,onBlur:p,onMouseEnter:h,onMouseLeave:v,onTouchStart:E}=e,S=G.useRef(null);G.useEffect(()=>{if(t==="render"&&u(!0),t==="viewport"){let U=q=>{q.forEach(X=>{u(X.isIntersecting)})},P=new IntersectionObserver(U,{threshold:.5});return S.current&&P.observe(S.current),()=>{P.disconnect()}}},[t]),G.useEffect(()=>{if(i){let U=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(U)}}},[i]);let C=()=>{s(!0)},D=()=>{s(!1),u(!1)};return n?t!=="intent"?[a,S,{}]:[a,S,{onFocus:_u(d,C),onBlur:_u(p,D),onMouseEnter:_u(h,C),onMouseLeave:_u(v,D),onTouchStart:_u(E,C)}]:[!1,S,{}]}function _u(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function LN({page:t,...e}){let{router:n}=bw(),i=G.useMemo(()=>fw(n.routes,t,n.basename),[n.routes,t,n.basename]);return i?G.createElement(ON,{page:t,matches:i,...e}):null}function UN(t){let{manifest:e,routeModules:n}=Rw(),[i,s]=G.useState([]);return G.useEffect(()=>{let a=!1;return RN(t,e,n).then(u=>{a||s(u)}),()=>{a=!0}},[t,e,n]),i}function ON({page:t,matches:e,...n}){let i=Ur(),{manifest:s,routeModules:a}=Rw(),{basename:u}=bw(),{loaderData:d,matches:p}=kN(),h=G.useMemo(()=>qE(t,e,p,s,i,"data"),[t,e,p,s,i]),v=G.useMemo(()=>qE(t,e,p,s,i,"assets"),[t,e,p,s,i]),E=G.useMemo(()=>{if(t===i.pathname+i.search+i.hash)return[];let D=new Set,U=!1;if(e.forEach(q=>{var H;let X=s.routes[q.route.id];!X||!X.hasLoader||(!h.some(ne=>ne.route.id===q.route.id)&&q.route.id in d&&((H=a[q.route.id])!=null&&H.shouldRevalidate)||X.hasClientLoader?U=!0:D.add(q.route.id))}),D.size===0)return[];let P=CN(t,u,"data");return U&&D.size>0&&P.searchParams.set("_routes",e.filter(q=>D.has(q.route.id)).map(q=>q.route.id).join(",")),[P.pathname+P.search]},[u,d,i,s,h,e,t,a]),S=G.useMemo(()=>NN(v,s),[v,s]),C=UN(v);return G.createElement(G.Fragment,null,E.map(D=>G.createElement("link",{key:D,rel:"prefetch",as:"fetch",href:D,...n})),S.map(D=>G.createElement("link",{key:D,rel:"modulepreload",href:D,...n})),C.map(({key:D,link:U})=>G.createElement("link",{key:D,nonce:n.nonce,...U})))}function FN(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var qN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{qN&&(window.__reactRouterVersion="7.11.0")}catch{}function HN({basename:t,children:e,unstable_useTransitions:n,window:i}){let s=G.useRef();s.current==null&&(s.current=_1({window:i,v5Compat:!0}));let a=s.current,[u,d]=G.useState({action:a.action,location:a.location}),p=G.useCallback(h=>{n===!1?d(h):G.startTransition(()=>d(h))},[n]);return G.useLayoutEffect(()=>a.listen(p),[a,p]),G.createElement(mN,{basename:t,children:e,location:u.location,navigationType:u.action,navigator:a,unstable_useTransitions:n})}var Nw=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,it=G.forwardRef(function({onClick:e,discover:n="render",prefetch:i="none",relative:s,reloadDocument:a,replace:u,state:d,target:p,to:h,preventScrollReset:v,viewTransition:E,unstable_defaultShouldRevalidate:S,...C},D){let{basename:U,unstable_useTransitions:P}=G.useContext(si),q=typeof h=="string"&&Nw.test(h),X=_w(h,U);h=X.to;let H=Z1(h,{relative:s}),[ne,le,ce]=VN(i,C),N=$N(h,{replace:u,state:d,target:p,preventScrollReset:v,relative:s,viewTransition:E,unstable_defaultShouldRevalidate:S,unstable_useTransitions:P});function M(V){e&&e(V),V.defaultPrevented||N(V)}let R=G.createElement("a",{...C,...ce,href:X.absoluteURL||H,onClick:X.isExternal||a?e:M,ref:FN(D,le),target:p,"data-discover":!q&&n==="render"?"true":void 0});return ne&&!q?G.createElement(G.Fragment,null,R,G.createElement(LN,{page:H})):R});it.displayName="Link";var BN=G.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:i="",end:s=!1,style:a,to:u,viewTransition:d,children:p,...h},v){let E=Wu(u,{relative:h.relative}),S=Ur(),C=G.useContext(zf),{navigator:D,basename:U}=G.useContext(si),P=C!=null&&XN(E)&&d===!0,q=D.encodeLocation?D.encodeLocation(E).pathname:E.pathname,X=S.pathname,H=C&&C.navigation&&C.navigation.location?C.navigation.location.pathname:null;n||(X=X.toLowerCase(),H=H?H.toLowerCase():null,q=q.toLowerCase()),H&&U&&(H=Mr(H,U)||H);const ne=q!=="/"&&q.endsWith("/")?q.length-1:q.length;let le=X===q||!s&&X.startsWith(q)&&X.charAt(ne)==="/",ce=H!=null&&(H===q||!s&&H.startsWith(q)&&H.charAt(q.length)==="/"),N={isActive:le,isPending:ce,isTransitioning:P},M=le?e:void 0,R;typeof i=="function"?R=i(N):R=[i,le?"active":null,ce?"pending":null,P?"transitioning":null].filter(Boolean).join(" ");let V=typeof a=="function"?a(N):a;return G.createElement(it,{...h,"aria-current":M,className:R,ref:v,style:V,to:u,viewTransition:d},typeof p=="function"?p(N):p)});BN.displayName="NavLink";var zN=G.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:i,replace:s,state:a,method:u=tf,action:d,onSubmit:p,relative:h,preventScrollReset:v,viewTransition:E,unstable_defaultShouldRevalidate:S,...C},D)=>{let{unstable_useTransitions:U}=G.useContext(si),P=YN(),q=QN(d,{relative:h}),X=u.toLowerCase()==="get"?"get":"post",H=typeof d=="string"&&Nw.test(d),ne=le=>{if(p&&p(le),le.defaultPrevented)return;le.preventDefault();let ce=le.nativeEvent.submitter,N=(ce==null?void 0:ce.getAttribute("formmethod"))||u,M=()=>P(ce||le.currentTarget,{fetcherKey:e,method:N,navigate:n,replace:s,state:a,relative:h,preventScrollReset:v,viewTransition:E,unstable_defaultShouldRevalidate:S});U&&n!==!1?G.startTransition(()=>M()):M()};return G.createElement("form",{ref:D,method:X,action:q,onSubmit:i?p:ne,...C,"data-discover":!H&&t==="render"?"true":void 0})});zN.displayName="Form";function GN(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Mw(t){let e=G.useContext(tl);return gt(e,GN(t)),e}function $N(t,{target:e,replace:n,state:i,preventScrollReset:s,relative:a,viewTransition:u,unstable_defaultShouldRevalidate:d,unstable_useTransitions:p}={}){let h=Us(),v=Ur(),E=Wu(t,{relative:a});return G.useCallback(S=>{if(TN(S,e)){S.preventDefault();let C=n!==void 0?n:Lu(v)===Lu(E),D=()=>h(t,{replace:C,state:i,preventScrollReset:s,relative:a,viewTransition:u,unstable_defaultShouldRevalidate:d});p?G.startTransition(()=>D()):D()}},[v,h,E,n,i,e,t,s,a,u,d,p])}function jN(t){qn(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=G.useRef(Xm(t)),n=G.useRef(!1),i=Ur(),s=G.useMemo(()=>SN(i.search,n.current?null:e.current),[i.search]),a=Us(),u=G.useCallback((d,p)=>{const h=Xm(typeof d=="function"?d(new URLSearchParams(s)):d);n.current=!0,a("?"+h,p)},[a,s]);return[s,u]}var JN=0,KN=()=>`__${String(++JN)}__`;function YN(){let{router:t}=Mw("useSubmit"),{basename:e}=G.useContext(si),n=dN(),i=t.fetch,s=t.navigate;return G.useCallback(async(a,u={})=>{let{action:d,method:p,encType:h,formData:v,body:E}=xN(a,e);if(u.navigate===!1){let S=u.fetcherKey||KN();await i(S,n,u.action||d,{unstable_defaultShouldRevalidate:u.unstable_defaultShouldRevalidate,preventScrollReset:u.preventScrollReset,formData:v,body:E,formMethod:u.method||p,formEncType:u.encType||h,flushSync:u.flushSync})}else await s(u.action||d,{unstable_defaultShouldRevalidate:u.unstable_defaultShouldRevalidate,preventScrollReset:u.preventScrollReset,formData:v,body:E,formMethod:u.method||p,formEncType:u.encType||h,replace:u.replace,state:u.state,fromRouteId:n,flushSync:u.flushSync,viewTransition:u.viewTransition})},[i,s,e,n])}function QN(t,{relative:e}={}){let{basename:n}=G.useContext(si),i=G.useContext(or);gt(i,"useFormAction must be used inside a RouteContext");let[s]=i.matches.slice(-1),a={...Wu(t||".",{relative:e})},u=Ur();if(t==null){a.search=u.search;let d=new URLSearchParams(a.search),p=d.getAll("index");if(p.some(v=>v==="")){d.delete("index"),p.filter(E=>E).forEach(E=>d.append("index",E));let v=d.toString();a.search=v?`?${v}`:""}}return(!t||t===".")&&s.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(a.pathname=a.pathname==="/"?n:Rr([n,a.pathname])),Lu(a)}function XN(t,{relative:e}={}){let n=G.useContext(Tw);gt(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=Mw("useViewTransitionState"),s=Wu(t,{relative:e});if(!n.isTransitioning)return!1;let a=Mr(n.currentLocation.pathname,i)||n.currentLocation.pathname,u=Mr(n.nextLocation.pathname,i)||n.nextLocation.pathname;return gf(s.pathname,u)!=null||gf(s.pathname,a)!=null}/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WN=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),ZN=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,i)=>i?i.toUpperCase():n.toLowerCase()),HE=t=>{const e=ZN(t);return e.charAt(0).toUpperCase()+e.slice(1)},Dw=(...t)=>t.filter((e,n,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===n).join(" ").trim(),e2=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var t2={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n2=G.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:s="",children:a,iconNode:u,...d},p)=>G.createElement("svg",{ref:p,...t2,width:e,height:e,stroke:t,strokeWidth:i?Number(n)*24/Number(e):n,className:Dw("lucide",s),...!a&&!e2(d)&&{"aria-hidden":"true"},...d},[...u.map(([h,v])=>G.createElement(h,v)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=(t,e)=>{const n=G.forwardRef(({className:i,...s},a)=>G.createElement(n2,{ref:a,iconNode:e,className:Dw(`lucide-${WN(HE(t))}`,`lucide-${t}`,i),...s}));return n.displayName=HE(t),n};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i2=[["path",{d:"M12 6.528V3a1 1 0 0 1 1-1h0",key:"11qiee"}],["path",{d:"M18.237 21A15 15 0 0 0 22 11a6 6 0 0 0-10-4.472A6 6 0 0 0 2 11a15.1 15.1 0 0 0 3.763 10 3 3 0 0 0 3.648.648 5.5 5.5 0 0 1 5.178 0A3 3 0 0 0 18.237 21",key:"110c12"}]],r2=xe("apple",i2);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s2=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Pw=xe("arrow-left",s2);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o2=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],kw=xe("arrow-right",o2);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a2=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],BE=xe("check",a2);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l2=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],u2=xe("chevron-left",l2);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c2=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],d2=xe("chevron-right",c2);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f2=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],h2=xe("circle-alert",f2);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p2=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Vw=xe("circle-check",p2);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m2=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Jg=xe("eye-off",m2);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g2=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Kg=xe("eye",g2);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y2=[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]],v2=xe("facebook",y2);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _2=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],E2=xe("funnel",_2);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T2=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],S2=xe("heart",T2);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A2=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],Hd=xe("image",A2);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w2=[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]],x2=xe("instagram",w2);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C2=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],I2=xe("layout-dashboard",C2);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b2=[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]],Uu=xe("leaf",b2);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R2=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Ru=xe("loader-circle",R2);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N2=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Ou=xe("lock",N2);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M2=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],D2=xe("log-in",M2);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P2=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Lw=xe("log-out",P2);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k2=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Yg=xe("mail",k2);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V2=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],L2=xe("map-pin",V2);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U2=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],O2=xe("menu",U2);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F2=[["path",{d:"M14 14a2 2 0 0 0 2-2V8h-2",key:"1r06pg"}],["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}],["path",{d:"M8 14a2 2 0 0 0 2-2V8H8",key:"1jzu5j"}]],q2=xe("message-square-quote",F2);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H2=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M16.95 16.95A7 7 0 0 1 5 12v-2",key:"cqa7eg"}],["path",{d:"M18.89 13.23A7 7 0 0 0 19 12v-2",key:"16hl24"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}]],B2=xe("mic-off",H2);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z2=[["path",{d:"M5 12h14",key:"1ays0h"}]],G2=xe("minus",z2);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $2=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],Uw=xe("monitor",$2);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j2=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],Ow=xe("package",j2);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J2=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Fw=xe("pen",J2);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K2=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],qw=xe("phone",K2);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y2=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Hw=xe("plus",Y2);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q2=[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]],X2=xe("quote",Q2);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W2=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Z2=xe("search",W2);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eM=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],tM=xe("send",eM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nM=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],iM=xe("shield-check",nM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rM=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Bw=xe("shield",rM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sM=[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]],zw=xe("shopping-bag",sM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oM=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],zE=xe("shopping-cart",oM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aM=[["path",{d:"M14 9.536V7a4 4 0 0 1 4-4h1.5a.5.5 0 0 1 .5.5V5a4 4 0 0 1-4 4 4 4 0 0 0-4 4c0 2 1 3 1 5a5 5 0 0 1-1 3",key:"139s4v"}],["path",{d:"M4 9a5 5 0 0 1 8 4 5 5 0 0 1-8-4",key:"1dlkgp"}],["path",{d:"M5 21h14",key:"11awu3"}]],lM=xe("sprout",aM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uM=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Gw=xe("star",uM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cM=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Qg=xe("trash-2",cM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dM=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],fM=xe("truck",dM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hM=[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]],pM=xe("twitter",hM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mM=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],gM=xe("user-plus",mM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yM=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],$w=xe("user",yM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vM=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],GE=xe("users",vM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _M=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Xg=xe("x",_M),ko=()=>{const[t,e]=G.useState(()=>{const p=localStorage.getItem("himalayan_cart");return p?JSON.parse(p):[]});G.useEffect(()=>{localStorage.setItem("himalayan_cart",JSON.stringify(t))},[t]);const n=(p,h)=>{e(v=>v.find(S=>S.product.id===p.id)?v.map(S=>S.product.id===p.id?{...S,quantity:S.quantity+h}:S):[...v,{product:p,quantity:h}])},i=p=>{e(h=>h.filter(v=>v.product.id!==p))},s=(p,h)=>{e(v=>v.map(E=>E.product.id===p?{...E,quantity:Math.max(1,h)}:E))},a=()=>e([]),u=t.reduce((p,h)=>p+h.quantity,0),d=t.reduce((p,h)=>p+h.product.price*h.quantity,0);return{cart:t,addToCart:n,removeFromCart:i,updateQuantity:s,clearCart:a,totalItems:u,totalPrice:d}};var EM={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let TM,SM;function AM(){return{geminiUrl:TM,vertexUrl:SM}}function wM(t,e,n,i){var s,a;if(!(t!=null&&t.baseUrl)){const u=AM();return e?(s=u.vertexUrl)!==null&&s!==void 0?s:n:(a=u.geminiUrl)!==null&&a!==void 0?a:i}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Or{}function he(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(i,s)=>{if(Object.prototype.hasOwnProperty.call(e,s)){const a=e[s];return a!=null?String(a):""}else throw new Error(`Key '${s}' not found in valueMap.`)})}function m(t,e,n){for(let a=0;a<e.length-1;a++){const u=e[a];if(u.endsWith("[]")){const d=u.slice(0,-2);if(!(d in t))if(Array.isArray(n))t[d]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${u}`);if(Array.isArray(t[d])){const p=t[d];if(Array.isArray(n))for(let h=0;h<p.length;h++){const v=p[h];m(v,e.slice(a+1),n[h])}else for(const h of p)m(h,e.slice(a+1),n)}return}else if(u.endsWith("[0]")){const d=u.slice(0,-3);d in t||(t[d]=[{}]);const p=t[d];m(p[0],e.slice(a+1),n);return}(!t[u]||typeof t[u]!="object")&&(t[u]={}),t=t[u]}const i=e[e.length-1],s=t[i];if(s!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===s)return;if(typeof s=="object"&&typeof n=="object"&&s!==null&&n!==null)Object.assign(s,n);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[i]=n}function f(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let i=0;i<e.length;i++){if(typeof t!="object"||t===null)return n;const s=e[i];if(s.endsWith("[]")){const a=s.slice(0,-2);if(a in t){const u=t[a];return Array.isArray(u)?u.map(d=>f(d,e.slice(i+1),n)):n}else return n}else t=t[s]}return t}catch(i){if(i instanceof TypeError)return n;throw i}}function xM(t,e){for(const[n,i]of Object.entries(e)){const s=n.split("."),a=i.split("."),u=new Set;let d=-1;for(let p=0;p<s.length;p++)if(s[p]==="*"){d=p;break}if(d!==-1&&a.length>d)for(let p=d;p<a.length;p++){const h=a[p];h!=="*"&&!h.endsWith("[]")&&!h.endsWith("[0]")&&u.add(h)}Wm(t,s,a,0,u)}}function Wm(t,e,n,i,s){if(i>=e.length||typeof t!="object"||t===null)return;const a=e[i];if(a.endsWith("[]")){const u=a.slice(0,-2),d=t;if(u in d&&Array.isArray(d[u]))for(const p of d[u])Wm(p,e,n,i+1,s)}else if(a==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const u=t,d=Object.keys(u).filter(h=>!h.startsWith("_")&&!s.has(h)),p={};for(const h of d)p[h]=u[h];for(const[h,v]of Object.entries(p)){const E=[];for(const S of n.slice(i))S==="*"?E.push(h):E.push(S);m(u,E,v)}for(const h of d)delete u[h]}}else{const u=t;a in u&&Wm(u[a],e,n,i+1,s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Wg(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function CM(t){const e={},n=f(t,["operationName"]);n!=null&&m(e,["operationName"],n);const i=f(t,["resourceName"]);return i!=null&&m(e,["_url","resourceName"],i),e}function IM(t){const e={},n=f(t,["name"]);n!=null&&m(e,["name"],n);const i=f(t,["metadata"]);i!=null&&m(e,["metadata"],i);const s=f(t,["done"]);s!=null&&m(e,["done"],s);const a=f(t,["error"]);a!=null&&m(e,["error"],a);const u=f(t,["response","generateVideoResponse"]);return u!=null&&m(e,["response"],RM(u)),e}function bM(t){const e={},n=f(t,["name"]);n!=null&&m(e,["name"],n);const i=f(t,["metadata"]);i!=null&&m(e,["metadata"],i);const s=f(t,["done"]);s!=null&&m(e,["done"],s);const a=f(t,["error"]);a!=null&&m(e,["error"],a);const u=f(t,["response"]);return u!=null&&m(e,["response"],NM(u)),e}function RM(t){const e={},n=f(t,["generatedSamples"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(u=>MM(u))),m(e,["generatedVideos"],a)}const i=f(t,["raiMediaFilteredCount"]);i!=null&&m(e,["raiMediaFilteredCount"],i);const s=f(t,["raiMediaFilteredReasons"]);return s!=null&&m(e,["raiMediaFilteredReasons"],s),e}function NM(t){const e={},n=f(t,["videos"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(u=>DM(u))),m(e,["generatedVideos"],a)}const i=f(t,["raiMediaFilteredCount"]);i!=null&&m(e,["raiMediaFilteredCount"],i);const s=f(t,["raiMediaFilteredReasons"]);return s!=null&&m(e,["raiMediaFilteredReasons"],s),e}function MM(t){const e={},n=f(t,["video"]);return n!=null&&m(e,["video"],OM(n)),e}function DM(t){const e={},n=f(t,["_self"]);return n!=null&&m(e,["video"],FM(n)),e}function PM(t){const e={},n=f(t,["operationName"]);return n!=null&&m(e,["_url","operationName"],n),e}function kM(t){const e={},n=f(t,["operationName"]);return n!=null&&m(e,["_url","operationName"],n),e}function VM(t){const e={},n=f(t,["name"]);n!=null&&m(e,["name"],n);const i=f(t,["metadata"]);i!=null&&m(e,["metadata"],i);const s=f(t,["done"]);s!=null&&m(e,["done"],s);const a=f(t,["error"]);a!=null&&m(e,["error"],a);const u=f(t,["response"]);return u!=null&&m(e,["response"],LM(u)),e}function LM(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const i=f(t,["parent"]);i!=null&&m(e,["parent"],i);const s=f(t,["documentName"]);return s!=null&&m(e,["documentName"],s),e}function jw(t){const e={},n=f(t,["name"]);n!=null&&m(e,["name"],n);const i=f(t,["metadata"]);i!=null&&m(e,["metadata"],i);const s=f(t,["done"]);s!=null&&m(e,["done"],s);const a=f(t,["error"]);a!=null&&m(e,["error"],a);const u=f(t,["response"]);return u!=null&&m(e,["response"],UM(u)),e}function UM(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const i=f(t,["parent"]);i!=null&&m(e,["parent"],i);const s=f(t,["documentName"]);return s!=null&&m(e,["documentName"],s),e}function OM(t){const e={},n=f(t,["uri"]);n!=null&&m(e,["uri"],n);const i=f(t,["encodedVideo"]);i!=null&&m(e,["videoBytes"],Wg(i));const s=f(t,["encoding"]);return s!=null&&m(e,["mimeType"],s),e}function FM(t){const e={},n=f(t,["gcsUri"]);n!=null&&m(e,["uri"],n);const i=f(t,["bytesBase64Encoded"]);i!=null&&m(e,["videoBytes"],Wg(i));const s=f(t,["mimeType"]);return s!=null&&m(e,["mimeType"],s),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var $E;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})($E||($E={}));var jE;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(jE||(jE={}));var JE;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(JE||(JE={}));var gn;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(gn||(gn={}));var KE;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(KE||(KE={}));var YE;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(YE||(YE={}));var QE;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(QE||(QE={}));var XE;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(XE||(XE={}));var WE;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(WE||(WE={}));var ZE;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH",t.MINIMAL="MINIMAL"})(ZE||(ZE={}));var eT;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(eT||(eT={}));var tT;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(tT||(tT={}));var nT;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(nT||(nT={}));var iT;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})(iT||(iT={}));var rT;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(rT||(rT={}));var sT;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(sT||(sT={}));var oT;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(oT||(oT={}));var aT;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(aT||(aT={}));var lT;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(lT||(lT={}));var Fu;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Fu||(Fu={}));var uT;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(uT||(uT={}));var cT;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(cT||(cT={}));var dT;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(dT||(dT={}));var Zm;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Zm||(Zm={}));var fT;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(fT||(fT={}));var hT;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",t.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(hT||(hT={}));var pT;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(pT||(pT={}));var mT;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(mT||(mT={}));var gT;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(gT||(gT={}));var yT;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(yT||(yT={}));var vT;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(vT||(vT={}));var _T;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(_T||(_T={}));var ET;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(ET||(ET={}));var TT;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(TT||(TT={}));var ST;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(ST||(ST={}));var AT;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(AT||(AT={}));var wT;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(wT||(wT={}));var xT;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(xT||(xT={}));var CT;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(CT||(CT={}));var IT;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(IT||(IT={}));var bT;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(bT||(bT={}));var RT;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(RT||(RT={}));var NT;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(NT||(NT={}));var MT;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(MT||(MT={}));var DT;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(DT||(DT={}));var PT;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(PT||(PT={}));var kT;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(kT||(kT={}));var VT;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(VT||(VT={}));var LT;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(LT||(LT={}));var UT;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(UT||(UT={}));var OT;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(OT||(OT={}));var FT;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(FT||(FT={}));var qT;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(qT||(qT={}));var HT;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(HT||(HT={}));var BT;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(BT||(BT={}));var Ua;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(Ua||(Ua={}));class eg{constructor(e){const n={};for(const i of e.headers.entries())n[i[0]]=i[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class Eu{get text(){var e,n,i,s,a,u,d,p;if(((s=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let h="",v=!1;const E=[];for(const S of(p=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)!==null&&p!==void 0?p:[]){for(const[C,D]of Object.entries(S))C!=="text"&&C!=="thought"&&C!=="thoughtSignature"&&(D!==null||D!==void 0)&&E.push(C);if(typeof S.text=="string"){if(typeof S.thought=="boolean"&&S.thought)continue;v=!0,h+=S.text}}return E.length>0&&console.warn(`there are non-text parts ${E} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),v?h:void 0}get data(){var e,n,i,s,a,u,d,p;if(((s=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let h="";const v=[];for(const E of(p=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)!==null&&p!==void 0?p:[]){for(const[S,C]of Object.entries(E))S!=="inlineData"&&(C!==null||C!==void 0)&&v.push(S);E.inlineData&&typeof E.inlineData.data=="string"&&(h+=atob(E.inlineData.data))}return v.length>0&&console.warn(`there are non-data parts ${v} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),h.length>0?btoa(h):void 0}get functionCalls(){var e,n,i,s,a,u,d,p;if(((s=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const h=(p=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||p===void 0?void 0:p.filter(v=>v.functionCall).map(v=>v.functionCall).filter(v=>v!==void 0);if((h==null?void 0:h.length)!==0)return h}get executableCode(){var e,n,i,s,a,u,d,p,h;if(((s=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const v=(p=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||p===void 0?void 0:p.filter(E=>E.executableCode).map(E=>E.executableCode).filter(E=>E!==void 0);if((v==null?void 0:v.length)!==0)return(h=v==null?void 0:v[0])===null||h===void 0?void 0:h.code}get codeExecutionResult(){var e,n,i,s,a,u,d,p,h;if(((s=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const v=(p=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||p===void 0?void 0:p.filter(E=>E.codeExecutionResult).map(E=>E.codeExecutionResult).filter(E=>E!==void 0);if((v==null?void 0:v.length)!==0)return(h=v==null?void 0:v[0])===null||h===void 0?void 0:h.output}}class zT{}class GT{}class qM{}class HM{}class BM{}class zM{}class $T{}class jT{}class JT{}class GM{}class yf{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new yf;let s;const a=e;return n?s=bM(a):s=IM(a),Object.assign(i,s),i}}class KT{}class YT{}class QT{}class XT{}class $M{}class jM{}class JM{}class Zg{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new Zg,a=VM(e);return Object.assign(i,a),i}}class KM{}class YM{}class QM{}class WT{}class XM{get text(){var e,n,i;let s="",a=!1;const u=[];for(const d of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[p,h]of Object.entries(d))p!=="text"&&p!=="thought"&&h!==null&&u.push(p);if(typeof d.text=="string"){if(typeof d.thought=="boolean"&&d.thought)continue;a=!0,s+=d.text}}return u.length>0&&console.warn(`there are non-text parts ${u} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),a?s:void 0}get data(){var e,n,i;let s="";const a=[];for(const u of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[d,p]of Object.entries(u))d!=="inlineData"&&p!==null&&a.push(d);u.inlineData&&typeof u.inlineData.data=="string"&&(s+=atob(u.inlineData.data))}return a.length>0&&console.warn(`there are non-data parts ${a} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),s.length>0?btoa(s):void 0}}class WM{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class ey{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new ey,a=jw(e);return Object.assign(i,a),i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Qe(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function Jw(t,e){const n=Qe(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function Kw(t){return Array.isArray(t)?t.map(e=>vf(e)):[vf(t)]}function vf(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function Yw(t){const e=vf(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Qw(t){const e=vf(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function ZT(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function Xw(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>ZT(e)):[ZT(t)]}function tg(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function eS(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function tS(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function cn(t){if(t==null)throw new Error("ContentUnion is required");return tg(t)?t:{role:"user",parts:Xw(t)}}function ty(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const i=cn(n);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(t.isVertexAI()){const n=cn(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>cn(n)):[cn(e)]}function ni(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(eS(t)||tS(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[cn(t)]}const e=[],n=[],i=tg(t[0]);for(const s of t){const a=tg(s);if(a!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(a)e.push(s);else{if(eS(s)||tS(s))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(s)}}return i||e.push({role:"user",parts:Xw(n)}),e}function ZM(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(i=>i!=="null");if(n.length===1)e.type=Object.values(gn).includes(n[0].toUpperCase())?n[0].toUpperCase():gn.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of n)e.anyOf.push({type:Object.values(gn).includes(i.toUpperCase())?i.toUpperCase():gn.TYPE_UNSPECIFIED})}}function qa(t){const e={},n=["items"],i=["anyOf"],s=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const a=t.anyOf;a!=null&&a.length==2&&(a[0].type==="null"?(e.nullable=!0,t=a[1]):a[1].type==="null"&&(e.nullable=!0,t=a[0])),t.type instanceof Array&&ZM(t.type,e);for(const[u,d]of Object.entries(t))if(d!=null)if(u=="type"){if(d==="null")throw new Error("type: null can not be the only possible type for the field.");if(d instanceof Array)continue;e.type=Object.values(gn).includes(d.toUpperCase())?d.toUpperCase():gn.TYPE_UNSPECIFIED}else if(n.includes(u))e[u]=qa(d);else if(i.includes(u)){const p=[];for(const h of d){if(h.type=="null"){e.nullable=!0;continue}p.push(qa(h))}e[u]=p}else if(s.includes(u)){const p={};for(const[h,v]of Object.entries(d))p[h]=qa(v);e[u]=p}else{if(u==="additionalProperties")continue;e[u]=d}return e}function ny(t){return qa(t)}function iy(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function ry(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function nl(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=qa(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=qa(e.response));return t}function il(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function eD(t,e,n,i=1){const s=!e.startsWith(`${n}/`)&&e.split("/").length===i;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:s?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:s?`${n}/${e}`:e}function Fr(t,e){if(typeof e!="string")throw new Error("name must be a string");return eD(t,e,"cachedContents")}function Ww(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function Os(t){return Wg(t)}function tD(t){return t!=null&&typeof t=="object"&&"name"in t}function nD(t){return t!=null&&typeof t=="object"&&"video"in t}function iD(t){return t!=null&&typeof t=="object"&&"uri"in t}function Zw(t){var e;let n;if(tD(t)&&(n=t.name),!(iD(t)&&(n=t.uri,n===void 0))&&!(nD(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const s=n.split("files/")[1].match(/[a-z0-9]+/);if(s===null)throw new Error(`Could not extract file name from URI ${n}`);n=s[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function ex(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function tx(t){for(const e of["models","tunedModels","publisherModels"])if(rD(t,e))return t[e];return[]}function rD(t,e){return t!==null&&typeof t=="object"&&e in t}function sD(t,e={}){const n=t,i={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(i.responseJsonSchema=n.outputSchema),e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function oD(t,e={}){const n=[],i=new Set;for(const s of t){const a=s.name;if(i.has(a))throw new Error(`Duplicate function name ${a} found in MCP tools. Please ensure function names are unique.`);i.add(a);const u=sD(s,e);u.functionDeclarations&&n.push(...u.functionDeclarations)}return{functionDeclarations:n}}function nx(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const i=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,s=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(s>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||s!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function aD(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function ix(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const s=n.inlinedResponses;if(!Array.isArray(s)||s.length===0)return t;let a=!1;for(const u of s){if(typeof u!="object"||u===null)continue;const p=u.response;if(typeof p!="object"||p===null)continue;if(p.embedding!==void 0){a=!0;break}}return a&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function rl(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function rx(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function lD(t){const e={},n=f(t,["responsesFile"]);n!=null&&m(e,["fileName"],n);const i=f(t,["inlinedResponses","inlinedResponses"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>BD(u))),m(e,["inlinedResponses"],a)}const s=f(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(u=>u)),m(e,["inlinedEmbedContentResponses"],a)}return e}function uD(t){const e={},n=f(t,["predictionsFormat"]);n!=null&&m(e,["format"],n);const i=f(t,["gcsDestination","outputUriPrefix"]);i!=null&&m(e,["gcsUri"],i);const s=f(t,["bigqueryDestination","outputUri"]);return s!=null&&m(e,["bigqueryUri"],s),e}function cD(t){const e={},n=f(t,["format"]);n!=null&&m(e,["predictionsFormat"],n);const i=f(t,["gcsUri"]);i!=null&&m(e,["gcsDestination","outputUriPrefix"],i);const s=f(t,["bigqueryUri"]);if(s!=null&&m(e,["bigqueryDestination","outputUri"],s),f(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(f(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function rf(t){const e={},n=f(t,["name"]);n!=null&&m(e,["name"],n);const i=f(t,["metadata","displayName"]);i!=null&&m(e,["displayName"],i);const s=f(t,["metadata","state"]);s!=null&&m(e,["state"],rx(s));const a=f(t,["metadata","createTime"]);a!=null&&m(e,["createTime"],a);const u=f(t,["metadata","endTime"]);u!=null&&m(e,["endTime"],u);const d=f(t,["metadata","updateTime"]);d!=null&&m(e,["updateTime"],d);const p=f(t,["metadata","model"]);p!=null&&m(e,["model"],p);const h=f(t,["metadata","output"]);return h!=null&&m(e,["dest"],lD(ix(h))),e}function ng(t){const e={},n=f(t,["name"]);n!=null&&m(e,["name"],n);const i=f(t,["displayName"]);i!=null&&m(e,["displayName"],i);const s=f(t,["state"]);s!=null&&m(e,["state"],rx(s));const a=f(t,["error"]);a!=null&&m(e,["error"],a);const u=f(t,["createTime"]);u!=null&&m(e,["createTime"],u);const d=f(t,["startTime"]);d!=null&&m(e,["startTime"],d);const p=f(t,["endTime"]);p!=null&&m(e,["endTime"],p);const h=f(t,["updateTime"]);h!=null&&m(e,["updateTime"],h);const v=f(t,["model"]);v!=null&&m(e,["model"],v);const E=f(t,["inputConfig"]);E!=null&&m(e,["src"],dD(E));const S=f(t,["outputConfig"]);S!=null&&m(e,["dest"],uD(ix(S)));const C=f(t,["completionStats"]);return C!=null&&m(e,["completionStats"],C),e}function dD(t){const e={},n=f(t,["instancesFormat"]);n!=null&&m(e,["format"],n);const i=f(t,["gcsSource","uris"]);i!=null&&m(e,["gcsUri"],i);const s=f(t,["bigquerySource","inputUri"]);return s!=null&&m(e,["bigqueryUri"],s),e}function fD(t,e){const n={};if(f(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(f(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=f(e,["fileName"]);i!=null&&m(n,["fileName"],i);const s=f(e,["inlinedRequests"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(u=>HD(t,u))),m(n,["requests","requests"],a)}return n}function hD(t){const e={},n=f(t,["format"]);n!=null&&m(e,["instancesFormat"],n);const i=f(t,["gcsUri"]);i!=null&&m(e,["gcsSource","uris"],i);const s=f(t,["bigqueryUri"]);if(s!=null&&m(e,["bigquerySource","inputUri"],s),f(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function pD(t){const e={},n=f(t,["data"]);if(n!=null&&m(e,["data"],n),f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function mD(t,e){const n={},i=f(e,["name"]);return i!=null&&m(n,["_url","name"],rl(t,i)),n}function gD(t,e){const n={},i=f(e,["name"]);return i!=null&&m(n,["_url","name"],rl(t,i)),n}function yD(t){const e={},n=f(t,["content"]);n!=null&&m(e,["content"],n);const i=f(t,["citationMetadata"]);i!=null&&m(e,["citationMetadata"],vD(i));const s=f(t,["tokenCount"]);s!=null&&m(e,["tokenCount"],s);const a=f(t,["finishReason"]);a!=null&&m(e,["finishReason"],a);const u=f(t,["avgLogprobs"]);u!=null&&m(e,["avgLogprobs"],u);const d=f(t,["groundingMetadata"]);d!=null&&m(e,["groundingMetadata"],d);const p=f(t,["index"]);p!=null&&m(e,["index"],p);const h=f(t,["logprobsResult"]);h!=null&&m(e,["logprobsResult"],h);const v=f(t,["safetyRatings"]);if(v!=null){let S=v;Array.isArray(S)&&(S=S.map(C=>C)),m(e,["safetyRatings"],S)}const E=f(t,["urlContextMetadata"]);return E!=null&&m(e,["urlContextMetadata"],E),e}function vD(t){const e={},n=f(t,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>s)),m(e,["citations"],i)}return e}function sx(t){const e={},n=f(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>YD(a))),m(e,["parts"],s)}const i=f(t,["role"]);return i!=null&&m(e,["role"],i),e}function _D(t,e){const n={},i=f(t,["displayName"]);if(e!==void 0&&i!=null&&m(e,["batch","displayName"],i),f(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function ED(t,e){const n={},i=f(t,["displayName"]);e!==void 0&&i!=null&&m(e,["displayName"],i);const s=f(t,["dest"]);return e!==void 0&&s!=null&&m(e,["outputConfig"],cD(aD(s))),n}function nS(t,e){const n={},i=f(e,["model"]);i!=null&&m(n,["_url","model"],Qe(t,i));const s=f(e,["src"]);s!=null&&m(n,["batch","inputConfig"],fD(t,nx(t,s)));const a=f(e,["config"]);return a!=null&&_D(a,n),n}function TD(t,e){const n={},i=f(e,["model"]);i!=null&&m(n,["model"],Qe(t,i));const s=f(e,["src"]);s!=null&&m(n,["inputConfig"],hD(nx(t,s)));const a=f(e,["config"]);return a!=null&&ED(a,n),n}function SD(t,e){const n={},i=f(t,["displayName"]);return e!==void 0&&i!=null&&m(e,["batch","displayName"],i),n}function AD(t,e){const n={},i=f(e,["model"]);i!=null&&m(n,["_url","model"],Qe(t,i));const s=f(e,["src"]);s!=null&&m(n,["batch","inputConfig"],ND(t,s));const a=f(e,["config"]);return a!=null&&SD(a,n),n}function wD(t,e){const n={},i=f(e,["name"]);return i!=null&&m(n,["_url","name"],rl(t,i)),n}function xD(t,e){const n={},i=f(e,["name"]);return i!=null&&m(n,["_url","name"],rl(t,i)),n}function CD(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const i=f(t,["name"]);i!=null&&m(e,["name"],i);const s=f(t,["done"]);s!=null&&m(e,["done"],s);const a=f(t,["error"]);return a!=null&&m(e,["error"],a),e}function ID(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const i=f(t,["name"]);i!=null&&m(e,["name"],i);const s=f(t,["done"]);s!=null&&m(e,["done"],s);const a=f(t,["error"]);return a!=null&&m(e,["error"],a),e}function bD(t,e){const n={},i=f(e,["contents"]);if(i!=null){let a=ty(t,i);Array.isArray(a)&&(a=a.map(u=>u)),m(n,["requests[]","request","content"],a)}const s=f(e,["config"]);return s!=null&&(m(n,["_self"],RD(s,n)),xM(n,{"requests[].*":"requests[].request.*"})),n}function RD(t,e){const n={},i=f(t,["taskType"]);e!==void 0&&i!=null&&m(e,["requests[]","taskType"],i);const s=f(t,["title"]);e!==void 0&&s!=null&&m(e,["requests[]","title"],s);const a=f(t,["outputDimensionality"]);if(e!==void 0&&a!=null&&m(e,["requests[]","outputDimensionality"],a),f(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function ND(t,e){const n={},i=f(e,["fileName"]);i!=null&&m(n,["file_name"],i);const s=f(e,["inlinedRequests"]);return s!=null&&m(n,["requests"],bD(t,s)),n}function MD(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=f(t,["fileUri"]);n!=null&&m(e,["fileUri"],n);const i=f(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function DD(t){const e={},n=f(t,["id"]);n!=null&&m(e,["id"],n);const i=f(t,["args"]);i!=null&&m(e,["args"],i);const s=f(t,["name"]);if(s!=null&&m(e,["name"],s),f(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function PD(t){const e={},n=f(t,["mode"]);n!=null&&m(e,["mode"],n);const i=f(t,["allowedFunctionNames"]);if(i!=null&&m(e,["allowedFunctionNames"],i),f(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function kD(t,e,n){const i={},s=f(e,["systemInstruction"]);n!==void 0&&s!=null&&m(n,["systemInstruction"],sx(cn(s)));const a=f(e,["temperature"]);a!=null&&m(i,["temperature"],a);const u=f(e,["topP"]);u!=null&&m(i,["topP"],u);const d=f(e,["topK"]);d!=null&&m(i,["topK"],d);const p=f(e,["candidateCount"]);p!=null&&m(i,["candidateCount"],p);const h=f(e,["maxOutputTokens"]);h!=null&&m(i,["maxOutputTokens"],h);const v=f(e,["stopSequences"]);v!=null&&m(i,["stopSequences"],v);const E=f(e,["responseLogprobs"]);E!=null&&m(i,["responseLogprobs"],E);const S=f(e,["logprobs"]);S!=null&&m(i,["logprobs"],S);const C=f(e,["presencePenalty"]);C!=null&&m(i,["presencePenalty"],C);const D=f(e,["frequencyPenalty"]);D!=null&&m(i,["frequencyPenalty"],D);const U=f(e,["seed"]);U!=null&&m(i,["seed"],U);const P=f(e,["responseMimeType"]);P!=null&&m(i,["responseMimeType"],P);const q=f(e,["responseSchema"]);q!=null&&m(i,["responseSchema"],ny(q));const X=f(e,["responseJsonSchema"]);if(X!=null&&m(i,["responseJsonSchema"],X),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const H=f(e,["safetySettings"]);if(n!==void 0&&H!=null){let k=H;Array.isArray(k)&&(k=k.map(oe=>QD(oe))),m(n,["safetySettings"],k)}const ne=f(e,["tools"]);if(n!==void 0&&ne!=null){let k=il(ne);Array.isArray(k)&&(k=k.map(oe=>WD(nl(oe)))),m(n,["tools"],k)}const le=f(e,["toolConfig"]);if(n!==void 0&&le!=null&&m(n,["toolConfig"],XD(le)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const ce=f(e,["cachedContent"]);n!==void 0&&ce!=null&&m(n,["cachedContent"],Fr(t,ce));const N=f(e,["responseModalities"]);N!=null&&m(i,["responseModalities"],N);const M=f(e,["mediaResolution"]);M!=null&&m(i,["mediaResolution"],M);const R=f(e,["speechConfig"]);if(R!=null&&m(i,["speechConfig"],iy(R)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const V=f(e,["thinkingConfig"]);V!=null&&m(i,["thinkingConfig"],V);const O=f(e,["imageConfig"]);O!=null&&m(i,["imageConfig"],qD(O));const z=f(e,["enableEnhancedCivicAnswers"]);return z!=null&&m(i,["enableEnhancedCivicAnswers"],z),i}function VD(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const i=f(t,["candidates"]);if(i!=null){let p=i;Array.isArray(p)&&(p=p.map(h=>yD(h))),m(e,["candidates"],p)}const s=f(t,["modelVersion"]);s!=null&&m(e,["modelVersion"],s);const a=f(t,["promptFeedback"]);a!=null&&m(e,["promptFeedback"],a);const u=f(t,["responseId"]);u!=null&&m(e,["responseId"],u);const d=f(t,["usageMetadata"]);return d!=null&&m(e,["usageMetadata"],d),e}function LD(t,e){const n={},i=f(e,["name"]);return i!=null&&m(n,["_url","name"],rl(t,i)),n}function UD(t,e){const n={},i=f(e,["name"]);return i!=null&&m(n,["_url","name"],rl(t,i)),n}function OD(t){const e={};if(f(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=f(t,["enableWidget"]);return n!=null&&m(e,["enableWidget"],n),e}function FD(t){const e={};if(f(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=f(t,["timeRangeFilter"]);return n!=null&&m(e,["timeRangeFilter"],n),e}function qD(t){const e={},n=f(t,["aspectRatio"]);n!=null&&m(e,["aspectRatio"],n);const i=f(t,["imageSize"]);if(i!=null&&m(e,["imageSize"],i),f(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function HD(t,e){const n={},i=f(e,["model"]);i!=null&&m(n,["request","model"],Qe(t,i));const s=f(e,["contents"]);if(s!=null){let d=ni(s);Array.isArray(d)&&(d=d.map(p=>sx(p))),m(n,["request","contents"],d)}const a=f(e,["metadata"]);a!=null&&m(n,["metadata"],a);const u=f(e,["config"]);return u!=null&&m(n,["request","generationConfig"],kD(t,u,f(n,["request"],{}))),n}function BD(t){const e={},n=f(t,["response"]);n!=null&&m(e,["response"],VD(n));const i=f(t,["error"]);return i!=null&&m(e,["error"],i),e}function zD(t,e){const n={},i=f(t,["pageSize"]);e!==void 0&&i!=null&&m(e,["_query","pageSize"],i);const s=f(t,["pageToken"]);if(e!==void 0&&s!=null&&m(e,["_query","pageToken"],s),f(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function GD(t,e){const n={},i=f(t,["pageSize"]);e!==void 0&&i!=null&&m(e,["_query","pageSize"],i);const s=f(t,["pageToken"]);e!==void 0&&s!=null&&m(e,["_query","pageToken"],s);const a=f(t,["filter"]);return e!==void 0&&a!=null&&m(e,["_query","filter"],a),n}function $D(t){const e={},n=f(t,["config"]);return n!=null&&zD(n,e),e}function jD(t){const e={},n=f(t,["config"]);return n!=null&&GD(n,e),e}function JD(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const i=f(t,["nextPageToken"]);i!=null&&m(e,["nextPageToken"],i);const s=f(t,["operations"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(u=>rf(u))),m(e,["batchJobs"],a)}return e}function KD(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const i=f(t,["nextPageToken"]);i!=null&&m(e,["nextPageToken"],i);const s=f(t,["batchPredictionJobs"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(u=>ng(u))),m(e,["batchJobs"],a)}return e}function YD(t){const e={},n=f(t,["mediaResolution"]);n!=null&&m(e,["mediaResolution"],n);const i=f(t,["codeExecutionResult"]);i!=null&&m(e,["codeExecutionResult"],i);const s=f(t,["executableCode"]);s!=null&&m(e,["executableCode"],s);const a=f(t,["fileData"]);a!=null&&m(e,["fileData"],MD(a));const u=f(t,["functionCall"]);u!=null&&m(e,["functionCall"],DD(u));const d=f(t,["functionResponse"]);d!=null&&m(e,["functionResponse"],d);const p=f(t,["inlineData"]);p!=null&&m(e,["inlineData"],pD(p));const h=f(t,["text"]);h!=null&&m(e,["text"],h);const v=f(t,["thought"]);v!=null&&m(e,["thought"],v);const E=f(t,["thoughtSignature"]);E!=null&&m(e,["thoughtSignature"],E);const S=f(t,["videoMetadata"]);return S!=null&&m(e,["videoMetadata"],S),e}function QD(t){const e={},n=f(t,["category"]);if(n!=null&&m(e,["category"],n),f(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=f(t,["threshold"]);return i!=null&&m(e,["threshold"],i),e}function XD(t){const e={},n=f(t,["functionCallingConfig"]);n!=null&&m(e,["functionCallingConfig"],PD(n));const i=f(t,["retrievalConfig"]);return i!=null&&m(e,["retrievalConfig"],i),e}function WD(t){const e={},n=f(t,["functionDeclarations"]);if(n!=null){let v=n;Array.isArray(v)&&(v=v.map(E=>E)),m(e,["functionDeclarations"],v)}if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=f(t,["googleSearchRetrieval"]);i!=null&&m(e,["googleSearchRetrieval"],i);const s=f(t,["computerUse"]);s!=null&&m(e,["computerUse"],s);const a=f(t,["fileSearch"]);a!=null&&m(e,["fileSearch"],a);const u=f(t,["codeExecution"]);if(u!=null&&m(e,["codeExecution"],u),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(t,["googleMaps"]);d!=null&&m(e,["googleMaps"],OD(d));const p=f(t,["googleSearch"]);p!=null&&m(e,["googleSearch"],FD(p));const h=f(t,["urlContext"]);return h!=null&&m(e,["urlContext"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Dr;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(Dr||(Dr={}));class Vo{constructor(e,n,i,s){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,i,s)}init(e,n,i){var s,a;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let u={config:{}};!i||Object.keys(i).length===0?u={config:{}}:typeof i=="object"?u=Object.assign({},i):u=i,u.config&&(u.config.pageToken=n.nextPageToken),this.paramsInternal=u,this.pageInternalSize=(a=(s=u.config)===null||s===void 0?void 0:s.pageSize)!==null&&a!==void 0?a:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ZD extends Or{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Vo(Dr.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(e){const n=nS(this.apiClient,e),i=n._url,s=he("{model}:batchGenerateContent",i),d=n.batch.inputConfig.requests,p=d.requests,h=[];for(const v of p){const E=Object.assign({},v);if(E.systemInstruction){const S=E.systemInstruction;delete E.systemInstruction;const C=E.request;C.systemInstruction=S,E.request=C}h.push(E)}return d.requests=h,delete n.config,delete n._url,delete n._query,{path:s,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const i=n?Object.assign({},n):{},s=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${s}`),i.dest===void 0){const a=this.getGcsUri(e),u=this.getBigqueryUri(e);if(a)a.endsWith(".jsonl")?i.dest=`${a.slice(0,-6)}/dest`:i.dest=`${a}_dest_${s}`;else if(u)i.dest=`${u}_dest_${s}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(e){var n,i,s,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=TD(this.apiClient,e);return d=he("batchPredictionJobs",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>ng(v))}else{const h=nS(this.apiClient,e);return d=he("{model}:batchGenerateContent",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>rf(v))}}async createEmbeddingsInternal(e){var n,i;let s,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=AD(this.apiClient,e);return a=he("{model}:asyncBatchEmbedContent",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),s.then(p=>rf(p))}}async get(e){var n,i,s,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=UD(this.apiClient,e);return d=he("batchPredictionJobs/{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>ng(v))}else{const h=LD(this.apiClient,e);return d=he("batches/{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>rf(v))}}async cancel(e){var n,i,s,a;let u="",d={};if(this.apiClient.isVertexAI()){const p=gD(this.apiClient,e);u=he("batchPredictionJobs/{name}:cancel",p._url),d=p._query,delete p._url,delete p._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const p=mD(this.apiClient,e);u=he("batches/{name}:cancel",p._url),d=p._query,delete p._url,delete p._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async listInternal(e){var n,i,s,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=jD(e);return d=he("batchPredictionJobs",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=KD(v),S=new WT;return Object.assign(S,E),S})}else{const h=$D(e);return d=he("batches",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=JD(v),S=new WT;return Object.assign(S,E),S})}}async delete(e){var n,i,s,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=xD(this.apiClient,e);return d=he("batchPredictionJobs/{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>ID(v))}else{const h=wD(this.apiClient,e);return d=he("batches/{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>CD(v))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function eP(t){const e={},n=f(t,["data"]);if(n!=null&&m(e,["data"],n),f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function iS(t){const e={},n=f(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>AP(a))),m(e,["parts"],s)}const i=f(t,["role"]);return i!=null&&m(e,["role"],i),e}function tP(t,e){const n={},i=f(t,["ttl"]);e!==void 0&&i!=null&&m(e,["ttl"],i);const s=f(t,["expireTime"]);e!==void 0&&s!=null&&m(e,["expireTime"],s);const a=f(t,["displayName"]);e!==void 0&&a!=null&&m(e,["displayName"],a);const u=f(t,["contents"]);if(e!==void 0&&u!=null){let v=ni(u);Array.isArray(v)&&(v=v.map(E=>iS(E))),m(e,["contents"],v)}const d=f(t,["systemInstruction"]);e!==void 0&&d!=null&&m(e,["systemInstruction"],iS(cn(d)));const p=f(t,["tools"]);if(e!==void 0&&p!=null){let v=p;Array.isArray(v)&&(v=v.map(E=>xP(E))),m(e,["tools"],v)}const h=f(t,["toolConfig"]);if(e!==void 0&&h!=null&&m(e,["toolConfig"],wP(h)),f(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function nP(t,e){const n={},i=f(t,["ttl"]);e!==void 0&&i!=null&&m(e,["ttl"],i);const s=f(t,["expireTime"]);e!==void 0&&s!=null&&m(e,["expireTime"],s);const a=f(t,["displayName"]);e!==void 0&&a!=null&&m(e,["displayName"],a);const u=f(t,["contents"]);if(e!==void 0&&u!=null){let E=ni(u);Array.isArray(E)&&(E=E.map(S=>S)),m(e,["contents"],E)}const d=f(t,["systemInstruction"]);e!==void 0&&d!=null&&m(e,["systemInstruction"],cn(d));const p=f(t,["tools"]);if(e!==void 0&&p!=null){let E=p;Array.isArray(E)&&(E=E.map(S=>CP(S))),m(e,["tools"],E)}const h=f(t,["toolConfig"]);e!==void 0&&h!=null&&m(e,["toolConfig"],h);const v=f(t,["kmsKeyName"]);return e!==void 0&&v!=null&&m(e,["encryption_spec","kmsKeyName"],v),n}function iP(t,e){const n={},i=f(e,["model"]);i!=null&&m(n,["model"],Jw(t,i));const s=f(e,["config"]);return s!=null&&tP(s,n),n}function rP(t,e){const n={},i=f(e,["model"]);i!=null&&m(n,["model"],Jw(t,i));const s=f(e,["config"]);return s!=null&&nP(s,n),n}function sP(t,e){const n={},i=f(e,["name"]);return i!=null&&m(n,["_url","name"],Fr(t,i)),n}function oP(t,e){const n={},i=f(e,["name"]);return i!=null&&m(n,["_url","name"],Fr(t,i)),n}function aP(t){const e={},n=f(t,["sdkHttpResponse"]);return n!=null&&m(e,["sdkHttpResponse"],n),e}function lP(t){const e={},n=f(t,["sdkHttpResponse"]);return n!=null&&m(e,["sdkHttpResponse"],n),e}function uP(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=f(t,["fileUri"]);n!=null&&m(e,["fileUri"],n);const i=f(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function cP(t){const e={},n=f(t,["id"]);n!=null&&m(e,["id"],n);const i=f(t,["args"]);i!=null&&m(e,["args"],i);const s=f(t,["name"]);if(s!=null&&m(e,["name"],s),f(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function dP(t){const e={},n=f(t,["mode"]);n!=null&&m(e,["mode"],n);const i=f(t,["allowedFunctionNames"]);if(i!=null&&m(e,["allowedFunctionNames"],i),f(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function fP(t){const e={};if(f(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=f(t,["description"]);n!=null&&m(e,["description"],n);const i=f(t,["name"]);i!=null&&m(e,["name"],i);const s=f(t,["parameters"]);s!=null&&m(e,["parameters"],s);const a=f(t,["parametersJsonSchema"]);a!=null&&m(e,["parametersJsonSchema"],a);const u=f(t,["response"]);u!=null&&m(e,["response"],u);const d=f(t,["responseJsonSchema"]);return d!=null&&m(e,["responseJsonSchema"],d),e}function hP(t,e){const n={},i=f(e,["name"]);return i!=null&&m(n,["_url","name"],Fr(t,i)),n}function pP(t,e){const n={},i=f(e,["name"]);return i!=null&&m(n,["_url","name"],Fr(t,i)),n}function mP(t){const e={};if(f(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=f(t,["enableWidget"]);return n!=null&&m(e,["enableWidget"],n),e}function gP(t){const e={};if(f(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=f(t,["timeRangeFilter"]);return n!=null&&m(e,["timeRangeFilter"],n),e}function yP(t,e){const n={},i=f(t,["pageSize"]);e!==void 0&&i!=null&&m(e,["_query","pageSize"],i);const s=f(t,["pageToken"]);return e!==void 0&&s!=null&&m(e,["_query","pageToken"],s),n}function vP(t,e){const n={},i=f(t,["pageSize"]);e!==void 0&&i!=null&&m(e,["_query","pageSize"],i);const s=f(t,["pageToken"]);return e!==void 0&&s!=null&&m(e,["_query","pageToken"],s),n}function _P(t){const e={},n=f(t,["config"]);return n!=null&&yP(n,e),e}function EP(t){const e={},n=f(t,["config"]);return n!=null&&vP(n,e),e}function TP(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const i=f(t,["nextPageToken"]);i!=null&&m(e,["nextPageToken"],i);const s=f(t,["cachedContents"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(u=>u)),m(e,["cachedContents"],a)}return e}function SP(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const i=f(t,["nextPageToken"]);i!=null&&m(e,["nextPageToken"],i);const s=f(t,["cachedContents"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(u=>u)),m(e,["cachedContents"],a)}return e}function AP(t){const e={},n=f(t,["mediaResolution"]);n!=null&&m(e,["mediaResolution"],n);const i=f(t,["codeExecutionResult"]);i!=null&&m(e,["codeExecutionResult"],i);const s=f(t,["executableCode"]);s!=null&&m(e,["executableCode"],s);const a=f(t,["fileData"]);a!=null&&m(e,["fileData"],uP(a));const u=f(t,["functionCall"]);u!=null&&m(e,["functionCall"],cP(u));const d=f(t,["functionResponse"]);d!=null&&m(e,["functionResponse"],d);const p=f(t,["inlineData"]);p!=null&&m(e,["inlineData"],eP(p));const h=f(t,["text"]);h!=null&&m(e,["text"],h);const v=f(t,["thought"]);v!=null&&m(e,["thought"],v);const E=f(t,["thoughtSignature"]);E!=null&&m(e,["thoughtSignature"],E);const S=f(t,["videoMetadata"]);return S!=null&&m(e,["videoMetadata"],S),e}function wP(t){const e={},n=f(t,["functionCallingConfig"]);n!=null&&m(e,["functionCallingConfig"],dP(n));const i=f(t,["retrievalConfig"]);return i!=null&&m(e,["retrievalConfig"],i),e}function xP(t){const e={},n=f(t,["functionDeclarations"]);if(n!=null){let v=n;Array.isArray(v)&&(v=v.map(E=>E)),m(e,["functionDeclarations"],v)}if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=f(t,["googleSearchRetrieval"]);i!=null&&m(e,["googleSearchRetrieval"],i);const s=f(t,["computerUse"]);s!=null&&m(e,["computerUse"],s);const a=f(t,["fileSearch"]);a!=null&&m(e,["fileSearch"],a);const u=f(t,["codeExecution"]);if(u!=null&&m(e,["codeExecution"],u),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(t,["googleMaps"]);d!=null&&m(e,["googleMaps"],mP(d));const p=f(t,["googleSearch"]);p!=null&&m(e,["googleSearch"],gP(p));const h=f(t,["urlContext"]);return h!=null&&m(e,["urlContext"],h),e}function CP(t){const e={},n=f(t,["functionDeclarations"]);if(n!=null){let E=n;Array.isArray(E)&&(E=E.map(S=>fP(S))),m(e,["functionDeclarations"],E)}const i=f(t,["retrieval"]);i!=null&&m(e,["retrieval"],i);const s=f(t,["googleSearchRetrieval"]);s!=null&&m(e,["googleSearchRetrieval"],s);const a=f(t,["computerUse"]);if(a!=null&&m(e,["computerUse"],a),f(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=f(t,["codeExecution"]);u!=null&&m(e,["codeExecution"],u);const d=f(t,["enterpriseWebSearch"]);d!=null&&m(e,["enterpriseWebSearch"],d);const p=f(t,["googleMaps"]);p!=null&&m(e,["googleMaps"],p);const h=f(t,["googleSearch"]);h!=null&&m(e,["googleSearch"],h);const v=f(t,["urlContext"]);return v!=null&&m(e,["urlContext"],v),e}function IP(t,e){const n={},i=f(t,["ttl"]);e!==void 0&&i!=null&&m(e,["ttl"],i);const s=f(t,["expireTime"]);return e!==void 0&&s!=null&&m(e,["expireTime"],s),n}function bP(t,e){const n={},i=f(t,["ttl"]);e!==void 0&&i!=null&&m(e,["ttl"],i);const s=f(t,["expireTime"]);return e!==void 0&&s!=null&&m(e,["expireTime"],s),n}function RP(t,e){const n={},i=f(e,["name"]);i!=null&&m(n,["_url","name"],Fr(t,i));const s=f(e,["config"]);return s!=null&&IP(s,n),n}function NP(t,e){const n={},i=f(e,["name"]);i!=null&&m(n,["_url","name"],Fr(t,i));const s=f(e,["config"]);return s!=null&&bP(s,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class MP extends Or{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Vo(Dr.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(n),n)}async create(e){var n,i,s,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=rP(this.apiClient,e);return d=he("cachedContents",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>v)}else{const h=iP(this.apiClient,e);return d=he("cachedContents",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>v)}}async get(e){var n,i,s,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=pP(this.apiClient,e);return d=he("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>v)}else{const h=hP(this.apiClient,e);return d=he("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>v)}}async delete(e){var n,i,s,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=oP(this.apiClient,e);return d=he("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=lP(v),S=new QT;return Object.assign(S,E),S})}else{const h=sP(this.apiClient,e);return d=he("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=aP(v),S=new QT;return Object.assign(S,E),S})}}async update(e){var n,i,s,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=NP(this.apiClient,e);return d=he("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>v)}else{const h=RP(this.apiClient,e);return d=he("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>v)}}async listInternal(e){var n,i,s,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=EP(e);return d=he("cachedContents",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=SP(v),S=new XT;return Object.assign(S,E),S})}else{const h=_P(e);return d=he("cachedContents",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=TP(v),S=new XT;return Object.assign(S,E),S})}}}function _f(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]]);return n}function rS(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function be(t){return this instanceof be?(this.v=t,this):new be(t)}function Ei(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(t,e||[]),s,a=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),d("next"),d("throw"),d("return",u),s[Symbol.asyncIterator]=function(){return this},s;function u(C){return function(D){return Promise.resolve(D).then(C,E)}}function d(C,D){i[C]&&(s[C]=function(U){return new Promise(function(P,q){a.push([C,U,P,q])>1||p(C,U)})},D&&(s[C]=D(s[C])))}function p(C,D){try{h(i[C](D))}catch(U){S(a[0][3],U)}}function h(C){C.value instanceof be?Promise.resolve(C.value.v).then(v,E):S(a[0][2],C)}function v(C){p("next",C)}function E(C){p("throw",C)}function S(C,D){C(D),a.shift(),a.length&&p(a[0][0],a[0][1])}}function Ti(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof rS=="function"?rS(t):t[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(a){n[a]=t[a]&&function(u){return new Promise(function(d,p){u=t[a](u),s(d,p,u.done,u.value)})}}function s(a,u,d,p){Promise.resolve(p).then(function(h){a({value:h,done:d})},u)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function DP(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:ox(n)}function ox(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function PP(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function sS(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let i=0;for(;i<n;)if(t[i].role==="user")e.push(t[i]),i++;else{const s=[];let a=!0;for(;i<n&&t[i].role==="model";)s.push(t[i]),a&&!ox(t[i])&&(a=!1),i++;a?e.push(...s):e.pop()}return e}class kP{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new VP(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class VP{constructor(e,n,i,s={},a=[]){this.apiClient=e,this.modelsModule=n,this.model=i,this.config=s,this.history=a,this.sendPromise=Promise.resolve(),PP(a)}async sendMessage(e){var n;await this.sendPromise;const i=cn(e.message),s=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var a,u,d;const p=await s,h=(u=(a=p.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content,v=p.automaticFunctionCallingHistory,E=this.getHistory(!0).length;let S=[];v!=null&&(S=(d=v.slice(E))!==null&&d!==void 0?d:[]);const C=h?[h]:[];this.recordHistory(i,C,S)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),s}async sendMessageStream(e){var n;await this.sendPromise;const i=cn(e.message),s=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=s.then(()=>{}).catch(()=>{});const a=await s;return this.processStreamResponse(a,i)}getHistory(e=!1){const n=e?sS(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){return Ei(this,arguments,function*(){var s,a,u,d,p,h;const v=[];try{for(var E=!0,S=Ti(e),C;C=yield be(S.next()),s=C.done,!s;E=!0){d=C.value,E=!1;const D=d;if(DP(D)){const U=(h=(p=D.candidates)===null||p===void 0?void 0:p[0])===null||h===void 0?void 0:h.content;U!==void 0&&v.push(U)}yield yield be(D)}}catch(D){a={error:D}}finally{try{!E&&!s&&(u=S.return)&&(yield be(u.call(S)))}finally{if(a)throw a.error}}this.recordHistory(n,v)})}recordHistory(e,n,i){let s=[];n.length>0&&n.every(a=>a.role!==void 0)?s=n:s.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...sS(i)):this.history.push(e),this.history.push(...s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $f extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,$f.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function LP(t){const e={},n=f(t,["file"]);return n!=null&&m(e,["file"],n),e}function UP(t){const e={},n=f(t,["sdkHttpResponse"]);return n!=null&&m(e,["sdkHttpResponse"],n),e}function OP(t){const e={},n=f(t,["name"]);return n!=null&&m(e,["_url","file"],Zw(n)),e}function FP(t){const e={},n=f(t,["sdkHttpResponse"]);return n!=null&&m(e,["sdkHttpResponse"],n),e}function qP(t){const e={},n=f(t,["name"]);return n!=null&&m(e,["_url","file"],Zw(n)),e}function HP(t,e){const n={},i=f(t,["pageSize"]);e!==void 0&&i!=null&&m(e,["_query","pageSize"],i);const s=f(t,["pageToken"]);return e!==void 0&&s!=null&&m(e,["_query","pageToken"],s),n}function BP(t){const e={},n=f(t,["config"]);return n!=null&&HP(n,e),e}function zP(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const i=f(t,["nextPageToken"]);i!=null&&m(e,["nextPageToken"],i);const s=f(t,["files"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(u=>u)),m(e,["files"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class GP extends Or{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Vo(Dr.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,i;let s,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=BP(e);return a=he("files",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:p.headers},v})),s.then(p=>{const h=zP(p),v=new KM;return Object.assign(v,h),v})}}async createInternal(e){var n,i;let s,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=LP(e);return a=he("upload/v1beta/files",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),s.then(p=>{const h=UP(p),v=new YM;return Object.assign(v,h),v})}}async get(e){var n,i;let s,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=qP(e);return a=he("files/{file}",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),s.then(p=>p)}}async delete(e){var n,i;let s,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=OP(e);return a=he("files/{file}",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:p.headers},v})),s.then(p=>{const h=FP(p),v=new QM;return Object.assign(v,h),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function sf(t){const e={},n=f(t,["data"]);if(n!=null&&m(e,["data"],n),f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function $P(t){const e={},n=f(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>ak(a))),m(e,["parts"],s)}const i=f(t,["role"]);return i!=null&&m(e,["role"],i),e}function jP(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=f(t,["fileUri"]);n!=null&&m(e,["fileUri"],n);const i=f(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function JP(t){const e={},n=f(t,["id"]);n!=null&&m(e,["id"],n);const i=f(t,["args"]);i!=null&&m(e,["args"],i);const s=f(t,["name"]);if(s!=null&&m(e,["name"],s),f(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function KP(t){const e={};if(f(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=f(t,["description"]);n!=null&&m(e,["description"],n);const i=f(t,["name"]);i!=null&&m(e,["name"],i);const s=f(t,["parameters"]);s!=null&&m(e,["parameters"],s);const a=f(t,["parametersJsonSchema"]);a!=null&&m(e,["parametersJsonSchema"],a);const u=f(t,["response"]);u!=null&&m(e,["response"],u);const d=f(t,["responseJsonSchema"]);return d!=null&&m(e,["responseJsonSchema"],d),e}function YP(t){const e={},n=f(t,["modelSelectionConfig"]);n!=null&&m(e,["modelConfig"],n);const i=f(t,["responseJsonSchema"]);i!=null&&m(e,["responseJsonSchema"],i);const s=f(t,["audioTimestamp"]);s!=null&&m(e,["audioTimestamp"],s);const a=f(t,["candidateCount"]);a!=null&&m(e,["candidateCount"],a);const u=f(t,["enableAffectiveDialog"]);u!=null&&m(e,["enableAffectiveDialog"],u);const d=f(t,["frequencyPenalty"]);d!=null&&m(e,["frequencyPenalty"],d);const p=f(t,["logprobs"]);p!=null&&m(e,["logprobs"],p);const h=f(t,["maxOutputTokens"]);h!=null&&m(e,["maxOutputTokens"],h);const v=f(t,["mediaResolution"]);v!=null&&m(e,["mediaResolution"],v);const E=f(t,["presencePenalty"]);E!=null&&m(e,["presencePenalty"],E);const S=f(t,["responseLogprobs"]);S!=null&&m(e,["responseLogprobs"],S);const C=f(t,["responseMimeType"]);C!=null&&m(e,["responseMimeType"],C);const D=f(t,["responseModalities"]);D!=null&&m(e,["responseModalities"],D);const U=f(t,["responseSchema"]);U!=null&&m(e,["responseSchema"],U);const P=f(t,["routingConfig"]);P!=null&&m(e,["routingConfig"],P);const q=f(t,["seed"]);q!=null&&m(e,["seed"],q);const X=f(t,["speechConfig"]);X!=null&&m(e,["speechConfig"],X);const H=f(t,["stopSequences"]);H!=null&&m(e,["stopSequences"],H);const ne=f(t,["temperature"]);ne!=null&&m(e,["temperature"],ne);const le=f(t,["thinkingConfig"]);le!=null&&m(e,["thinkingConfig"],le);const ce=f(t,["topK"]);ce!=null&&m(e,["topK"],ce);const N=f(t,["topP"]);if(N!=null&&m(e,["topP"],N),f(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function QP(t){const e={};if(f(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=f(t,["enableWidget"]);return n!=null&&m(e,["enableWidget"],n),e}function XP(t){const e={};if(f(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=f(t,["timeRangeFilter"]);return n!=null&&m(e,["timeRangeFilter"],n),e}function WP(t,e){const n={},i=f(t,["generationConfig"]);e!==void 0&&i!=null&&m(e,["setup","generationConfig"],i);const s=f(t,["responseModalities"]);e!==void 0&&s!=null&&m(e,["setup","generationConfig","responseModalities"],s);const a=f(t,["temperature"]);e!==void 0&&a!=null&&m(e,["setup","generationConfig","temperature"],a);const u=f(t,["topP"]);e!==void 0&&u!=null&&m(e,["setup","generationConfig","topP"],u);const d=f(t,["topK"]);e!==void 0&&d!=null&&m(e,["setup","generationConfig","topK"],d);const p=f(t,["maxOutputTokens"]);e!==void 0&&p!=null&&m(e,["setup","generationConfig","maxOutputTokens"],p);const h=f(t,["mediaResolution"]);e!==void 0&&h!=null&&m(e,["setup","generationConfig","mediaResolution"],h);const v=f(t,["seed"]);e!==void 0&&v!=null&&m(e,["setup","generationConfig","seed"],v);const E=f(t,["speechConfig"]);e!==void 0&&E!=null&&m(e,["setup","generationConfig","speechConfig"],ry(E));const S=f(t,["thinkingConfig"]);e!==void 0&&S!=null&&m(e,["setup","generationConfig","thinkingConfig"],S);const C=f(t,["enableAffectiveDialog"]);e!==void 0&&C!=null&&m(e,["setup","generationConfig","enableAffectiveDialog"],C);const D=f(t,["systemInstruction"]);e!==void 0&&D!=null&&m(e,["setup","systemInstruction"],$P(cn(D)));const U=f(t,["tools"]);if(e!==void 0&&U!=null){let ce=il(U);Array.isArray(ce)&&(ce=ce.map(N=>uk(nl(N)))),m(e,["setup","tools"],ce)}const P=f(t,["sessionResumption"]);e!==void 0&&P!=null&&m(e,["setup","sessionResumption"],lk(P));const q=f(t,["inputAudioTranscription"]);e!==void 0&&q!=null&&m(e,["setup","inputAudioTranscription"],q);const X=f(t,["outputAudioTranscription"]);e!==void 0&&X!=null&&m(e,["setup","outputAudioTranscription"],X);const H=f(t,["realtimeInputConfig"]);e!==void 0&&H!=null&&m(e,["setup","realtimeInputConfig"],H);const ne=f(t,["contextWindowCompression"]);e!==void 0&&ne!=null&&m(e,["setup","contextWindowCompression"],ne);const le=f(t,["proactivity"]);if(e!==void 0&&le!=null&&m(e,["setup","proactivity"],le),f(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function ZP(t,e){const n={},i=f(t,["generationConfig"]);e!==void 0&&i!=null&&m(e,["setup","generationConfig"],YP(i));const s=f(t,["responseModalities"]);e!==void 0&&s!=null&&m(e,["setup","generationConfig","responseModalities"],s);const a=f(t,["temperature"]);e!==void 0&&a!=null&&m(e,["setup","generationConfig","temperature"],a);const u=f(t,["topP"]);e!==void 0&&u!=null&&m(e,["setup","generationConfig","topP"],u);const d=f(t,["topK"]);e!==void 0&&d!=null&&m(e,["setup","generationConfig","topK"],d);const p=f(t,["maxOutputTokens"]);e!==void 0&&p!=null&&m(e,["setup","generationConfig","maxOutputTokens"],p);const h=f(t,["mediaResolution"]);e!==void 0&&h!=null&&m(e,["setup","generationConfig","mediaResolution"],h);const v=f(t,["seed"]);e!==void 0&&v!=null&&m(e,["setup","generationConfig","seed"],v);const E=f(t,["speechConfig"]);e!==void 0&&E!=null&&m(e,["setup","generationConfig","speechConfig"],ry(E));const S=f(t,["thinkingConfig"]);e!==void 0&&S!=null&&m(e,["setup","generationConfig","thinkingConfig"],S);const C=f(t,["enableAffectiveDialog"]);e!==void 0&&C!=null&&m(e,["setup","generationConfig","enableAffectiveDialog"],C);const D=f(t,["systemInstruction"]);e!==void 0&&D!=null&&m(e,["setup","systemInstruction"],cn(D));const U=f(t,["tools"]);if(e!==void 0&&U!=null){let N=il(U);Array.isArray(N)&&(N=N.map(M=>ck(nl(M)))),m(e,["setup","tools"],N)}const P=f(t,["sessionResumption"]);e!==void 0&&P!=null&&m(e,["setup","sessionResumption"],P);const q=f(t,["inputAudioTranscription"]);e!==void 0&&q!=null&&m(e,["setup","inputAudioTranscription"],q);const X=f(t,["outputAudioTranscription"]);e!==void 0&&X!=null&&m(e,["setup","outputAudioTranscription"],X);const H=f(t,["realtimeInputConfig"]);e!==void 0&&H!=null&&m(e,["setup","realtimeInputConfig"],H);const ne=f(t,["contextWindowCompression"]);e!==void 0&&ne!=null&&m(e,["setup","contextWindowCompression"],ne);const le=f(t,["proactivity"]);e!==void 0&&le!=null&&m(e,["setup","proactivity"],le);const ce=f(t,["explicitVadSignal"]);return e!==void 0&&ce!=null&&m(e,["setup","explicitVadSignal"],ce),n}function ek(t,e){const n={},i=f(e,["model"]);i!=null&&m(n,["setup","model"],Qe(t,i));const s=f(e,["config"]);return s!=null&&m(n,["config"],WP(s,n)),n}function tk(t,e){const n={},i=f(e,["model"]);i!=null&&m(n,["setup","model"],Qe(t,i));const s=f(e,["config"]);return s!=null&&m(n,["config"],ZP(s,n)),n}function nk(t){const e={},n=f(t,["musicGenerationConfig"]);return n!=null&&m(e,["musicGenerationConfig"],n),e}function ik(t){const e={},n=f(t,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>s)),m(e,["weightedPrompts"],i)}return e}function rk(t){const e={},n=f(t,["media"]);if(n!=null){let h=Kw(n);Array.isArray(h)&&(h=h.map(v=>sf(v))),m(e,["mediaChunks"],h)}const i=f(t,["audio"]);i!=null&&m(e,["audio"],sf(Qw(i)));const s=f(t,["audioStreamEnd"]);s!=null&&m(e,["audioStreamEnd"],s);const a=f(t,["video"]);a!=null&&m(e,["video"],sf(Yw(a)));const u=f(t,["text"]);u!=null&&m(e,["text"],u);const d=f(t,["activityStart"]);d!=null&&m(e,["activityStart"],d);const p=f(t,["activityEnd"]);return p!=null&&m(e,["activityEnd"],p),e}function sk(t){const e={},n=f(t,["media"]);if(n!=null){let h=Kw(n);Array.isArray(h)&&(h=h.map(v=>v)),m(e,["mediaChunks"],h)}const i=f(t,["audio"]);i!=null&&m(e,["audio"],Qw(i));const s=f(t,["audioStreamEnd"]);s!=null&&m(e,["audioStreamEnd"],s);const a=f(t,["video"]);a!=null&&m(e,["video"],Yw(a));const u=f(t,["text"]);u!=null&&m(e,["text"],u);const d=f(t,["activityStart"]);d!=null&&m(e,["activityStart"],d);const p=f(t,["activityEnd"]);return p!=null&&m(e,["activityEnd"],p),e}function ok(t){const e={},n=f(t,["setupComplete"]);n!=null&&m(e,["setupComplete"],n);const i=f(t,["serverContent"]);i!=null&&m(e,["serverContent"],i);const s=f(t,["toolCall"]);s!=null&&m(e,["toolCall"],s);const a=f(t,["toolCallCancellation"]);a!=null&&m(e,["toolCallCancellation"],a);const u=f(t,["usageMetadata"]);u!=null&&m(e,["usageMetadata"],dk(u));const d=f(t,["goAway"]);d!=null&&m(e,["goAway"],d);const p=f(t,["sessionResumptionUpdate"]);p!=null&&m(e,["sessionResumptionUpdate"],p);const h=f(t,["voiceActivityDetectionSignal"]);return h!=null&&m(e,["voiceActivityDetectionSignal"],h),e}function ak(t){const e={},n=f(t,["mediaResolution"]);n!=null&&m(e,["mediaResolution"],n);const i=f(t,["codeExecutionResult"]);i!=null&&m(e,["codeExecutionResult"],i);const s=f(t,["executableCode"]);s!=null&&m(e,["executableCode"],s);const a=f(t,["fileData"]);a!=null&&m(e,["fileData"],jP(a));const u=f(t,["functionCall"]);u!=null&&m(e,["functionCall"],JP(u));const d=f(t,["functionResponse"]);d!=null&&m(e,["functionResponse"],d);const p=f(t,["inlineData"]);p!=null&&m(e,["inlineData"],sf(p));const h=f(t,["text"]);h!=null&&m(e,["text"],h);const v=f(t,["thought"]);v!=null&&m(e,["thought"],v);const E=f(t,["thoughtSignature"]);E!=null&&m(e,["thoughtSignature"],E);const S=f(t,["videoMetadata"]);return S!=null&&m(e,["videoMetadata"],S),e}function lk(t){const e={},n=f(t,["handle"]);if(n!=null&&m(e,["handle"],n),f(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function uk(t){const e={},n=f(t,["functionDeclarations"]);if(n!=null){let v=n;Array.isArray(v)&&(v=v.map(E=>E)),m(e,["functionDeclarations"],v)}if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=f(t,["googleSearchRetrieval"]);i!=null&&m(e,["googleSearchRetrieval"],i);const s=f(t,["computerUse"]);s!=null&&m(e,["computerUse"],s);const a=f(t,["fileSearch"]);a!=null&&m(e,["fileSearch"],a);const u=f(t,["codeExecution"]);if(u!=null&&m(e,["codeExecution"],u),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(t,["googleMaps"]);d!=null&&m(e,["googleMaps"],QP(d));const p=f(t,["googleSearch"]);p!=null&&m(e,["googleSearch"],XP(p));const h=f(t,["urlContext"]);return h!=null&&m(e,["urlContext"],h),e}function ck(t){const e={},n=f(t,["functionDeclarations"]);if(n!=null){let E=n;Array.isArray(E)&&(E=E.map(S=>KP(S))),m(e,["functionDeclarations"],E)}const i=f(t,["retrieval"]);i!=null&&m(e,["retrieval"],i);const s=f(t,["googleSearchRetrieval"]);s!=null&&m(e,["googleSearchRetrieval"],s);const a=f(t,["computerUse"]);if(a!=null&&m(e,["computerUse"],a),f(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=f(t,["codeExecution"]);u!=null&&m(e,["codeExecution"],u);const d=f(t,["enterpriseWebSearch"]);d!=null&&m(e,["enterpriseWebSearch"],d);const p=f(t,["googleMaps"]);p!=null&&m(e,["googleMaps"],p);const h=f(t,["googleSearch"]);h!=null&&m(e,["googleSearch"],h);const v=f(t,["urlContext"]);return v!=null&&m(e,["urlContext"],v),e}function dk(t){const e={},n=f(t,["promptTokenCount"]);n!=null&&m(e,["promptTokenCount"],n);const i=f(t,["cachedContentTokenCount"]);i!=null&&m(e,["cachedContentTokenCount"],i);const s=f(t,["candidatesTokenCount"]);s!=null&&m(e,["responseTokenCount"],s);const a=f(t,["toolUsePromptTokenCount"]);a!=null&&m(e,["toolUsePromptTokenCount"],a);const u=f(t,["thoughtsTokenCount"]);u!=null&&m(e,["thoughtsTokenCount"],u);const d=f(t,["totalTokenCount"]);d!=null&&m(e,["totalTokenCount"],d);const p=f(t,["promptTokensDetails"]);if(p!=null){let C=p;Array.isArray(C)&&(C=C.map(D=>D)),m(e,["promptTokensDetails"],C)}const h=f(t,["cacheTokensDetails"]);if(h!=null){let C=h;Array.isArray(C)&&(C=C.map(D=>D)),m(e,["cacheTokensDetails"],C)}const v=f(t,["candidatesTokensDetails"]);if(v!=null){let C=v;Array.isArray(C)&&(C=C.map(D=>D)),m(e,["responseTokensDetails"],C)}const E=f(t,["toolUsePromptTokensDetails"]);if(E!=null){let C=E;Array.isArray(C)&&(C=C.map(D=>D)),m(e,["toolUsePromptTokensDetails"],C)}const S=f(t,["trafficType"]);return S!=null&&m(e,["trafficType"],S),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function fk(t){const e={},n=f(t,["data"]);if(n!=null&&m(e,["data"],n),f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function hk(t){const e={},n=f(t,["content"]);n!=null&&m(e,["content"],n);const i=f(t,["citationMetadata"]);i!=null&&m(e,["citationMetadata"],pk(i));const s=f(t,["tokenCount"]);s!=null&&m(e,["tokenCount"],s);const a=f(t,["finishReason"]);a!=null&&m(e,["finishReason"],a);const u=f(t,["avgLogprobs"]);u!=null&&m(e,["avgLogprobs"],u);const d=f(t,["groundingMetadata"]);d!=null&&m(e,["groundingMetadata"],d);const p=f(t,["index"]);p!=null&&m(e,["index"],p);const h=f(t,["logprobsResult"]);h!=null&&m(e,["logprobsResult"],h);const v=f(t,["safetyRatings"]);if(v!=null){let S=v;Array.isArray(S)&&(S=S.map(C=>C)),m(e,["safetyRatings"],S)}const E=f(t,["urlContextMetadata"]);return E!=null&&m(e,["urlContextMetadata"],E),e}function pk(t){const e={},n=f(t,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>s)),m(e,["citations"],i)}return e}function mk(t,e){const n={},i=f(e,["model"]);i!=null&&m(n,["_url","model"],Qe(t,i));const s=f(e,["contents"]);if(s!=null){let a=ni(s);Array.isArray(a)&&(a=a.map(u=>u)),m(n,["contents"],a)}return n}function gk(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const i=f(t,["tokensInfo"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>a)),m(e,["tokensInfo"],s)}return e}function yk(t){const e={},n=f(t,["values"]);n!=null&&m(e,["values"],n);const i=f(t,["statistics"]);return i!=null&&m(e,["statistics"],vk(i)),e}function vk(t){const e={},n=f(t,["truncated"]);n!=null&&m(e,["truncated"],n);const i=f(t,["token_count"]);return i!=null&&m(e,["tokenCount"],i),e}function jf(t){const e={},n=f(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>IV(a))),m(e,["parts"],s)}const i=f(t,["role"]);return i!=null&&m(e,["role"],i),e}function _k(t){const e={},n=f(t,["controlType"]);n!=null&&m(e,["controlType"],n);const i=f(t,["enableControlImageComputation"]);return i!=null&&m(e,["computeControl"],i),e}function Ek(t){const e={};if(f(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(f(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(f(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function Tk(t,e){const n={},i=f(t,["systemInstruction"]);e!==void 0&&i!=null&&m(e,["systemInstruction"],cn(i));const s=f(t,["tools"]);if(e!==void 0&&s!=null){let u=s;Array.isArray(u)&&(u=u.map(d=>cx(d))),m(e,["tools"],u)}const a=f(t,["generationConfig"]);return e!==void 0&&a!=null&&m(e,["generationConfig"],fV(a)),n}function Sk(t,e){const n={},i=f(e,["model"]);i!=null&&m(n,["_url","model"],Qe(t,i));const s=f(e,["contents"]);if(s!=null){let u=ni(s);Array.isArray(u)&&(u=u.map(d=>jf(d))),m(n,["contents"],u)}const a=f(e,["config"]);return a!=null&&Ek(a),n}function Ak(t,e){const n={},i=f(e,["model"]);i!=null&&m(n,["_url","model"],Qe(t,i));const s=f(e,["contents"]);if(s!=null){let u=ni(s);Array.isArray(u)&&(u=u.map(d=>d)),m(n,["contents"],u)}const a=f(e,["config"]);return a!=null&&Tk(a,n),n}function wk(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const i=f(t,["totalTokens"]);i!=null&&m(e,["totalTokens"],i);const s=f(t,["cachedContentTokenCount"]);return s!=null&&m(e,["cachedContentTokenCount"],s),e}function xk(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const i=f(t,["totalTokens"]);return i!=null&&m(e,["totalTokens"],i),e}function Ck(t,e){const n={},i=f(e,["model"]);return i!=null&&m(n,["_url","name"],Qe(t,i)),n}function Ik(t,e){const n={},i=f(e,["model"]);return i!=null&&m(n,["_url","name"],Qe(t,i)),n}function bk(t){const e={},n=f(t,["sdkHttpResponse"]);return n!=null&&m(e,["sdkHttpResponse"],n),e}function Rk(t){const e={},n=f(t,["sdkHttpResponse"]);return n!=null&&m(e,["sdkHttpResponse"],n),e}function Nk(t,e){const n={},i=f(t,["outputGcsUri"]);e!==void 0&&i!=null&&m(e,["parameters","storageUri"],i);const s=f(t,["negativePrompt"]);e!==void 0&&s!=null&&m(e,["parameters","negativePrompt"],s);const a=f(t,["numberOfImages"]);e!==void 0&&a!=null&&m(e,["parameters","sampleCount"],a);const u=f(t,["aspectRatio"]);e!==void 0&&u!=null&&m(e,["parameters","aspectRatio"],u);const d=f(t,["guidanceScale"]);e!==void 0&&d!=null&&m(e,["parameters","guidanceScale"],d);const p=f(t,["seed"]);e!==void 0&&p!=null&&m(e,["parameters","seed"],p);const h=f(t,["safetyFilterLevel"]);e!==void 0&&h!=null&&m(e,["parameters","safetySetting"],h);const v=f(t,["personGeneration"]);e!==void 0&&v!=null&&m(e,["parameters","personGeneration"],v);const E=f(t,["includeSafetyAttributes"]);e!==void 0&&E!=null&&m(e,["parameters","includeSafetyAttributes"],E);const S=f(t,["includeRaiReason"]);e!==void 0&&S!=null&&m(e,["parameters","includeRaiReason"],S);const C=f(t,["language"]);e!==void 0&&C!=null&&m(e,["parameters","language"],C);const D=f(t,["outputMimeType"]);e!==void 0&&D!=null&&m(e,["parameters","outputOptions","mimeType"],D);const U=f(t,["outputCompressionQuality"]);e!==void 0&&U!=null&&m(e,["parameters","outputOptions","compressionQuality"],U);const P=f(t,["addWatermark"]);e!==void 0&&P!=null&&m(e,["parameters","addWatermark"],P);const q=f(t,["labels"]);e!==void 0&&q!=null&&m(e,["labels"],q);const X=f(t,["editMode"]);e!==void 0&&X!=null&&m(e,["parameters","editMode"],X);const H=f(t,["baseSteps"]);return e!==void 0&&H!=null&&m(e,["parameters","editConfig","baseSteps"],H),n}function Mk(t,e){const n={},i=f(e,["model"]);i!=null&&m(n,["_url","model"],Qe(t,i));const s=f(e,["prompt"]);s!=null&&m(n,["instances[0]","prompt"],s);const a=f(e,["referenceImages"]);if(a!=null){let d=a;Array.isArray(d)&&(d=d.map(p=>PV(p))),m(n,["instances[0]","referenceImages"],d)}const u=f(e,["config"]);return u!=null&&Nk(u,n),n}function Dk(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const i=f(t,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>Jf(a))),m(e,["generatedImages"],s)}return e}function Pk(t,e){const n={},i=f(t,["taskType"]);e!==void 0&&i!=null&&m(e,["requests[]","taskType"],i);const s=f(t,["title"]);e!==void 0&&s!=null&&m(e,["requests[]","title"],s);const a=f(t,["outputDimensionality"]);if(e!==void 0&&a!=null&&m(e,["requests[]","outputDimensionality"],a),f(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function kk(t,e){const n={},i=f(t,["taskType"]);e!==void 0&&i!=null&&m(e,["instances[]","task_type"],i);const s=f(t,["title"]);e!==void 0&&s!=null&&m(e,["instances[]","title"],s);const a=f(t,["outputDimensionality"]);e!==void 0&&a!=null&&m(e,["parameters","outputDimensionality"],a);const u=f(t,["mimeType"]);e!==void 0&&u!=null&&m(e,["instances[]","mimeType"],u);const d=f(t,["autoTruncate"]);return e!==void 0&&d!=null&&m(e,["parameters","autoTruncate"],d),n}function Vk(t,e){const n={},i=f(e,["model"]);i!=null&&m(n,["_url","model"],Qe(t,i));const s=f(e,["contents"]);if(s!=null){let d=ty(t,s);Array.isArray(d)&&(d=d.map(p=>p)),m(n,["requests[]","content"],d)}const a=f(e,["config"]);a!=null&&Pk(a,n);const u=f(e,["model"]);return u!==void 0&&m(n,["requests[]","model"],Qe(t,u)),n}function Lk(t,e){const n={},i=f(e,["model"]);i!=null&&m(n,["_url","model"],Qe(t,i));const s=f(e,["contents"]);if(s!=null){let u=ty(t,s);Array.isArray(u)&&(u=u.map(d=>d)),m(n,["instances[]","content"],u)}const a=f(e,["config"]);return a!=null&&kk(a,n),n}function Uk(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const i=f(t,["embeddings"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>u)),m(e,["embeddings"],a)}const s=f(t,["metadata"]);return s!=null&&m(e,["metadata"],s),e}function Ok(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const i=f(t,["predictions[]","embeddings"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>yk(u))),m(e,["embeddings"],a)}const s=f(t,["metadata"]);return s!=null&&m(e,["metadata"],s),e}function Fk(t){const e={},n=f(t,["endpoint"]);n!=null&&m(e,["name"],n);const i=f(t,["deployedModelId"]);return i!=null&&m(e,["deployedModelId"],i),e}function qk(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=f(t,["fileUri"]);n!=null&&m(e,["fileUri"],n);const i=f(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function Hk(t){const e={},n=f(t,["id"]);n!=null&&m(e,["id"],n);const i=f(t,["args"]);i!=null&&m(e,["args"],i);const s=f(t,["name"]);if(s!=null&&m(e,["name"],s),f(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Bk(t){const e={},n=f(t,["mode"]);n!=null&&m(e,["mode"],n);const i=f(t,["allowedFunctionNames"]);if(i!=null&&m(e,["allowedFunctionNames"],i),f(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function zk(t){const e={};if(f(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=f(t,["description"]);n!=null&&m(e,["description"],n);const i=f(t,["name"]);i!=null&&m(e,["name"],i);const s=f(t,["parameters"]);s!=null&&m(e,["parameters"],s);const a=f(t,["parametersJsonSchema"]);a!=null&&m(e,["parametersJsonSchema"],a);const u=f(t,["response"]);u!=null&&m(e,["response"],u);const d=f(t,["responseJsonSchema"]);return d!=null&&m(e,["responseJsonSchema"],d),e}function Gk(t,e,n){const i={},s=f(e,["systemInstruction"]);n!==void 0&&s!=null&&m(n,["systemInstruction"],jf(cn(s)));const a=f(e,["temperature"]);a!=null&&m(i,["temperature"],a);const u=f(e,["topP"]);u!=null&&m(i,["topP"],u);const d=f(e,["topK"]);d!=null&&m(i,["topK"],d);const p=f(e,["candidateCount"]);p!=null&&m(i,["candidateCount"],p);const h=f(e,["maxOutputTokens"]);h!=null&&m(i,["maxOutputTokens"],h);const v=f(e,["stopSequences"]);v!=null&&m(i,["stopSequences"],v);const E=f(e,["responseLogprobs"]);E!=null&&m(i,["responseLogprobs"],E);const S=f(e,["logprobs"]);S!=null&&m(i,["logprobs"],S);const C=f(e,["presencePenalty"]);C!=null&&m(i,["presencePenalty"],C);const D=f(e,["frequencyPenalty"]);D!=null&&m(i,["frequencyPenalty"],D);const U=f(e,["seed"]);U!=null&&m(i,["seed"],U);const P=f(e,["responseMimeType"]);P!=null&&m(i,["responseMimeType"],P);const q=f(e,["responseSchema"]);q!=null&&m(i,["responseSchema"],ny(q));const X=f(e,["responseJsonSchema"]);if(X!=null&&m(i,["responseJsonSchema"],X),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const H=f(e,["safetySettings"]);if(n!==void 0&&H!=null){let k=H;Array.isArray(k)&&(k=k.map(oe=>kV(oe))),m(n,["safetySettings"],k)}const ne=f(e,["tools"]);if(n!==void 0&&ne!=null){let k=il(ne);Array.isArray(k)&&(k=k.map(oe=>HV(nl(oe)))),m(n,["tools"],k)}const le=f(e,["toolConfig"]);if(n!==void 0&&le!=null&&m(n,["toolConfig"],qV(le)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const ce=f(e,["cachedContent"]);n!==void 0&&ce!=null&&m(n,["cachedContent"],Fr(t,ce));const N=f(e,["responseModalities"]);N!=null&&m(i,["responseModalities"],N);const M=f(e,["mediaResolution"]);M!=null&&m(i,["mediaResolution"],M);const R=f(e,["speechConfig"]);if(R!=null&&m(i,["speechConfig"],iy(R)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const V=f(e,["thinkingConfig"]);V!=null&&m(i,["thinkingConfig"],V);const O=f(e,["imageConfig"]);O!=null&&m(i,["imageConfig"],yV(O));const z=f(e,["enableEnhancedCivicAnswers"]);return z!=null&&m(i,["enableEnhancedCivicAnswers"],z),i}function $k(t,e,n){const i={},s=f(e,["systemInstruction"]);n!==void 0&&s!=null&&m(n,["systemInstruction"],cn(s));const a=f(e,["temperature"]);a!=null&&m(i,["temperature"],a);const u=f(e,["topP"]);u!=null&&m(i,["topP"],u);const d=f(e,["topK"]);d!=null&&m(i,["topK"],d);const p=f(e,["candidateCount"]);p!=null&&m(i,["candidateCount"],p);const h=f(e,["maxOutputTokens"]);h!=null&&m(i,["maxOutputTokens"],h);const v=f(e,["stopSequences"]);v!=null&&m(i,["stopSequences"],v);const E=f(e,["responseLogprobs"]);E!=null&&m(i,["responseLogprobs"],E);const S=f(e,["logprobs"]);S!=null&&m(i,["logprobs"],S);const C=f(e,["presencePenalty"]);C!=null&&m(i,["presencePenalty"],C);const D=f(e,["frequencyPenalty"]);D!=null&&m(i,["frequencyPenalty"],D);const U=f(e,["seed"]);U!=null&&m(i,["seed"],U);const P=f(e,["responseMimeType"]);P!=null&&m(i,["responseMimeType"],P);const q=f(e,["responseSchema"]);q!=null&&m(i,["responseSchema"],ny(q));const X=f(e,["responseJsonSchema"]);X!=null&&m(i,["responseJsonSchema"],X);const H=f(e,["routingConfig"]);H!=null&&m(i,["routingConfig"],H);const ne=f(e,["modelSelectionConfig"]);ne!=null&&m(i,["modelConfig"],ne);const le=f(e,["safetySettings"]);if(n!==void 0&&le!=null){let Y=le;Array.isArray(Y)&&(Y=Y.map(ue=>ue)),m(n,["safetySettings"],Y)}const ce=f(e,["tools"]);if(n!==void 0&&ce!=null){let Y=il(ce);Array.isArray(Y)&&(Y=Y.map(ue=>cx(nl(ue)))),m(n,["tools"],Y)}const N=f(e,["toolConfig"]);n!==void 0&&N!=null&&m(n,["toolConfig"],N);const M=f(e,["labels"]);n!==void 0&&M!=null&&m(n,["labels"],M);const R=f(e,["cachedContent"]);n!==void 0&&R!=null&&m(n,["cachedContent"],Fr(t,R));const V=f(e,["responseModalities"]);V!=null&&m(i,["responseModalities"],V);const O=f(e,["mediaResolution"]);O!=null&&m(i,["mediaResolution"],O);const z=f(e,["speechConfig"]);z!=null&&m(i,["speechConfig"],iy(z));const k=f(e,["audioTimestamp"]);k!=null&&m(i,["audioTimestamp"],k);const oe=f(e,["thinkingConfig"]);oe!=null&&m(i,["thinkingConfig"],oe);const Ce=f(e,["imageConfig"]);if(Ce!=null&&m(i,["imageConfig"],vV(Ce)),f(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return i}function oS(t,e){const n={},i=f(e,["model"]);i!=null&&m(n,["_url","model"],Qe(t,i));const s=f(e,["contents"]);if(s!=null){let u=ni(s);Array.isArray(u)&&(u=u.map(d=>jf(d))),m(n,["contents"],u)}const a=f(e,["config"]);return a!=null&&m(n,["generationConfig"],Gk(t,a,n)),n}function aS(t,e){const n={},i=f(e,["model"]);i!=null&&m(n,["_url","model"],Qe(t,i));const s=f(e,["contents"]);if(s!=null){let u=ni(s);Array.isArray(u)&&(u=u.map(d=>d)),m(n,["contents"],u)}const a=f(e,["config"]);return a!=null&&m(n,["generationConfig"],$k(t,a,n)),n}function lS(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const i=f(t,["candidates"]);if(i!=null){let p=i;Array.isArray(p)&&(p=p.map(h=>hk(h))),m(e,["candidates"],p)}const s=f(t,["modelVersion"]);s!=null&&m(e,["modelVersion"],s);const a=f(t,["promptFeedback"]);a!=null&&m(e,["promptFeedback"],a);const u=f(t,["responseId"]);u!=null&&m(e,["responseId"],u);const d=f(t,["usageMetadata"]);return d!=null&&m(e,["usageMetadata"],d),e}function uS(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const i=f(t,["candidates"]);if(i!=null){let h=i;Array.isArray(h)&&(h=h.map(v=>v)),m(e,["candidates"],h)}const s=f(t,["createTime"]);s!=null&&m(e,["createTime"],s);const a=f(t,["modelVersion"]);a!=null&&m(e,["modelVersion"],a);const u=f(t,["promptFeedback"]);u!=null&&m(e,["promptFeedback"],u);const d=f(t,["responseId"]);d!=null&&m(e,["responseId"],d);const p=f(t,["usageMetadata"]);return p!=null&&m(e,["usageMetadata"],p),e}function jk(t,e){const n={};if(f(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=f(t,["numberOfImages"]);e!==void 0&&i!=null&&m(e,["parameters","sampleCount"],i);const s=f(t,["aspectRatio"]);e!==void 0&&s!=null&&m(e,["parameters","aspectRatio"],s);const a=f(t,["guidanceScale"]);if(e!==void 0&&a!=null&&m(e,["parameters","guidanceScale"],a),f(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=f(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&m(e,["parameters","safetySetting"],u);const d=f(t,["personGeneration"]);e!==void 0&&d!=null&&m(e,["parameters","personGeneration"],d);const p=f(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&m(e,["parameters","includeSafetyAttributes"],p);const h=f(t,["includeRaiReason"]);e!==void 0&&h!=null&&m(e,["parameters","includeRaiReason"],h);const v=f(t,["language"]);e!==void 0&&v!=null&&m(e,["parameters","language"],v);const E=f(t,["outputMimeType"]);e!==void 0&&E!=null&&m(e,["parameters","outputOptions","mimeType"],E);const S=f(t,["outputCompressionQuality"]);if(e!==void 0&&S!=null&&m(e,["parameters","outputOptions","compressionQuality"],S),f(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(f(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const C=f(t,["imageSize"]);if(e!==void 0&&C!=null&&m(e,["parameters","sampleImageSize"],C),f(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function Jk(t,e){const n={},i=f(t,["outputGcsUri"]);e!==void 0&&i!=null&&m(e,["parameters","storageUri"],i);const s=f(t,["negativePrompt"]);e!==void 0&&s!=null&&m(e,["parameters","negativePrompt"],s);const a=f(t,["numberOfImages"]);e!==void 0&&a!=null&&m(e,["parameters","sampleCount"],a);const u=f(t,["aspectRatio"]);e!==void 0&&u!=null&&m(e,["parameters","aspectRatio"],u);const d=f(t,["guidanceScale"]);e!==void 0&&d!=null&&m(e,["parameters","guidanceScale"],d);const p=f(t,["seed"]);e!==void 0&&p!=null&&m(e,["parameters","seed"],p);const h=f(t,["safetyFilterLevel"]);e!==void 0&&h!=null&&m(e,["parameters","safetySetting"],h);const v=f(t,["personGeneration"]);e!==void 0&&v!=null&&m(e,["parameters","personGeneration"],v);const E=f(t,["includeSafetyAttributes"]);e!==void 0&&E!=null&&m(e,["parameters","includeSafetyAttributes"],E);const S=f(t,["includeRaiReason"]);e!==void 0&&S!=null&&m(e,["parameters","includeRaiReason"],S);const C=f(t,["language"]);e!==void 0&&C!=null&&m(e,["parameters","language"],C);const D=f(t,["outputMimeType"]);e!==void 0&&D!=null&&m(e,["parameters","outputOptions","mimeType"],D);const U=f(t,["outputCompressionQuality"]);e!==void 0&&U!=null&&m(e,["parameters","outputOptions","compressionQuality"],U);const P=f(t,["addWatermark"]);e!==void 0&&P!=null&&m(e,["parameters","addWatermark"],P);const q=f(t,["labels"]);e!==void 0&&q!=null&&m(e,["labels"],q);const X=f(t,["imageSize"]);e!==void 0&&X!=null&&m(e,["parameters","sampleImageSize"],X);const H=f(t,["enhancePrompt"]);return e!==void 0&&H!=null&&m(e,["parameters","enhancePrompt"],H),n}function Kk(t,e){const n={},i=f(e,["model"]);i!=null&&m(n,["_url","model"],Qe(t,i));const s=f(e,["prompt"]);s!=null&&m(n,["instances[0]","prompt"],s);const a=f(e,["config"]);return a!=null&&jk(a,n),n}function Yk(t,e){const n={},i=f(e,["model"]);i!=null&&m(n,["_url","model"],Qe(t,i));const s=f(e,["prompt"]);s!=null&&m(n,["instances[0]","prompt"],s);const a=f(e,["config"]);return a!=null&&Jk(a,n),n}function Qk(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const i=f(t,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>lV(u))),m(e,["generatedImages"],a)}const s=f(t,["positivePromptSafetyAttributes"]);return s!=null&&m(e,["positivePromptSafetyAttributes"],lx(s)),e}function Xk(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const i=f(t,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>Jf(u))),m(e,["generatedImages"],a)}const s=f(t,["positivePromptSafetyAttributes"]);return s!=null&&m(e,["positivePromptSafetyAttributes"],ux(s)),e}function Wk(t,e){const n={},i=f(t,["numberOfVideos"]);if(e!==void 0&&i!=null&&m(e,["parameters","sampleCount"],i),f(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const s=f(t,["durationSeconds"]);if(e!==void 0&&s!=null&&m(e,["parameters","durationSeconds"],s),f(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=f(t,["aspectRatio"]);e!==void 0&&a!=null&&m(e,["parameters","aspectRatio"],a);const u=f(t,["resolution"]);e!==void 0&&u!=null&&m(e,["parameters","resolution"],u);const d=f(t,["personGeneration"]);if(e!==void 0&&d!=null&&m(e,["parameters","personGeneration"],d),f(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const p=f(t,["negativePrompt"]);e!==void 0&&p!=null&&m(e,["parameters","negativePrompt"],p);const h=f(t,["enhancePrompt"]);if(e!==void 0&&h!=null&&m(e,["parameters","enhancePrompt"],h),f(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const v=f(t,["lastFrame"]);e!==void 0&&v!=null&&m(e,["instances[0]","lastFrame"],Kf(v));const E=f(t,["referenceImages"]);if(e!==void 0&&E!=null){let S=E;Array.isArray(S)&&(S=S.map(C=>eL(C))),m(e,["instances[0]","referenceImages"],S)}if(f(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(f(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function Zk(t,e){const n={},i=f(t,["numberOfVideos"]);e!==void 0&&i!=null&&m(e,["parameters","sampleCount"],i);const s=f(t,["outputGcsUri"]);e!==void 0&&s!=null&&m(e,["parameters","storageUri"],s);const a=f(t,["fps"]);e!==void 0&&a!=null&&m(e,["parameters","fps"],a);const u=f(t,["durationSeconds"]);e!==void 0&&u!=null&&m(e,["parameters","durationSeconds"],u);const d=f(t,["seed"]);e!==void 0&&d!=null&&m(e,["parameters","seed"],d);const p=f(t,["aspectRatio"]);e!==void 0&&p!=null&&m(e,["parameters","aspectRatio"],p);const h=f(t,["resolution"]);e!==void 0&&h!=null&&m(e,["parameters","resolution"],h);const v=f(t,["personGeneration"]);e!==void 0&&v!=null&&m(e,["parameters","personGeneration"],v);const E=f(t,["pubsubTopic"]);e!==void 0&&E!=null&&m(e,["parameters","pubsubTopic"],E);const S=f(t,["negativePrompt"]);e!==void 0&&S!=null&&m(e,["parameters","negativePrompt"],S);const C=f(t,["enhancePrompt"]);e!==void 0&&C!=null&&m(e,["parameters","enhancePrompt"],C);const D=f(t,["generateAudio"]);e!==void 0&&D!=null&&m(e,["parameters","generateAudio"],D);const U=f(t,["lastFrame"]);e!==void 0&&U!=null&&m(e,["instances[0]","lastFrame"],Ci(U));const P=f(t,["referenceImages"]);if(e!==void 0&&P!=null){let H=P;Array.isArray(H)&&(H=H.map(ne=>tL(ne))),m(e,["instances[0]","referenceImages"],H)}const q=f(t,["mask"]);e!==void 0&&q!=null&&m(e,["instances[0]","mask"],ZV(q));const X=f(t,["compressionQuality"]);return e!==void 0&&X!=null&&m(e,["parameters","compressionQuality"],X),n}function eV(t){const e={},n=f(t,["name"]);n!=null&&m(e,["name"],n);const i=f(t,["metadata"]);i!=null&&m(e,["metadata"],i);const s=f(t,["done"]);s!=null&&m(e,["done"],s);const a=f(t,["error"]);a!=null&&m(e,["error"],a);const u=f(t,["response","generateVideoResponse"]);return u!=null&&m(e,["response"],rV(u)),e}function tV(t){const e={},n=f(t,["name"]);n!=null&&m(e,["name"],n);const i=f(t,["metadata"]);i!=null&&m(e,["metadata"],i);const s=f(t,["done"]);s!=null&&m(e,["done"],s);const a=f(t,["error"]);a!=null&&m(e,["error"],a);const u=f(t,["response"]);return u!=null&&m(e,["response"],sV(u)),e}function nV(t,e){const n={},i=f(e,["model"]);i!=null&&m(n,["_url","model"],Qe(t,i));const s=f(e,["prompt"]);s!=null&&m(n,["instances[0]","prompt"],s);const a=f(e,["image"]);a!=null&&m(n,["instances[0]","image"],Kf(a));const u=f(e,["video"]);u!=null&&m(n,["instances[0]","video"],dx(u));const d=f(e,["source"]);d!=null&&oV(d,n);const p=f(e,["config"]);return p!=null&&Wk(p,n),n}function iV(t,e){const n={},i=f(e,["model"]);i!=null&&m(n,["_url","model"],Qe(t,i));const s=f(e,["prompt"]);s!=null&&m(n,["instances[0]","prompt"],s);const a=f(e,["image"]);a!=null&&m(n,["instances[0]","image"],Ci(a));const u=f(e,["video"]);u!=null&&m(n,["instances[0]","video"],fx(u));const d=f(e,["source"]);d!=null&&aV(d,n);const p=f(e,["config"]);return p!=null&&Zk(p,n),n}function rV(t){const e={},n=f(t,["generatedSamples"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(u=>cV(u))),m(e,["generatedVideos"],a)}const i=f(t,["raiMediaFilteredCount"]);i!=null&&m(e,["raiMediaFilteredCount"],i);const s=f(t,["raiMediaFilteredReasons"]);return s!=null&&m(e,["raiMediaFilteredReasons"],s),e}function sV(t){const e={},n=f(t,["videos"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(u=>dV(u))),m(e,["generatedVideos"],a)}const i=f(t,["raiMediaFilteredCount"]);i!=null&&m(e,["raiMediaFilteredCount"],i);const s=f(t,["raiMediaFilteredReasons"]);return s!=null&&m(e,["raiMediaFilteredReasons"],s),e}function oV(t,e){const n={},i=f(t,["prompt"]);e!==void 0&&i!=null&&m(e,["instances[0]","prompt"],i);const s=f(t,["image"]);e!==void 0&&s!=null&&m(e,["instances[0]","image"],Kf(s));const a=f(t,["video"]);return e!==void 0&&a!=null&&m(e,["instances[0]","video"],dx(a)),n}function aV(t,e){const n={},i=f(t,["prompt"]);e!==void 0&&i!=null&&m(e,["instances[0]","prompt"],i);const s=f(t,["image"]);e!==void 0&&s!=null&&m(e,["instances[0]","image"],Ci(s));const a=f(t,["video"]);return e!==void 0&&a!=null&&m(e,["instances[0]","video"],fx(a)),n}function lV(t){const e={},n=f(t,["_self"]);n!=null&&m(e,["image"],_V(n));const i=f(t,["raiFilteredReason"]);i!=null&&m(e,["raiFilteredReason"],i);const s=f(t,["_self"]);return s!=null&&m(e,["safetyAttributes"],lx(s)),e}function Jf(t){const e={},n=f(t,["_self"]);n!=null&&m(e,["image"],ax(n));const i=f(t,["raiFilteredReason"]);i!=null&&m(e,["raiFilteredReason"],i);const s=f(t,["_self"]);s!=null&&m(e,["safetyAttributes"],ux(s));const a=f(t,["prompt"]);return a!=null&&m(e,["enhancedPrompt"],a),e}function uV(t){const e={},n=f(t,["_self"]);n!=null&&m(e,["mask"],ax(n));const i=f(t,["labels"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>a)),m(e,["labels"],s)}return e}function cV(t){const e={},n=f(t,["video"]);return n!=null&&m(e,["video"],XV(n)),e}function dV(t){const e={},n=f(t,["_self"]);return n!=null&&m(e,["video"],WV(n)),e}function fV(t){const e={},n=f(t,["modelSelectionConfig"]);n!=null&&m(e,["modelConfig"],n);const i=f(t,["responseJsonSchema"]);i!=null&&m(e,["responseJsonSchema"],i);const s=f(t,["audioTimestamp"]);s!=null&&m(e,["audioTimestamp"],s);const a=f(t,["candidateCount"]);a!=null&&m(e,["candidateCount"],a);const u=f(t,["enableAffectiveDialog"]);u!=null&&m(e,["enableAffectiveDialog"],u);const d=f(t,["frequencyPenalty"]);d!=null&&m(e,["frequencyPenalty"],d);const p=f(t,["logprobs"]);p!=null&&m(e,["logprobs"],p);const h=f(t,["maxOutputTokens"]);h!=null&&m(e,["maxOutputTokens"],h);const v=f(t,["mediaResolution"]);v!=null&&m(e,["mediaResolution"],v);const E=f(t,["presencePenalty"]);E!=null&&m(e,["presencePenalty"],E);const S=f(t,["responseLogprobs"]);S!=null&&m(e,["responseLogprobs"],S);const C=f(t,["responseMimeType"]);C!=null&&m(e,["responseMimeType"],C);const D=f(t,["responseModalities"]);D!=null&&m(e,["responseModalities"],D);const U=f(t,["responseSchema"]);U!=null&&m(e,["responseSchema"],U);const P=f(t,["routingConfig"]);P!=null&&m(e,["routingConfig"],P);const q=f(t,["seed"]);q!=null&&m(e,["seed"],q);const X=f(t,["speechConfig"]);X!=null&&m(e,["speechConfig"],X);const H=f(t,["stopSequences"]);H!=null&&m(e,["stopSequences"],H);const ne=f(t,["temperature"]);ne!=null&&m(e,["temperature"],ne);const le=f(t,["thinkingConfig"]);le!=null&&m(e,["thinkingConfig"],le);const ce=f(t,["topK"]);ce!=null&&m(e,["topK"],ce);const N=f(t,["topP"]);if(N!=null&&m(e,["topP"],N),f(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function hV(t,e){const n={},i=f(e,["model"]);return i!=null&&m(n,["_url","name"],Qe(t,i)),n}function pV(t,e){const n={},i=f(e,["model"]);return i!=null&&m(n,["_url","name"],Qe(t,i)),n}function mV(t){const e={};if(f(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=f(t,["enableWidget"]);return n!=null&&m(e,["enableWidget"],n),e}function gV(t){const e={};if(f(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=f(t,["timeRangeFilter"]);return n!=null&&m(e,["timeRangeFilter"],n),e}function yV(t){const e={},n=f(t,["aspectRatio"]);n!=null&&m(e,["aspectRatio"],n);const i=f(t,["imageSize"]);if(i!=null&&m(e,["imageSize"],i),f(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function vV(t){const e={},n=f(t,["aspectRatio"]);n!=null&&m(e,["aspectRatio"],n);const i=f(t,["imageSize"]);i!=null&&m(e,["imageSize"],i);const s=f(t,["outputMimeType"]);s!=null&&m(e,["imageOutputOptions","mimeType"],s);const a=f(t,["outputCompressionQuality"]);return a!=null&&m(e,["imageOutputOptions","compressionQuality"],a),e}function _V(t){const e={},n=f(t,["bytesBase64Encoded"]);n!=null&&m(e,["imageBytes"],Os(n));const i=f(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function ax(t){const e={},n=f(t,["gcsUri"]);n!=null&&m(e,["gcsUri"],n);const i=f(t,["bytesBase64Encoded"]);i!=null&&m(e,["imageBytes"],Os(i));const s=f(t,["mimeType"]);return s!=null&&m(e,["mimeType"],s),e}function Kf(t){const e={};if(f(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=f(t,["imageBytes"]);n!=null&&m(e,["bytesBase64Encoded"],Os(n));const i=f(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function Ci(t){const e={},n=f(t,["gcsUri"]);n!=null&&m(e,["gcsUri"],n);const i=f(t,["imageBytes"]);i!=null&&m(e,["bytesBase64Encoded"],Os(i));const s=f(t,["mimeType"]);return s!=null&&m(e,["mimeType"],s),e}function EV(t,e,n){const i={},s=f(e,["pageSize"]);n!==void 0&&s!=null&&m(n,["_query","pageSize"],s);const a=f(e,["pageToken"]);n!==void 0&&a!=null&&m(n,["_query","pageToken"],a);const u=f(e,["filter"]);n!==void 0&&u!=null&&m(n,["_query","filter"],u);const d=f(e,["queryBase"]);return n!==void 0&&d!=null&&m(n,["_url","models_url"],ex(t,d)),i}function TV(t,e,n){const i={},s=f(e,["pageSize"]);n!==void 0&&s!=null&&m(n,["_query","pageSize"],s);const a=f(e,["pageToken"]);n!==void 0&&a!=null&&m(n,["_query","pageToken"],a);const u=f(e,["filter"]);n!==void 0&&u!=null&&m(n,["_query","filter"],u);const d=f(e,["queryBase"]);return n!==void 0&&d!=null&&m(n,["_url","models_url"],ex(t,d)),i}function SV(t,e){const n={},i=f(e,["config"]);return i!=null&&EV(t,i,n),n}function AV(t,e){const n={},i=f(e,["config"]);return i!=null&&TV(t,i,n),n}function wV(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const i=f(t,["nextPageToken"]);i!=null&&m(e,["nextPageToken"],i);const s=f(t,["_self"]);if(s!=null){let a=tx(s);Array.isArray(a)&&(a=a.map(u=>ig(u))),m(e,["models"],a)}return e}function xV(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const i=f(t,["nextPageToken"]);i!=null&&m(e,["nextPageToken"],i);const s=f(t,["_self"]);if(s!=null){let a=tx(s);Array.isArray(a)&&(a=a.map(u=>rg(u))),m(e,["models"],a)}return e}function CV(t){const e={},n=f(t,["maskMode"]);n!=null&&m(e,["maskMode"],n);const i=f(t,["segmentationClasses"]);i!=null&&m(e,["maskClasses"],i);const s=f(t,["maskDilation"]);return s!=null&&m(e,["dilation"],s),e}function ig(t){const e={},n=f(t,["name"]);n!=null&&m(e,["name"],n);const i=f(t,["displayName"]);i!=null&&m(e,["displayName"],i);const s=f(t,["description"]);s!=null&&m(e,["description"],s);const a=f(t,["version"]);a!=null&&m(e,["version"],a);const u=f(t,["_self"]);u!=null&&m(e,["tunedModelInfo"],BV(u));const d=f(t,["inputTokenLimit"]);d!=null&&m(e,["inputTokenLimit"],d);const p=f(t,["outputTokenLimit"]);p!=null&&m(e,["outputTokenLimit"],p);const h=f(t,["supportedGenerationMethods"]);h!=null&&m(e,["supportedActions"],h);const v=f(t,["temperature"]);v!=null&&m(e,["temperature"],v);const E=f(t,["maxTemperature"]);E!=null&&m(e,["maxTemperature"],E);const S=f(t,["topP"]);S!=null&&m(e,["topP"],S);const C=f(t,["topK"]);C!=null&&m(e,["topK"],C);const D=f(t,["thinking"]);return D!=null&&m(e,["thinking"],D),e}function rg(t){const e={},n=f(t,["name"]);n!=null&&m(e,["name"],n);const i=f(t,["displayName"]);i!=null&&m(e,["displayName"],i);const s=f(t,["description"]);s!=null&&m(e,["description"],s);const a=f(t,["versionId"]);a!=null&&m(e,["version"],a);const u=f(t,["deployedModels"]);if(u!=null){let E=u;Array.isArray(E)&&(E=E.map(S=>Fk(S))),m(e,["endpoints"],E)}const d=f(t,["labels"]);d!=null&&m(e,["labels"],d);const p=f(t,["_self"]);p!=null&&m(e,["tunedModelInfo"],zV(p));const h=f(t,["defaultCheckpointId"]);h!=null&&m(e,["defaultCheckpointId"],h);const v=f(t,["checkpoints"]);if(v!=null){let E=v;Array.isArray(E)&&(E=E.map(S=>S)),m(e,["checkpoints"],E)}return e}function IV(t){const e={},n=f(t,["mediaResolution"]);n!=null&&m(e,["mediaResolution"],n);const i=f(t,["codeExecutionResult"]);i!=null&&m(e,["codeExecutionResult"],i);const s=f(t,["executableCode"]);s!=null&&m(e,["executableCode"],s);const a=f(t,["fileData"]);a!=null&&m(e,["fileData"],qk(a));const u=f(t,["functionCall"]);u!=null&&m(e,["functionCall"],Hk(u));const d=f(t,["functionResponse"]);d!=null&&m(e,["functionResponse"],d);const p=f(t,["inlineData"]);p!=null&&m(e,["inlineData"],fk(p));const h=f(t,["text"]);h!=null&&m(e,["text"],h);const v=f(t,["thought"]);v!=null&&m(e,["thought"],v);const E=f(t,["thoughtSignature"]);E!=null&&m(e,["thoughtSignature"],E);const S=f(t,["videoMetadata"]);return S!=null&&m(e,["videoMetadata"],S),e}function bV(t){const e={},n=f(t,["productImage"]);return n!=null&&m(e,["image"],Ci(n)),e}function RV(t,e){const n={},i=f(t,["numberOfImages"]);e!==void 0&&i!=null&&m(e,["parameters","sampleCount"],i);const s=f(t,["baseSteps"]);e!==void 0&&s!=null&&m(e,["parameters","baseSteps"],s);const a=f(t,["outputGcsUri"]);e!==void 0&&a!=null&&m(e,["parameters","storageUri"],a);const u=f(t,["seed"]);e!==void 0&&u!=null&&m(e,["parameters","seed"],u);const d=f(t,["safetyFilterLevel"]);e!==void 0&&d!=null&&m(e,["parameters","safetySetting"],d);const p=f(t,["personGeneration"]);e!==void 0&&p!=null&&m(e,["parameters","personGeneration"],p);const h=f(t,["addWatermark"]);e!==void 0&&h!=null&&m(e,["parameters","addWatermark"],h);const v=f(t,["outputMimeType"]);e!==void 0&&v!=null&&m(e,["parameters","outputOptions","mimeType"],v);const E=f(t,["outputCompressionQuality"]);e!==void 0&&E!=null&&m(e,["parameters","outputOptions","compressionQuality"],E);const S=f(t,["enhancePrompt"]);e!==void 0&&S!=null&&m(e,["parameters","enhancePrompt"],S);const C=f(t,["labels"]);return e!==void 0&&C!=null&&m(e,["labels"],C),n}function NV(t,e){const n={},i=f(e,["model"]);i!=null&&m(n,["_url","model"],Qe(t,i));const s=f(e,["source"]);s!=null&&DV(s,n);const a=f(e,["config"]);return a!=null&&RV(a,n),n}function MV(t){const e={},n=f(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>Jf(s))),m(e,["generatedImages"],i)}return e}function DV(t,e){const n={},i=f(t,["prompt"]);e!==void 0&&i!=null&&m(e,["instances[0]","prompt"],i);const s=f(t,["personImage"]);e!==void 0&&s!=null&&m(e,["instances[0]","personImage","image"],Ci(s));const a=f(t,["productImages"]);if(e!==void 0&&a!=null){let u=a;Array.isArray(u)&&(u=u.map(d=>bV(d))),m(e,["instances[0]","productImages"],u)}return n}function PV(t){const e={},n=f(t,["referenceImage"]);n!=null&&m(e,["referenceImage"],Ci(n));const i=f(t,["referenceId"]);i!=null&&m(e,["referenceId"],i);const s=f(t,["referenceType"]);s!=null&&m(e,["referenceType"],s);const a=f(t,["maskImageConfig"]);a!=null&&m(e,["maskImageConfig"],CV(a));const u=f(t,["controlImageConfig"]);u!=null&&m(e,["controlImageConfig"],_k(u));const d=f(t,["styleImageConfig"]);d!=null&&m(e,["styleImageConfig"],d);const p=f(t,["subjectImageConfig"]);return p!=null&&m(e,["subjectImageConfig"],p),e}function lx(t){const e={},n=f(t,["safetyAttributes","categories"]);n!=null&&m(e,["categories"],n);const i=f(t,["safetyAttributes","scores"]);i!=null&&m(e,["scores"],i);const s=f(t,["contentType"]);return s!=null&&m(e,["contentType"],s),e}function ux(t){const e={},n=f(t,["safetyAttributes","categories"]);n!=null&&m(e,["categories"],n);const i=f(t,["safetyAttributes","scores"]);i!=null&&m(e,["scores"],i);const s=f(t,["contentType"]);return s!=null&&m(e,["contentType"],s),e}function kV(t){const e={},n=f(t,["category"]);if(n!=null&&m(e,["category"],n),f(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=f(t,["threshold"]);return i!=null&&m(e,["threshold"],i),e}function VV(t){const e={},n=f(t,["image"]);return n!=null&&m(e,["image"],Ci(n)),e}function LV(t,e){const n={},i=f(t,["mode"]);e!==void 0&&i!=null&&m(e,["parameters","mode"],i);const s=f(t,["maxPredictions"]);e!==void 0&&s!=null&&m(e,["parameters","maxPredictions"],s);const a=f(t,["confidenceThreshold"]);e!==void 0&&a!=null&&m(e,["parameters","confidenceThreshold"],a);const u=f(t,["maskDilation"]);e!==void 0&&u!=null&&m(e,["parameters","maskDilation"],u);const d=f(t,["binaryColorThreshold"]);e!==void 0&&d!=null&&m(e,["parameters","binaryColorThreshold"],d);const p=f(t,["labels"]);return e!==void 0&&p!=null&&m(e,["labels"],p),n}function UV(t,e){const n={},i=f(e,["model"]);i!=null&&m(n,["_url","model"],Qe(t,i));const s=f(e,["source"]);s!=null&&FV(s,n);const a=f(e,["config"]);return a!=null&&LV(a,n),n}function OV(t){const e={},n=f(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>uV(s))),m(e,["generatedMasks"],i)}return e}function FV(t,e){const n={},i=f(t,["prompt"]);e!==void 0&&i!=null&&m(e,["instances[0]","prompt"],i);const s=f(t,["image"]);e!==void 0&&s!=null&&m(e,["instances[0]","image"],Ci(s));const a=f(t,["scribbleImage"]);return e!==void 0&&a!=null&&m(e,["instances[0]","scribble"],VV(a)),n}function qV(t){const e={},n=f(t,["functionCallingConfig"]);n!=null&&m(e,["functionCallingConfig"],Bk(n));const i=f(t,["retrievalConfig"]);return i!=null&&m(e,["retrievalConfig"],i),e}function HV(t){const e={},n=f(t,["functionDeclarations"]);if(n!=null){let v=n;Array.isArray(v)&&(v=v.map(E=>E)),m(e,["functionDeclarations"],v)}if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=f(t,["googleSearchRetrieval"]);i!=null&&m(e,["googleSearchRetrieval"],i);const s=f(t,["computerUse"]);s!=null&&m(e,["computerUse"],s);const a=f(t,["fileSearch"]);a!=null&&m(e,["fileSearch"],a);const u=f(t,["codeExecution"]);if(u!=null&&m(e,["codeExecution"],u),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(t,["googleMaps"]);d!=null&&m(e,["googleMaps"],mV(d));const p=f(t,["googleSearch"]);p!=null&&m(e,["googleSearch"],gV(p));const h=f(t,["urlContext"]);return h!=null&&m(e,["urlContext"],h),e}function cx(t){const e={},n=f(t,["functionDeclarations"]);if(n!=null){let E=n;Array.isArray(E)&&(E=E.map(S=>zk(S))),m(e,["functionDeclarations"],E)}const i=f(t,["retrieval"]);i!=null&&m(e,["retrieval"],i);const s=f(t,["googleSearchRetrieval"]);s!=null&&m(e,["googleSearchRetrieval"],s);const a=f(t,["computerUse"]);if(a!=null&&m(e,["computerUse"],a),f(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=f(t,["codeExecution"]);u!=null&&m(e,["codeExecution"],u);const d=f(t,["enterpriseWebSearch"]);d!=null&&m(e,["enterpriseWebSearch"],d);const p=f(t,["googleMaps"]);p!=null&&m(e,["googleMaps"],p);const h=f(t,["googleSearch"]);h!=null&&m(e,["googleSearch"],h);const v=f(t,["urlContext"]);return v!=null&&m(e,["urlContext"],v),e}function BV(t){const e={},n=f(t,["baseModel"]);n!=null&&m(e,["baseModel"],n);const i=f(t,["createTime"]);i!=null&&m(e,["createTime"],i);const s=f(t,["updateTime"]);return s!=null&&m(e,["updateTime"],s),e}function zV(t){const e={},n=f(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&m(e,["baseModel"],n);const i=f(t,["createTime"]);i!=null&&m(e,["createTime"],i);const s=f(t,["updateTime"]);return s!=null&&m(e,["updateTime"],s),e}function GV(t,e){const n={},i=f(t,["displayName"]);e!==void 0&&i!=null&&m(e,["displayName"],i);const s=f(t,["description"]);e!==void 0&&s!=null&&m(e,["description"],s);const a=f(t,["defaultCheckpointId"]);return e!==void 0&&a!=null&&m(e,["defaultCheckpointId"],a),n}function $V(t,e){const n={},i=f(t,["displayName"]);e!==void 0&&i!=null&&m(e,["displayName"],i);const s=f(t,["description"]);e!==void 0&&s!=null&&m(e,["description"],s);const a=f(t,["defaultCheckpointId"]);return e!==void 0&&a!=null&&m(e,["defaultCheckpointId"],a),n}function jV(t,e){const n={},i=f(e,["model"]);i!=null&&m(n,["_url","name"],Qe(t,i));const s=f(e,["config"]);return s!=null&&GV(s,n),n}function JV(t,e){const n={},i=f(e,["model"]);i!=null&&m(n,["_url","model"],Qe(t,i));const s=f(e,["config"]);return s!=null&&$V(s,n),n}function KV(t,e){const n={},i=f(t,["outputGcsUri"]);e!==void 0&&i!=null&&m(e,["parameters","storageUri"],i);const s=f(t,["safetyFilterLevel"]);e!==void 0&&s!=null&&m(e,["parameters","safetySetting"],s);const a=f(t,["personGeneration"]);e!==void 0&&a!=null&&m(e,["parameters","personGeneration"],a);const u=f(t,["includeRaiReason"]);e!==void 0&&u!=null&&m(e,["parameters","includeRaiReason"],u);const d=f(t,["outputMimeType"]);e!==void 0&&d!=null&&m(e,["parameters","outputOptions","mimeType"],d);const p=f(t,["outputCompressionQuality"]);e!==void 0&&p!=null&&m(e,["parameters","outputOptions","compressionQuality"],p);const h=f(t,["enhanceInputImage"]);e!==void 0&&h!=null&&m(e,["parameters","upscaleConfig","enhanceInputImage"],h);const v=f(t,["imagePreservationFactor"]);e!==void 0&&v!=null&&m(e,["parameters","upscaleConfig","imagePreservationFactor"],v);const E=f(t,["labels"]);e!==void 0&&E!=null&&m(e,["labels"],E);const S=f(t,["numberOfImages"]);e!==void 0&&S!=null&&m(e,["parameters","sampleCount"],S);const C=f(t,["mode"]);return e!==void 0&&C!=null&&m(e,["parameters","mode"],C),n}function YV(t,e){const n={},i=f(e,["model"]);i!=null&&m(n,["_url","model"],Qe(t,i));const s=f(e,["image"]);s!=null&&m(n,["instances[0]","image"],Ci(s));const a=f(e,["upscaleFactor"]);a!=null&&m(n,["parameters","upscaleConfig","upscaleFactor"],a);const u=f(e,["config"]);return u!=null&&KV(u,n),n}function QV(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const i=f(t,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>Jf(a))),m(e,["generatedImages"],s)}return e}function XV(t){const e={},n=f(t,["uri"]);n!=null&&m(e,["uri"],n);const i=f(t,["encodedVideo"]);i!=null&&m(e,["videoBytes"],Os(i));const s=f(t,["encoding"]);return s!=null&&m(e,["mimeType"],s),e}function WV(t){const e={},n=f(t,["gcsUri"]);n!=null&&m(e,["uri"],n);const i=f(t,["bytesBase64Encoded"]);i!=null&&m(e,["videoBytes"],Os(i));const s=f(t,["mimeType"]);return s!=null&&m(e,["mimeType"],s),e}function ZV(t){const e={},n=f(t,["image"]);n!=null&&m(e,["_self"],Ci(n));const i=f(t,["maskMode"]);return i!=null&&m(e,["maskMode"],i),e}function eL(t){const e={},n=f(t,["image"]);n!=null&&m(e,["image"],Kf(n));const i=f(t,["referenceType"]);return i!=null&&m(e,["referenceType"],i),e}function tL(t){const e={},n=f(t,["image"]);n!=null&&m(e,["image"],Ci(n));const i=f(t,["referenceType"]);return i!=null&&m(e,["referenceType"],i),e}function dx(t){const e={},n=f(t,["uri"]);n!=null&&m(e,["uri"],n);const i=f(t,["videoBytes"]);i!=null&&m(e,["encodedVideo"],Os(i));const s=f(t,["mimeType"]);return s!=null&&m(e,["encoding"],s),e}function fx(t){const e={},n=f(t,["uri"]);n!=null&&m(e,["gcsUri"],n);const i=f(t,["videoBytes"]);i!=null&&m(e,["bytesBase64Encoded"],Os(i));const s=f(t,["mimeType"]);return s!=null&&m(e,["mimeType"],s),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function nL(t,e){const n={},i=f(t,["displayName"]);return e!==void 0&&i!=null&&m(e,["displayName"],i),n}function iL(t){const e={},n=f(t,["config"]);return n!=null&&nL(n,e),e}function rL(t,e){const n={},i=f(t,["force"]);return e!==void 0&&i!=null&&m(e,["_query","force"],i),n}function sL(t){const e={},n=f(t,["name"]);n!=null&&m(e,["_url","name"],n);const i=f(t,["config"]);return i!=null&&rL(i,e),e}function oL(t){const e={},n=f(t,["name"]);return n!=null&&m(e,["_url","name"],n),e}function aL(t,e){const n={},i=f(t,["customMetadata"]);if(e!==void 0&&i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>u)),m(e,["customMetadata"],a)}const s=f(t,["chunkingConfig"]);return e!==void 0&&s!=null&&m(e,["chunkingConfig"],s),n}function lL(t){const e={},n=f(t,["name"]);n!=null&&m(e,["name"],n);const i=f(t,["metadata"]);i!=null&&m(e,["metadata"],i);const s=f(t,["done"]);s!=null&&m(e,["done"],s);const a=f(t,["error"]);a!=null&&m(e,["error"],a);const u=f(t,["response"]);return u!=null&&m(e,["response"],cL(u)),e}function uL(t){const e={},n=f(t,["fileSearchStoreName"]);n!=null&&m(e,["_url","file_search_store_name"],n);const i=f(t,["fileName"]);i!=null&&m(e,["fileName"],i);const s=f(t,["config"]);return s!=null&&aL(s,e),e}function cL(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const i=f(t,["parent"]);i!=null&&m(e,["parent"],i);const s=f(t,["documentName"]);return s!=null&&m(e,["documentName"],s),e}function dL(t,e){const n={},i=f(t,["pageSize"]);e!==void 0&&i!=null&&m(e,["_query","pageSize"],i);const s=f(t,["pageToken"]);return e!==void 0&&s!=null&&m(e,["_query","pageToken"],s),n}function fL(t){const e={},n=f(t,["config"]);return n!=null&&dL(n,e),e}function hL(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const i=f(t,["nextPageToken"]);i!=null&&m(e,["nextPageToken"],i);const s=f(t,["fileSearchStores"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(u=>u)),m(e,["fileSearchStores"],a)}return e}function hx(t,e){const n={},i=f(t,["mimeType"]);e!==void 0&&i!=null&&m(e,["mimeType"],i);const s=f(t,["displayName"]);e!==void 0&&s!=null&&m(e,["displayName"],s);const a=f(t,["customMetadata"]);if(e!==void 0&&a!=null){let d=a;Array.isArray(d)&&(d=d.map(p=>p)),m(e,["customMetadata"],d)}const u=f(t,["chunkingConfig"]);return e!==void 0&&u!=null&&m(e,["chunkingConfig"],u),n}function pL(t){const e={},n=f(t,["fileSearchStoreName"]);n!=null&&m(e,["_url","file_search_store_name"],n);const i=f(t,["config"]);return i!=null&&hx(i,e),e}function mL(t){const e={},n=f(t,["sdkHttpResponse"]);return n!=null&&m(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const gL="Content-Type",yL="X-Server-Timeout",vL="User-Agent",sg="x-goog-api-client",_L="1.34.0",EL=`google-genai-sdk/${_L}`,TL="v1beta1",SL="v1beta";class AL{constructor(e){var n,i;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const s={};this.clientOptions.vertexai?(s.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:TL,s.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(s.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:SL,s.baseUrl="https://generativelanguage.googleapis.com/"),s.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=s,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(s,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,i){const s=[this.getRequestUrlInternal(n)];return i&&s.push(this.getBaseResourcePath()),e!==""&&s.push(e),new URL(`${s.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,n,i);if(e.queryParams)for(const[u,d]of Object.entries(e.queryParams))s.searchParams.append(u,String(d));let a={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else a.body=e.body;return a=await this.includeExtraHttpOptionsToRequestInit(a,n,s.toString(),e.abortSignal),this.unaryApiCall(s,a,e.httpMethod)}patchHttpOptions(e,n){const i=JSON.parse(JSON.stringify(e));for(const[s,a]of Object.entries(n))typeof a=="object"?i[s]=Object.assign(Object.assign({},i[s]),a):a!==void 0&&(i[s]=a);return i}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,n,i);(!s.searchParams.has("alt")||s.searchParams.get("alt")!=="sse")&&s.searchParams.set("alt","sse");let a={};return a.body=e.body,a=await this.includeExtraHttpOptionsToRequestInit(a,n,s.toString(),e.abortSignal),this.streamApiCall(s,a,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,i,s){if(n&&n.timeout||s){const a=new AbortController,u=a.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const d=setTimeout(()=>a.abort(),n.timeout);d&&typeof d.unref=="function"&&d.unref()}s&&s.addEventListener("abort",()=>{a.abort()}),e.signal=u}return n&&n.extraBody!==null&&wL(e,n.extraBody),e.headers=await this.getHeadersInternal(n,i),e}async unaryApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async s=>(await cS(s),new eg(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}async streamApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async s=>(await cS(s),this.processStreamResponse(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}processStreamResponse(e){return Ei(this,arguments,function*(){var i;const s=(i=e==null?void 0:e.body)===null||i===void 0?void 0:i.getReader(),a=new TextDecoder("utf-8");if(!s)throw new Error("Response body is empty");try{let u="";const d="data:",p=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:h,value:v}=yield be(s.read());if(h){if(u.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const E=a.decode(v,{stream:!0});try{const D=JSON.parse(E);if("error"in D){const U=JSON.parse(JSON.stringify(D.error)),P=U.status,q=U.code,X=`got status: ${P}. ${JSON.stringify(D)}`;if(q>=400&&q<600)throw new $f({message:X,status:q})}}catch(D){if(D.name==="ApiError")throw D}u+=E;let S=-1,C=0;for(;;){S=-1,C=0;for(const P of p){const q=u.indexOf(P);q!==-1&&(S===-1||q<S)&&(S=q,C=P.length)}if(S===-1)break;const D=u.substring(0,S);u=u.substring(S+C);const U=D.trim();if(U.startsWith(d)){const P=U.substring(d.length).trim();try{const q=new Response(P,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield be(new eg(q))}catch(q){throw new Error(`exception parsing stream chunk ${P}. ${q}`)}}}}}finally{s.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const e={},n=EL+" "+this.clientOptions.userAgentExtra;return e[vL]=n,e[sg]=n,e[gL]="application/json",e}async getHeadersInternal(e,n){const i=new Headers;if(e&&e.headers){for(const[s,a]of Object.entries(e.headers))i.append(s,a);e.timeout&&e.timeout>0&&i.append(yL,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(i,n),i}getFileName(e){var n;let i="";return typeof e=="string"&&(i=e.replace(/[/\\]+$/,""),i=(n=i.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),i}async uploadFile(e,n){var i;const s={};n!=null&&(s.mimeType=n.mimeType,s.name=n.name,s.displayName=n.displayName),s.name&&!s.name.startsWith("files/")&&(s.name=`files/${s.name}`);const a=this.clientOptions.uploader,u=await a.stat(e);s.sizeBytes=String(u.size);const d=(i=n==null?void 0:n.mimeType)!==null&&i!==void 0?i:u.type;if(d===void 0||d==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");s.mimeType=d;const p={file:s},h=this.getFileName(e),v=he("upload/v1beta/files",p._url),E=await this.fetchUploadUrl(v,s.sizeBytes,s.mimeType,h,p,n==null?void 0:n.httpOptions);return a.upload(e,E,this)}async uploadFileToFileSearchStore(e,n,i){var s;const a=this.clientOptions.uploader,u=await a.stat(n),d=String(u.size),p=(s=i==null?void 0:i.mimeType)!==null&&s!==void 0?s:u.type;if(p===void 0||p==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const h=`upload/v1beta/${e}:uploadToFileSearchStore`,v=this.getFileName(n),E={};i!=null&&hx(i,E);const S=await this.fetchUploadUrl(h,d,p,v,E,i==null?void 0:i.httpOptions);return a.uploadToFileSearchStore(n,S,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,i,s,a,u){var d;let p={};u?p=u:p={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${i}`},s?{"X-Goog-Upload-File-Name":s}:{})};const h=await this.request({path:e,body:JSON.stringify(a),httpMethod:"POST",httpOptions:p});if(!h||!(h!=null&&h.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const v=(d=h==null?void 0:h.headers)===null||d===void 0?void 0:d["x-goog-upload-url"];if(v===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return v}}async function cS(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let i;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await t.json():i={error:{message:await t.text(),code:t.status,status:t.statusText}};const s=JSON.stringify(i);throw n>=400&&n<600?new $f({message:s,status:n}):new Error(s)}}function wL(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const a=JSON.parse(t.body);if(typeof a=="object"&&a!==null&&!Array.isArray(a))n=a;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(a,u){const d=Object.assign({},a);for(const p in u)if(Object.prototype.hasOwnProperty.call(u,p)){const h=u[p],v=d[p];h&&typeof h=="object"&&!Array.isArray(h)&&v&&typeof v=="object"&&!Array.isArray(v)?d[p]=i(v,h):(v&&h&&typeof v!=typeof h&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${p}". Original type: ${typeof v}, New type: ${typeof h}. Overwriting.`),d[p]=h)}return d}const s=i(n,e);t.body=JSON.stringify(s)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const xL="mcp_used/unknown";let CL=!1;function px(t){for(const e of t)if(IL(e)||typeof e=="object"&&"inputSchema"in e)return!0;return CL}function mx(t){var e;const n=(e=t[sg])!==null&&e!==void 0?e:"";t[sg]=(n+` ${xL}`).trimStart()}function IL(t){return t!==null&&typeof t=="object"&&t instanceof sy}function bL(t){return Ei(this,arguments,function*(n,i=100){let s,a=0;for(;a<i;){const u=yield be(n.listTools({cursor:s}));for(const d of u.tools)yield yield be(d),a++;if(!u.nextCursor)break;s=u.nextCursor}})}class sy{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new sy(e,n)}async initialize(){var e,n,i,s;if(this.mcpTools.length>0)return;const a={},u=[];for(const v of this.mcpClients)try{for(var d=!0,p=(n=void 0,Ti(bL(v))),h;h=await p.next(),e=h.done,!e;d=!0){s=h.value,d=!1;const E=s;u.push(E);const S=E.name;if(a[S])throw new Error(`Duplicate function name ${S} found in MCP tools. Please ensure function names are unique.`);a[S]=v}}catch(E){n={error:E}}finally{try{!d&&!e&&(i=p.return)&&await i.call(p)}finally{if(n)throw n.error}}this.mcpTools=u,this.functionNameToMcpClient=a}async tool(){return await this.initialize(),oD(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const s=this.functionNameToMcpClient[i.name];let a;this.config.timeout&&(a={timeout:this.config.timeout});const u=await s.callTool({name:i.name,arguments:i.args},void 0,a);n.push({functionResponse:{name:i.name,response:u.isError?{error:u}:u}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function RL(t,e,n){const i=new WM;let s;n.data instanceof Blob?s=JSON.parse(await n.data.text()):s=JSON.parse(n.data),Object.assign(i,s),e(i)}class NL{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i}async connect(e){var n,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const s=this.apiClient.getWebsocketBaseUrl(),a=this.apiClient.getApiVersion(),u=PL(this.apiClient.getDefaultHeaders()),d=this.apiClient.getApiKey(),p=`${s}/ws/google.ai.generativelanguage.${a}.GenerativeService.BidiGenerateMusic?key=${d}`;let h=()=>{};const v=new Promise(H=>{h=H}),E=e.callbacks,S=function(){h({})},C=this.apiClient,D={onopen:S,onmessage:H=>{RL(C,E.onmessage,H)},onerror:(n=E==null?void 0:E.onerror)!==null&&n!==void 0?n:function(H){},onclose:(i=E==null?void 0:E.onclose)!==null&&i!==void 0?i:function(H){}},U=this.webSocketFactory.create(p,DL(u),D);U.connect(),await v;const X={setup:{model:Qe(this.apiClient,e.model)}};return U.send(JSON.stringify(X)),new ML(U,this.apiClient)}}class ML{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=ik(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=nk(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(Ua.PLAY)}pause(){this.sendPlaybackControl(Ua.PAUSE)}stop(){this.sendPlaybackControl(Ua.STOP)}resetContext(){this.sendPlaybackControl(Ua.RESET_CONTEXT)}close(){this.conn.close()}}function DL(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function PL(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const kL="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function VL(t,e,n){const i=new XM;let s;n.data instanceof Blob?s=await n.data.text():n.data instanceof ArrayBuffer?s=new TextDecoder().decode(n.data):s=n.data;const a=JSON.parse(s);if(t.isVertexAI()){const u=ok(a);Object.assign(i,u)}else Object.assign(i,a);e(i)}class LL{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i,this.music=new NL(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,i,s,a,u,d;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const p=this.apiClient.getWebsocketBaseUrl(),h=this.apiClient.getApiVersion();let v;const E=this.apiClient.getHeaders();e.config&&e.config.tools&&px(e.config.tools)&&mx(E);const S=qL(E);if(this.apiClient.isVertexAI())v=`${p}/ws/google.cloud.aiplatform.${h}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(S,v);else{const R=this.apiClient.getApiKey();let V="BidiGenerateContent",O="key";R!=null&&R.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),h!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),V="BidiGenerateContentConstrained",O="access_token"),v=`${p}/ws/google.ai.generativelanguage.${h}.GenerativeService.${V}?${O}=${R}`}let C=()=>{};const D=new Promise(R=>{C=R}),U=e.callbacks,P=function(){var R;(R=U==null?void 0:U.onopen)===null||R===void 0||R.call(U),C({})},q=this.apiClient,X={onopen:P,onmessage:R=>{VL(q,U.onmessage,R)},onerror:(n=U==null?void 0:U.onerror)!==null&&n!==void 0?n:function(R){},onclose:(i=U==null?void 0:U.onclose)!==null&&i!==void 0?i:function(R){}},H=this.webSocketFactory.create(v,FL(S),X);H.connect(),await D;let ne=Qe(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&ne.startsWith("publishers/")){const R=this.apiClient.getProject(),V=this.apiClient.getLocation();ne=`projects/${R}/locations/${V}/`+ne}let le={};this.apiClient.isVertexAI()&&((s=e.config)===null||s===void 0?void 0:s.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Fu.AUDIO]}:e.config.responseModalities=[Fu.AUDIO]),!((a=e.config)===null||a===void 0)&&a.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const ce=(d=(u=e.config)===null||u===void 0?void 0:u.tools)!==null&&d!==void 0?d:[],N=[];for(const R of ce)if(this.isCallableTool(R)){const V=R;N.push(await V.tool())}else N.push(R);N.length>0&&(e.config.tools=N);const M={model:ne,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?le=tk(this.apiClient,M):le=ek(this.apiClient,M),delete le.config,H.send(JSON.stringify(le)),new OL(H,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const UL={turnComplete:!0};class OL{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let i=[];try{i=ni(n.turns),e.isVertexAI()||(i=i.map(s=>jf(s)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:i,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let i=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?i=n.functionResponses:i=[n.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const a of i){if(typeof a!="object"||a===null||!("name"in a)||!("response"in a))throw new Error(`Could not parse function response, type '${typeof a}'.`);if(!e.isVertexAI()&&!("id"in a))throw new Error(kL)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},UL),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:sk(e)}:n={realtimeInput:rk(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function FL(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function qL(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const dS=10;function fS(t){var e,n,i;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let s=!1;for(const u of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(Ha(u)){s=!0;break}if(!s)return!0;const a=(i=t==null?void 0:t.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return a&&(a<0||!Number.isInteger(a))||a==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",a),!0):!1}function Ha(t){return"callTool"in t&&typeof t.callTool=="function"}function HL(t){var e,n,i;return(i=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(s=>Ha(s)))!==null&&i!==void 0?i:!1}function hS(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((i,s)=>{if(Ha(i))return;const a=i;a.functionDeclarations&&a.functionDeclarations.length>0&&n.push(s)}),n}function pS(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class BL extends Or{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var i,s,a,u,d;const p=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!HL(n)||fS(n.config))return await this.generateContentInternal(p);const h=hS(n);if(h.length>0){const U=h.map(P=>`tools[${P}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${U}.`)}let v,E;const S=ni(p.contents),C=(a=(s=(i=p.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&a!==void 0?a:dS;let D=0;for(;D<C&&(v=await this.generateContentInternal(p),!(!v.functionCalls||v.functionCalls.length===0));){const U=v.candidates[0].content,P=[];for(const q of(d=(u=n.config)===null||u===void 0?void 0:u.tools)!==null&&d!==void 0?d:[])if(Ha(q)){const H=await q.callTool(v.functionCalls);P.push(...H)}D++,E={role:"user",parts:P},p.contents=ni(p.contents),p.contents.push(U),p.contents.push(E),pS(p.config)&&(S.push(U),S.push(E))}return pS(p.config)&&(v.automaticFunctionCallingHistory=S),v},this.generateContentStream=async n=>{var i,s,a,u,d;if(this.maybeMoveToResponseJsonSchem(n),fS(n.config)){const E=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(E)}const p=hS(n);if(p.length>0){const E=p.map(S=>`tools[${S}]`).join(", ");throw new Error(`Incompatible tools found at ${E}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const h=(a=(s=(i=n==null?void 0:n.config)===null||i===void 0?void 0:i.toolConfig)===null||s===void 0?void 0:s.functionCallingConfig)===null||a===void 0?void 0:a.streamFunctionCallArguments,v=(d=(u=n==null?void 0:n.config)===null||u===void 0?void 0:u.automaticFunctionCalling)===null||d===void 0?void 0:d.disable;if(h&&!v)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(i=>{var s;let a;const u=[];if(i!=null&&i.generatedImages)for(const p of i.generatedImages)p&&(p!=null&&p.safetyAttributes)&&((s=p==null?void 0:p.safetyAttributes)===null||s===void 0?void 0:s.contentType)==="Positive Prompt"?a=p==null?void 0:p.safetyAttributes:u.push(p);let d;return a?d={generatedImages:u,positivePromptSafetyAttributes:a,sdkHttpResponse:i.sdkHttpResponse}:d={generatedImages:u,sdkHttpResponse:i.sdkHttpResponse},d}),this.list=async n=>{var i;const u={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!u.config.queryBase){if(!((i=u.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");u.config.filter="labels.tune-type:*"}return new Vo(Dr.PAGED_ITEM_MODELS,d=>this.listInternal(d),await this.listInternal(u),u)},this.editImage=async n=>{const i={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(i.referenceImages=n.referenceImages.map(s=>s.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async n=>{let i={numberOfImages:1,mode:"upscale"};n.config&&(i=Object.assign(Object.assign({},i),n.config));const s={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:i};return await this.upscaleImageInternal(s)},this.generateVideos=async n=>{var i,s,a,u,d,p;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((i=n.video)===null||i===void 0)&&i.uri&&(!((s=n.video)===null||s===void 0)&&s.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((u=(a=n.source)===null||a===void 0?void 0:a.video)===null||u===void 0)&&u.uri&&(!((p=(d=n.source)===null||d===void 0?void 0:d.video)===null||p===void 0)&&p.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,i,s;const a=(n=e.config)===null||n===void 0?void 0:n.tools;if(!a)return e;const u=await Promise.all(a.map(async p=>Ha(p)?await p.tool():p)),d={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:u})};if(d.config.tools=u,e.config&&e.config.tools&&px(e.config.tools)){const p=(s=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&s!==void 0?s:{};let h=Object.assign({},p);Object.keys(h).length===0&&(h=this.apiClient.getDefaultHeaders()),mx(h),d.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:h})}return d}async initAfcToolsMap(e){var n,i,s;const a=new Map;for(const u of(i=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&i!==void 0?i:[])if(Ha(u)){const d=u,p=await d.tool();for(const h of(s=p.functionDeclarations)!==null&&s!==void 0?s:[]){if(!h.name)throw new Error("Function declaration name is required.");if(a.has(h.name))throw new Error(`Duplicate tool declaration name: ${h.name}`);a.set(h.name,d)}}return a}async processAfcStream(e){var n,i,s;const a=(s=(i=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&s!==void 0?s:dS;let u=!1,d=0;const p=await this.initAfcToolsMap(e);return(function(h,v,E){return Ei(this,arguments,function*(){for(var S,C,D,U,P,q;d<a;){u&&(d++,u=!1);const le=yield be(h.processParamsMaybeAddMcpUsage(E)),ce=yield be(h.generateContentStreamInternal(le)),N=[],M=[];try{for(var X=!0,H=(C=void 0,Ti(ce)),ne;ne=yield be(H.next()),S=ne.done,!S;X=!0){U=ne.value,X=!1;const R=U;if(yield yield be(R),R.candidates&&(!((P=R.candidates[0])===null||P===void 0)&&P.content)){M.push(R.candidates[0].content);for(const V of(q=R.candidates[0].content.parts)!==null&&q!==void 0?q:[])if(d<a&&V.functionCall){if(!V.functionCall.name)throw new Error("Function call name was not returned by the model.");if(v.has(V.functionCall.name)){const O=yield be(v.get(V.functionCall.name).callTool([V.functionCall]));N.push(...O)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${v.keys()}, mising tool: ${V.functionCall.name}`)}}}}catch(R){C={error:R}}finally{try{!X&&!S&&(D=H.return)&&(yield be(D.call(H)))}finally{if(C)throw C.error}}if(N.length>0){u=!0;const R=new Eu;R.candidates=[{content:{role:"user",parts:N}}],yield yield be(R);const V=[];V.push(...M),V.push({role:"user",parts:N});const O=ni(E.contents).concat(V);E.contents=O}else break}})})(this,p,e)}async generateContentInternal(e){var n,i,s,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=aS(this.apiClient,e);return d=he("{model}:generateContent",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=uS(v),S=new Eu;return Object.assign(S,E),S})}else{const h=oS(this.apiClient,e);return d=he("{model}:generateContent",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=lS(v),S=new Eu;return Object.assign(S,E),S})}}async generateContentStreamInternal(e){var n,i,s,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=aS(this.apiClient,e);return d=he("{model}:streamGenerateContent?alt=sse",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.requestStream({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),u.then(function(E){return Ei(this,arguments,function*(){var S,C,D,U;try{for(var P=!0,q=Ti(E),X;X=yield be(q.next()),S=X.done,!S;P=!0){U=X.value,P=!1;const H=U,ne=uS(yield be(H.json()));ne.sdkHttpResponse={headers:H.headers};const le=new Eu;Object.assign(le,ne),yield yield be(le)}}catch(H){C={error:H}}finally{try{!P&&!S&&(D=q.return)&&(yield be(D.call(q)))}finally{if(C)throw C.error}}})})}else{const h=oS(this.apiClient,e);return d=he("{model}:streamGenerateContent?alt=sse",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.requestStream({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}),u.then(function(E){return Ei(this,arguments,function*(){var S,C,D,U;try{for(var P=!0,q=Ti(E),X;X=yield be(q.next()),S=X.done,!S;P=!0){U=X.value,P=!1;const H=U,ne=lS(yield be(H.json()));ne.sdkHttpResponse={headers:H.headers};const le=new Eu;Object.assign(le,ne),yield yield be(le)}}catch(H){C={error:H}}finally{try{!P&&!S&&(D=q.return)&&(yield be(D.call(q)))}finally{if(C)throw C.error}}})})}}async embedContent(e){var n,i,s,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=Lk(this.apiClient,e);return d=he("{model}:predict",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=Ok(v),S=new zT;return Object.assign(S,E),S})}else{const h=Vk(this.apiClient,e);return d=he("{model}:batchEmbedContents",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=Uk(v),S=new zT;return Object.assign(S,E),S})}}async generateImagesInternal(e){var n,i,s,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=Yk(this.apiClient,e);return d=he("{model}:predict",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=Xk(v),S=new GT;return Object.assign(S,E),S})}else{const h=Kk(this.apiClient,e);return d=he("{model}:predict",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=Qk(v),S=new GT;return Object.assign(S,E),S})}}async editImageInternal(e){var n,i;let s,a="",u={};if(this.apiClient.isVertexAI()){const d=Mk(this.apiClient,e);return a=he("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:p.headers},v})),s.then(p=>{const h=Dk(p),v=new qM;return Object.assign(v,h),v})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,i;let s,a="",u={};if(this.apiClient.isVertexAI()){const d=YV(this.apiClient,e);return a=he("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:p.headers},v})),s.then(p=>{const h=QV(p),v=new HM;return Object.assign(v,h),v})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,i;let s,a="",u={};if(this.apiClient.isVertexAI()){const d=NV(this.apiClient,e);return a=he("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),s.then(p=>{const h=MV(p),v=new BM;return Object.assign(v,h),v})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,i;let s,a="",u={};if(this.apiClient.isVertexAI()){const d=UV(this.apiClient,e);return a=he("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),s.then(p=>{const h=OV(p),v=new zM;return Object.assign(v,h),v})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,i,s,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=pV(this.apiClient,e);return d=he("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>rg(v))}else{const h=hV(this.apiClient,e);return d=he("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>ig(v))}}async listInternal(e){var n,i,s,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=AV(this.apiClient,e);return d=he("{models_url}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=xV(v),S=new $T;return Object.assign(S,E),S})}else{const h=SV(this.apiClient,e);return d=he("{models_url}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=wV(v),S=new $T;return Object.assign(S,E),S})}}async update(e){var n,i,s,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=JV(this.apiClient,e);return d=he("{model}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>rg(v))}else{const h=jV(this.apiClient,e);return d=he("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>ig(v))}}async delete(e){var n,i,s,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=Ik(this.apiClient,e);return d=he("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=Rk(v),S=new jT;return Object.assign(S,E),S})}else{const h=Ck(this.apiClient,e);return d=he("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=bk(v),S=new jT;return Object.assign(S,E),S})}}async countTokens(e){var n,i,s,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=Ak(this.apiClient,e);return d=he("{model}:countTokens",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=xk(v),S=new JT;return Object.assign(S,E),S})}else{const h=Sk(this.apiClient,e);return d=he("{model}:countTokens",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=wk(v),S=new JT;return Object.assign(S,E),S})}}async computeTokens(e){var n,i;let s,a="",u={};if(this.apiClient.isVertexAI()){const d=mk(this.apiClient,e);return a=he("{model}:computeTokens",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:p.headers},v})),s.then(p=>{const h=gk(p),v=new GM;return Object.assign(v,h),v})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,i,s,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=iV(this.apiClient,e);return d=he("{model}:predictLongRunning",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>{const E=tV(v),S=new yf;return Object.assign(S,E),S})}else{const h=nV(this.apiClient,e);return d=he("{model}:predictLongRunning",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>{const E=eV(v),S=new yf;return Object.assign(S,E),S})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class zL extends Or{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=n.name.split("/operations/")[0];let a;i&&"httpOptions"in i&&(a=i.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:s,config:{httpOptions:a}});return n._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!1})}}async get(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=n.name.split("/operations/")[0];let a;i&&"httpOptions"in i&&(a=i.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:s,config:{httpOptions:a}});return n._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,i,s,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=kM(e);return d=he("{operationName}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u}else{const h=PM(e);return d=he("{operationName}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u}}async fetchPredictVideosOperationInternal(e){var n,i;let s,a="",u={};if(this.apiClient.isVertexAI()){const d=CM(e);return a=he("{resourceName}:fetchPredictOperation",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),s}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function GL(t){const e={},n=f(t,["data"]);if(n!=null&&m(e,["data"],n),f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function $L(t){const e={},n=f(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>eU(a))),m(e,["parts"],s)}const i=f(t,["role"]);return i!=null&&m(e,["role"],i),e}function jL(t,e,n){const i={},s=f(e,["expireTime"]);n!==void 0&&s!=null&&m(n,["expireTime"],s);const a=f(e,["newSessionExpireTime"]);n!==void 0&&a!=null&&m(n,["newSessionExpireTime"],a);const u=f(e,["uses"]);n!==void 0&&u!=null&&m(n,["uses"],u);const d=f(e,["liveConnectConstraints"]);n!==void 0&&d!=null&&m(n,["bidiGenerateContentSetup"],ZL(t,d));const p=f(e,["lockAdditionalFields"]);return n!==void 0&&p!=null&&m(n,["fieldMask"],p),i}function JL(t,e){const n={},i=f(e,["config"]);return i!=null&&m(n,["config"],jL(t,i,n)),n}function KL(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=f(t,["fileUri"]);n!=null&&m(e,["fileUri"],n);const i=f(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function YL(t){const e={},n=f(t,["id"]);n!=null&&m(e,["id"],n);const i=f(t,["args"]);i!=null&&m(e,["args"],i);const s=f(t,["name"]);if(s!=null&&m(e,["name"],s),f(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function QL(t){const e={};if(f(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=f(t,["enableWidget"]);return n!=null&&m(e,["enableWidget"],n),e}function XL(t){const e={};if(f(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=f(t,["timeRangeFilter"]);return n!=null&&m(e,["timeRangeFilter"],n),e}function WL(t,e){const n={},i=f(t,["generationConfig"]);e!==void 0&&i!=null&&m(e,["setup","generationConfig"],i);const s=f(t,["responseModalities"]);e!==void 0&&s!=null&&m(e,["setup","generationConfig","responseModalities"],s);const a=f(t,["temperature"]);e!==void 0&&a!=null&&m(e,["setup","generationConfig","temperature"],a);const u=f(t,["topP"]);e!==void 0&&u!=null&&m(e,["setup","generationConfig","topP"],u);const d=f(t,["topK"]);e!==void 0&&d!=null&&m(e,["setup","generationConfig","topK"],d);const p=f(t,["maxOutputTokens"]);e!==void 0&&p!=null&&m(e,["setup","generationConfig","maxOutputTokens"],p);const h=f(t,["mediaResolution"]);e!==void 0&&h!=null&&m(e,["setup","generationConfig","mediaResolution"],h);const v=f(t,["seed"]);e!==void 0&&v!=null&&m(e,["setup","generationConfig","seed"],v);const E=f(t,["speechConfig"]);e!==void 0&&E!=null&&m(e,["setup","generationConfig","speechConfig"],ry(E));const S=f(t,["thinkingConfig"]);e!==void 0&&S!=null&&m(e,["setup","generationConfig","thinkingConfig"],S);const C=f(t,["enableAffectiveDialog"]);e!==void 0&&C!=null&&m(e,["setup","generationConfig","enableAffectiveDialog"],C);const D=f(t,["systemInstruction"]);e!==void 0&&D!=null&&m(e,["setup","systemInstruction"],$L(cn(D)));const U=f(t,["tools"]);if(e!==void 0&&U!=null){let ce=il(U);Array.isArray(ce)&&(ce=ce.map(N=>nU(nl(N)))),m(e,["setup","tools"],ce)}const P=f(t,["sessionResumption"]);e!==void 0&&P!=null&&m(e,["setup","sessionResumption"],tU(P));const q=f(t,["inputAudioTranscription"]);e!==void 0&&q!=null&&m(e,["setup","inputAudioTranscription"],q);const X=f(t,["outputAudioTranscription"]);e!==void 0&&X!=null&&m(e,["setup","outputAudioTranscription"],X);const H=f(t,["realtimeInputConfig"]);e!==void 0&&H!=null&&m(e,["setup","realtimeInputConfig"],H);const ne=f(t,["contextWindowCompression"]);e!==void 0&&ne!=null&&m(e,["setup","contextWindowCompression"],ne);const le=f(t,["proactivity"]);if(e!==void 0&&le!=null&&m(e,["setup","proactivity"],le),f(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function ZL(t,e){const n={},i=f(e,["model"]);i!=null&&m(n,["setup","model"],Qe(t,i));const s=f(e,["config"]);return s!=null&&m(n,["config"],WL(s,n)),n}function eU(t){const e={},n=f(t,["mediaResolution"]);n!=null&&m(e,["mediaResolution"],n);const i=f(t,["codeExecutionResult"]);i!=null&&m(e,["codeExecutionResult"],i);const s=f(t,["executableCode"]);s!=null&&m(e,["executableCode"],s);const a=f(t,["fileData"]);a!=null&&m(e,["fileData"],KL(a));const u=f(t,["functionCall"]);u!=null&&m(e,["functionCall"],YL(u));const d=f(t,["functionResponse"]);d!=null&&m(e,["functionResponse"],d);const p=f(t,["inlineData"]);p!=null&&m(e,["inlineData"],GL(p));const h=f(t,["text"]);h!=null&&m(e,["text"],h);const v=f(t,["thought"]);v!=null&&m(e,["thought"],v);const E=f(t,["thoughtSignature"]);E!=null&&m(e,["thoughtSignature"],E);const S=f(t,["videoMetadata"]);return S!=null&&m(e,["videoMetadata"],S),e}function tU(t){const e={},n=f(t,["handle"]);if(n!=null&&m(e,["handle"],n),f(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function nU(t){const e={},n=f(t,["functionDeclarations"]);if(n!=null){let v=n;Array.isArray(v)&&(v=v.map(E=>E)),m(e,["functionDeclarations"],v)}if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=f(t,["googleSearchRetrieval"]);i!=null&&m(e,["googleSearchRetrieval"],i);const s=f(t,["computerUse"]);s!=null&&m(e,["computerUse"],s);const a=f(t,["fileSearch"]);a!=null&&m(e,["fileSearch"],a);const u=f(t,["codeExecution"]);if(u!=null&&m(e,["codeExecution"],u),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(t,["googleMaps"]);d!=null&&m(e,["googleMaps"],QL(d));const p=f(t,["googleSearch"]);p!=null&&m(e,["googleSearch"],XL(p));const h=f(t,["urlContext"]);return h!=null&&m(e,["urlContext"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function iU(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=t[n];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const s=Object.keys(i).map(a=>`${n}.${a}`);e.push(...s)}else e.push(n)}return e.join(",")}function rU(t,e){let n=null;const i=t.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const a=i.setup;typeof a=="object"&&a!==null?(t.bidiGenerateContentSetup=a,n=a):delete t.bidiGenerateContentSetup}else i!==void 0&&delete t.bidiGenerateContentSetup;const s=t.fieldMask;if(n){const a=iU(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)a?t.fieldMask=a:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&s!==null&&Array.isArray(s)&&s.length>0){const u=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let d=[];s.length>0&&(d=s.map(h=>u.includes(h)?`generationConfig.${h}`:h));const p=[];a&&p.push(a),d.length>0&&p.push(...d),p.length>0?t.fieldMask=p.join(","):delete t.fieldMask}else delete t.fieldMask}else s!==null&&Array.isArray(s)&&s.length>0?t.fieldMask=s.join(","):delete t.fieldMask;return t}class sU extends Or{constructor(e){super(),this.apiClient=e}async create(e){var n,i;let s,a="",u={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const d=JL(this.apiClient,e);a=he("auth_tokens",d._url),u=d._query,delete d.config,delete d._url,delete d._query;const p=rU(d,e.config);return s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),s.then(h=>h)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function oU(t,e){const n={},i=f(t,["force"]);return e!==void 0&&i!=null&&m(e,["_query","force"],i),n}function aU(t){const e={},n=f(t,["name"]);n!=null&&m(e,["_url","name"],n);const i=f(t,["config"]);return i!=null&&oU(i,e),e}function lU(t){const e={},n=f(t,["name"]);return n!=null&&m(e,["_url","name"],n),e}function uU(t,e){const n={},i=f(t,["pageSize"]);e!==void 0&&i!=null&&m(e,["_query","pageSize"],i);const s=f(t,["pageToken"]);return e!==void 0&&s!=null&&m(e,["_query","pageToken"],s),n}function cU(t){const e={},n=f(t,["parent"]);n!=null&&m(e,["_url","parent"],n);const i=f(t,["config"]);return i!=null&&uU(i,e),e}function dU(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const i=f(t,["nextPageToken"]);i!=null&&m(e,["nextPageToken"],i);const s=f(t,["documents"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(u=>u)),m(e,["documents"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class fU extends Or{constructor(e){super(),this.apiClient=e,this.list=async n=>new Vo(Dr.PAGED_ITEM_DOCUMENTS,i=>this.listInternal({parent:n.parent,config:i.config}),await this.listInternal(n),n)}async get(e){var n,i;let s,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=lU(e);return a=he("{name}",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),s.then(p=>p)}}async delete(e){var n,i;let s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=aU(e);s=he("{name}",u._url),a=u._query,delete u._url,delete u._query,await this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,i;let s,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=cU(e);return a=he("{parent}/documents",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),s.then(p=>{const h=dU(p),v=new $M;return Object.assign(v,h),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class hU extends Or{constructor(e,n=new fU(e)){super(),this.apiClient=e,this.documents=n,this.list=async(i={})=>new Vo(Dr.PAGED_ITEM_FILE_SEARCH_STORES,s=>this.listInternal(s),await this.listInternal(i),i)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,i;let s,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=iL(e);return a=he("fileSearchStores",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),s.then(p=>p)}}async get(e){var n,i;let s,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=oL(e);return a=he("{name}",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),s.then(p=>p)}}async delete(e){var n,i;let s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=sL(e);s=he("{name}",u._url),a=u._query,delete u._url,delete u._query,await this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,i;let s,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=fL(e);return a=he("fileSearchStores",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),s.then(p=>{const h=hL(p),v=new jM;return Object.assign(v,h),v})}}async uploadToFileSearchStoreInternal(e){var n,i;let s,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=pL(e);return a=he("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),s.then(p=>{const h=mL(p),v=new JM;return Object.assign(v,h),v})}}async importFile(e){var n,i;let s,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=uL(e);return a=he("{file_search_store_name}:importFile",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),s.then(p=>{const h=lL(p),v=new Zg;return Object.assign(v,h),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let gx=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return gx=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,i=>(+i^n()&15>>+i/4).toString(16))};const pU=()=>gx();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function og(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const ag=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ri extends Error{}class vn extends ri{constructor(e,n,i,s){super(`${vn.makeMessage(e,n,i)}`),this.status=e,this.headers=s,this.error=n}static makeMessage(e,n,i){const s=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):i;return e&&s?`${e} ${s}`:e?`${e} status code (no body)`:s||"(no status code or body)"}static generate(e,n,i,s){if(!e||!s)return new Yf({message:i,cause:ag(n)});const a=n;return e===400?new vx(e,a,i,s):e===401?new _x(e,a,i,s):e===403?new Ex(e,a,i,s):e===404?new Tx(e,a,i,s):e===409?new Sx(e,a,i,s):e===422?new Ax(e,a,i,s):e===429?new wx(e,a,i,s):e>=500?new xx(e,a,i,s):new vn(e,a,i,s)}}class lg extends vn{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Yf extends vn{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class yx extends Yf{constructor({message:e}={}){super({message:e??"Request timed out."})}}class vx extends vn{}class _x extends vn{}class Ex extends vn{}class Tx extends vn{}class Sx extends vn{}class Ax extends vn{}class wx extends vn{}class xx extends vn{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const mU=/^[a-z][a-z0-9+.-]*:/i,gU=t=>mU.test(t);let ug=t=>(ug=Array.isArray,ug(t));const yU=ug;let vU=yU;const mS=vU;function _U(t){if(!t)return!0;for(const e in t)return!1;return!0}function EU(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const TU=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new ri(`${t} must be an integer`);if(e<0)throw new ri(`${t} must be a positive integer`);return e},SU=t=>{try{return JSON.parse(t)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const AU=t=>new Promise(e=>setTimeout(e,t));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Da="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function wU(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const xU=()=>{var t,e,n,i,s;const a=wU();if(a==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Da,"X-Stainless-OS":yS(Deno.build.os),"X-Stainless-Arch":gS(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Da,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(a==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Da,"X-Stainless-OS":yS((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":gS((i=globalThis.process.arch)!==null&&i!==void 0?i:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(s=globalThis.process.version)!==null&&s!==void 0?s:"unknown"};const u=CU();return u?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Da,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${u.browser}`,"X-Stainless-Runtime-Version":u.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Da,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function CU(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const i=n.exec(navigator.userAgent);if(i){const s=i[1]||0,a=i[2]||0,u=i[3]||0;return{browser:e,version:`${s}.${a}.${u}`}}}return null}const gS=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",yS=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let Bd;const IU=()=>Bd??(Bd=xU());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function bU(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function Cx(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function RU(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return Cx({start(){},async pull(n){const{done:i,value:s}=await e.next();i?n.close():n.enqueue(s)},async cancel(){var n;await((n=e.return)===null||n===void 0?void 0:n.call(e))}})}function Ix(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function NU(t){var e,n;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((n=(e=t[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(e));return}const i=t.getReader(),s=i.cancel();i.releaseLock(),await s}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const MU=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const bx=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((t=e==null?void 0:e.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Rm(t,e,n){return bx(),new File(t,e??"unknown_file",n)}function DU(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const PU=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Rx=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",kU=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&Rx(t),VU=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function LU(t,e,n){if(bx(),t=await t,kU(t))return t instanceof File?t:Rm([await t.arrayBuffer()],t.name);if(VU(t)){const s=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),Rm(await cg(s),e,n)}const i=await cg(t);if(e||(e=DU(t)),!(n!=null&&n.type)){const s=i.find(a=>typeof a=="object"&&"type"in a&&a.type);typeof s=="string"&&(n=Object.assign(Object.assign({},n),{type:s}))}return Rm(i,e,n)}async function cg(t){var e,n,i,s,a;let u=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)u.push(t);else if(Rx(t))u.push(t instanceof Blob?t:await t.arrayBuffer());else if(PU(t))try{for(var d=!0,p=Ti(t),h;h=await p.next(),e=h.done,!e;d=!0){s=h.value,d=!1;const v=s;u.push(...await cg(v))}}catch(v){n={error:v}}finally{try{!d&&!e&&(i=p.return)&&await i.call(p)}finally{if(n)throw n.error}}else{const v=(a=t==null?void 0:t.constructor)===null||a===void 0?void 0:a.name;throw new Error(`Unexpected data type: ${typeof t}${v?`; constructor: ${v}`:""}${UU(t)}`)}return u}function UU(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Nx{constructor(e){this._client=e}}Nx._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Mx(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const vS=Object.freeze(Object.create(null)),OU=(t=Mx)=>(function(n,...i){if(n.length===1)return n[0];let s=!1;const a=[],u=n.reduce((v,E,S)=>{var C,D,U;/[?#]/.test(E)&&(s=!0);const P=i[S];let q=(s?encodeURIComponent:t)(""+P);return S!==i.length&&(P==null||typeof P=="object"&&P.toString===((U=Object.getPrototypeOf((D=Object.getPrototypeOf((C=P.hasOwnProperty)!==null&&C!==void 0?C:vS))!==null&&D!==void 0?D:vS))===null||U===void 0?void 0:U.toString))&&(q=P+"",a.push({start:v.length+E.length,length:q.length,error:`Value of type ${Object.prototype.toString.call(P).slice(8,-1)} is not a valid path parameter`})),v+E+(S===i.length?"":q)},""),d=u.split(/[?#]/,1)[0],p=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let h;for(;(h=p.exec(d))!==null;)a.push({start:h.index,length:h[0].length,error:`Value "${h[0]}" can't be safely passed as a path parameter`});if(a.sort((v,E)=>v.start-E.start),a.length>0){let v=0;const E=a.reduce((S,C)=>{const D=" ".repeat(C.start-v),U="^".repeat(C.length);return v=C.start+C.length,S+D+U},"");throw new ri(`Path parameters result in path with invalid segments:
${a.map(S=>S.error).join(`
`)}
${u}
${E}`)}return u}),zd=OU(Mx);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Dx extends Nx{create(e,n){var i;const{api_version:s=this._client.apiVersion}=e,a=_f(e,["api_version"]);if("model"in a&&"agent_config"in a)throw new ri("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in a&&"generation_config"in a)throw new ri("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(zd`/${s}/interactions`,Object.assign(Object.assign({body:a},n),{stream:(i=e.stream)!==null&&i!==void 0?i:!1}))}delete(e,n={},i){const{api_version:s=this._client.apiVersion}=n??{};return this._client.delete(zd`/${s}/interactions/${e}`,i)}cancel(e,n={},i){const{api_version:s=this._client.apiVersion}=n??{};return this._client.post(zd`/${s}/interactions/${e}/cancel`,i)}get(e,n={},i){var s;const a=n??{},{api_version:u=this._client.apiVersion}=a,d=_f(a,["api_version"]);return this._client.get(zd`/${u}/interactions/${e}`,Object.assign(Object.assign({query:d},i),{stream:(s=n==null?void 0:n.stream)!==null&&s!==void 0?s:!1}))}}Dx._key=Object.freeze(["interactions"]);class Px extends Dx{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function FU(t){let e=0;for(const s of t)e+=s.length;const n=new Uint8Array(e);let i=0;for(const s of t)n.set(s,i),i+=s.length;return n}let Gd;function oy(t){let e;return(Gd??(e=new globalThis.TextEncoder,Gd=e.encode.bind(e)))(t)}let $d;function _S(t){let e;return($d??(e=new globalThis.TextDecoder,$d=e.decode.bind(e)))(t)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Qf{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?oy(e):e;this.buffer=FU([this.buffer,n]);const i=[];let s;for(;(s=qU(this.buffer,this.carriageReturnIndex))!=null;){if(s.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=s.index;continue}if(this.carriageReturnIndex!=null&&(s.index!==this.carriageReturnIndex+1||s.carriage)){i.push(_S(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const a=this.carriageReturnIndex!==null?s.preceding-1:s.preceding,u=_S(this.buffer.subarray(0,a));i.push(u),this.buffer=this.buffer.subarray(s.index),this.carriageReturnIndex=null}return i}flush(){return this.buffer.length?this.decode(`
`):[]}}Qf.NEWLINE_CHARS=new Set([`
`,"\r"]);Qf.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function qU(t,e){for(let s=e??0;s<t.length;s++){if(t[s]===10)return{preceding:s,index:s+1,carriage:!1};if(t[s]===13)return{preceding:s,index:s+1,carriage:!0}}return null}function HU(t){for(let i=0;i<t.length-1;i++){if(t[i]===10&&t[i+1]===10||t[i]===13&&t[i+1]===13)return i+2;if(t[i]===13&&t[i+1]===10&&i+3<t.length&&t[i+2]===13&&t[i+3]===10)return i+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ef={off:0,error:200,warn:300,info:400,debug:500},ES=(t,e,n)=>{if(t){if(EU(Ef,t))return t;mn(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(Ef))}`)}};function Su(){}function jd(t,e,n){return!e||Ef[t]>Ef[n]?Su:e[t].bind(e)}const BU={error:Su,warn:Su,info:Su,debug:Su};let TS=new WeakMap;function mn(t){var e;const n=t.logger,i=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!n)return BU;const s=TS.get(n);if(s&&s[0]===i)return s[1];const a={error:jd("error",n,i),warn:jd("warn",n,i),info:jd("info",n,i),debug:jd("debug",n,i)};return TS.set(n,[i,a]),a}const So=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Oa{constructor(e,n,i){this.iterator=e,this.controller=n,this.client=i}static fromSSEResponse(e,n,i){let s=!1;const a=i?mn(i):console;function u(){return Ei(this,arguments,function*(){var p,h,v,E;if(s)throw new ri("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let S=!1;try{try{for(var C=!0,D=Ti(zU(e,n)),U;U=yield be(D.next()),p=U.done,!p;C=!0){E=U.value,C=!1;const P=E;if(!S)if(P.data.startsWith("[DONE]")){S=!0;continue}else try{yield yield be(JSON.parse(P.data))}catch(q){throw a.error("Could not parse message into JSON:",P.data),a.error("From chunk:",P.raw),q}}}catch(P){h={error:P}}finally{try{!C&&!p&&(v=D.return)&&(yield be(v.call(D)))}finally{if(h)throw h.error}}S=!0}catch(P){if(og(P))return yield be(void 0);throw P}finally{S||n.abort()}})}return new Oa(u,n,i)}static fromReadableStream(e,n,i){let s=!1;function a(){return Ei(this,arguments,function*(){var p,h,v,E;const S=new Qf,C=Ix(e);try{for(var D=!0,U=Ti(C),P;P=yield be(U.next()),p=P.done,!p;D=!0){E=P.value,D=!1;const q=E;for(const X of S.decode(q))yield yield be(X)}}catch(q){h={error:q}}finally{try{!D&&!p&&(v=U.return)&&(yield be(v.call(U)))}finally{if(h)throw h.error}}for(const q of S.flush())yield yield be(q)})}function u(){return Ei(this,arguments,function*(){var p,h,v,E;if(s)throw new ri("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let S=!1;try{try{for(var C=!0,D=Ti(a()),U;U=yield be(D.next()),p=U.done,!p;C=!0){E=U.value,C=!1;const P=E;S||P&&(yield yield be(JSON.parse(P)))}}catch(P){h={error:P}}finally{try{!C&&!p&&(v=D.return)&&(yield be(v.call(D)))}finally{if(h)throw h.error}}S=!0}catch(P){if(og(P))return yield be(void 0);throw P}finally{S||n.abort()}})}return new Oa(u,n,i)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],i=this.iterator(),s=a=>({next:()=>{if(a.length===0){const u=i.next();e.push(u),n.push(u)}return a.shift()}});return[new Oa(()=>s(e),this.controller,this.client),new Oa(()=>s(n),this.controller,this.client)]}toReadableStream(){const e=this;let n;return Cx({async start(){n=e[Symbol.asyncIterator]()},async pull(i){try{const{value:s,done:a}=await n.next();if(a)return i.close();const u=oy(JSON.stringify(s)+`
`);i.enqueue(u)}catch(s){i.error(s)}},async cancel(){var i;await((i=n.return)===null||i===void 0?void 0:i.call(n))}})}}function zU(t,e){return Ei(this,arguments,function*(){var i,s,a,u;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new ri("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new ri("Attempted to iterate over a response with no body");const d=new $U,p=new Qf,h=Ix(t.body);try{for(var v=!0,E=Ti(GU(h)),S;S=yield be(E.next()),i=S.done,!i;v=!0){u=S.value,v=!1;const C=u;for(const D of p.decode(C)){const U=d.decode(D);U&&(yield yield be(U))}}}catch(C){s={error:C}}finally{try{!v&&!i&&(a=E.return)&&(yield be(a.call(E)))}finally{if(s)throw s.error}}for(const C of p.flush()){const D=d.decode(C);D&&(yield yield be(D))}})}function GU(t){return Ei(this,arguments,function*(){var n,i,s,a;let u=new Uint8Array;try{for(var d=!0,p=Ti(t),h;h=yield be(p.next()),n=h.done,!n;d=!0){a=h.value,d=!1;const v=a;if(v==null)continue;const E=v instanceof ArrayBuffer?new Uint8Array(v):typeof v=="string"?oy(v):v;let S=new Uint8Array(u.length+E.length);S.set(u),S.set(E,u.length),u=S;let C;for(;(C=HU(u))!==-1;)yield yield be(u.slice(0,C)),u=u.slice(C)}}catch(v){i={error:v}}finally{try{!d&&!n&&(s=p.return)&&(yield be(s.call(p)))}finally{if(i)throw i.error}}u.length>0&&(yield yield be(u))})}class $U{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const a={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],a}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,i,s]=jU(e,":");return s.startsWith(" ")&&(s=s.substring(1)),n==="event"?this.event=s:n==="data"&&this.data.push(s),null}}function jU(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function JU(t,e){const{response:n,requestLogID:i,retryOfRequestLogID:s,startTime:a}=e,u=await(async()=>{var d;if(e.options.stream)return mn(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):Oa.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const p=n.headers.get("content-type"),h=(d=p==null?void 0:p.split(";")[0])===null||d===void 0?void 0:d.trim();return(h==null?void 0:h.includes("application/json"))||(h==null?void 0:h.endsWith("+json"))?await n.json():await n.text()})();return mn(t).debug(`[${i}] response parsed`,So({retryOfRequestLogID:s,url:n.url,status:n.status,body:u,durationMs:Date.now()-a})),u}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ay extends Promise{constructor(e,n,i=JU){super(s=>{s(null)}),this.responsePromise=n,this.parseResponse=i,this.client=e}_thenUnwrap(e){return new ay(this.client,this.responsePromise,async(n,i)=>e(await this.parseResponse(n,i),i))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const kx=Symbol("brand.privateNullableHeaders");function*KU(t){if(!t)return;if(kx in t){const{values:i,nulls:s}=t;yield*i.entries();for(const a of s)yield[a,null];return}let e=!1,n;t instanceof Headers?n=t.entries():mS(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let i of n){const s=i[0];if(typeof s!="string")throw new TypeError("expected header name to be a string");const a=mS(i[1])?i[1]:[i[1]];let u=!1;for(const d of a)d!==void 0&&(e&&!u&&(u=!0,yield[s,null]),yield[s,d])}}const Tu=t=>{const e=new Headers,n=new Set;for(const i of t){const s=new Set;for(const[a,u]of KU(i)){const d=a.toLowerCase();s.has(d)||(e.delete(a),s.add(d)),u===null?(e.delete(a),n.add(d)):(e.append(a,u),n.delete(d))}}return{[kx]:!0,values:e,nulls:n}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Nm=t=>{var e,n,i,s,a,u;if(typeof globalThis.process<"u")return(i=(n=(e=EM)===null||e===void 0?void 0:e[t])===null||n===void 0?void 0:n.trim())!==null&&i!==void 0?i:void 0;if(typeof globalThis.Deno<"u")return(u=(a=(s=globalThis.Deno.env)===null||s===void 0?void 0:s.get)===null||a===void 0?void 0:a.call(s,t))===null||u===void 0?void 0:u.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Vx;class Xf{constructor(e){var n,i,s,a,u,d,p,{baseURL:h=Nm("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:v=(n=Nm("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:E="v1beta"}=e,S=_f(e,["baseURL","apiKey","apiVersion"]);const C=Object.assign(Object.assign({apiKey:v,apiVersion:E},S),{baseURL:h||"https://generativelanguage.googleapis.com"});this.baseURL=C.baseURL,this.timeout=(i=C.timeout)!==null&&i!==void 0?i:Xf.DEFAULT_TIMEOUT,this.logger=(s=C.logger)!==null&&s!==void 0?s:console;const D="warn";this.logLevel=D,this.logLevel=(u=(a=ES(C.logLevel,"ClientOptions.logLevel",this))!==null&&a!==void 0?a:ES(Nm("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&u!==void 0?u:D,this.fetchOptions=C.fetchOptions,this.maxRetries=(d=C.maxRetries)!==null&&d!==void 0?d:2,this.fetch=(p=C.fetch)!==null&&p!==void 0?p:bU(),this.encoder=MU,this._options=C,this.apiKey=v,this.apiVersion=E,this.clientAdapter=C.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const n=Tu([e.headers]);if(!(n.values.has("authorization")||n.values.has("x-goog-api-key"))){if(this.apiKey)return Tu([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return Tu([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([n,i])=>typeof i<"u").map(([n,i])=>{if(typeof i=="string"||typeof i=="number"||typeof i=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(i)}`;if(i===null)return`${encodeURIComponent(n)}=`;throw new ri(`Cannot stringify type ${typeof i}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Da}`}defaultIdempotencyKey(){return`stainless-node-retry-${pU()}`}makeStatusError(e,n,i,s){return vn.generate(e,n,i,s)}buildURL(e,n,i){const s=!this.baseURLOverridden()&&i||this.baseURL,a=gU(e)?new URL(e):new URL(s+(s.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),u=this.defaultQuery();return _U(u)||(n=Object.assign(Object.assign({},u),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(a.search=this.stringifyQuery(n)),a.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const n=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${n}`}}async prepareRequest(e,{url:n,options:i}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,i){return this.request(Promise.resolve(i).then(s=>Object.assign({method:e,path:n},s)))}request(e,n=null){return new ay(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,i){var s,a,u;const d=await e,p=(s=d.maxRetries)!==null&&s!==void 0?s:this.maxRetries;n==null&&(n=p),await this.prepareOptions(d);const{req:h,url:v,timeout:E}=await this.buildRequest(d,{retryCount:p-n});await this.prepareRequest(h,{url:v,options:d});const S="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),C=i===void 0?"":`, retryOf: ${i}`,D=Date.now();if(mn(this).debug(`[${S}] sending request`,So({retryOfRequestLogID:i,method:d.method,url:v,options:d,headers:h.headers})),!((a=d.signal)===null||a===void 0)&&a.aborted)throw new lg;const U=new AbortController,P=await this.fetchWithTimeout(v,h,E,U).catch(ag),q=Date.now();if(P instanceof globalThis.Error){const H=`retrying, ${n} attempts remaining`;if(!((u=d.signal)===null||u===void 0)&&u.aborted)throw new lg;const ne=og(P)||/timed? ?out/i.test(String(P)+("cause"in P?String(P.cause):""));if(n)return mn(this).info(`[${S}] connection ${ne?"timed out":"failed"} - ${H}`),mn(this).debug(`[${S}] connection ${ne?"timed out":"failed"} (${H})`,So({retryOfRequestLogID:i,url:v,durationMs:q-D,message:P.message})),this.retryRequest(d,n,i??S);throw mn(this).info(`[${S}] connection ${ne?"timed out":"failed"} - error; no more retries left`),mn(this).debug(`[${S}] connection ${ne?"timed out":"failed"} (error; no more retries left)`,So({retryOfRequestLogID:i,url:v,durationMs:q-D,message:P.message})),ne?new yx:new Yf({cause:P})}const X=`[${S}${C}] ${h.method} ${v} ${P.ok?"succeeded":"failed"} with status ${P.status} in ${q-D}ms`;if(!P.ok){const H=await this.shouldRetry(P);if(n&&H){const R=`retrying, ${n} attempts remaining`;return await NU(P.body),mn(this).info(`${X} - ${R}`),mn(this).debug(`[${S}] response error (${R})`,So({retryOfRequestLogID:i,url:P.url,status:P.status,headers:P.headers,durationMs:q-D})),this.retryRequest(d,n,i??S,P.headers)}const ne=H?"error; no more retries left":"error; not retryable";mn(this).info(`${X} - ${ne}`);const le=await P.text().catch(R=>ag(R).message),ce=SU(le),N=ce?void 0:le;throw mn(this).debug(`[${S}] response error (${ne})`,So({retryOfRequestLogID:i,url:P.url,status:P.status,headers:P.headers,message:N,durationMs:Date.now()-D})),this.makeStatusError(P.status,ce,N,P.headers)}return mn(this).info(X),mn(this).debug(`[${S}] response start`,So({retryOfRequestLogID:i,url:P.url,status:P.status,headers:P.headers,durationMs:q-D})),{response:P,options:d,controller:U,requestLogID:S,retryOfRequestLogID:i,startTime:D}}async fetchWithTimeout(e,n,i,s){const a=n||{},{signal:u,method:d}=a,p=_f(a,["signal","method"]);u&&u.addEventListener("abort",()=>s.abort());const h=setTimeout(()=>s.abort(),i),v=globalThis.ReadableStream&&p.body instanceof globalThis.ReadableStream||typeof p.body=="object"&&p.body!==null&&Symbol.asyncIterator in p.body,E=Object.assign(Object.assign(Object.assign({signal:s.signal},v?{duplex:"half"}:{}),{method:"GET"}),p);d&&(E.method=d.toUpperCase());try{return await this.fetch.call(void 0,e,E)}finally{clearTimeout(h)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,i,s){var a;let u;const d=s==null?void 0:s.get("retry-after-ms");if(d){const h=parseFloat(d);Number.isNaN(h)||(u=h)}const p=s==null?void 0:s.get("retry-after");if(p&&!u){const h=parseFloat(p);Number.isNaN(h)?u=Date.parse(p)-Date.now():u=h*1e3}if(!(u&&0<=u&&u<60*1e3)){const h=(a=e.maxRetries)!==null&&a!==void 0?a:this.maxRetries;u=this.calculateDefaultRetryTimeoutMillis(n,h)}return await AU(u),this.makeRequest(e,n-1,i)}calculateDefaultRetryTimeoutMillis(e,n){const a=n-e,u=Math.min(.5*Math.pow(2,a),8),d=1-Math.random()*.25;return u*d*1e3}async buildRequest(e,{retryCount:n=0}={}){var i,s,a;const u=Object.assign({},e),{method:d,path:p,query:h,defaultBaseURL:v}=u,E=this.buildURL(p,h,v);"timeout"in u&&TU("timeout",u.timeout),u.timeout=(i=u.timeout)!==null&&i!==void 0?i:this.timeout;const{bodyHeaders:S,body:C}=this.buildBody({options:u}),D=await this.buildHeaders({options:e,method:d,bodyHeaders:S,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:d,headers:D},u.signal&&{signal:u.signal}),globalThis.ReadableStream&&C instanceof globalThis.ReadableStream&&{duplex:"half"}),C&&{body:C}),(s=this.fetchOptions)!==null&&s!==void 0?s:{}),(a=u.fetchOptions)!==null&&a!==void 0?a:{}),url:E,timeout:u.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:i,retryCount:s}){let a={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),a[this.idempotencyHeader]=e.idempotencyKey);const u=await this.authHeaders(e);let d=Tu([a,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(s)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),IU()),this._options.defaultHeaders,i,e.headers,u]);return this.validateHeaders(d),d.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const i=Tu([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&i.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:RU(e)}:this.encoder({body:e,headers:i})}}Xf.DEFAULT_TIMEOUT=6e4;class Kt extends Xf{constructor(){super(...arguments),this.interactions=new Px(this)}}Vx=Kt;Kt.GeminiNextGenAPIClient=Vx;Kt.GeminiNextGenAPIClientError=ri;Kt.APIError=vn;Kt.APIConnectionError=Yf;Kt.APIConnectionTimeoutError=yx;Kt.APIUserAbortError=lg;Kt.NotFoundError=Tx;Kt.ConflictError=Sx;Kt.RateLimitError=wx;Kt.BadRequestError=vx;Kt.AuthenticationError=_x;Kt.InternalServerError=xx;Kt.PermissionDeniedError=Ex;Kt.UnprocessableEntityError=Ax;Kt.toFile=LU;Kt.Interactions=Px;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function YU(t,e){const n={},i=f(t,["name"]);return i!=null&&m(n,["_url","name"],i),n}function QU(t,e){const n={},i=f(t,["name"]);return i!=null&&m(n,["_url","name"],i),n}function XU(t,e){const n={},i=f(t,["sdkHttpResponse"]);return i!=null&&m(n,["sdkHttpResponse"],i),n}function WU(t,e){const n={},i=f(t,["sdkHttpResponse"]);return i!=null&&m(n,["sdkHttpResponse"],i),n}function ZU(t,e,n){const i={};if(f(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const s=f(t,["tunedModelDisplayName"]);if(e!==void 0&&s!=null&&m(e,["displayName"],s),f(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const a=f(t,["epochCount"]);e!==void 0&&a!=null&&m(e,["tuningTask","hyperparameters","epochCount"],a);const u=f(t,["learningRateMultiplier"]);if(u!=null&&m(i,["tuningTask","hyperparameters","learningRateMultiplier"],u),f(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(f(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(f(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const d=f(t,["batchSize"]);e!==void 0&&d!=null&&m(e,["tuningTask","hyperparameters","batchSize"],d);const p=f(t,["learningRate"]);if(e!==void 0&&p!=null&&m(e,["tuningTask","hyperparameters","learningRate"],p),f(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(f(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return i}function e4(t,e,n){const i={};let s=f(n,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const C=f(t,["validationDataset"]);e!==void 0&&C!=null&&m(e,["supervisedTuningSpec"],SS(C))}else if(s==="PREFERENCE_TUNING"){const C=f(t,["validationDataset"]);e!==void 0&&C!=null&&m(e,["preferenceOptimizationSpec"],SS(C))}const a=f(t,["tunedModelDisplayName"]);e!==void 0&&a!=null&&m(e,["tunedModelDisplayName"],a);const u=f(t,["description"]);e!==void 0&&u!=null&&m(e,["description"],u);let d=f(n,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const C=f(t,["epochCount"]);e!==void 0&&C!=null&&m(e,["supervisedTuningSpec","hyperParameters","epochCount"],C)}else if(d==="PREFERENCE_TUNING"){const C=f(t,["epochCount"]);e!==void 0&&C!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],C)}let p=f(n,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const C=f(t,["learningRateMultiplier"]);e!==void 0&&C!=null&&m(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],C)}else if(p==="PREFERENCE_TUNING"){const C=f(t,["learningRateMultiplier"]);e!==void 0&&C!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],C)}let h=f(n,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const C=f(t,["exportLastCheckpointOnly"]);e!==void 0&&C!=null&&m(e,["supervisedTuningSpec","exportLastCheckpointOnly"],C)}else if(h==="PREFERENCE_TUNING"){const C=f(t,["exportLastCheckpointOnly"]);e!==void 0&&C!=null&&m(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],C)}let v=f(n,["config","method"]);if(v===void 0&&(v="SUPERVISED_FINE_TUNING"),v==="SUPERVISED_FINE_TUNING"){const C=f(t,["adapterSize"]);e!==void 0&&C!=null&&m(e,["supervisedTuningSpec","hyperParameters","adapterSize"],C)}else if(v==="PREFERENCE_TUNING"){const C=f(t,["adapterSize"]);e!==void 0&&C!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],C)}if(f(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(f(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const E=f(t,["labels"]);e!==void 0&&E!=null&&m(e,["labels"],E);const S=f(t,["beta"]);return e!==void 0&&S!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","beta"],S),i}function t4(t,e){const n={},i=f(t,["baseModel"]);i!=null&&m(n,["baseModel"],i);const s=f(t,["preTunedModel"]);s!=null&&m(n,["preTunedModel"],s);const a=f(t,["trainingDataset"]);a!=null&&f4(a);const u=f(t,["config"]);return u!=null&&ZU(u,n),n}function n4(t,e){const n={},i=f(t,["baseModel"]);i!=null&&m(n,["baseModel"],i);const s=f(t,["preTunedModel"]);s!=null&&m(n,["preTunedModel"],s);const a=f(t,["trainingDataset"]);a!=null&&h4(a,n,e);const u=f(t,["config"]);return u!=null&&e4(u,n,e),n}function i4(t,e){const n={},i=f(t,["name"]);return i!=null&&m(n,["_url","name"],i),n}function r4(t,e){const n={},i=f(t,["name"]);return i!=null&&m(n,["_url","name"],i),n}function s4(t,e,n){const i={},s=f(t,["pageSize"]);e!==void 0&&s!=null&&m(e,["_query","pageSize"],s);const a=f(t,["pageToken"]);e!==void 0&&a!=null&&m(e,["_query","pageToken"],a);const u=f(t,["filter"]);return e!==void 0&&u!=null&&m(e,["_query","filter"],u),i}function o4(t,e,n){const i={},s=f(t,["pageSize"]);e!==void 0&&s!=null&&m(e,["_query","pageSize"],s);const a=f(t,["pageToken"]);e!==void 0&&a!=null&&m(e,["_query","pageToken"],a);const u=f(t,["filter"]);return e!==void 0&&u!=null&&m(e,["_query","filter"],u),i}function a4(t,e){const n={},i=f(t,["config"]);return i!=null&&s4(i,n),n}function l4(t,e){const n={},i=f(t,["config"]);return i!=null&&o4(i,n),n}function u4(t,e){const n={},i=f(t,["sdkHttpResponse"]);i!=null&&m(n,["sdkHttpResponse"],i);const s=f(t,["nextPageToken"]);s!=null&&m(n,["nextPageToken"],s);const a=f(t,["tunedModels"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(d=>Lx(d))),m(n,["tuningJobs"],u)}return n}function c4(t,e){const n={},i=f(t,["sdkHttpResponse"]);i!=null&&m(n,["sdkHttpResponse"],i);const s=f(t,["nextPageToken"]);s!=null&&m(n,["nextPageToken"],s);const a=f(t,["tuningJobs"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(d=>dg(d))),m(n,["tuningJobs"],u)}return n}function d4(t,e){const n={},i=f(t,["name"]);i!=null&&m(n,["model"],i);const s=f(t,["name"]);return s!=null&&m(n,["endpoint"],s),n}function f4(t,e){const n={};if(f(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const i=f(t,["examples"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>a)),m(n,["examples","examples"],s)}return n}function h4(t,e,n){const i={};let s=f(n,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const u=f(t,["gcsUri"]);e!==void 0&&u!=null&&m(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(s==="PREFERENCE_TUNING"){const u=f(t,["gcsUri"]);e!==void 0&&u!=null&&m(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}let a=f(n,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const u=f(t,["vertexDatasetResource"]);e!==void 0&&u!=null&&m(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(a==="PREFERENCE_TUNING"){const u=f(t,["vertexDatasetResource"]);e!==void 0&&u!=null&&m(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}if(f(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function Lx(t,e){const n={},i=f(t,["sdkHttpResponse"]);i!=null&&m(n,["sdkHttpResponse"],i);const s=f(t,["name"]);s!=null&&m(n,["name"],s);const a=f(t,["state"]);a!=null&&m(n,["state"],Ww(a));const u=f(t,["createTime"]);u!=null&&m(n,["createTime"],u);const d=f(t,["tuningTask","startTime"]);d!=null&&m(n,["startTime"],d);const p=f(t,["tuningTask","completeTime"]);p!=null&&m(n,["endTime"],p);const h=f(t,["updateTime"]);h!=null&&m(n,["updateTime"],h);const v=f(t,["description"]);v!=null&&m(n,["description"],v);const E=f(t,["baseModel"]);E!=null&&m(n,["baseModel"],E);const S=f(t,["_self"]);return S!=null&&m(n,["tunedModel"],d4(S)),n}function dg(t,e){const n={},i=f(t,["sdkHttpResponse"]);i!=null&&m(n,["sdkHttpResponse"],i);const s=f(t,["name"]);s!=null&&m(n,["name"],s);const a=f(t,["state"]);a!=null&&m(n,["state"],Ww(a));const u=f(t,["createTime"]);u!=null&&m(n,["createTime"],u);const d=f(t,["startTime"]);d!=null&&m(n,["startTime"],d);const p=f(t,["endTime"]);p!=null&&m(n,["endTime"],p);const h=f(t,["updateTime"]);h!=null&&m(n,["updateTime"],h);const v=f(t,["error"]);v!=null&&m(n,["error"],v);const E=f(t,["description"]);E!=null&&m(n,["description"],E);const S=f(t,["baseModel"]);S!=null&&m(n,["baseModel"],S);const C=f(t,["tunedModel"]);C!=null&&m(n,["tunedModel"],C);const D=f(t,["preTunedModel"]);D!=null&&m(n,["preTunedModel"],D);const U=f(t,["supervisedTuningSpec"]);U!=null&&m(n,["supervisedTuningSpec"],U);const P=f(t,["preferenceOptimizationSpec"]);P!=null&&m(n,["preferenceOptimizationSpec"],P);const q=f(t,["tuningDataStats"]);q!=null&&m(n,["tuningDataStats"],q);const X=f(t,["encryptionSpec"]);X!=null&&m(n,["encryptionSpec"],X);const H=f(t,["partnerModelTuningSpec"]);H!=null&&m(n,["partnerModelTuningSpec"],H);const ne=f(t,["customBaseModel"]);ne!=null&&m(n,["customBaseModel"],ne);const le=f(t,["experiment"]);le!=null&&m(n,["experiment"],le);const ce=f(t,["labels"]);ce!=null&&m(n,["labels"],ce);const N=f(t,["outputUri"]);N!=null&&m(n,["outputUri"],N);const M=f(t,["pipelineJob"]);M!=null&&m(n,["pipelineJob"],M);const R=f(t,["serviceAccount"]);R!=null&&m(n,["serviceAccount"],R);const V=f(t,["tunedModelDisplayName"]);V!=null&&m(n,["tunedModelDisplayName"],V);const O=f(t,["veoTuningSpec"]);return O!=null&&m(n,["veoTuningSpec"],O),n}function p4(t,e){const n={},i=f(t,["sdkHttpResponse"]);i!=null&&m(n,["sdkHttpResponse"],i);const s=f(t,["name"]);s!=null&&m(n,["name"],s);const a=f(t,["metadata"]);a!=null&&m(n,["metadata"],a);const u=f(t,["done"]);u!=null&&m(n,["done"],u);const d=f(t,["error"]);return d!=null&&m(n,["error"],d),n}function SS(t,e){const n={},i=f(t,["gcsUri"]);i!=null&&m(n,["validationDatasetUri"],i);const s=f(t,["vertexDatasetResource"]);return s!=null&&m(n,["validationDatasetUri"],s),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class m4 extends Or{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Vo(Dr.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var i;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const s={tunedModelName:n.baseModel};!((i=n.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(s.checkpointId=n.config.preTunedModelCheckpointId);const a=Object.assign(Object.assign({},n),{preTunedModel:s});return a.baseModel=void 0,await this.tuneInternal(a)}else{const s=Object.assign({},n);return await this.tuneInternal(s)}else{const s=Object.assign({},n),a=await this.tuneMldevInternal(s);let u="";return a.metadata!==void 0&&a.metadata.tunedModel!==void 0?u=a.metadata.tunedModel:a.name!==void 0&&a.name.includes("/operations/")&&(u=a.name.split("/operations/")[0]),{name:u,state:Zm.JOB_STATE_QUEUED}}}}async getInternal(e){var n,i,s,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=r4(e);return d=he("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>dg(v))}else{const h=i4(e);return d=he("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>Lx(v))}}async listInternal(e){var n,i,s,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=l4(e);return d=he("tuningJobs",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=c4(v),S=new KT;return Object.assign(S,E),S})}else{const h=a4(e);return d=he("tunedModels",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=u4(v),S=new KT;return Object.assign(S,E),S})}}async cancel(e){var n,i,s,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=QU(e);return d=he("{name}:cancel",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=WU(v),S=new YT;return Object.assign(S,E),S})}else{const h=YU(e);return d=he("{name}:cancel",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=XU(v),S=new YT;return Object.assign(S,E),S})}}async tuneInternal(e){var n,i;let s,a="",u={};if(this.apiClient.isVertexAI()){const d=n4(e,e);return a=he("tuningJobs",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:p.headers},v})),s.then(p=>dg(p))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,i;let s,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=t4(e);return a=he("tunedModels",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:p.headers},v})),s.then(p=>p4(p))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class g4{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const y4=1024*1024*8,v4=3,_4=1e3,E4=2,Tf="x-goog-upload-status";async function T4(t,e,n){var i;const s=await Ux(t,e,n),a=await(s==null?void 0:s.json());if(((i=s==null?void 0:s.headers)===null||i===void 0?void 0:i[Tf])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return a.file}async function S4(t,e,n){var i;const s=await Ux(t,e,n),a=await(s==null?void 0:s.json());if(((i=s==null?void 0:s.headers)===null||i===void 0?void 0:i[Tf])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const u=jw(a),d=new ey;return Object.assign(d,u),d}async function Ux(t,e,n){var i,s;let a=0,u=0,d=new eg(new Response),p="upload";for(a=t.size;u<a;){const h=Math.min(y4,a-u),v=t.slice(u,u+h);u+h>=a&&(p+=", finalize");let E=0,S=_4;for(;E<v4&&(d=await n.request({path:"",body:v,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":p,"X-Goog-Upload-Offset":String(u),"Content-Length":String(h)}}}),!(!((i=d==null?void 0:d.headers)===null||i===void 0)&&i[Tf]));)E++,await w4(S),S=S*E4;if(u+=h,((s=d==null?void 0:d.headers)===null||s===void 0?void 0:s[Tf])!=="active")break;if(a<=u)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return d}async function A4(t){return{size:t.size,type:t.type}}function w4(t){return new Promise(e=>setTimeout(e,t))}class x4{async upload(e,n,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await T4(e,n,i)}async uploadToFileSearchStore(e,n,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await S4(e,n,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await A4(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class C4{create(e,n,i){return new I4(e,n,i)}}class I4{constructor(e,n,i){this.url=e,this.headers=n,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const AS="x-goog-api-key";class b4{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(AS)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(AS,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const R4="gl-node/";class N4{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const n=new Kt({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=n.interactions,this._interactions}constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const i=wM(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const s=new b4(this.apiKey);this.apiClient=new AL({auth:s,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:R4+"web",uploader:new x4,downloader:new g4}),this.models=new BL(this.apiClient),this.live=new LL(this.apiClient,s,new C4),this.batches=new ZD(this.apiClient),this.chats=new kP(this.models,this.apiClient),this.caches=new MP(this.apiClient),this.files=new GP(this.apiClient),this.operations=new zL(this.apiClient),this.authTokens=new sU(this.apiClient),this.tunings=new m4(this.apiClient),this.fileSearchStores=new hU(this.apiClient)}}const M4=()=>{};var wS={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ox=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let s=t.charCodeAt(i);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},D4=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const s=t[n++];if(s<128)e[i++]=String.fromCharCode(s);else if(s>191&&s<224){const a=t[n++];e[i++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=t[n++],u=t[n++],d=t[n++],p=((s&7)<<18|(a&63)<<12|(u&63)<<6|d&63)-65536;e[i++]=String.fromCharCode(55296+(p>>10)),e[i++]=String.fromCharCode(56320+(p&1023))}else{const a=t[n++],u=t[n++];e[i++]=String.fromCharCode((s&15)<<12|(a&63)<<6|u&63)}}return e.join("")},Fx={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<t.length;s+=3){const a=t[s],u=s+1<t.length,d=u?t[s+1]:0,p=s+2<t.length,h=p?t[s+2]:0,v=a>>2,E=(a&3)<<4|d>>4;let S=(d&15)<<2|h>>6,C=h&63;p||(C=64,u||(S=64)),i.push(n[v],n[E],n[S],n[C])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Ox(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):D4(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<t.length;){const a=n[t.charAt(s++)],d=s<t.length?n[t.charAt(s)]:0;++s;const h=s<t.length?n[t.charAt(s)]:64;++s;const E=s<t.length?n[t.charAt(s)]:64;if(++s,a==null||d==null||h==null||E==null)throw new P4;const S=a<<2|d>>4;if(i.push(S),h!==64){const C=d<<4&240|h>>2;if(i.push(C),E!==64){const D=h<<6&192|E;i.push(D)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class P4 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const k4=function(t){const e=Ox(t);return Fx.encodeByteArray(e,!0)},Sf=function(t){return k4(t).replace(/\./g,"")},qx=function(t){try{return Fx.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V4(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L4=()=>V4().__FIREBASE_DEFAULTS__,U4=()=>{if(typeof process>"u"||typeof wS>"u")return;const t=wS.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},O4=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&qx(t[1]);return e&&JSON.parse(e)},Wf=()=>{try{return M4()||L4()||U4()||O4()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Hx=t=>{var e,n;return(n=(e=Wf())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},F4=t=>{const e=Hx(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},Bx=()=>{var t;return(t=Wf())==null?void 0:t.config},zx=t=>{var e;return(e=Wf())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q4{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sl(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Gx(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H4(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",s=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Sf(JSON.stringify(n)),Sf(JSON.stringify(u)),""].join(".")}const Nu={};function B4(){const t={prod:[],emulator:[]};for(const e of Object.keys(Nu))Nu[e]?t.emulator.push(e):t.prod.push(e);return t}function z4(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let xS=!1;function $x(t,e){if(typeof window>"u"||typeof document>"u"||!sl(window.location.host)||Nu[t]===e||Nu[t]||xS)return;Nu[t]=e;function n(S){return`__firebase__banner__${S}`}const i="__firebase__banner",a=B4().prod.length>0;function u(){const S=document.getElementById(i);S&&S.remove()}function d(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function p(S,C){S.setAttribute("width","24"),S.setAttribute("id",C),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function h(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{xS=!0,u()},S}function v(S,C){S.setAttribute("id",C),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function E(){const S=z4(i),C=n("text"),D=document.getElementById(C)||document.createElement("span"),U=n("learnmore"),P=document.getElementById(U)||document.createElement("a"),q=n("preprendIcon"),X=document.getElementById(q)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const H=S.element;d(H),v(P,U);const ne=h();p(X,q),H.append(X,D,P,ne),document.body.appendChild(H)}a?(D.innerText="Preview backend disconnected.",X.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(X.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,D.innerText="Preview backend running in this workspace."),D.setAttribute("id",C)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function G4(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(dn())}function $4(){var e;const t=(e=Wf())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function j4(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function jx(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function J4(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function K4(){const t=dn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Y4(){return!$4()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Jx(){try{return typeof indexedDB=="object"}catch{return!1}}function Kx(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var a;e(((a=s.error)==null?void 0:a.message)||"")}}catch(n){e(n)}})}function Q4(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X4="FirebaseError";class Ii extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=X4,Object.setPrototypeOf(this,Ii.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Lo.prototype.create)}}class Lo{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},s=`${this.service}/${e}`,a=this.errors[e],u=a?W4(a,i):"Error",d=`${this.serviceName}: ${u} (${s}).`;return new Ii(s,d,i)}}function W4(t,e){return t.replace(Z4,(n,i)=>{const s=e[i];return s!=null?String(s):`<${i}?>`})}const Z4=/\{\$([^}]+)}/g;function eO(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ns(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const s of n){if(!i.includes(s))return!1;const a=t[s],u=e[s];if(CS(a)&&CS(u)){if(!Ns(a,u))return!1}else if(a!==u)return!1}for(const s of i)if(!n.includes(s))return!1;return!0}function CS(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zu(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Au(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[s,a]=i.split("=");e[decodeURIComponent(s)]=decodeURIComponent(a)}}),e}function wu(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function tO(t,e){const n=new nO(t,e);return n.subscribe.bind(n)}class nO{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let s;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");iO(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:i},s.next===void 0&&(s.next=Mm),s.error===void 0&&(s.error=Mm),s.complete===void 0&&(s.complete=Mm);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function iO(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Mm(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rO=1e3,sO=2,oO=14400*1e3,aO=.5;function IS(t,e=rO,n=sO){const i=e*Math.pow(n,t),s=Math.round(aO*i*(Math.random()-.5)*2);return Math.min(oO,i+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ot(t){return t&&t._delegate?t._delegate:t}class Ai{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ao="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lO{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new q4;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(cO(e))try{this.getOrInitializeService({instanceIdentifier:Ao})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:s});i.resolve(a)}catch{}}}}clearInstance(e=Ao){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ao){return this.instances.has(e)}getOptions(e=Ao){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[a,u]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(a);i===d&&u.resolve(s)}return s}onInit(e,n){const i=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(i)??new Set;s.add(e),this.onInitCallbacks.set(i,s);const a=this.instances.get(i);return a&&e(a,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const s of i)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:uO(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Ao){return this.component?this.component.multipleInstances?e:Ao:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function uO(t){return t===Ao?void 0:t}function cO(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dO{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new lO(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Be;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Be||(Be={}));const fO={debug:Be.DEBUG,verbose:Be.VERBOSE,info:Be.INFO,warn:Be.WARN,error:Be.ERROR,silent:Be.SILENT},hO=Be.INFO,pO={[Be.DEBUG]:"log",[Be.VERBOSE]:"log",[Be.INFO]:"info",[Be.WARN]:"warn",[Be.ERROR]:"error"},mO=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),s=pO[e];if(s)console[s](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Zf{constructor(e){this.name=e,this._logLevel=hO,this._logHandler=mO,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Be))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?fO[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Be.DEBUG,...e),this._logHandler(this,Be.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Be.VERBOSE,...e),this._logHandler(this,Be.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Be.INFO,...e),this._logHandler(this,Be.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Be.WARN,...e),this._logHandler(this,Be.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Be.ERROR,...e),this._logHandler(this,Be.ERROR,...e)}}const gO=(t,e)=>e.some(n=>t instanceof n);let bS,RS;function yO(){return bS||(bS=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function vO(){return RS||(RS=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Yx=new WeakMap,fg=new WeakMap,Qx=new WeakMap,Dm=new WeakMap,ly=new WeakMap;function _O(t){const e=new Promise((n,i)=>{const s=()=>{t.removeEventListener("success",a),t.removeEventListener("error",u)},a=()=>{n(xs(t.result)),s()},u=()=>{i(t.error),s()};t.addEventListener("success",a),t.addEventListener("error",u)});return e.then(n=>{n instanceof IDBCursor&&Yx.set(n,t)}).catch(()=>{}),ly.set(e,t),e}function EO(t){if(fg.has(t))return;const e=new Promise((n,i)=>{const s=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",u),t.removeEventListener("abort",u)},a=()=>{n(),s()},u=()=>{i(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",a),t.addEventListener("error",u),t.addEventListener("abort",u)});fg.set(t,e)}let hg={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return fg.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Qx.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return xs(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function TO(t){hg=t(hg)}function SO(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(Pm(this),e,...n);return Qx.set(i,e.sort?e.sort():[e]),xs(i)}:vO().includes(t)?function(...e){return t.apply(Pm(this),e),xs(Yx.get(this))}:function(...e){return xs(t.apply(Pm(this),e))}}function AO(t){return typeof t=="function"?SO(t):(t instanceof IDBTransaction&&EO(t),gO(t,yO())?new Proxy(t,hg):t)}function xs(t){if(t instanceof IDBRequest)return _O(t);if(Dm.has(t))return Dm.get(t);const e=AO(t);return e!==t&&(Dm.set(t,e),ly.set(e,t)),e}const Pm=t=>ly.get(t);function Xx(t,e,{blocked:n,upgrade:i,blocking:s,terminated:a}={}){const u=indexedDB.open(t,e),d=xs(u);return i&&u.addEventListener("upgradeneeded",p=>{i(xs(u.result),p.oldVersion,p.newVersion,xs(u.transaction),p)}),n&&u.addEventListener("blocked",p=>n(p.oldVersion,p.newVersion,p)),d.then(p=>{a&&p.addEventListener("close",()=>a()),s&&p.addEventListener("versionchange",h=>s(h.oldVersion,h.newVersion,h))}).catch(()=>{}),d}const wO=["get","getKey","getAll","getAllKeys","count"],xO=["put","add","delete","clear"],km=new Map;function NS(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(km.get(e))return km.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,s=xO.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(s||wO.includes(n)))return;const a=async function(u,...d){const p=this.transaction(u,s?"readwrite":"readonly");let h=p.store;return i&&(h=h.index(d.shift())),(await Promise.all([h[n](...d),s&&p.done]))[0]};return km.set(e,a),a}TO(t=>({...t,get:(e,n,i)=>NS(e,n)||t.get(e,n,i),has:(e,n)=>!!NS(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CO{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(IO(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function IO(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const pg="@firebase/app",MS="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pr=new Zf("@firebase/app"),bO="@firebase/app-compat",RO="@firebase/analytics-compat",NO="@firebase/analytics",MO="@firebase/app-check-compat",DO="@firebase/app-check",PO="@firebase/auth",kO="@firebase/auth-compat",VO="@firebase/database",LO="@firebase/data-connect",UO="@firebase/database-compat",OO="@firebase/functions",FO="@firebase/functions-compat",qO="@firebase/installations",HO="@firebase/installations-compat",BO="@firebase/messaging",zO="@firebase/messaging-compat",GO="@firebase/performance",$O="@firebase/performance-compat",jO="@firebase/remote-config",JO="@firebase/remote-config-compat",KO="@firebase/storage",YO="@firebase/storage-compat",QO="@firebase/firestore",XO="@firebase/ai",WO="@firebase/firestore-compat",ZO="firebase",e3="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mg="[DEFAULT]",t3={[pg]:"fire-core",[bO]:"fire-core-compat",[NO]:"fire-analytics",[RO]:"fire-analytics-compat",[DO]:"fire-app-check",[MO]:"fire-app-check-compat",[PO]:"fire-auth",[kO]:"fire-auth-compat",[VO]:"fire-rtdb",[LO]:"fire-data-connect",[UO]:"fire-rtdb-compat",[OO]:"fire-fn",[FO]:"fire-fn-compat",[qO]:"fire-iid",[HO]:"fire-iid-compat",[BO]:"fire-fcm",[zO]:"fire-fcm-compat",[GO]:"fire-perf",[$O]:"fire-perf-compat",[jO]:"fire-rc",[JO]:"fire-rc-compat",[KO]:"fire-gcs",[YO]:"fire-gcs-compat",[QO]:"fire-fst",[WO]:"fire-fst-compat",[XO]:"fire-vertex","fire-js":"fire-js",[ZO]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Af=new Map,n3=new Map,gg=new Map;function DS(t,e){try{t.container.addComponent(e)}catch(n){Pr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function rr(t){const e=t.name;if(gg.has(e))return Pr.debug(`There were multiple attempts to register component ${e}.`),!1;gg.set(e,t);for(const n of Af.values())DS(n,t);for(const n of n3.values())DS(n,t);return!0}function Uo(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function ei(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i3={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Cs=new Lo("app","Firebase",i3);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r3{constructor(e,n,i){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Ai("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Cs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ol=e3;function Wx(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i={name:mg,automaticDataCollectionEnabled:!0,...e},s=i.name;if(typeof s!="string"||!s)throw Cs.create("bad-app-name",{appName:String(s)});if(n||(n=Bx()),!n)throw Cs.create("no-options");const a=Af.get(s);if(a){if(Ns(n,a.options)&&Ns(i,a.config))return a;throw Cs.create("duplicate-app",{appName:s})}const u=new dO(s);for(const p of gg.values())u.addComponent(p);const d=new r3(n,i,u);return Af.set(s,d),d}function uy(t=mg){const e=Af.get(t);if(!e&&t===mg&&Bx())return Wx();if(!e)throw Cs.create("no-app",{appName:t});return e}function ii(t,e,n){let i=t3[t]??t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const u=[`Unable to register library "${i}" with version "${e}":`];s&&u.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&a&&u.push("and"),a&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Pr.warn(u.join(" "));return}rr(new Ai(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s3="firebase-heartbeat-database",o3=1,qu="firebase-heartbeat-store";let Vm=null;function Zx(){return Vm||(Vm=Xx(s3,o3,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(qu)}catch(n){console.warn(n)}}}}).catch(t=>{throw Cs.create("idb-open",{originalErrorMessage:t.message})})),Vm}async function a3(t){try{const n=(await Zx()).transaction(qu),i=await n.objectStore(qu).get(eC(t));return await n.done,i}catch(e){if(e instanceof Ii)Pr.warn(e.message);else{const n=Cs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Pr.warn(n.message)}}}async function PS(t,e){try{const i=(await Zx()).transaction(qu,"readwrite");await i.objectStore(qu).put(e,eC(t)),await i.done}catch(n){if(n instanceof Ii)Pr.warn(n.message);else{const i=Cs.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Pr.warn(i.message)}}}function eC(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l3=1024,u3=30;class c3{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new f3(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=kS();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(u=>u.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:s}),this._heartbeatsCache.heartbeats.length>u3){const u=h3(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Pr.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=kS(),{heartbeatsToSend:i,unsentEntries:s}=d3(this._heartbeatsCache.heartbeats),a=Sf(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(n){return Pr.warn(n),""}}}function kS(){return new Date().toISOString().substring(0,10)}function d3(t,e=l3){const n=[];let i=t.slice();for(const s of t){const a=n.find(u=>u.agent===s.agent);if(a){if(a.dates.push(s.date),VS(n)>e){a.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),VS(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class f3{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Jx()?Kx().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await a3(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return PS(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return PS(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function VS(t){return Sf(JSON.stringify({version:2,heartbeats:t})).length}function h3(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let i=1;i<t.length;i++)t[i].date<n&&(n=t[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p3(t){rr(new Ai("platform-logger",e=>new CO(e),"PRIVATE")),rr(new Ai("heartbeat",e=>new c3(e),"PRIVATE")),ii(pg,MS,t),ii(pg,MS,"esm2020"),ii("fire-js","")}p3("");var LS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Is,tC;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,M){function R(){}R.prototype=M.prototype,N.F=M.prototype,N.prototype=new R,N.prototype.constructor=N,N.D=function(V,O,z){for(var k=Array(arguments.length-2),oe=2;oe<arguments.length;oe++)k[oe-2]=arguments[oe];return M.prototype[O].apply(V,k)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,n),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(N,M,R){R||(R=0);const V=Array(16);if(typeof M=="string")for(var O=0;O<16;++O)V[O]=M.charCodeAt(R++)|M.charCodeAt(R++)<<8|M.charCodeAt(R++)<<16|M.charCodeAt(R++)<<24;else for(O=0;O<16;++O)V[O]=M[R++]|M[R++]<<8|M[R++]<<16|M[R++]<<24;M=N.g[0],R=N.g[1],O=N.g[2];let z=N.g[3],k;k=M+(z^R&(O^z))+V[0]+3614090360&4294967295,M=R+(k<<7&4294967295|k>>>25),k=z+(O^M&(R^O))+V[1]+3905402710&4294967295,z=M+(k<<12&4294967295|k>>>20),k=O+(R^z&(M^R))+V[2]+606105819&4294967295,O=z+(k<<17&4294967295|k>>>15),k=R+(M^O&(z^M))+V[3]+3250441966&4294967295,R=O+(k<<22&4294967295|k>>>10),k=M+(z^R&(O^z))+V[4]+4118548399&4294967295,M=R+(k<<7&4294967295|k>>>25),k=z+(O^M&(R^O))+V[5]+1200080426&4294967295,z=M+(k<<12&4294967295|k>>>20),k=O+(R^z&(M^R))+V[6]+2821735955&4294967295,O=z+(k<<17&4294967295|k>>>15),k=R+(M^O&(z^M))+V[7]+4249261313&4294967295,R=O+(k<<22&4294967295|k>>>10),k=M+(z^R&(O^z))+V[8]+1770035416&4294967295,M=R+(k<<7&4294967295|k>>>25),k=z+(O^M&(R^O))+V[9]+2336552879&4294967295,z=M+(k<<12&4294967295|k>>>20),k=O+(R^z&(M^R))+V[10]+4294925233&4294967295,O=z+(k<<17&4294967295|k>>>15),k=R+(M^O&(z^M))+V[11]+2304563134&4294967295,R=O+(k<<22&4294967295|k>>>10),k=M+(z^R&(O^z))+V[12]+1804603682&4294967295,M=R+(k<<7&4294967295|k>>>25),k=z+(O^M&(R^O))+V[13]+4254626195&4294967295,z=M+(k<<12&4294967295|k>>>20),k=O+(R^z&(M^R))+V[14]+2792965006&4294967295,O=z+(k<<17&4294967295|k>>>15),k=R+(M^O&(z^M))+V[15]+1236535329&4294967295,R=O+(k<<22&4294967295|k>>>10),k=M+(O^z&(R^O))+V[1]+4129170786&4294967295,M=R+(k<<5&4294967295|k>>>27),k=z+(R^O&(M^R))+V[6]+3225465664&4294967295,z=M+(k<<9&4294967295|k>>>23),k=O+(M^R&(z^M))+V[11]+643717713&4294967295,O=z+(k<<14&4294967295|k>>>18),k=R+(z^M&(O^z))+V[0]+3921069994&4294967295,R=O+(k<<20&4294967295|k>>>12),k=M+(O^z&(R^O))+V[5]+3593408605&4294967295,M=R+(k<<5&4294967295|k>>>27),k=z+(R^O&(M^R))+V[10]+38016083&4294967295,z=M+(k<<9&4294967295|k>>>23),k=O+(M^R&(z^M))+V[15]+3634488961&4294967295,O=z+(k<<14&4294967295|k>>>18),k=R+(z^M&(O^z))+V[4]+3889429448&4294967295,R=O+(k<<20&4294967295|k>>>12),k=M+(O^z&(R^O))+V[9]+568446438&4294967295,M=R+(k<<5&4294967295|k>>>27),k=z+(R^O&(M^R))+V[14]+3275163606&4294967295,z=M+(k<<9&4294967295|k>>>23),k=O+(M^R&(z^M))+V[3]+4107603335&4294967295,O=z+(k<<14&4294967295|k>>>18),k=R+(z^M&(O^z))+V[8]+1163531501&4294967295,R=O+(k<<20&4294967295|k>>>12),k=M+(O^z&(R^O))+V[13]+2850285829&4294967295,M=R+(k<<5&4294967295|k>>>27),k=z+(R^O&(M^R))+V[2]+4243563512&4294967295,z=M+(k<<9&4294967295|k>>>23),k=O+(M^R&(z^M))+V[7]+1735328473&4294967295,O=z+(k<<14&4294967295|k>>>18),k=R+(z^M&(O^z))+V[12]+2368359562&4294967295,R=O+(k<<20&4294967295|k>>>12),k=M+(R^O^z)+V[5]+4294588738&4294967295,M=R+(k<<4&4294967295|k>>>28),k=z+(M^R^O)+V[8]+2272392833&4294967295,z=M+(k<<11&4294967295|k>>>21),k=O+(z^M^R)+V[11]+1839030562&4294967295,O=z+(k<<16&4294967295|k>>>16),k=R+(O^z^M)+V[14]+4259657740&4294967295,R=O+(k<<23&4294967295|k>>>9),k=M+(R^O^z)+V[1]+2763975236&4294967295,M=R+(k<<4&4294967295|k>>>28),k=z+(M^R^O)+V[4]+1272893353&4294967295,z=M+(k<<11&4294967295|k>>>21),k=O+(z^M^R)+V[7]+4139469664&4294967295,O=z+(k<<16&4294967295|k>>>16),k=R+(O^z^M)+V[10]+3200236656&4294967295,R=O+(k<<23&4294967295|k>>>9),k=M+(R^O^z)+V[13]+681279174&4294967295,M=R+(k<<4&4294967295|k>>>28),k=z+(M^R^O)+V[0]+3936430074&4294967295,z=M+(k<<11&4294967295|k>>>21),k=O+(z^M^R)+V[3]+3572445317&4294967295,O=z+(k<<16&4294967295|k>>>16),k=R+(O^z^M)+V[6]+76029189&4294967295,R=O+(k<<23&4294967295|k>>>9),k=M+(R^O^z)+V[9]+3654602809&4294967295,M=R+(k<<4&4294967295|k>>>28),k=z+(M^R^O)+V[12]+3873151461&4294967295,z=M+(k<<11&4294967295|k>>>21),k=O+(z^M^R)+V[15]+530742520&4294967295,O=z+(k<<16&4294967295|k>>>16),k=R+(O^z^M)+V[2]+3299628645&4294967295,R=O+(k<<23&4294967295|k>>>9),k=M+(O^(R|~z))+V[0]+4096336452&4294967295,M=R+(k<<6&4294967295|k>>>26),k=z+(R^(M|~O))+V[7]+1126891415&4294967295,z=M+(k<<10&4294967295|k>>>22),k=O+(M^(z|~R))+V[14]+2878612391&4294967295,O=z+(k<<15&4294967295|k>>>17),k=R+(z^(O|~M))+V[5]+4237533241&4294967295,R=O+(k<<21&4294967295|k>>>11),k=M+(O^(R|~z))+V[12]+1700485571&4294967295,M=R+(k<<6&4294967295|k>>>26),k=z+(R^(M|~O))+V[3]+2399980690&4294967295,z=M+(k<<10&4294967295|k>>>22),k=O+(M^(z|~R))+V[10]+4293915773&4294967295,O=z+(k<<15&4294967295|k>>>17),k=R+(z^(O|~M))+V[1]+2240044497&4294967295,R=O+(k<<21&4294967295|k>>>11),k=M+(O^(R|~z))+V[8]+1873313359&4294967295,M=R+(k<<6&4294967295|k>>>26),k=z+(R^(M|~O))+V[15]+4264355552&4294967295,z=M+(k<<10&4294967295|k>>>22),k=O+(M^(z|~R))+V[6]+2734768916&4294967295,O=z+(k<<15&4294967295|k>>>17),k=R+(z^(O|~M))+V[13]+1309151649&4294967295,R=O+(k<<21&4294967295|k>>>11),k=M+(O^(R|~z))+V[4]+4149444226&4294967295,M=R+(k<<6&4294967295|k>>>26),k=z+(R^(M|~O))+V[11]+3174756917&4294967295,z=M+(k<<10&4294967295|k>>>22),k=O+(M^(z|~R))+V[2]+718787259&4294967295,O=z+(k<<15&4294967295|k>>>17),k=R+(z^(O|~M))+V[9]+3951481745&4294967295,N.g[0]=N.g[0]+M&4294967295,N.g[1]=N.g[1]+(O+(k<<21&4294967295|k>>>11))&4294967295,N.g[2]=N.g[2]+O&4294967295,N.g[3]=N.g[3]+z&4294967295}i.prototype.v=function(N,M){M===void 0&&(M=N.length);const R=M-this.blockSize,V=this.C;let O=this.h,z=0;for(;z<M;){if(O==0)for(;z<=R;)s(this,N,z),z+=this.blockSize;if(typeof N=="string"){for(;z<M;)if(V[O++]=N.charCodeAt(z++),O==this.blockSize){s(this,V),O=0;break}}else for(;z<M;)if(V[O++]=N[z++],O==this.blockSize){s(this,V),O=0;break}}this.h=O,this.o+=M},i.prototype.A=function(){var N=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);N[0]=128;for(var M=1;M<N.length-8;++M)N[M]=0;M=this.o*8;for(var R=N.length-8;R<N.length;++R)N[R]=M&255,M/=256;for(this.v(N),N=Array(16),M=0,R=0;R<4;++R)for(let V=0;V<32;V+=8)N[M++]=this.g[R]>>>V&255;return N};function a(N,M){var R=d;return Object.prototype.hasOwnProperty.call(R,N)?R[N]:R[N]=M(N)}function u(N,M){this.h=M;const R=[];let V=!0;for(let O=N.length-1;O>=0;O--){const z=N[O]|0;V&&z==M||(R[O]=z,V=!1)}this.g=R}var d={};function p(N){return-128<=N&&N<128?a(N,function(M){return new u([M|0],M<0?-1:0)}):new u([N|0],N<0?-1:0)}function h(N){if(isNaN(N)||!isFinite(N))return E;if(N<0)return P(h(-N));const M=[];let R=1;for(let V=0;N>=R;V++)M[V]=N/R|0,R*=4294967296;return new u(M,0)}function v(N,M){if(N.length==0)throw Error("number format error: empty string");if(M=M||10,M<2||36<M)throw Error("radix out of range: "+M);if(N.charAt(0)=="-")return P(v(N.substring(1),M));if(N.indexOf("-")>=0)throw Error('number format error: interior "-" character');const R=h(Math.pow(M,8));let V=E;for(let z=0;z<N.length;z+=8){var O=Math.min(8,N.length-z);const k=parseInt(N.substring(z,z+O),M);O<8?(O=h(Math.pow(M,O)),V=V.j(O).add(h(k))):(V=V.j(R),V=V.add(h(k)))}return V}var E=p(0),S=p(1),C=p(16777216);t=u.prototype,t.m=function(){if(U(this))return-P(this).m();let N=0,M=1;for(let R=0;R<this.g.length;R++){const V=this.i(R);N+=(V>=0?V:4294967296+V)*M,M*=4294967296}return N},t.toString=function(N){if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(D(this))return"0";if(U(this))return"-"+P(this).toString(N);const M=h(Math.pow(N,6));var R=this;let V="";for(;;){const O=ne(R,M).g;R=q(R,O.j(M));let z=((R.g.length>0?R.g[0]:R.h)>>>0).toString(N);if(R=O,D(R))return z+V;for(;z.length<6;)z="0"+z;V=z+V}},t.i=function(N){return N<0?0:N<this.g.length?this.g[N]:this.h};function D(N){if(N.h!=0)return!1;for(let M=0;M<N.g.length;M++)if(N.g[M]!=0)return!1;return!0}function U(N){return N.h==-1}t.l=function(N){return N=q(this,N),U(N)?-1:D(N)?0:1};function P(N){const M=N.g.length,R=[];for(let V=0;V<M;V++)R[V]=~N.g[V];return new u(R,~N.h).add(S)}t.abs=function(){return U(this)?P(this):this},t.add=function(N){const M=Math.max(this.g.length,N.g.length),R=[];let V=0;for(let O=0;O<=M;O++){let z=V+(this.i(O)&65535)+(N.i(O)&65535),k=(z>>>16)+(this.i(O)>>>16)+(N.i(O)>>>16);V=k>>>16,z&=65535,k&=65535,R[O]=k<<16|z}return new u(R,R[R.length-1]&-2147483648?-1:0)};function q(N,M){return N.add(P(M))}t.j=function(N){if(D(this)||D(N))return E;if(U(this))return U(N)?P(this).j(P(N)):P(P(this).j(N));if(U(N))return P(this.j(P(N)));if(this.l(C)<0&&N.l(C)<0)return h(this.m()*N.m());const M=this.g.length+N.g.length,R=[];for(var V=0;V<2*M;V++)R[V]=0;for(V=0;V<this.g.length;V++)for(let O=0;O<N.g.length;O++){const z=this.i(V)>>>16,k=this.i(V)&65535,oe=N.i(O)>>>16,Ce=N.i(O)&65535;R[2*V+2*O]+=k*Ce,X(R,2*V+2*O),R[2*V+2*O+1]+=z*Ce,X(R,2*V+2*O+1),R[2*V+2*O+1]+=k*oe,X(R,2*V+2*O+1),R[2*V+2*O+2]+=z*oe,X(R,2*V+2*O+2)}for(N=0;N<M;N++)R[N]=R[2*N+1]<<16|R[2*N];for(N=M;N<2*M;N++)R[N]=0;return new u(R,0)};function X(N,M){for(;(N[M]&65535)!=N[M];)N[M+1]+=N[M]>>>16,N[M]&=65535,M++}function H(N,M){this.g=N,this.h=M}function ne(N,M){if(D(M))throw Error("division by zero");if(D(N))return new H(E,E);if(U(N))return M=ne(P(N),M),new H(P(M.g),P(M.h));if(U(M))return M=ne(N,P(M)),new H(P(M.g),M.h);if(N.g.length>30){if(U(N)||U(M))throw Error("slowDivide_ only works with positive integers.");for(var R=S,V=M;V.l(N)<=0;)R=le(R),V=le(V);var O=ce(R,1),z=ce(V,1);for(V=ce(V,2),R=ce(R,2);!D(V);){var k=z.add(V);k.l(N)<=0&&(O=O.add(R),z=k),V=ce(V,1),R=ce(R,1)}return M=q(N,O.j(M)),new H(O,M)}for(O=E;N.l(M)>=0;){for(R=Math.max(1,Math.floor(N.m()/M.m())),V=Math.ceil(Math.log(R)/Math.LN2),V=V<=48?1:Math.pow(2,V-48),z=h(R),k=z.j(M);U(k)||k.l(N)>0;)R-=V,z=h(R),k=z.j(M);D(z)&&(z=S),O=O.add(z),N=q(N,k)}return new H(O,N)}t.B=function(N){return ne(this,N).h},t.and=function(N){const M=Math.max(this.g.length,N.g.length),R=[];for(let V=0;V<M;V++)R[V]=this.i(V)&N.i(V);return new u(R,this.h&N.h)},t.or=function(N){const M=Math.max(this.g.length,N.g.length),R=[];for(let V=0;V<M;V++)R[V]=this.i(V)|N.i(V);return new u(R,this.h|N.h)},t.xor=function(N){const M=Math.max(this.g.length,N.g.length),R=[];for(let V=0;V<M;V++)R[V]=this.i(V)^N.i(V);return new u(R,this.h^N.h)};function le(N){const M=N.g.length+1,R=[];for(let V=0;V<M;V++)R[V]=N.i(V)<<1|N.i(V-1)>>>31;return new u(R,N.h)}function ce(N,M){const R=M>>5;M%=32;const V=N.g.length-R,O=[];for(let z=0;z<V;z++)O[z]=M>0?N.i(z+R)>>>M|N.i(z+R+1)<<32-M:N.i(z+R);return new u(O,N.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,tC=i,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.B,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=h,u.fromString=v,Is=u}).apply(typeof LS<"u"?LS:typeof self<"u"?self:typeof window<"u"?window:{});var Jd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var nC,xu,iC,of,yg,rC,sC,oC;(function(){var t,e=Object.defineProperty;function n(g){g=[typeof globalThis=="object"&&globalThis,g,typeof window=="object"&&window,typeof self=="object"&&self,typeof Jd=="object"&&Jd];for(var A=0;A<g.length;++A){var x=g[A];if(x&&x.Math==Math)return x}throw Error("Cannot find global object")}var i=n(this);function s(g,A){if(A)e:{var x=i;g=g.split(".");for(var b=0;b<g.length-1;b++){var j=g[b];if(!(j in x))break e;x=x[j]}g=g[g.length-1],b=x[g],A=A(b),A!=b&&A!=null&&e(x,g,{configurable:!0,writable:!0,value:A})}}s("Symbol.dispose",function(g){return g||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(g){return g||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(g){return g||function(A){var x=[],b;for(b in A)Object.prototype.hasOwnProperty.call(A,b)&&x.push([b,A[b]]);return x}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},u=this||self;function d(g){var A=typeof g;return A=="object"&&g!=null||A=="function"}function p(g,A,x){return g.call.apply(g.bind,arguments)}function h(g,A,x){return h=p,h.apply(null,arguments)}function v(g,A){var x=Array.prototype.slice.call(arguments,1);return function(){var b=x.slice();return b.push.apply(b,arguments),g.apply(this,b)}}function E(g,A){function x(){}x.prototype=A.prototype,g.Z=A.prototype,g.prototype=new x,g.prototype.constructor=g,g.Ob=function(b,j,W){for(var de=Array(arguments.length-2),De=2;De<arguments.length;De++)de[De-2]=arguments[De];return A.prototype[j].apply(b,de)}}var S=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?g=>g&&AsyncContext.Snapshot.wrap(g):g=>g;function C(g){const A=g.length;if(A>0){const x=Array(A);for(let b=0;b<A;b++)x[b]=g[b];return x}return[]}function D(g,A){for(let b=1;b<arguments.length;b++){const j=arguments[b];var x=typeof j;if(x=x!="object"?x:j?Array.isArray(j)?"array":x:"null",x=="array"||x=="object"&&typeof j.length=="number"){x=g.length||0;const W=j.length||0;g.length=x+W;for(let de=0;de<W;de++)g[x+de]=j[de]}else g.push(j)}}class U{constructor(A,x){this.i=A,this.j=x,this.h=0,this.g=null}get(){let A;return this.h>0?(this.h--,A=this.g,this.g=A.next,A.next=null):A=this.i(),A}}function P(g){u.setTimeout(()=>{throw g},0)}function q(){var g=N;let A=null;return g.g&&(A=g.g,g.g=g.g.next,g.g||(g.h=null),A.next=null),A}class X{constructor(){this.h=this.g=null}add(A,x){const b=H.get();b.set(A,x),this.h?this.h.next=b:this.g=b,this.h=b}}var H=new U(()=>new ne,g=>g.reset());class ne{constructor(){this.next=this.g=this.h=null}set(A,x){this.h=A,this.g=x,this.next=null}reset(){this.next=this.g=this.h=null}}let le,ce=!1,N=new X,M=()=>{const g=Promise.resolve(void 0);le=()=>{g.then(R)}};function R(){for(var g;g=q();){try{g.h.call(g.g)}catch(x){P(x)}var A=H;A.j(g),A.h<100&&(A.h++,g.next=A.g,A.g=g)}ce=!1}function V(){this.u=this.u,this.C=this.C}V.prototype.u=!1,V.prototype.dispose=function(){this.u||(this.u=!0,this.N())},V.prototype[Symbol.dispose]=function(){this.dispose()},V.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function O(g,A){this.type=g,this.g=this.target=A,this.defaultPrevented=!1}O.prototype.h=function(){this.defaultPrevented=!0};var z=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var g=!1,A=Object.defineProperty({},"passive",{get:function(){g=!0}});try{const x=()=>{};u.addEventListener("test",x,A),u.removeEventListener("test",x,A)}catch{}return g})();function k(g){return/^[\s\xa0]*$/.test(g)}function oe(g,A){O.call(this,g?g.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,g&&this.init(g,A)}E(oe,O),oe.prototype.init=function(g,A){const x=this.type=g.type,b=g.changedTouches&&g.changedTouches.length?g.changedTouches[0]:null;this.target=g.target||g.srcElement,this.g=A,A=g.relatedTarget,A||(x=="mouseover"?A=g.fromElement:x=="mouseout"&&(A=g.toElement)),this.relatedTarget=A,b?(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0):(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0),this.button=g.button,this.key=g.key||"",this.ctrlKey=g.ctrlKey,this.altKey=g.altKey,this.shiftKey=g.shiftKey,this.metaKey=g.metaKey,this.pointerId=g.pointerId||0,this.pointerType=g.pointerType,this.state=g.state,this.i=g,g.defaultPrevented&&oe.Z.h.call(this)},oe.prototype.h=function(){oe.Z.h.call(this);const g=this.i;g.preventDefault?g.preventDefault():g.returnValue=!1};var Ce="closure_listenable_"+(Math.random()*1e6|0),Y=0;function ue(g,A,x,b,j){this.listener=g,this.proxy=null,this.src=A,this.type=x,this.capture=!!b,this.ha=j,this.key=++Y,this.da=this.fa=!1}function _e(g){g.da=!0,g.listener=null,g.proxy=null,g.src=null,g.ha=null}function ke(g,A,x){for(const b in g)A.call(x,g[b],b,g)}function Ue(g,A){for(const x in g)A.call(void 0,g[x],x,g)}function B(g){const A={};for(const x in g)A[x]=g[x];return A}const se="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function fe(g,A){let x,b;for(let j=1;j<arguments.length;j++){b=arguments[j];for(x in b)g[x]=b[x];for(let W=0;W<se.length;W++)x=se[W],Object.prototype.hasOwnProperty.call(b,x)&&(g[x]=b[x])}}function ge(g){this.src=g,this.g={},this.h=0}ge.prototype.add=function(g,A,x,b,j){const W=g.toString();g=this.g[W],g||(g=this.g[W]=[],this.h++);const de=Ve(g,A,b,j);return de>-1?(A=g[de],x||(A.fa=!1)):(A=new ue(A,this.src,W,!!b,j),A.fa=x,g.push(A)),A};function Ie(g,A){const x=A.type;if(x in g.g){var b=g.g[x],j=Array.prototype.indexOf.call(b,A,void 0),W;(W=j>=0)&&Array.prototype.splice.call(b,j,1),W&&(_e(A),g.g[x].length==0&&(delete g.g[x],g.h--))}}function Ve(g,A,x,b){for(let j=0;j<g.length;++j){const W=g[j];if(!W.da&&W.listener==A&&W.capture==!!x&&W.ha==b)return j}return-1}var je="closure_lm_"+(Math.random()*1e6|0),Ft={};function ht(g,A,x,b,j){if(Array.isArray(A)){for(let W=0;W<A.length;W++)ht(g,A[W],x,b,j);return null}return x=ml(x),g&&g[Ce]?g.J(A,x,d(b)?!!b.capture:!1,j):zs(g,A,x,!1,b,j)}function zs(g,A,x,b,j,W){if(!A)throw Error("Invalid event type");const de=d(j)?!!j.capture:!!j;let De=Gs(g);if(De||(g[je]=De=new ge(g)),x=De.add(A,x,b,de,W),x.proxy)return x;if(b=Bo(),x.proxy=b,b.src=g,b.listener=x,g.addEventListener)z||(j=de),j===void 0&&(j=!1),g.addEventListener(A.toString(),b,j);else if(g.attachEvent)g.attachEvent(bi(A.toString()),b);else if(g.addListener&&g.removeListener)g.addListener(b);else throw Error("addEventListener and attachEvent are unavailable.");return x}function Bo(){function g(x){return A.call(g.src,g.listener,x)}const A=hl;return g}function zo(g,A,x,b,j){if(Array.isArray(A))for(var W=0;W<A.length;W++)zo(g,A[W],x,b,j);else b=d(b)?!!b.capture:!!b,x=ml(x),g&&g[Ce]?(g=g.i,W=String(A).toString(),W in g.g&&(A=g.g[W],x=Ve(A,x,b,j),x>-1&&(_e(A[x]),Array.prototype.splice.call(A,x,1),A.length==0&&(delete g.g[W],g.h--)))):g&&(g=Gs(g))&&(A=g.g[A.toString()],g=-1,A&&(g=Ve(A,x,b,j)),(x=g>-1?A[g]:null)&&Go(x))}function Go(g){if(typeof g!="number"&&g&&!g.da){var A=g.src;if(A&&A[Ce])Ie(A.i,g);else{var x=g.type,b=g.proxy;A.removeEventListener?A.removeEventListener(x,b,g.capture):A.detachEvent?A.detachEvent(bi(x),b):A.addListener&&A.removeListener&&A.removeListener(b),(x=Gs(A))?(Ie(x,g),x.h==0&&(x.src=null,A[je]=null)):_e(g)}}}function bi(g){return g in Ft?Ft[g]:Ft[g]="on"+g}function hl(g,A){if(g.da)g=!0;else{A=new oe(A,this);const x=g.listener,b=g.ha||g.src;g.fa&&Go(g),g=x.call(b,A)}return g}function Gs(g){return g=g[je],g instanceof ge?g:null}var pl="__closure_events_fn_"+(Math.random()*1e9>>>0);function ml(g){return typeof g=="function"?g:(g[pl]||(g[pl]=function(A){return g.handleEvent(A)}),g[pl])}function Ct(){V.call(this),this.i=new ge(this),this.M=this,this.G=null}E(Ct,V),Ct.prototype[Ce]=!0,Ct.prototype.removeEventListener=function(g,A,x,b){zo(this,g,A,x,b)};function qt(g,A){var x,b=g.G;if(b)for(x=[];b;b=b.G)x.push(b);if(g=g.M,b=A.type||A,typeof A=="string")A=new O(A,g);else if(A instanceof O)A.target=A.target||g;else{var j=A;A=new O(b,g),fe(A,j)}j=!0;let W,de;if(x)for(de=x.length-1;de>=0;de--)W=A.g=x[de],j=qr(W,b,!0,A)&&j;if(W=A.g=g,j=qr(W,b,!0,A)&&j,j=qr(W,b,!1,A)&&j,x)for(de=0;de<x.length;de++)W=A.g=x[de],j=qr(W,b,!1,A)&&j}Ct.prototype.N=function(){if(Ct.Z.N.call(this),this.i){var g=this.i;for(const A in g.g){const x=g.g[A];for(let b=0;b<x.length;b++)_e(x[b]);delete g.g[A],g.h--}}this.G=null},Ct.prototype.J=function(g,A,x,b){return this.i.add(String(g),A,!1,x,b)},Ct.prototype.K=function(g,A,x,b){return this.i.add(String(g),A,!0,x,b)};function qr(g,A,x,b){if(A=g.i.g[String(A)],!A)return!0;A=A.concat();let j=!0;for(let W=0;W<A.length;++W){const de=A[W];if(de&&!de.da&&de.capture==x){const De=de.listener,Tt=de.ha||de.src;de.fa&&Ie(g.i,de),j=De.call(Tt,b)!==!1&&j}}return j&&!b.defaultPrevented}function Sh(g,A){if(typeof g!="function")if(g&&typeof g.handleEvent=="function")g=h(g.handleEvent,g);else throw Error("Invalid listener argument");return Number(A)>2147483647?-1:u.setTimeout(g,A||0)}function dc(g){g.g=Sh(()=>{g.g=null,g.i&&(g.i=!1,dc(g))},g.l);const A=g.h;g.h=null,g.m.apply(null,A)}class fn extends V{constructor(A,x){super(),this.m=A,this.l=x,this.h=null,this.i=!1,this.g=null}j(A){this.h=arguments,this.g?this.i=!0:dc(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function $s(g){V.call(this),this.h=g,this.g={}}E($s,V);var gl=[];function yl(g){ke(g.g,function(A,x){this.g.hasOwnProperty(x)&&Go(A)},g),g.g={}}$s.prototype.N=function(){$s.Z.N.call(this),yl(this)},$s.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Hr=u.JSON.stringify,Ah=u.JSON.parse,fc=class{stringify(g){return u.JSON.stringify(g,void 0)}parse(g){return u.JSON.parse(g,void 0)}};function hc(){}function pc(){}var oi={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Yt(){O.call(this,"d")}E(Yt,O);function Hn(){O.call(this,"c")}E(Hn,O);var Et={},mc=null;function $o(){return mc=mc||new Ct}Et.Ia="serverreachability";function gc(g){O.call(this,Et.Ia,g)}E(gc,O);function Ri(g){const A=$o();qt(A,new gc(A))}Et.STAT_EVENT="statevent";function js(g,A){O.call(this,Et.STAT_EVENT,g),this.stat=A}E(js,O);function It(g){const A=$o();qt(A,new js(A,g))}Et.Ja="timingevent";function Ni(g,A){O.call(this,Et.Ja,g),this.size=A}E(Ni,O);function Mi(g,A){if(typeof g!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){g()},A)}function ai(){this.g=!0}ai.prototype.ua=function(){this.g=!1};function wh(g,A,x,b,j,W){g.info(function(){if(g.g)if(W){var de="",De=W.split("&");for(let Xe=0;Xe<De.length;Xe++){var Tt=De[Xe].split("=");if(Tt.length>1){const pt=Tt[0];Tt=Tt[1];const $n=pt.split("_");de=$n.length>=2&&$n[1]=="type"?de+(pt+"="+Tt+"&"):de+(pt+"=redacted&")}}}else de=null;else de=W;return"XMLHTTP REQ ("+b+") [attempt "+j+"]: "+A+`
`+x+`
`+de})}function yc(g,A,x,b,j,W,de){g.info(function(){return"XMLHTTP RESP ("+b+") [ attempt "+j+"]: "+A+`
`+x+`
`+W+" "+de})}function Di(g,A,x,b){g.info(function(){return"XMLHTTP TEXT ("+A+"): "+xh(g,x)+(b?" "+b:"")})}function Js(g,A){g.info(function(){return"TIMEOUT: "+A})}ai.prototype.info=function(){};function xh(g,A){if(!g.g)return A;if(!A)return null;try{const W=JSON.parse(A);if(W){for(g=0;g<W.length;g++)if(Array.isArray(W[g])){var x=W[g];if(!(x.length<2)){var b=x[1];if(Array.isArray(b)&&!(b.length<1)){var j=b[0];if(j!="noop"&&j!="stop"&&j!="close")for(let de=1;de<b.length;de++)b[de]=""}}}}return Hr(W)}catch{return A}}var Ks={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},vl={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},_l;function Ys(){}E(Ys,hc),Ys.prototype.g=function(){return new XMLHttpRequest},_l=new Ys;function ar(g){return encodeURIComponent(String(g))}function vc(g){var A=1;g=g.split(":");const x=[];for(;A>0&&g.length;)x.push(g.shift()),A--;return g.length&&x.push(g.join(":")),x}function li(g,A,x,b){this.j=g,this.i=A,this.l=x,this.S=b||1,this.V=new $s(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ui}function ui(){this.i=null,this.g="",this.h=!1}var bt={},Gt={};function Pi(g,A,x){g.M=1,g.A=Qs(Nt(A)),g.u=x,g.R=!0,jo(g,null)}function jo(g,A){g.F=Date.now(),ki(g),g.B=Nt(g.A);var x=g.B,b=g.S;Array.isArray(b)||(b=[String(b)]),Qo(x.i,"t",b),g.C=0,x=g.j.L,g.h=new ui,g.g=Pc(g.j,x?A:null,!g.u),g.P>0&&(g.O=new fn(h(g.Y,g,g.g),g.P)),A=g.V,x=g.g,b=g.ba;var j="readystatechange";Array.isArray(j)||(j&&(gl[0]=j.toString()),j=gl);for(let W=0;W<j.length;W++){const de=ht(x,j[W],b||A.handleEvent,!1,A.h||A);if(!de)break;A.g[de.key]=de}A=g.J?B(g.J):{},g.u?(g.v||(g.v="POST"),A["Content-Type"]="application/x-www-form-urlencoded",g.g.ea(g.B,g.v,g.u,A)):(g.v="GET",g.g.ea(g.B,g.v,null,A)),Ri(),wh(g.i,g.v,g.B,g.l,g.S,g.u)}li.prototype.ba=function(g){g=g.target;const A=this.O;A&&fi(g)==3?A.j():this.Y(g)},li.prototype.Y=function(g){try{if(g==this.g)e:{const De=fi(this.g),Tt=this.g.ya(),Xe=this.g.ca();if(!(De<3)&&(De!=3||this.g&&(this.h.h||this.g.la()||Qt(this.g)))){this.K||De!=4||Tt==7||(Tt==8||Xe<=0?Ri(3):Ri(2)),Vi(this);var A=this.g.ca();this.X=A;var x=Ch(this);if(this.o=A==200,yc(this.i,this.v,this.B,this.l,this.S,De,A),this.o){if(this.U&&!this.L){t:{if(this.g){var b,j=this.g;if((b=j.g?j.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(b)){var W=b;break t}}W=null}if(g=W)Di(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Li(this,g);else{this.o=!1,this.m=3,It(12),bn(this),Bn(this);break e}}if(this.R){g=!0;let pt;for(;!this.K&&this.C<x.length;)if(pt=Ec(this,x),pt==Gt){De==4&&(this.m=4,It(14),g=!1),Di(this.i,this.l,null,"[Incomplete Response]");break}else if(pt==bt){this.m=4,It(15),Di(this.i,this.l,x,"[Invalid Chunk]"),g=!1;break}else Di(this.i,this.l,pt,null),Li(this,pt);if(_c(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),De!=4||x.length!=0||this.h.h||(this.m=1,It(16),g=!1),this.o=this.o&&g,!g)Di(this.i,this.l,x,"[Invalid Chunked Response]"),bn(this),Bn(this);else if(x.length>0&&!this.W){this.W=!0;var de=this.j;de.g==this&&de.aa&&!de.P&&(de.j.info("Great, no buffering proxy detected. Bytes received: "+x.length),kl(de),de.P=!0,It(11))}}else Di(this.i,this.l,x,null),Li(this,x);De==4&&bn(this),this.o&&!this.K&&(De==4?Rc(this.j,this):(this.o=!1,ki(this)))}else ur(this.g),A==400&&x.indexOf("Unknown SID")>0?(this.m=3,It(12)):(this.m=0,It(13)),bn(this),Bn(this)}}}catch{}finally{}};function Ch(g){if(!_c(g))return g.g.la();const A=Qt(g.g);if(A==="")return"";let x="";const b=A.length,j=fi(g.g)==4;if(!g.h.i){if(typeof TextDecoder>"u")return bn(g),Bn(g),"";g.h.i=new u.TextDecoder}for(let W=0;W<b;W++)g.h.h=!0,x+=g.h.i.decode(A[W],{stream:!(j&&W==b-1)});return A.length=0,g.h.g+=x,g.C=0,g.h.g}function _c(g){return g.g?g.v=="GET"&&g.M!=2&&g.j.Aa:!1}function Ec(g,A){var x=g.C,b=A.indexOf(`
`,x);return b==-1?Gt:(x=Number(A.substring(x,b)),isNaN(x)?bt:(b+=1,b+x>A.length?Gt:(A=A.slice(b,b+x),g.C=b+x,A)))}li.prototype.cancel=function(){this.K=!0,bn(this)};function ki(g){g.T=Date.now()+g.H,Jo(g,g.H)}function Jo(g,A){if(g.D!=null)throw Error("WatchDog timer not null");g.D=Mi(h(g.aa,g),A)}function Vi(g){g.D&&(u.clearTimeout(g.D),g.D=null)}li.prototype.aa=function(){this.D=null;const g=Date.now();g-this.T>=0?(Js(this.i,this.B),this.M!=2&&(Ri(),It(17)),bn(this),this.m=2,Bn(this)):Jo(this,this.T-g)};function Bn(g){g.j.I==0||g.K||Rc(g.j,g)}function bn(g){Vi(g);var A=g.O;A&&typeof A.dispose=="function"&&A.dispose(),g.O=null,yl(g.V),g.g&&(A=g.g,g.g=null,A.abort(),A.dispose())}function Li(g,A){try{var x=g.j;if(x.I!=0&&(x.g==g||Oi(x.h,g))){if(!g.L&&Oi(x.h,g)&&x.I==3){try{var b=x.Ba.g.parse(A)}catch{b=null}if(Array.isArray(b)&&b.length==3){var j=b;if(j[0]==0){e:if(!x.v){if(x.g)if(x.g.F+3e3<g.F)ta(x),Yr(x);else break e;io(x),It(18)}}else x.xa=j[1],0<x.xa-x.K&&j[2]<37500&&x.F&&x.A==0&&!x.C&&(x.C=Mi(h(x.Va,x),6e3));Ui(x.h)<=1&&x.ta&&(x.ta=void 0)}else Gi(x,11)}else if((g.L||x.g==g)&&ta(x),!k(A))for(j=x.Ba.g.parse(A),A=0;A<j.length;A++){let Xe=j[A];const pt=Xe[0];if(!(pt<=x.K))if(x.K=pt,Xe=Xe[1],x.I==2)if(Xe[0]=="c"){x.M=Xe[1],x.ba=Xe[2];const $n=Xe[3];$n!=null&&(x.ka=$n,x.j.info("VER="+x.ka));const $i=Xe[4];$i!=null&&(x.za=$i,x.j.info("SVER="+x.za));const hi=Xe[5];hi!=null&&typeof hi=="number"&&hi>0&&(b=1.5*hi,x.O=b,x.j.info("backChannelRequestTimeoutMs_="+b)),b=x;const pi=g.g;if(pi){const ro=pi.g?pi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ro){var W=b.h;W.g||ro.indexOf("spdy")==-1&&ro.indexOf("quic")==-1&&ro.indexOf("h2")==-1||(W.j=W.l,W.g=new Set,W.h&&(Sl(W,W.h),W.h=null))}if(b.G){const na=pi.g?pi.g.getResponseHeader("X-HTTP-Session-Id"):null;na&&(b.wa=na,et(b.J,b.G,na))}}x.I=3,x.l&&x.l.ra(),x.aa&&(x.T=Date.now()-g.F,x.j.info("Handshake RTT: "+x.T+"ms")),b=x;var de=g;if(b.na=Dc(b,b.L?b.ba:null,b.W),de.L){Al(b.h,de);var De=de,Tt=b.O;Tt&&(De.H=Tt),De.D&&(Vi(De),ki(De)),b.g=de}else Ic(b);x.i.length>0&&zi(x)}else Xe[0]!="stop"&&Xe[0]!="close"||Gi(x,7);else x.I==3&&(Xe[0]=="stop"||Xe[0]=="close"?Xe[0]=="stop"?Gi(x,7):Dl(x):Xe[0]!="noop"&&x.l&&x.l.qa(Xe),x.A=0)}}Ri(4)}catch{}}var Rt=class{constructor(g,A){this.g=g,this.map=A}};function El(g){this.l=g||10,u.PerformanceNavigationTiming?(g=u.performance.getEntriesByType("navigation"),g=g.length>0&&(g[0].nextHopProtocol=="hq"||g[0].nextHopProtocol=="h2")):g=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=g?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Tl(g){return g.h?!0:g.g?g.g.size>=g.j:!1}function Ui(g){return g.h?1:g.g?g.g.size:0}function Oi(g,A){return g.h?g.h==A:g.g?g.g.has(A):!1}function Sl(g,A){g.g?g.g.add(A):g.h=A}function Al(g,A){g.h&&g.h==A?g.h=null:g.g&&g.g.has(A)&&g.g.delete(A)}El.prototype.cancel=function(){if(this.i=wl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const g of this.g.values())g.cancel();this.g.clear()}};function wl(g){if(g.h!=null)return g.i.concat(g.h.G);if(g.g!=null&&g.g.size!==0){let A=g.i;for(const x of g.g.values())A=A.concat(x.G);return A}return C(g.i)}var Tc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ko(g,A){if(g){g=g.split("&");for(let x=0;x<g.length;x++){const b=g[x].indexOf("=");let j,W=null;b>=0?(j=g[x].substring(0,b),W=g[x].substring(b+1)):j=g[x],A(j,W?decodeURIComponent(W.replace(/\+/g," ")):"")}}}function Rn(g){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let A;g instanceof Rn?(this.l=g.l,$t(this,g.j),this.o=g.o,this.g=g.g,Br(this,g.u),this.h=g.h,xl(this,xc(g.i)),this.m=g.m):g&&(A=String(g).match(Tc))?(this.l=!1,$t(this,A[1]||"",!0),this.o=Fi(A[2]||""),this.g=Fi(A[3]||"",!0),Br(this,A[4]),this.h=Fi(A[5]||"",!0),xl(this,A[6]||"",!0),this.m=Fi(A[7]||"")):(this.l=!1,this.i=new Gr(null,this.l))}Rn.prototype.toString=function(){const g=[];var A=this.j;A&&g.push(Xs(A,Yo,!0),":");var x=this.g;return(x||A=="file")&&(g.push("//"),(A=this.o)&&g.push(Xs(A,Yo,!0),"@"),g.push(ar(x).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x=this.u,x!=null&&g.push(":",String(x))),(x=this.h)&&(this.g&&x.charAt(0)!="/"&&g.push("/"),g.push(Xs(x,x.charAt(0)=="/"?Cl:Sc,!0))),(x=this.i.toString())&&g.push("?",x),(x=this.m)&&g.push("#",Xs(x,Ac)),g.join("")},Rn.prototype.resolve=function(g){const A=Nt(this);let x=!!g.j;x?$t(A,g.j):x=!!g.o,x?A.o=g.o:x=!!g.g,x?A.g=g.g:x=g.u!=null;var b=g.h;if(x)Br(A,g.u);else if(x=!!g.h){if(b.charAt(0)!="/")if(this.g&&!this.h)b="/"+b;else{var j=A.h.lastIndexOf("/");j!=-1&&(b=A.h.slice(0,j+1)+b)}if(j=b,j==".."||j==".")b="";else if(j.indexOf("./")!=-1||j.indexOf("/.")!=-1){b=j.lastIndexOf("/",0)==0,j=j.split("/");const W=[];for(let de=0;de<j.length;){const De=j[de++];De=="."?b&&de==j.length&&W.push(""):De==".."?((W.length>1||W.length==1&&W[0]!="")&&W.pop(),b&&de==j.length&&W.push("")):(W.push(De),b=!0)}b=W.join("/")}else b=j}return x?A.h=b:x=g.i.toString()!=="",x?xl(A,xc(g.i)):x=!!g.m,x&&(A.m=g.m),A};function Nt(g){return new Rn(g)}function $t(g,A,x){g.j=x?Fi(A,!0):A,g.j&&(g.j=g.j.replace(/:$/,""))}function Br(g,A){if(A){if(A=Number(A),isNaN(A)||A<0)throw Error("Bad port number "+A);g.u=A}else g.u=null}function xl(g,A,x){A instanceof Gr?(g.i=A,Xo(g.i,g.l)):(x||(A=Xs(A,zr)),g.i=new Gr(A,g.l))}function et(g,A,x){g.i.set(A,x)}function Qs(g){return et(g,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),g}function Fi(g,A){return g?A?decodeURI(g.replace(/%25/g,"%2525")):decodeURIComponent(g):""}function Xs(g,A,x){return typeof g=="string"?(g=encodeURI(g).replace(A,_n),x&&(g=g.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g):null}function _n(g){return g=g.charCodeAt(0),"%"+(g>>4&15).toString(16)+(g&15).toString(16)}var Yo=/[#\/\?@]/g,Sc=/[#\?:]/g,Cl=/[#\?]/g,zr=/[#\?@]/g,Ac=/#/g;function Gr(g,A){this.h=this.g=null,this.i=g||null,this.j=!!A}function En(g){g.g||(g.g=new Map,g.h=0,g.i&&Ko(g.i,function(A,x){g.add(decodeURIComponent(A.replace(/\+/g," ")),x)}))}t=Gr.prototype,t.add=function(g,A){En(this),this.i=null,g=$r(this,g);let x=this.g.get(g);return x||this.g.set(g,x=[]),x.push(A),this.h+=1,this};function wc(g,A){En(g),A=$r(g,A),g.g.has(A)&&(g.i=null,g.h-=g.g.get(A).length,g.g.delete(A))}function Il(g,A){return En(g),A=$r(g,A),g.g.has(A)}t.forEach=function(g,A){En(this),this.g.forEach(function(x,b){x.forEach(function(j){g.call(A,j,b,this)},this)},this)};function bl(g,A){En(g);let x=[];if(typeof A=="string")Il(g,A)&&(x=x.concat(g.g.get($r(g,A))));else for(g=Array.from(g.g.values()),A=0;A<g.length;A++)x=x.concat(g[A]);return x}t.set=function(g,A){return En(this),this.i=null,g=$r(this,g),Il(this,g)&&(this.h-=this.g.get(g).length),this.g.set(g,[A]),this.h+=1,this},t.get=function(g,A){return g?(g=bl(this,g),g.length>0?String(g[0]):A):A};function Qo(g,A,x){wc(g,A),x.length>0&&(g.i=null,g.g.set($r(g,A),C(x)),g.h+=x.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const g=[],A=Array.from(this.g.keys());for(let b=0;b<A.length;b++){var x=A[b];const j=ar(x);x=bl(this,x);for(let W=0;W<x.length;W++){let de=j;x[W]!==""&&(de+="="+ar(x[W])),g.push(de)}}return this.i=g.join("&")};function xc(g){const A=new Gr;return A.i=g.i,g.g&&(A.g=new Map(g.g),A.h=g.h),A}function $r(g,A){return A=String(A),g.j&&(A=A.toLowerCase()),A}function Xo(g,A){A&&!g.j&&(En(g),g.i=null,g.g.forEach(function(x,b){const j=b.toLowerCase();b!=j&&(wc(this,b),Qo(this,j,x))},g)),g.j=A}function ci(g,A){const x=new ai;if(u.Image){const b=new Image;b.onload=v(zn,x,"TestLoadImage: loaded",!0,A,b),b.onerror=v(zn,x,"TestLoadImage: error",!1,A,b),b.onabort=v(zn,x,"TestLoadImage: abort",!1,A,b),b.ontimeout=v(zn,x,"TestLoadImage: timeout",!1,A,b),u.setTimeout(function(){b.ontimeout&&b.ontimeout()},1e4),b.src=g}else A(!1)}function Rl(g,A){const x=new ai,b=new AbortController,j=setTimeout(()=>{b.abort(),zn(x,"TestPingServer: timeout",!1,A)},1e4);fetch(g,{signal:b.signal}).then(W=>{clearTimeout(j),W.ok?zn(x,"TestPingServer: ok",!0,A):zn(x,"TestPingServer: server error",!1,A)}).catch(()=>{clearTimeout(j),zn(x,"TestPingServer: error",!1,A)})}function zn(g,A,x,b,j){try{j&&(j.onload=null,j.onerror=null,j.onabort=null,j.ontimeout=null),b(x)}catch{}}function jr(){this.g=new fc}function qi(g){this.i=g.Sb||null,this.h=g.ab||!1}E(qi,hc),qi.prototype.g=function(){return new Ws(this.i,this.h)};function Ws(g,A){Ct.call(this),this.H=g,this.o=A,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(Ws,Ct),t=Ws.prototype,t.open=function(g,A){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=g,this.D=A,this.readyState=1,di(this)},t.send=function(g){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const A={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};g&&(A.body=g),(this.H||u).fetch(new Request(this.D,A)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Jr(this)),this.readyState=0},t.Pa=function(g){if(this.g&&(this.l=g,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=g.headers,this.readyState=2,di(this)),this.g&&(this.readyState=3,di(this),this.g)))if(this.responseType==="arraybuffer")g.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in g){if(this.j=g.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Wo(this)}else g.text().then(this.Oa.bind(this),this.ga.bind(this))};function Wo(g){g.j.read().then(g.Ma.bind(g)).catch(g.ga.bind(g))}t.Ma=function(g){if(this.g){if(this.o&&g.value)this.response.push(g.value);else if(!this.o){var A=g.value?g.value:new Uint8Array(0);(A=this.B.decode(A,{stream:!g.done}))&&(this.response=this.responseText+=A)}g.done?Jr(this):di(this),this.readyState==3&&Wo(this)}},t.Oa=function(g){this.g&&(this.response=this.responseText=g,Jr(this))},t.Na=function(g){this.g&&(this.response=g,Jr(this))},t.ga=function(){this.g&&Jr(this)};function Jr(g){g.readyState=4,g.l=null,g.j=null,g.B=null,di(g)}t.setRequestHeader=function(g,A){this.A.append(g,A)},t.getResponseHeader=function(g){return this.h&&this.h.get(g.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const g=[],A=this.h.entries();for(var x=A.next();!x.done;)x=x.value,g.push(x[0]+": "+x[1]),x=A.next();return g.join(`\r
`)};function di(g){g.onreadystatechange&&g.onreadystatechange.call(g)}Object.defineProperty(Ws.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(g){this.m=g?"include":"same-origin"}});function Gn(g){let A="";return ke(g,function(x,b){A+=b,A+=":",A+=x,A+=`\r
`}),A}function Zs(g,A,x){e:{for(b in x){var b=!1;break e}b=!0}b||(x=Gn(x),typeof g=="string"?x!=null&&ar(x):et(g,A,x))}function rt(g){Ct.call(this),this.headers=new Map,this.L=g||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(rt,Ct);var Hi=/^https?$/i,Nl=["POST","PUT"];t=rt.prototype,t.Fa=function(g){this.H=g},t.ea=function(g,A,x,b){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+g);A=A?A.toUpperCase():"GET",this.D=g,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():_l.g(),this.g.onreadystatechange=S(h(this.Ca,this));try{this.B=!0,this.g.open(A,String(g),!0),this.B=!1}catch(W){eo(this,W);return}if(g=x||"",x=new Map(this.headers),b)if(Object.getPrototypeOf(b)===Object.prototype)for(var j in b)x.set(j,b[j]);else if(typeof b.keys=="function"&&typeof b.get=="function")for(const W of b.keys())x.set(W,b.get(W));else throw Error("Unknown input type for opt_headers: "+String(b));b=Array.from(x.keys()).find(W=>W.toLowerCase()=="content-type"),j=u.FormData&&g instanceof u.FormData,!(Array.prototype.indexOf.call(Nl,A,void 0)>=0)||b||j||x.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[W,de]of x)this.g.setRequestHeader(W,de);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(g),this.v=!1}catch(W){eo(this,W)}};function eo(g,A){g.h=!1,g.g&&(g.j=!0,g.g.abort(),g.j=!1),g.l=A,g.o=5,Ml(g),lr(g)}function Ml(g){g.A||(g.A=!0,qt(g,"complete"),qt(g,"error"))}t.abort=function(g){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=g||7,qt(this,"complete"),qt(this,"abort"),lr(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),lr(this,!0)),rt.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?to(this):this.Xa())},t.Xa=function(){to(this)};function to(g){if(g.h&&typeof a<"u"){if(g.v&&fi(g)==4)setTimeout(g.Ca.bind(g),0);else if(qt(g,"readystatechange"),fi(g)==4){g.h=!1;try{const W=g.ca();e:switch(W){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var A=!0;break e;default:A=!1}var x;if(!(x=A)){var b;if(b=W===0){let de=String(g.D).match(Tc)[1]||null;!de&&u.self&&u.self.location&&(de=u.self.location.protocol.slice(0,-1)),b=!Hi.test(de?de.toLowerCase():"")}x=b}if(x)qt(g,"complete"),qt(g,"success");else{g.o=6;try{var j=fi(g)>2?g.g.statusText:""}catch{j=""}g.l=j+" ["+g.ca()+"]",Ml(g)}}finally{lr(g)}}}}function lr(g,A){if(g.g){g.m&&(clearTimeout(g.m),g.m=null);const x=g.g;g.g=null,A||qt(g,"ready");try{x.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function fi(g){return g.g?g.g.readyState:0}t.ca=function(){try{return fi(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(g){if(this.g){var A=this.g.responseText;return g&&A.indexOf(g)==0&&(A=A.substring(g.length)),Ah(A)}};function Qt(g){try{if(!g.g)return null;if("response"in g.g)return g.g.response;switch(g.F){case"":case"text":return g.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in g.g)return g.g.mozResponseArrayBuffer}return null}catch{return null}}function ur(g){const A={};g=(g.g&&fi(g)>=2&&g.g.getAllResponseHeaders()||"").split(`\r
`);for(let b=0;b<g.length;b++){if(k(g[b]))continue;var x=vc(g[b]);const j=x[0];if(x=x[1],typeof x!="string")continue;x=x.trim();const W=A[j]||[];A[j]=W,W.push(x)}Ue(A,function(b){return b.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Bi(g,A,x){return x&&x.internalChannelParams&&x.internalChannelParams[g]||A}function Kr(g){this.za=0,this.i=[],this.j=new ai,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Bi("failFast",!1,g),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Bi("baseRetryDelayMs",5e3,g),this.Za=Bi("retryDelaySeedMs",1e4,g),this.Ta=Bi("forwardChannelMaxRetries",2,g),this.va=Bi("forwardChannelRequestTimeoutMs",2e4,g),this.ma=g&&g.xmlHttpFactory||void 0,this.Ua=g&&g.Rb||void 0,this.Aa=g&&g.useFetchStreams||!1,this.O=void 0,this.L=g&&g.supportsCrossDomainXhr||!1,this.M="",this.h=new El(g&&g.concurrentRequestLimit),this.Ba=new jr,this.S=g&&g.fastHandshake||!1,this.R=g&&g.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=g&&g.Pb||!1,g&&g.ua&&this.j.ua(),g&&g.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&g&&g.detectBufferingProxy||!1,this.ia=void 0,g&&g.longPollingTimeout&&g.longPollingTimeout>0&&(this.ia=g.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Kr.prototype,t.ka=8,t.I=1,t.connect=function(g,A,x,b){It(0),this.W=g,this.H=A||{},x&&b!==void 0&&(this.H.OSID=x,this.H.OAID=b),this.F=this.X,this.J=Dc(this,null,this.W),zi(this)};function Dl(g){if(Zo(g),g.I==3){var A=g.V++,x=Nt(g.J);if(et(x,"SID",g.M),et(x,"RID",A),et(x,"TYPE","terminate"),no(g,x),A=new li(g,g.j,A),A.M=2,A.A=Qs(Nt(x)),x=!1,u.navigator&&u.navigator.sendBeacon)try{x=u.navigator.sendBeacon(A.A.toString(),"")}catch{}!x&&u.Image&&(new Image().src=A.A,x=!0),x||(A.g=Pc(A.j,null),A.g.ea(A.A)),A.F=Date.now(),ki(A)}Mc(g)}function Yr(g){g.g&&(kl(g),g.g.cancel(),g.g=null)}function Zo(g){Yr(g),g.v&&(u.clearTimeout(g.v),g.v=null),ta(g),g.h.cancel(),g.m&&(typeof g.m=="number"&&u.clearTimeout(g.m),g.m=null)}function zi(g){if(!Tl(g.h)&&!g.m){g.m=!0;var A=g.Ea;le||M(),ce||(le(),ce=!0),N.add(A,g),g.D=0}}function ea(g,A){return Ui(g.h)>=g.h.j-(g.m?1:0)?!1:g.m?(g.i=A.G.concat(g.i),!0):g.I==1||g.I==2||g.D>=(g.Sa?0:g.Ta)?!1:(g.m=Mi(h(g.Ea,g,A),Nc(g,g.D)),g.D++,!0)}t.Ea=function(g){if(this.m)if(this.m=null,this.I==1){if(!g){this.V=Math.floor(Math.random()*1e5),g=this.V++;const j=new li(this,this.j,g);let W=this.o;if(this.U&&(W?(W=B(W),fe(W,this.U)):W=this.U),this.u!==null||this.R||(j.J=W,W=null),this.S)e:{for(var A=0,x=0;x<this.i.length;x++){t:{var b=this.i[x];if("__data__"in b.map&&(b=b.map.__data__,typeof b=="string")){b=b.length;break t}b=void 0}if(b===void 0)break;if(A+=b,A>4096){A=x;break e}if(A===4096||x===this.i.length-1){A=x+1;break e}}A=1e3}else A=1e3;A=Cc(this,j,A),x=Nt(this.J),et(x,"RID",g),et(x,"CVER",22),this.G&&et(x,"X-HTTP-Session-Id",this.G),no(this,x),W&&(this.R?A="headers="+ar(Gn(W))+"&"+A:this.u&&Zs(x,this.u,W)),Sl(this.h,j),this.Ra&&et(x,"TYPE","init"),this.S?(et(x,"$req",A),et(x,"SID","null"),j.U=!0,Pi(j,x,null)):Pi(j,x,A),this.I=2}}else this.I==3&&(g?Pl(this,g):this.i.length==0||Tl(this.h)||Pl(this))};function Pl(g,A){var x;A?x=A.l:x=g.V++;const b=Nt(g.J);et(b,"SID",g.M),et(b,"RID",x),et(b,"AID",g.K),no(g,b),g.u&&g.o&&Zs(b,g.u,g.o),x=new li(g,g.j,x,g.D+1),g.u===null&&(x.J=g.o),A&&(g.i=A.G.concat(g.i)),A=Cc(g,x,1e3),x.H=Math.round(g.va*.5)+Math.round(g.va*.5*Math.random()),Sl(g.h,x),Pi(x,b,A)}function no(g,A){g.H&&ke(g.H,function(x,b){et(A,b,x)}),g.l&&ke({},function(x,b){et(A,b,x)})}function Cc(g,A,x){x=Math.min(g.i.length,x);const b=g.l?h(g.l.Ka,g.l,g):null;e:{var j=g.i;let De=-1;for(;;){const Tt=["count="+x];De==-1?x>0?(De=j[0].g,Tt.push("ofs="+De)):De=0:Tt.push("ofs="+De);let Xe=!0;for(let pt=0;pt<x;pt++){var W=j[pt].g;const $n=j[pt].map;if(W-=De,W<0)De=Math.max(0,j[pt].g-100),Xe=!1;else try{W="req"+W+"_"||"";try{var de=$n instanceof Map?$n:Object.entries($n);for(const[$i,hi]of de){let pi=hi;d(hi)&&(pi=Hr(hi)),Tt.push(W+$i+"="+encodeURIComponent(pi))}}catch($i){throw Tt.push(W+"type="+encodeURIComponent("_badmap")),$i}}catch{b&&b($n)}}if(Xe){de=Tt.join("&");break e}}de=void 0}return g=g.i.splice(0,x),A.G=g,de}function Ic(g){if(!g.g&&!g.v){g.Y=1;var A=g.Da;le||M(),ce||(le(),ce=!0),N.add(A,g),g.A=0}}function io(g){return g.g||g.v||g.A>=3?!1:(g.Y++,g.v=Mi(h(g.Da,g),Nc(g,g.A)),g.A++,!0)}t.Da=function(){if(this.v=null,bc(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var g=4*this.T;this.j.info("BP detection timer enabled: "+g),this.B=Mi(h(this.Wa,this),g)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,It(10),Yr(this),bc(this))};function kl(g){g.B!=null&&(u.clearTimeout(g.B),g.B=null)}function bc(g){g.g=new li(g,g.j,"rpc",g.Y),g.u===null&&(g.g.J=g.o),g.g.P=0;var A=Nt(g.na);et(A,"RID","rpc"),et(A,"SID",g.M),et(A,"AID",g.K),et(A,"CI",g.F?"0":"1"),!g.F&&g.ia&&et(A,"TO",g.ia),et(A,"TYPE","xmlhttp"),no(g,A),g.u&&g.o&&Zs(A,g.u,g.o),g.O&&(g.g.H=g.O);var x=g.g;g=g.ba,x.M=1,x.A=Qs(Nt(A)),x.u=null,x.R=!0,jo(x,g)}t.Va=function(){this.C!=null&&(this.C=null,Yr(this),io(this),It(19))};function ta(g){g.C!=null&&(u.clearTimeout(g.C),g.C=null)}function Rc(g,A){var x=null;if(g.g==A){ta(g),kl(g),g.g=null;var b=2}else if(Oi(g.h,A))x=A.G,Al(g.h,A),b=1;else return;if(g.I!=0){if(A.o)if(b==1){x=A.u?A.u.length:0,A=Date.now()-A.F;var j=g.D;b=$o(),qt(b,new Ni(b,x)),zi(g)}else Ic(g);else if(j=A.m,j==3||j==0&&A.X>0||!(b==1&&ea(g,A)||b==2&&io(g)))switch(x&&x.length>0&&(A=g.h,A.i=A.i.concat(x)),j){case 1:Gi(g,5);break;case 4:Gi(g,10);break;case 3:Gi(g,6);break;default:Gi(g,2)}}}function Nc(g,A){let x=g.Qa+Math.floor(Math.random()*g.Za);return g.isActive()||(x*=2),x*A}function Gi(g,A){if(g.j.info("Error code "+A),A==2){var x=h(g.bb,g),b=g.Ua;const j=!b;b=new Rn(b||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||$t(b,"https"),Qs(b),j?ci(b.toString(),x):Rl(b.toString(),x)}else It(2);g.I=0,g.l&&g.l.pa(A),Mc(g),Zo(g)}t.bb=function(g){g?(this.j.info("Successfully pinged google.com"),It(2)):(this.j.info("Failed to ping google.com"),It(1))};function Mc(g){if(g.I=0,g.ja=[],g.l){const A=wl(g.h);(A.length!=0||g.i.length!=0)&&(D(g.ja,A),D(g.ja,g.i),g.h.i.length=0,C(g.i),g.i.length=0),g.l.oa()}}function Dc(g,A,x){var b=x instanceof Rn?Nt(x):new Rn(x);if(b.g!="")A&&(b.g=A+"."+b.g),Br(b,b.u);else{var j=u.location;b=j.protocol,A=A?A+"."+j.hostname:j.hostname,j=+j.port;const W=new Rn(null);b&&$t(W,b),A&&(W.g=A),j&&Br(W,j),x&&(W.h=x),b=W}return x=g.G,A=g.wa,x&&A&&et(b,x,A),et(b,"VER",g.ka),no(g,b),b}function Pc(g,A,x){if(A&&!g.L)throw Error("Can't create secondary domain capable XhrIo object.");return A=g.Aa&&!g.ma?new rt(new qi({ab:x})):new rt(g.ma),A.Fa(g.L),A}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function kc(){}t=kc.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Qr(){}Qr.prototype.g=function(g,A){return new hn(g,A)};function hn(g,A){Ct.call(this),this.g=new Kr(A),this.l=g,this.h=A&&A.messageUrlParams||null,g=A&&A.messageHeaders||null,A&&A.clientProtocolHeaderRequired&&(g?g["X-Client-Protocol"]="webchannel":g={"X-Client-Protocol":"webchannel"}),this.g.o=g,g=A&&A.initMessageHeaders||null,A&&A.messageContentType&&(g?g["X-WebChannel-Content-Type"]=A.messageContentType:g={"X-WebChannel-Content-Type":A.messageContentType}),A&&A.sa&&(g?g["X-WebChannel-Client-Profile"]=A.sa:g={"X-WebChannel-Client-Profile":A.sa}),this.g.U=g,(g=A&&A.Qb)&&!k(g)&&(this.g.u=g),this.A=A&&A.supportsCrossDomainXhr||!1,this.v=A&&A.sendRawJson||!1,(A=A&&A.httpSessionIdParam)&&!k(A)&&(this.g.G=A,g=this.h,g!==null&&A in g&&(g=this.h,A in g&&delete g[A])),this.j=new cr(this)}E(hn,Ct),hn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},hn.prototype.close=function(){Dl(this.g)},hn.prototype.o=function(g){var A=this.g;if(typeof g=="string"){var x={};x.__data__=g,g=x}else this.v&&(x={},x.__data__=Hr(g),g=x);A.i.push(new Rt(A.Ya++,g)),A.I==3&&zi(A)},hn.prototype.N=function(){this.g.l=null,delete this.j,Dl(this.g),delete this.g,hn.Z.N.call(this)};function Vc(g){Yt.call(this),g.__headers__&&(this.headers=g.__headers__,this.statusCode=g.__status__,delete g.__headers__,delete g.__status__);var A=g.__sm__;if(A){e:{for(const x in A){g=x;break e}g=void 0}(this.i=g)&&(g=this.i,A=A!==null&&g in A?A[g]:void 0),this.data=A}else this.data=g}E(Vc,Yt);function Lc(){Hn.call(this),this.status=1}E(Lc,Hn);function cr(g){this.g=g}E(cr,kc),cr.prototype.ra=function(){qt(this.g,"a")},cr.prototype.qa=function(g){qt(this.g,new Vc(g))},cr.prototype.pa=function(g){qt(this.g,new Lc)},cr.prototype.oa=function(){qt(this.g,"b")},Qr.prototype.createWebChannel=Qr.prototype.g,hn.prototype.send=hn.prototype.o,hn.prototype.open=hn.prototype.m,hn.prototype.close=hn.prototype.close,oC=function(){return new Qr},sC=function(){return $o()},rC=Et,yg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ks.NO_ERROR=0,Ks.TIMEOUT=8,Ks.HTTP_ERROR=6,of=Ks,vl.COMPLETE="complete",iC=vl,pc.EventType=oi,oi.OPEN="a",oi.CLOSE="b",oi.ERROR="c",oi.MESSAGE="d",Ct.prototype.listen=Ct.prototype.J,xu=pc,rt.prototype.listenOnce=rt.prototype.K,rt.prototype.getLastError=rt.prototype.Ha,rt.prototype.getLastErrorCode=rt.prototype.ya,rt.prototype.getStatus=rt.prototype.ca,rt.prototype.getResponseJson=rt.prototype.La,rt.prototype.getResponseText=rt.prototype.la,rt.prototype.send=rt.prototype.ea,rt.prototype.setWithCredentials=rt.prototype.Fa,nC=rt}).apply(typeof Jd<"u"?Jd:typeof self<"u"?self:typeof window<"u"?window:{});const US="@firebase/firestore",OS="4.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ln.UNAUTHENTICATED=new ln(null),ln.GOOGLE_CREDENTIALS=new ln("google-credentials-uid"),ln.FIRST_PARTY=new ln("first-party-uid"),ln.MOCK_USER=new ln("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let al="12.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Co=new Zf("@firebase/firestore");function Pa(){return Co.logLevel}function me(t,...e){if(Co.logLevel<=Be.DEBUG){const n=e.map(cy);Co.debug(`Firestore (${al}): ${t}`,...n)}}function kr(t,...e){if(Co.logLevel<=Be.ERROR){const n=e.map(cy);Co.error(`Firestore (${al}): ${t}`,...n)}}function Ya(t,...e){if(Co.logLevel<=Be.WARN){const n=e.map(cy);Co.warn(`Firestore (${al}): ${t}`,...n)}}function cy(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function we(t,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,aC(t,i,n)}function aC(t,e,n){let i=`FIRESTORE (${al}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw kr(i),new Error(i)}function Ze(t,e,n,i){let s="Unexpected state";typeof n=="string"?s=n:i=n,t||aC(e,s,i)}function Me(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const re={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class pe extends Ii{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bs{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lC{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class m3{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(ln.UNAUTHENTICATED)))}shutdown(){}}class g3{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class y3{constructor(e){this.t=e,this.currentUser=ln.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ze(this.o===void 0,42304);let i=this.i;const s=p=>this.i!==i?(i=this.i,n(p)):Promise.resolve();let a=new bs;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new bs,e.enqueueRetryable((()=>s(this.currentUser)))};const u=()=>{const p=a;e.enqueueRetryable((async()=>{await p.promise,await s(this.currentUser)}))},d=p=>{me("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((p=>d(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?d(p):(me("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new bs)}}),0),u()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((i=>this.i!==e?(me("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Ze(typeof i.accessToken=="string",31837,{l:i}),new lC(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ze(e===null||typeof e=="string",2055,{h:e}),new ln(e)}}class v3{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=ln.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class _3{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new v3(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(ln.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class FS{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class E3{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ei(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ze(this.o===void 0,3512);const i=a=>{a.error!=null&&me("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const u=a.token!==this.m;return this.m=a.token,me("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>i(a)))};const s=a=>{me("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>s(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?s(a):me("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new FS(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Ze(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new FS(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T3(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dy{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const s=T3(40);for(let a=0;a<s.length;++a)i.length<20&&s[a]<n&&(i+=e.charAt(s[a]%62))}return i}}function ze(t,e){return t<e?-1:t>e?1:0}function vg(t,e){const n=Math.min(t.length,e.length);for(let i=0;i<n;i++){const s=t.charAt(i),a=e.charAt(i);if(s!==a)return Lm(s)===Lm(a)?ze(s,a):Lm(s)?1:-1}return ze(t.length,e.length)}const S3=55296,A3=57343;function Lm(t){const e=t.charCodeAt(0);return e>=S3&&e<=A3}function Qa(t,e,n){return t.length===e.length&&t.every(((i,s)=>n(i,e[s])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qS="__name__";class Xi{constructor(e,n,i){n===void 0?n=0:n>e.length&&we(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&we(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return Xi.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Xi?e.forEach((i=>{n.push(i)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let s=0;s<i;s++){const a=Xi.compareSegments(e.get(s),n.get(s));if(a!==0)return a}return ze(e.length,n.length)}static compareSegments(e,n){const i=Xi.isNumericId(e),s=Xi.isNumericId(n);return i&&!s?-1:!i&&s?1:i&&s?Xi.extractNumericId(e).compare(Xi.extractNumericId(n)):vg(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Is.fromString(e.substring(4,e.length-2))}}class ut extends Xi{construct(e,n,i){return new ut(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new pe(re.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter((s=>s.length>0)))}return new ut(n)}static emptyPath(){return new ut([])}}const w3=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class nn extends Xi{construct(e,n,i){return new nn(e,n,i)}static isValidIdentifier(e){return w3.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),nn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===qS}static keyField(){return new nn([qS])}static fromServerFormat(e){const n=[];let i="",s=0;const a=()=>{if(i.length===0)throw new pe(re.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let u=!1;for(;s<e.length;){const d=e[s];if(d==="\\"){if(s+1===e.length)throw new pe(re.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[s+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new pe(re.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=p,s+=2}else d==="`"?(u=!u,s++):d!=="."||u?(i+=d,s++):(a(),s++)}if(a(),u)throw new pe(re.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new nn(n)}static emptyPath(){return new nn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{constructor(e){this.path=e}static fromPath(e){return new Te(ut.fromString(e))}static fromName(e){return new Te(ut.fromString(e).popFirst(5))}static empty(){return new Te(ut.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ut.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ut.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Te(new ut(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uC(t,e,n){if(!n)throw new pe(re.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function x3(t,e,n,i){if(e===!0&&i===!0)throw new pe(re.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function HS(t){if(!Te.isDocumentKey(t))throw new pe(re.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function BS(t){if(Te.isDocumentKey(t))throw new pe(re.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function cC(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function eh(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":we(12329,{type:typeof t})}function Io(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new pe(re.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=eh(t);throw new pe(re.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ut(t,e){const n={typeString:t};return e&&(n.value=e),n}function ec(t,e){if(!cC(t))throw new pe(re.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const s=e[i].typeString,a="value"in e[i]?{value:e[i].value}:void 0;if(!(i in t)){n=`JSON missing required field: '${i}'`;break}const u=t[i];if(s&&typeof u!==s){n=`JSON field '${i}' must be a ${s}.`;break}if(a!==void 0&&u!==a.value){n=`Expected '${i}' field to equal '${a.value}'`;break}}if(n)throw new pe(re.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zS=-62135596800,GS=1e6;class ft{static now(){return ft.fromMillis(Date.now())}static fromDate(e){return ft.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*GS);return new ft(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new pe(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new pe(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<zS)throw new pe(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new pe(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/GS}_compareTo(e){return this.seconds===e.seconds?ze(this.nanoseconds,e.nanoseconds):ze(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ft._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ec(e,ft._jsonSchema))return new ft(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-zS;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ft._jsonSchemaVersion="firestore/timestamp/1.0",ft._jsonSchema={type:Ut("string",ft._jsonSchemaVersion),seconds:Ut("number"),nanoseconds:Ut("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{static fromTimestamp(e){return new Re(e)}static min(){return new Re(new ft(0,0))}static max(){return new Re(new ft(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hu=-1;function C3(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,s=Re.fromTimestamp(i===1e9?new ft(n+1,0):new ft(n,i));return new Ms(s,Te.empty(),e)}function I3(t){return new Ms(t.readTime,t.key,Hu)}class Ms{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new Ms(Re.min(),Te.empty(),Hu)}static max(){return new Ms(Re.max(),Te.empty(),Hu)}}function b3(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Te.comparator(t.documentKey,e.documentKey),n!==0?n:ze(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R3="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class N3{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ll(t){if(t.code!==re.FAILED_PRECONDITION||t.message!==R3)throw t;me("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&we(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ae(((i,s)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(i,s)},this.catchCallback=a=>{this.wrapFailure(n,a).next(i,s)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof ae?n:ae.resolve(n)}catch(n){return ae.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):ae.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):ae.reject(n)}static resolve(e){return new ae(((n,i)=>{n(e)}))}static reject(e){return new ae(((n,i)=>{i(e)}))}static waitFor(e){return new ae(((n,i)=>{let s=0,a=0,u=!1;e.forEach((d=>{++s,d.next((()=>{++a,u&&a===s&&n()}),(p=>i(p)))})),u=!0,a===s&&n()}))}static or(e){let n=ae.resolve(!1);for(const i of e)n=n.next((s=>s?ae.resolve(s):i()));return n}static forEach(e,n){const i=[];return e.forEach(((s,a)=>{i.push(n.call(this,s,a))})),this.waitFor(i)}static mapArray(e,n){return new ae(((i,s)=>{const a=e.length,u=new Array(a);let d=0;for(let p=0;p<a;p++){const h=p;n(e[h]).next((v=>{u[h]=v,++d,d===a&&i(u)}),(v=>s(v)))}}))}static doWhile(e,n){return new ae(((i,s)=>{const a=()=>{e()===!0?n().next((()=>{a()}),s):i()};a()}))}}function M3(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ul(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class th{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}th.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fy=-1;function nh(t){return t==null}function wf(t){return t===0&&1/t==-1/0}function D3(t){return typeof t=="number"&&Number.isInteger(t)&&!wf(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dC="";function P3(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=$S(e)),e=k3(t.get(n),e);return $S(e)}function k3(t,e){let n=e;const i=t.length;for(let s=0;s<i;s++){const a=t.charAt(s);switch(a){case"\0":n+="";break;case dC:n+="";break;default:n+=a}}return n}function $S(t){return t+dC+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jS(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Fs(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function fC(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e,n){this.comparator=e,this.root=n||tn.EMPTY}insert(e,n){return new yt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,tn.BLACK,null,null))}remove(e){return new yt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,tn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(e,i.key);if(s===0)return n+i.left.size;s<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,i)=>(e(n,i),!1)))}toString(){const e=[];return this.inorderTraversal(((n,i)=>(e.push(`${n}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Kd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Kd(this.root,e,this.comparator,!1)}getReverseIterator(){return new Kd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Kd(this.root,e,this.comparator,!0)}}class Kd{constructor(e,n,i,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?i(e.key,n):1,n&&s&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class tn{constructor(e,n,i,s,a){this.key=e,this.value=n,this.color=i??tn.RED,this.left=s??tn.EMPTY,this.right=a??tn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,s,a){return new tn(e??this.key,n??this.value,i??this.color,s??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let s=this;const a=i(e,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(e,n,i),null):a===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return tn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return tn.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,tn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,tn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw we(43730,{key:this.key,value:this.value});if(this.right.isRed())throw we(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw we(27949);return e+(this.isRed()?0:1)}}tn.EMPTY=null,tn.RED=!0,tn.BLACK=!1;tn.EMPTY=new class{constructor(){this.size=0}get key(){throw we(57766)}get value(){throw we(16141)}get color(){throw we(16727)}get left(){throw we(29726)}get right(){throw we(36894)}copy(e,n,i,s,a){return this}insert(e,n,i){return new tn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e){this.comparator=e,this.data=new yt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,i)=>(e(n),!1)))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new JS(this.data.getIterator())}getIteratorFrom(e){return new JS(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((i=>{n=n.add(i)})),n}isEqual(e){if(!(e instanceof zt)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,a=i.getNext().key;if(this.comparator(s,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new zt(this.comparator);return n.data=e,n}}class JS{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(e){this.fields=e,e.sort(nn.comparator)}static empty(){return new On([])}unionWith(e){let n=new zt(nn.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new On(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Qa(this.fields,e.fields,((n,i)=>n.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new hC("Invalid base64 string: "+a):a}})(e);return new rn(n)}static fromUint8Array(e){const n=(function(s){let a="";for(let u=0;u<s.length;++u)a+=String.fromCharCode(s[u]);return a})(e);return new rn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const i=new Uint8Array(n.length);for(let s=0;s<n.length;s++)i[s]=n.charCodeAt(s);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ze(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}rn.EMPTY_BYTE_STRING=new rn("");const V3=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ds(t){if(Ze(!!t,39018),typeof t=="string"){let e=0;const n=V3.exec(t);if(Ze(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:xt(t.seconds),nanos:xt(t.nanos)}}function xt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ps(t){return typeof t=="string"?rn.fromBase64String(t):rn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pC="server_timestamp",mC="__type__",gC="__previous_value__",yC="__local_write_time__";function hy(t){var n,i;return((i=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[mC])==null?void 0:i.stringValue)===pC}function ih(t){const e=t.mapValue.fields[gC];return hy(e)?ih(e):e}function Bu(t){const e=Ds(t.mapValue.fields[yC].timestampValue);return new ft(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L3{constructor(e,n,i,s,a,u,d,p,h,v){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=s,this.ssl=a,this.forceLongPolling=u,this.autoDetectLongPolling=d,this.longPollingOptions=p,this.useFetchStreams=h,this.isUsingEmulator=v}}const xf="(default)";class zu{constructor(e,n){this.projectId=e,this.database=n||xf}static empty(){return new zu("","")}get isDefaultDatabase(){return this.database===xf}isEqual(e){return e instanceof zu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vC="__type__",U3="__max__",Yd={mapValue:{}},_C="__vector__",Cf="value";function ks(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?hy(t)?4:F3(t)?9007199254740991:O3(t)?10:11:we(28295,{value:t})}function sr(t,e){if(t===e)return!0;const n=ks(t);if(n!==ks(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Bu(t).isEqual(Bu(e));case 3:return(function(s,a){if(typeof s.timestampValue=="string"&&typeof a.timestampValue=="string"&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const u=Ds(s.timestampValue),d=Ds(a.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(s,a){return Ps(s.bytesValue).isEqual(Ps(a.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(s,a){return xt(s.geoPointValue.latitude)===xt(a.geoPointValue.latitude)&&xt(s.geoPointValue.longitude)===xt(a.geoPointValue.longitude)})(t,e);case 2:return(function(s,a){if("integerValue"in s&&"integerValue"in a)return xt(s.integerValue)===xt(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const u=xt(s.doubleValue),d=xt(a.doubleValue);return u===d?wf(u)===wf(d):isNaN(u)&&isNaN(d)}return!1})(t,e);case 9:return Qa(t.arrayValue.values||[],e.arrayValue.values||[],sr);case 10:case 11:return(function(s,a){const u=s.mapValue.fields||{},d=a.mapValue.fields||{};if(jS(u)!==jS(d))return!1;for(const p in u)if(u.hasOwnProperty(p)&&(d[p]===void 0||!sr(u[p],d[p])))return!1;return!0})(t,e);default:return we(52216,{left:t})}}function Gu(t,e){return(t.values||[]).find((n=>sr(n,e)))!==void 0}function Xa(t,e){if(t===e)return 0;const n=ks(t),i=ks(e);if(n!==i)return ze(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return ze(t.booleanValue,e.booleanValue);case 2:return(function(a,u){const d=xt(a.integerValue||a.doubleValue),p=xt(u.integerValue||u.doubleValue);return d<p?-1:d>p?1:d===p?0:isNaN(d)?isNaN(p)?0:-1:1})(t,e);case 3:return KS(t.timestampValue,e.timestampValue);case 4:return KS(Bu(t),Bu(e));case 5:return vg(t.stringValue,e.stringValue);case 6:return(function(a,u){const d=Ps(a),p=Ps(u);return d.compareTo(p)})(t.bytesValue,e.bytesValue);case 7:return(function(a,u){const d=a.split("/"),p=u.split("/");for(let h=0;h<d.length&&h<p.length;h++){const v=ze(d[h],p[h]);if(v!==0)return v}return ze(d.length,p.length)})(t.referenceValue,e.referenceValue);case 8:return(function(a,u){const d=ze(xt(a.latitude),xt(u.latitude));return d!==0?d:ze(xt(a.longitude),xt(u.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return YS(t.arrayValue,e.arrayValue);case 10:return(function(a,u){var S,C,D,U;const d=a.fields||{},p=u.fields||{},h=(S=d[Cf])==null?void 0:S.arrayValue,v=(C=p[Cf])==null?void 0:C.arrayValue,E=ze(((D=h==null?void 0:h.values)==null?void 0:D.length)||0,((U=v==null?void 0:v.values)==null?void 0:U.length)||0);return E!==0?E:YS(h,v)})(t.mapValue,e.mapValue);case 11:return(function(a,u){if(a===Yd.mapValue&&u===Yd.mapValue)return 0;if(a===Yd.mapValue)return 1;if(u===Yd.mapValue)return-1;const d=a.fields||{},p=Object.keys(d),h=u.fields||{},v=Object.keys(h);p.sort(),v.sort();for(let E=0;E<p.length&&E<v.length;++E){const S=vg(p[E],v[E]);if(S!==0)return S;const C=Xa(d[p[E]],h[v[E]]);if(C!==0)return C}return ze(p.length,v.length)})(t.mapValue,e.mapValue);default:throw we(23264,{he:n})}}function KS(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ze(t,e);const n=Ds(t),i=Ds(e),s=ze(n.seconds,i.seconds);return s!==0?s:ze(n.nanos,i.nanos)}function YS(t,e){const n=t.values||[],i=e.values||[];for(let s=0;s<n.length&&s<i.length;++s){const a=Xa(n[s],i[s]);if(a)return a}return ze(n.length,i.length)}function Wa(t){return _g(t)}function _g(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const i=Ds(n);return`time(${i.seconds},${i.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return Ps(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return Te.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let i="[",s=!0;for(const a of n.values||[])s?s=!1:i+=",",i+=_g(a);return i+"]"})(t.arrayValue):"mapValue"in t?(function(n){const i=Object.keys(n.fields||{}).sort();let s="{",a=!0;for(const u of i)a?a=!1:s+=",",s+=`${u}:${_g(n.fields[u])}`;return s+"}"})(t.mapValue):we(61005,{value:t})}function af(t){switch(ks(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=ih(t);return e?16+af(e):16;case 5:return 2*t.stringValue.length;case 6:return Ps(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((s,a)=>s+af(a)),0)})(t.arrayValue);case 10:case 11:return(function(i){let s=0;return Fs(i.fields,((a,u)=>{s+=a.length+af(u)})),s})(t.mapValue);default:throw we(13486,{value:t})}}function QS(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Eg(t){return!!t&&"integerValue"in t}function py(t){return!!t&&"arrayValue"in t}function XS(t){return!!t&&"nullValue"in t}function WS(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function lf(t){return!!t&&"mapValue"in t}function O3(t){var n,i;return((i=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[vC])==null?void 0:i.stringValue)===_C}function Mu(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Fs(t.mapValue.fields,((n,i)=>e.mapValue.fields[n]=Mu(i))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Mu(t.arrayValue.values[n]);return e}return{...t}}function F3(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===U3}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(e){this.value=e}static empty(){return new In({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!lf(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Mu(n)}setAll(e){let n=nn.emptyPath(),i={},s=[];e.forEach(((u,d)=>{if(!n.isImmediateParentOf(d)){const p=this.getFieldsMap(n);this.applyChanges(p,i,s),i={},s=[],n=d.popLast()}u?i[d.lastSegment()]=Mu(u):s.push(d.lastSegment())}));const a=this.getFieldsMap(n);this.applyChanges(a,i,s)}delete(e){const n=this.field(e.popLast());lf(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return sr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let s=n.mapValue.fields[e.get(i)];lf(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,i){Fs(n,((s,a)=>e[s]=a));for(const s of i)delete e[s]}clone(){return new In(Mu(this.value))}}function EC(t){const e=[];return Fs(t.fields,((n,i)=>{const s=new nn([n]);if(lf(i)){const a=EC(i.mapValue).fields;if(a.length===0)e.push(s);else for(const u of a)e.push(s.child(u))}else e.push(s)})),new On(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e,n,i,s,a,u,d){this.key=e,this.documentType=n,this.version=i,this.readTime=s,this.createTime=a,this.data=u,this.documentState=d}static newInvalidDocument(e){return new un(e,0,Re.min(),Re.min(),Re.min(),In.empty(),0)}static newFoundDocument(e,n,i,s){return new un(e,1,n,Re.min(),i,s,0)}static newNoDocument(e,n){return new un(e,2,n,Re.min(),Re.min(),In.empty(),0)}static newUnknownDocument(e,n){return new un(e,3,n,Re.min(),Re.min(),In.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=In.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=In.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof un&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new un(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class If{constructor(e,n){this.position=e,this.inclusive=n}}function ZS(t,e,n){let i=0;for(let s=0;s<t.position.length;s++){const a=e[s],u=t.position[s];if(a.field.isKeyField()?i=Te.comparator(Te.fromName(u.referenceValue),n.key):i=Xa(u,n.data.field(a.field)),a.dir==="desc"&&(i*=-1),i!==0)break}return i}function eA(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!sr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $u{constructor(e,n="asc"){this.field=e,this.dir=n}}function q3(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TC{}class Lt extends TC{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new B3(e,n,i):n==="array-contains"?new $3(e,i):n==="in"?new j3(e,i):n==="not-in"?new J3(e,i):n==="array-contains-any"?new K3(e,i):new Lt(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new z3(e,i):new G3(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Xa(n,this.value)):n!==null&&ks(this.value)===ks(n)&&this.matchesComparison(Xa(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return we(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class wi extends TC{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new wi(e,n)}matches(e){return SC(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function SC(t){return t.op==="and"}function AC(t){return H3(t)&&SC(t)}function H3(t){for(const e of t.filters)if(e instanceof wi)return!1;return!0}function Tg(t){if(t instanceof Lt)return t.field.canonicalString()+t.op.toString()+Wa(t.value);if(AC(t))return t.filters.map((e=>Tg(e))).join(",");{const e=t.filters.map((n=>Tg(n))).join(",");return`${t.op}(${e})`}}function wC(t,e){return t instanceof Lt?(function(i,s){return s instanceof Lt&&i.op===s.op&&i.field.isEqual(s.field)&&sr(i.value,s.value)})(t,e):t instanceof wi?(function(i,s){return s instanceof wi&&i.op===s.op&&i.filters.length===s.filters.length?i.filters.reduce(((a,u,d)=>a&&wC(u,s.filters[d])),!0):!1})(t,e):void we(19439)}function xC(t){return t instanceof Lt?(function(n){return`${n.field.canonicalString()} ${n.op} ${Wa(n.value)}`})(t):t instanceof wi?(function(n){return n.op.toString()+" {"+n.getFilters().map(xC).join(" ,")+"}"})(t):"Filter"}class B3 extends Lt{constructor(e,n,i){super(e,n,i),this.key=Te.fromName(i.referenceValue)}matches(e){const n=Te.comparator(e.key,this.key);return this.matchesComparison(n)}}class z3 extends Lt{constructor(e,n){super(e,"in",n),this.keys=CC("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class G3 extends Lt{constructor(e,n){super(e,"not-in",n),this.keys=CC("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function CC(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map((i=>Te.fromName(i.referenceValue)))}class $3 extends Lt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return py(n)&&Gu(n.arrayValue,this.value)}}class j3 extends Lt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Gu(this.value.arrayValue,n)}}class J3 extends Lt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Gu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Gu(this.value.arrayValue,n)}}class K3 extends Lt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!py(n)||!n.arrayValue.values)&&n.arrayValue.values.some((i=>Gu(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y3{constructor(e,n=null,i=[],s=[],a=null,u=null,d=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=s,this.limit=a,this.startAt=u,this.endAt=d,this.Te=null}}function tA(t,e=null,n=[],i=[],s=null,a=null,u=null){return new Y3(t,e,n,i,s,a,u)}function my(t){const e=Me(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((i=>Tg(i))).join(","),n+="|ob:",n+=e.orderBy.map((i=>(function(a){return a.field.canonicalString()+a.dir})(i))).join(","),nh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((i=>Wa(i))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((i=>Wa(i))).join(",")),e.Te=n}return e.Te}function gy(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!q3(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!wC(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!eA(t.startAt,e.startAt)&&eA(t.endAt,e.endAt)}function Sg(t){return Te.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl{constructor(e,n=null,i=[],s=[],a=null,u="F",d=null,p=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=s,this.limit=a,this.limitType=u,this.startAt=d,this.endAt=p,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Q3(t,e,n,i,s,a,u,d){return new cl(t,e,n,i,s,a,u,d)}function IC(t){return new cl(t)}function nA(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function bC(t){return t.collectionGroup!==null}function Du(t){const e=Me(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),n.add(a.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let d=new zt(nn.comparator);return u.filters.forEach((p=>{p.getFlattenedFilters().forEach((h=>{h.isInequality()&&(d=d.add(h.field))}))})),d})(e).forEach((a=>{n.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new $u(a,i))})),n.has(nn.keyField().canonicalString())||e.Ie.push(new $u(nn.keyField(),i))}return e.Ie}function Wi(t){const e=Me(t);return e.Ee||(e.Ee=X3(e,Du(t))),e.Ee}function X3(t,e){if(t.limitType==="F")return tA(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((s=>{const a=s.dir==="desc"?"asc":"desc";return new $u(s.field,a)}));const n=t.endAt?new If(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new If(t.startAt.position,t.startAt.inclusive):null;return tA(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function Ag(t,e){const n=t.filters.concat([e]);return new cl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function wg(t,e,n){return new cl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function rh(t,e){return gy(Wi(t),Wi(e))&&t.limitType===e.limitType}function RC(t){return`${my(Wi(t))}|lt:${t.limitType}`}function ka(t){return`Query(target=${(function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map((s=>xC(s))).join(", ")}]`),nh(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map((s=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(s))).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map((s=>Wa(s))).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map((s=>Wa(s))).join(",")),`Target(${i})`})(Wi(t))}; limitType=${t.limitType})`}function sh(t,e){return e.isFoundDocument()&&(function(i,s){const a=s.key.path;return i.collectionGroup!==null?s.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(a):Te.isDocumentKey(i.path)?i.path.isEqual(a):i.path.isImmediateParentOf(a)})(t,e)&&(function(i,s){for(const a of Du(i))if(!a.field.isKeyField()&&s.data.field(a.field)===null)return!1;return!0})(t,e)&&(function(i,s){for(const a of i.filters)if(!a.matches(s))return!1;return!0})(t,e)&&(function(i,s){return!(i.startAt&&!(function(u,d,p){const h=ZS(u,d,p);return u.inclusive?h<=0:h<0})(i.startAt,Du(i),s)||i.endAt&&!(function(u,d,p){const h=ZS(u,d,p);return u.inclusive?h>=0:h>0})(i.endAt,Du(i),s))})(t,e)}function W3(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function NC(t){return(e,n)=>{let i=!1;for(const s of Du(t)){const a=Z3(s,e,n);if(a!==0)return a;i=i||s.field.isKeyField()}return 0}}function Z3(t,e,n){const i=t.field.isKeyField()?Te.comparator(e.key,n.key):(function(a,u,d){const p=u.data.field(a),h=d.data.field(a);return p!==null&&h!==null?Xa(p,h):we(42886)})(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return we(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[s,a]of i)if(this.equalsFn(s,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),s=this.inner[i];if(s===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return void(s[a]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return i.length===1?delete this.inner[n]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Fs(this.inner,((n,i)=>{for(const[s,a]of i)e(s,a)}))}isEmpty(){return fC(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e6=new yt(Te.comparator);function Vr(){return e6}const MC=new yt(Te.comparator);function Cu(...t){let e=MC;for(const n of t)e=e.insert(n.key,n);return e}function DC(t){let e=MC;return t.forEach(((n,i)=>e=e.insert(n,i.overlayedDocument))),e}function wo(){return Pu()}function PC(){return Pu()}function Pu(){return new Oo((t=>t.toString()),((t,e)=>t.isEqual(e)))}const t6=new yt(Te.comparator),n6=new zt(Te.comparator);function Ge(...t){let e=n6;for(const n of t)e=e.add(n);return e}const i6=new zt(ze);function r6(){return i6}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yy(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:wf(e)?"-0":e}}function kC(t){return{integerValue:""+t}}function s6(t,e){return D3(e)?kC(e):yy(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oh{constructor(){this._=void 0}}function o6(t,e,n){return t instanceof bf?(function(s,a){const u={fields:{[mC]:{stringValue:pC},[yC]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&hy(a)&&(a=ih(a)),a&&(u.fields[gC]=a),{mapValue:u}})(n,e):t instanceof ju?LC(t,e):t instanceof Ju?UC(t,e):(function(s,a){const u=VC(s,a),d=iA(u)+iA(s.Ae);return Eg(u)&&Eg(s.Ae)?kC(d):yy(s.serializer,d)})(t,e)}function a6(t,e,n){return t instanceof ju?LC(t,e):t instanceof Ju?UC(t,e):n}function VC(t,e){return t instanceof Rf?(function(i){return Eg(i)||(function(a){return!!a&&"doubleValue"in a})(i)})(e)?e:{integerValue:0}:null}class bf extends oh{}class ju extends oh{constructor(e){super(),this.elements=e}}function LC(t,e){const n=OC(e);for(const i of t.elements)n.some((s=>sr(s,i)))||n.push(i);return{arrayValue:{values:n}}}class Ju extends oh{constructor(e){super(),this.elements=e}}function UC(t,e){let n=OC(e);for(const i of t.elements)n=n.filter((s=>!sr(s,i)));return{arrayValue:{values:n}}}class Rf extends oh{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function iA(t){return xt(t.integerValue||t.doubleValue)}function OC(t){return py(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function l6(t,e){return t.field.isEqual(e.field)&&(function(i,s){return i instanceof ju&&s instanceof ju||i instanceof Ju&&s instanceof Ju?Qa(i.elements,s.elements,sr):i instanceof Rf&&s instanceof Rf?sr(i.Ae,s.Ae):i instanceof bf&&s instanceof bf})(t.transform,e.transform)}class u6{constructor(e,n){this.version=e,this.transformResults=n}}class Si{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Si}static exists(e){return new Si(void 0,e)}static updateTime(e){return new Si(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function uf(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class ah{}function FC(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new vy(t.key,Si.none()):new tc(t.key,t.data,Si.none());{const n=t.data,i=In.empty();let s=new zt(nn.comparator);for(let a of e.fields)if(!s.has(a)){let u=n.field(a);u===null&&a.length>1&&(a=a.popLast(),u=n.field(a)),u===null?i.delete(a):i.set(a,u),s=s.add(a)}return new qs(t.key,i,new On(s.toArray()),Si.none())}}function c6(t,e,n){t instanceof tc?(function(s,a,u){const d=s.value.clone(),p=sA(s.fieldTransforms,a,u.transformResults);d.setAll(p),a.convertToFoundDocument(u.version,d).setHasCommittedMutations()})(t,e,n):t instanceof qs?(function(s,a,u){if(!uf(s.precondition,a))return void a.convertToUnknownDocument(u.version);const d=sA(s.fieldTransforms,a,u.transformResults),p=a.data;p.setAll(qC(s)),p.setAll(d),a.convertToFoundDocument(u.version,p).setHasCommittedMutations()})(t,e,n):(function(s,a,u){a.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,n)}function ku(t,e,n,i){return t instanceof tc?(function(a,u,d,p){if(!uf(a.precondition,u))return d;const h=a.value.clone(),v=oA(a.fieldTransforms,p,u);return h.setAll(v),u.convertToFoundDocument(u.version,h).setHasLocalMutations(),null})(t,e,n,i):t instanceof qs?(function(a,u,d,p){if(!uf(a.precondition,u))return d;const h=oA(a.fieldTransforms,p,u),v=u.data;return v.setAll(qC(a)),v.setAll(h),u.convertToFoundDocument(u.version,v).setHasLocalMutations(),d===null?null:d.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((E=>E.field)))})(t,e,n,i):(function(a,u,d){return uf(a.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):d})(t,e,n)}function d6(t,e){let n=null;for(const i of t.fieldTransforms){const s=e.data.field(i.field),a=VC(i.transform,s||null);a!=null&&(n===null&&(n=In.empty()),n.set(i.field,a))}return n||null}function rA(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(i,s){return i===void 0&&s===void 0||!(!i||!s)&&Qa(i,s,((a,u)=>l6(a,u)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class tc extends ah{constructor(e,n,i,s=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class qs extends ah{constructor(e,n,i,s,a=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=s,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function qC(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}})),e}function sA(t,e,n){const i=new Map;Ze(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const a=t[s],u=a.transform,d=e.data.field(a.field);i.set(a.field,a6(u,d,n[s]))}return i}function oA(t,e,n){const i=new Map;for(const s of t){const a=s.transform,u=n.data.field(s.field);i.set(s.field,o6(a,u,e))}return i}class vy extends ah{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class f6 extends ah{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h6{constructor(e,n,i,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const a=this.mutations[s];a.key.isEqual(e.key)&&c6(a,e,i[s])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=ku(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=ku(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=PC();return this.mutations.forEach((s=>{const a=e.get(s.key),u=a.overlayedDocument;let d=this.applyToLocalView(u,a.mutatedFields);d=n.has(s.key)?null:d;const p=FC(u,d);p!==null&&i.set(s.key,p),u.isValidDocument()||u.convertToNoDocument(Re.min())})),i}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Ge())}isEqual(e){return this.batchId===e.batchId&&Qa(this.mutations,e.mutations,((n,i)=>rA(n,i)))&&Qa(this.baseMutations,e.baseMutations,((n,i)=>rA(n,i)))}}class _y{constructor(e,n,i,s){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=s}static from(e,n,i){Ze(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let s=(function(){return t6})();const a=e.mutations;for(let u=0;u<a.length;u++)s=s.insert(a[u].key,i[u].version);return new _y(e,n,i,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p6{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m6{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Vt,Je;function g6(t){switch(t){case re.OK:return we(64938);case re.CANCELLED:case re.UNKNOWN:case re.DEADLINE_EXCEEDED:case re.RESOURCE_EXHAUSTED:case re.INTERNAL:case re.UNAVAILABLE:case re.UNAUTHENTICATED:return!1;case re.INVALID_ARGUMENT:case re.NOT_FOUND:case re.ALREADY_EXISTS:case re.PERMISSION_DENIED:case re.FAILED_PRECONDITION:case re.ABORTED:case re.OUT_OF_RANGE:case re.UNIMPLEMENTED:case re.DATA_LOSS:return!0;default:return we(15467,{code:t})}}function HC(t){if(t===void 0)return kr("GRPC error has no .code"),re.UNKNOWN;switch(t){case Vt.OK:return re.OK;case Vt.CANCELLED:return re.CANCELLED;case Vt.UNKNOWN:return re.UNKNOWN;case Vt.DEADLINE_EXCEEDED:return re.DEADLINE_EXCEEDED;case Vt.RESOURCE_EXHAUSTED:return re.RESOURCE_EXHAUSTED;case Vt.INTERNAL:return re.INTERNAL;case Vt.UNAVAILABLE:return re.UNAVAILABLE;case Vt.UNAUTHENTICATED:return re.UNAUTHENTICATED;case Vt.INVALID_ARGUMENT:return re.INVALID_ARGUMENT;case Vt.NOT_FOUND:return re.NOT_FOUND;case Vt.ALREADY_EXISTS:return re.ALREADY_EXISTS;case Vt.PERMISSION_DENIED:return re.PERMISSION_DENIED;case Vt.FAILED_PRECONDITION:return re.FAILED_PRECONDITION;case Vt.ABORTED:return re.ABORTED;case Vt.OUT_OF_RANGE:return re.OUT_OF_RANGE;case Vt.UNIMPLEMENTED:return re.UNIMPLEMENTED;case Vt.DATA_LOSS:return re.DATA_LOSS;default:return we(39323,{code:t})}}(Je=Vt||(Vt={}))[Je.OK=0]="OK",Je[Je.CANCELLED=1]="CANCELLED",Je[Je.UNKNOWN=2]="UNKNOWN",Je[Je.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Je[Je.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Je[Je.NOT_FOUND=5]="NOT_FOUND",Je[Je.ALREADY_EXISTS=6]="ALREADY_EXISTS",Je[Je.PERMISSION_DENIED=7]="PERMISSION_DENIED",Je[Je.UNAUTHENTICATED=16]="UNAUTHENTICATED",Je[Je.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Je[Je.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Je[Je.ABORTED=10]="ABORTED",Je[Je.OUT_OF_RANGE=11]="OUT_OF_RANGE",Je[Je.UNIMPLEMENTED=12]="UNIMPLEMENTED",Je[Je.INTERNAL=13]="INTERNAL",Je[Je.UNAVAILABLE=14]="UNAVAILABLE",Je[Je.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y6(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v6=new Is([4294967295,4294967295],0);function aA(t){const e=y6().encode(t),n=new tC;return n.update(e),new Uint8Array(n.digest())}function lA(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),s=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Is([n,i],0),new Is([s,a],0)]}class Ey{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Iu(`Invalid padding: ${n}`);if(i<0)throw new Iu(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Iu(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new Iu(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Is.fromNumber(this.ge)}ye(e,n,i){let s=e.add(n.multiply(Is.fromNumber(i)));return s.compare(v6)===1&&(s=new Is([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=aA(e),[i,s]=lA(n);for(let a=0;a<this.hashCount;a++){const u=this.ye(i,s,a);if(!this.we(u))return!1}return!0}static create(e,n,i){const s=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),u=new Ey(a,s,n);return i.forEach((d=>u.insert(d))),u}insert(e){if(this.ge===0)return;const n=aA(e),[i,s]=lA(n);for(let a=0;a<this.hashCount;a++){const u=this.ye(i,s,a);this.Se(u)}}Se(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class Iu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lh{constructor(e,n,i,s,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const s=new Map;return s.set(e,nc.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new lh(Re.min(),s,new yt(ze),Vr(),Ge())}}class nc{constructor(e,n,i,s,a){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new nc(i,n,Ge(),Ge(),Ge())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cf{constructor(e,n,i,s){this.be=e,this.removedTargetIds=n,this.key=i,this.De=s}}class BC{constructor(e,n){this.targetId=e,this.Ce=n}}class zC{constructor(e,n,i=rn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=s}}class uA{constructor(){this.ve=0,this.Fe=cA(),this.Me=rn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ge(),n=Ge(),i=Ge();return this.Fe.forEach(((s,a)=>{switch(a){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:i=i.add(s);break;default:we(38017,{changeType:a})}})),new nc(this.Me,this.xe,e,n,i)}qe(){this.Oe=!1,this.Fe=cA()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ze(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class _6{constructor(e){this.Ge=e,this.ze=new Map,this.je=Vr(),this.Je=Qd(),this.He=Qd(),this.Ye=new yt(ze)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const i=this.nt(n);switch(e.state){case 0:this.rt(n)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(e.resumeToken));break;default:we(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((i,s)=>{this.rt(s)&&n(s)}))}st(e){const n=e.targetId,i=e.Ce.count,s=this.ot(n);if(s){const a=s.target;if(Sg(a))if(i===0){const u=new Te(a.path);this.et(n,u,un.newNoDocument(u,Re.min()))}else Ze(i===1,20013,{expectedCount:i});else{const u=this._t(n);if(u!==i){const d=this.ut(e),p=d?this.ct(d,e,u):1;if(p!==0){this.it(n);const h=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,h)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:s=0},hashCount:a=0}=n;let u,d;try{u=Ps(i).toUint8Array()}catch(p){if(p instanceof hC)return Ya("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{d=new Ey(u,s,a)}catch(p){return Ya(p instanceof Iu?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return d.ge===0?null:d}ct(e,n,i){return n.Ce.count===i-this.Pt(e,n.targetId)?0:2}Pt(e,n){const i=this.Ge.getRemoteKeysForTarget(n);let s=0;return i.forEach((a=>{const u=this.Ge.ht(),d=`projects/${u.projectId}/databases/${u.database}/documents/${a.path.canonicalString()}`;e.mightContain(d)||(this.et(n,a,null),s++)})),s}Tt(e){const n=new Map;this.ze.forEach(((a,u)=>{const d=this.ot(u);if(d){if(a.current&&Sg(d.target)){const p=new Te(d.target.path);this.It(p).has(u)||this.Et(u,p)||this.et(u,p,un.newNoDocument(p,e))}a.Be&&(n.set(u,a.ke()),a.qe())}}));let i=Ge();this.He.forEach(((a,u)=>{let d=!0;u.forEachWhile((p=>{const h=this.ot(p);return!h||h.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(i=i.add(a))})),this.je.forEach(((a,u)=>u.setReadTime(e)));const s=new lh(e,n,this.Ye,this.je,i);return this.je=Vr(),this.Je=Qd(),this.He=Qd(),this.Ye=new yt(ze),s}Xe(e,n){if(!this.rt(e))return;const i=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,i),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,i){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),i&&(this.je=this.je.insert(n,i))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new uA,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new zt(ze),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new zt(ze),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||me("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new uA),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Qd(){return new yt(Te.comparator)}function cA(){return new yt(Te.comparator)}const E6={asc:"ASCENDING",desc:"DESCENDING"},T6={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},S6={and:"AND",or:"OR"};class A6{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function xg(t,e){return t.useProto3Json||nh(e)?e:{value:e}}function Nf(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function GC(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function w6(t,e){return Nf(t,e.toTimestamp())}function Zi(t){return Ze(!!t,49232),Re.fromTimestamp((function(n){const i=Ds(n);return new ft(i.seconds,i.nanos)})(t))}function Ty(t,e){return Cg(t,e).canonicalString()}function Cg(t,e){const n=(function(s){return new ut(["projects",s.projectId,"databases",s.database])})(t).child("documents");return e===void 0?n:n.child(e)}function $C(t){const e=ut.fromString(t);return Ze(QC(e),10190,{key:e.toString()}),e}function Ig(t,e){return Ty(t.databaseId,e.path)}function Um(t,e){const n=$C(e);if(n.get(1)!==t.databaseId.projectId)throw new pe(re.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new pe(re.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Te(JC(n))}function jC(t,e){return Ty(t.databaseId,e)}function x6(t){const e=$C(t);return e.length===4?ut.emptyPath():JC(e)}function bg(t){return new ut(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function JC(t){return Ze(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function dA(t,e,n){return{name:Ig(t,e),fields:n.value.mapValue.fields}}function C6(t,e){let n;if("targetChange"in e){e.targetChange;const i=(function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:we(39313,{state:h})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],a=(function(h,v){return h.useProto3Json?(Ze(v===void 0||typeof v=="string",58123),rn.fromBase64String(v||"")):(Ze(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),rn.fromUint8Array(v||new Uint8Array))})(t,e.targetChange.resumeToken),u=e.targetChange.cause,d=u&&(function(h){const v=h.code===void 0?re.UNKNOWN:HC(h.code);return new pe(v,h.message||"")})(u);n=new zC(i,s,a,d||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const s=Um(t,i.document.name),a=Zi(i.document.updateTime),u=i.document.createTime?Zi(i.document.createTime):Re.min(),d=new In({mapValue:{fields:i.document.fields}}),p=un.newFoundDocument(s,a,u,d),h=i.targetIds||[],v=i.removedTargetIds||[];n=new cf(h,v,p.key,p)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const s=Um(t,i.document),a=i.readTime?Zi(i.readTime):Re.min(),u=un.newNoDocument(s,a),d=i.removedTargetIds||[];n=new cf([],d,u.key,u)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const s=Um(t,i.document),a=i.removedTargetIds||[];n=new cf([],a,s,null)}else{if(!("filter"in e))return we(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:s=0,unchangedNames:a}=i,u=new m6(s,a),d=i.targetId;n=new BC(d,u)}}return n}function I6(t,e){let n;if(e instanceof tc)n={update:dA(t,e.key,e.value)};else if(e instanceof vy)n={delete:Ig(t,e.key)};else if(e instanceof qs)n={update:dA(t,e.key,e.data),updateMask:L6(e.fieldMask)};else{if(!(e instanceof f6))return we(16599,{Vt:e.type});n={verify:Ig(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((i=>(function(a,u){const d=u.transform;if(d instanceof bf)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof ju)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Ju)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Rf)return{fieldPath:u.field.canonicalString(),increment:d.Ae};throw we(20930,{transform:u.transform})})(0,i)))),e.precondition.isNone||(n.currentDocument=(function(s,a){return a.updateTime!==void 0?{updateTime:w6(s,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:we(27497)})(t,e.precondition)),n}function b6(t,e){return t&&t.length>0?(Ze(e!==void 0,14353),t.map((n=>(function(s,a){let u=s.updateTime?Zi(s.updateTime):Zi(a);return u.isEqual(Re.min())&&(u=Zi(a)),new u6(u,s.transformResults||[])})(n,e)))):[]}function R6(t,e){return{documents:[jC(t,e.path)]}}function N6(t,e){const n={structuredQuery:{}},i=e.path;let s;e.collectionGroup!==null?(s=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=jC(t,s);const a=(function(h){if(h.length!==0)return YC(wi.create(h,"and"))})(e.filters);a&&(n.structuredQuery.where=a);const u=(function(h){if(h.length!==0)return h.map((v=>(function(S){return{field:Va(S.field),direction:P6(S.dir)}})(v)))})(e.orderBy);u&&(n.structuredQuery.orderBy=u);const d=xg(t,e.limit);return d!==null&&(n.structuredQuery.limit=d),e.startAt&&(n.structuredQuery.startAt=(function(h){return{before:h.inclusive,values:h.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(h){return{before:!h.inclusive,values:h.position}})(e.endAt)),{ft:n,parent:s}}function M6(t){let e=x6(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let s=null;if(i>0){Ze(i===1,65062);const v=n.from[0];v.allDescendants?s=v.collectionId:e=e.child(v.collectionId)}let a=[];n.where&&(a=(function(E){const S=KC(E);return S instanceof wi&&AC(S)?S.getFilters():[S]})(n.where));let u=[];n.orderBy&&(u=(function(E){return E.map((S=>(function(D){return new $u(La(D.field),(function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(D.direction))})(S)))})(n.orderBy));let d=null;n.limit&&(d=(function(E){let S;return S=typeof E=="object"?E.value:E,nh(S)?null:S})(n.limit));let p=null;n.startAt&&(p=(function(E){const S=!!E.before,C=E.values||[];return new If(C,S)})(n.startAt));let h=null;return n.endAt&&(h=(function(E){const S=!E.before,C=E.values||[];return new If(C,S)})(n.endAt)),Q3(e,s,u,a,d,"F",p,h)}function D6(t,e){const n=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return we(28987,{purpose:s})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function KC(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=La(n.unaryFilter.field);return Lt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const s=La(n.unaryFilter.field);return Lt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=La(n.unaryFilter.field);return Lt.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=La(n.unaryFilter.field);return Lt.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return we(61313);default:return we(60726)}})(t):t.fieldFilter!==void 0?(function(n){return Lt.create(La(n.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return we(58110);default:return we(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return wi.create(n.compositeFilter.filters.map((i=>KC(i))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return we(1026)}})(n.compositeFilter.op))})(t):we(30097,{filter:t})}function P6(t){return E6[t]}function k6(t){return T6[t]}function V6(t){return S6[t]}function Va(t){return{fieldPath:t.canonicalString()}}function La(t){return nn.fromServerFormat(t.fieldPath)}function YC(t){return t instanceof Lt?(function(n){if(n.op==="=="){if(WS(n.value))return{unaryFilter:{field:Va(n.field),op:"IS_NAN"}};if(XS(n.value))return{unaryFilter:{field:Va(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(WS(n.value))return{unaryFilter:{field:Va(n.field),op:"IS_NOT_NAN"}};if(XS(n.value))return{unaryFilter:{field:Va(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Va(n.field),op:k6(n.op),value:n.value}}})(t):t instanceof wi?(function(n){const i=n.getFilters().map((s=>YC(s)));return i.length===1?i[0]:{compositeFilter:{op:V6(n.op),filters:i}}})(t):we(54877,{filter:t})}function L6(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function QC(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ws{constructor(e,n,i,s,a=Re.min(),u=Re.min(),d=rn.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=d,this.expectedCount=p}withSequenceNumber(e){return new ws(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ws(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ws(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ws(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U6{constructor(e){this.yt=e}}function O6(t){const e=M6({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?wg(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F6{constructor(){this.Cn=new q6}addToCollectionParentIndex(e,n){return this.Cn.add(n),ae.resolve()}getCollectionParents(e,n){return ae.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return ae.resolve()}deleteFieldIndex(e,n){return ae.resolve()}deleteAllFieldIndexes(e){return ae.resolve()}createTargetIndexes(e,n){return ae.resolve()}getDocumentsMatchingTarget(e,n){return ae.resolve(null)}getIndexType(e,n){return ae.resolve(0)}getFieldIndexes(e,n){return ae.resolve([])}getNextCollectionGroupToUpdate(e){return ae.resolve(null)}getMinOffset(e,n){return ae.resolve(Ms.min())}getMinOffsetFromCollectionGroup(e,n){return ae.resolve(Ms.min())}updateCollectionGroup(e,n,i){return ae.resolve()}updateIndexEntries(e,n){return ae.resolve()}}class q6{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),s=this.index[n]||new zt(ut.comparator),a=!s.has(i);return this.index[n]=s.add(i),a}has(e){const n=e.lastSegment(),i=e.popLast(),s=this.index[n];return s&&s.has(i)}getEntries(e){return(this.index[e]||new zt(ut.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fA={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},XC=41943040;class Cn{static withCacheSize(e){return new Cn(e,Cn.DEFAULT_COLLECTION_PERCENTILE,Cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Cn.DEFAULT_COLLECTION_PERCENTILE=10,Cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Cn.DEFAULT=new Cn(XC,Cn.DEFAULT_COLLECTION_PERCENTILE,Cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Cn.DISABLED=new Cn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Za{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Za(0)}static cr(){return new Za(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hA="LruGarbageCollector",H6=1048576;function pA([t,e],[n,i]){const s=ze(t,n);return s===0?ze(e,i):s}class B6{constructor(e){this.Ir=e,this.buffer=new zt(pA),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();pA(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class z6{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){me(hA,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ul(n)?me(hA,"Ignoring IndexedDB error during garbage collection: ",n):await ll(n)}await this.Vr(3e5)}))}}class G6{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((i=>Math.floor(n/100*i)))}nthSequenceNumber(e,n){if(n===0)return ae.resolve(th.ce);const i=new B6(n);return this.mr.forEachTarget(e,(s=>i.Ar(s.sequenceNumber))).next((()=>this.mr.pr(e,(s=>i.Ar(s))))).next((()=>i.maxValue))}removeTargets(e,n,i){return this.mr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(me("LruGarbageCollector","Garbage collection skipped; disabled"),ae.resolve(fA)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(me("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),fA):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let i,s,a,u,d,p,h;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(me("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),s=this.params.maximumSequenceNumbersToCollect):s=E,u=Date.now(),this.nthSequenceNumber(e,s)))).next((E=>(i=E,d=Date.now(),this.removeTargets(e,i,n)))).next((E=>(a=E,p=Date.now(),this.removeOrphanedDocuments(e,i)))).next((E=>(h=Date.now(),Pa()<=Be.DEBUG&&me("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-v}ms
	Determined least recently used ${s} in `+(d-u)+`ms
	Removed ${a} targets in `+(p-d)+`ms
	Removed ${E} documents in `+(h-p)+`ms
Total Duration: ${h-v}ms`),ae.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:a,documentsRemoved:E}))))}}function $6(t,e){return new G6(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j6{constructor(){this.changes=new Oo((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,un.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?ae.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J6{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K6{constructor(e,n,i,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=s}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next((s=>(i=s,this.remoteDocumentCache.getEntry(e,n)))).next((s=>(i!==null&&ku(i.mutation,s,On.empty(),ft.now()),s)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.getLocalViewOfDocuments(e,i,Ge()).next((()=>i))))}getLocalViewOfDocuments(e,n,i=Ge()){const s=wo();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,i).next((a=>{let u=Cu();return a.forEach(((d,p)=>{u=u.insert(d,p.overlayedDocument)})),u}))))}getOverlayedDocuments(e,n){const i=wo();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,Ge())))}populateOverlays(e,n,i){const s=[];return i.forEach((a=>{n.has(a)||s.push(a)})),this.documentOverlayCache.getOverlays(e,s).next((a=>{a.forEach(((u,d)=>{n.set(u,d)}))}))}computeViews(e,n,i,s){let a=Vr();const u=Pu(),d=(function(){return Pu()})();return n.forEach(((p,h)=>{const v=i.get(h.key);s.has(h.key)&&(v===void 0||v.mutation instanceof qs)?a=a.insert(h.key,h):v!==void 0?(u.set(h.key,v.mutation.getFieldMask()),ku(v.mutation,h,v.mutation.getFieldMask(),ft.now())):u.set(h.key,On.empty())})),this.recalculateAndSaveOverlays(e,a).next((p=>(p.forEach(((h,v)=>u.set(h,v))),n.forEach(((h,v)=>d.set(h,new J6(v,u.get(h)??null)))),d)))}recalculateAndSaveOverlays(e,n){const i=Pu();let s=new yt(((u,d)=>u-d)),a=Ge();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((u=>{for(const d of u)d.keys().forEach((p=>{const h=n.get(p);if(h===null)return;let v=i.get(p)||On.empty();v=d.applyToLocalView(h,v),i.set(p,v);const E=(s.get(d.batchId)||Ge()).add(p);s=s.insert(d.batchId,E)}))})).next((()=>{const u=[],d=s.getReverseIterator();for(;d.hasNext();){const p=d.getNext(),h=p.key,v=p.value,E=PC();v.forEach((S=>{if(!a.has(S)){const C=FC(n.get(S),i.get(S));C!==null&&E.set(S,C),a=a.add(S)}})),u.push(this.documentOverlayCache.saveOverlays(e,h,E))}return ae.waitFor(u)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,n,i,s){return(function(u){return Te.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):bC(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,s):this.getDocumentsMatchingCollectionQuery(e,n,i,s)}getNextDocuments(e,n,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,s).next((a=>{const u=s-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,s-a.size):ae.resolve(wo());let d=Hu,p=a;return u.next((h=>ae.forEach(h,((v,E)=>(d<E.largestBatchId&&(d=E.largestBatchId),a.get(v)?ae.resolve():this.remoteDocumentCache.getEntry(e,v).next((S=>{p=p.insert(v,S)}))))).next((()=>this.populateOverlays(e,h,a))).next((()=>this.computeViews(e,p,h,Ge()))).next((v=>({batchId:d,changes:DC(v)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Te(n)).next((i=>{let s=Cu();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s}))}getDocumentsMatchingCollectionGroupQuery(e,n,i,s){const a=n.collectionGroup;let u=Cu();return this.indexManager.getCollectionParents(e,a).next((d=>ae.forEach(d,(p=>{const h=(function(E,S){return new cl(S,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(n,p.child(a));return this.getDocumentsMatchingCollectionQuery(e,h,i,s).next((v=>{v.forEach(((E,S)=>{u=u.insert(E,S)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,n,i,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next((u=>(a=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,a,s)))).next((u=>{a.forEach(((p,h)=>{const v=h.getKey();u.get(v)===null&&(u=u.insert(v,un.newInvalidDocument(v)))}));let d=Cu();return u.forEach(((p,h)=>{const v=a.get(p);v!==void 0&&ku(v.mutation,h,On.empty(),ft.now()),sh(n,h)&&(d=d.insert(p,h))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y6{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return ae.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(s){return{id:s.id,version:s.version,createTime:Zi(s.createTime)}})(n)),ae.resolve()}getNamedQuery(e,n){return ae.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(s){return{name:s.name,query:O6(s.bundledQuery),readTime:Zi(s.readTime)}})(n)),ae.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q6{constructor(){this.overlays=new yt(Te.comparator),this.qr=new Map}getOverlay(e,n){return ae.resolve(this.overlays.get(n))}getOverlays(e,n){const i=wo();return ae.forEach(n,(s=>this.getOverlay(e,s).next((a=>{a!==null&&i.set(s,a)})))).next((()=>i))}saveOverlays(e,n,i){return i.forEach(((s,a)=>{this.St(e,n,a)})),ae.resolve()}removeOverlaysForBatchId(e,n,i){const s=this.qr.get(i);return s!==void 0&&(s.forEach((a=>this.overlays=this.overlays.remove(a))),this.qr.delete(i)),ae.resolve()}getOverlaysForCollection(e,n,i){const s=wo(),a=n.length+1,u=new Te(n.child("")),d=this.overlays.getIteratorFrom(u);for(;d.hasNext();){const p=d.getNext().value,h=p.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===a&&p.largestBatchId>i&&s.set(p.getKey(),p)}return ae.resolve(s)}getOverlaysForCollectionGroup(e,n,i,s){let a=new yt(((h,v)=>h-v));const u=this.overlays.getIterator();for(;u.hasNext();){const h=u.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>i){let v=a.get(h.largestBatchId);v===null&&(v=wo(),a=a.insert(h.largestBatchId,v)),v.set(h.getKey(),h)}}const d=wo(),p=a.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((h,v)=>d.set(h,v))),!(d.size()>=s)););return ae.resolve(d)}St(e,n,i){const s=this.overlays.get(i.key);if(s!==null){const u=this.qr.get(s.largestBatchId).delete(i.key);this.qr.set(s.largestBatchId,u)}this.overlays=this.overlays.insert(i.key,new p6(n,i));let a=this.qr.get(n);a===void 0&&(a=Ge(),this.qr.set(n,a)),this.qr.set(n,a.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X6{constructor(){this.sessionToken=rn.EMPTY_BYTE_STRING}getSessionToken(e){return ae.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ae.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sy{constructor(){this.Qr=new zt(Jt.$r),this.Ur=new zt(Jt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const i=new Jt(e,n);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,n){e.forEach((i=>this.addReference(i,n)))}removeReference(e,n){this.Gr(new Jt(e,n))}zr(e,n){e.forEach((i=>this.removeReference(i,n)))}jr(e){const n=new Te(new ut([])),i=new Jt(n,e),s=new Jt(n,e+1),a=[];return this.Ur.forEachInRange([i,s],(u=>{this.Gr(u),a.push(u.key)})),a}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Te(new ut([])),i=new Jt(n,e),s=new Jt(n,e+1);let a=Ge();return this.Ur.forEachInRange([i,s],(u=>{a=a.add(u.key)})),a}containsKey(e){const n=new Jt(e,0),i=this.Qr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class Jt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Te.comparator(e.key,n.key)||ze(e.Yr,n.Yr)}static Kr(e,n){return ze(e.Yr,n.Yr)||Te.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W6{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new zt(Jt.$r)}checkEmpty(e){return ae.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,s){const a=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new h6(a,n,i,s);this.mutationQueue.push(u);for(const d of s)this.Zr=this.Zr.add(new Jt(d.key,a)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return ae.resolve(u)}lookupMutationBatch(e,n){return ae.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,s=this.ei(i),a=s<0?0:s;return ae.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return ae.resolve(this.mutationQueue.length===0?fy:this.tr-1)}getAllMutationBatches(e){return ae.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new Jt(n,0),s=new Jt(n,Number.POSITIVE_INFINITY),a=[];return this.Zr.forEachInRange([i,s],(u=>{const d=this.Xr(u.Yr);a.push(d)})),ae.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new zt(ze);return n.forEach((s=>{const a=new Jt(s,0),u=new Jt(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([a,u],(d=>{i=i.add(d.Yr)}))})),ae.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,s=i.length+1;let a=i;Te.isDocumentKey(a)||(a=a.child(""));const u=new Jt(new Te(a),0);let d=new zt(ze);return this.Zr.forEachWhile((p=>{const h=p.key.path;return!!i.isPrefixOf(h)&&(h.length===s&&(d=d.add(p.Yr)),!0)}),u),ae.resolve(this.ti(d))}ti(e){const n=[];return e.forEach((i=>{const s=this.Xr(i);s!==null&&n.push(s)})),n}removeMutationBatch(e,n){Ze(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return ae.forEach(n.mutations,(s=>{const a=new Jt(s.key,n.batchId);return i=i.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Zr=i}))}ir(e){}containsKey(e,n){const i=new Jt(n,0),s=this.Zr.firstAfterOrEqual(i);return ae.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,ae.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z6{constructor(e){this.ri=e,this.docs=(function(){return new yt(Te.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,s=this.docs.get(i),a=s?s.size:0,u=this.ri(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:u}),this.size+=u-a,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return ae.resolve(i?i.document.mutableCopy():un.newInvalidDocument(n))}getEntries(e,n){let i=Vr();return n.forEach((s=>{const a=this.docs.get(s);i=i.insert(s,a?a.document.mutableCopy():un.newInvalidDocument(s))})),ae.resolve(i)}getDocumentsMatchingQuery(e,n,i,s){let a=Vr();const u=n.path,d=new Te(u.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(d);for(;p.hasNext();){const{key:h,value:{document:v}}=p.getNext();if(!u.isPrefixOf(h.path))break;h.path.length>u.length+1||b3(I3(v),i)<=0||(s.has(v.key)||sh(n,v))&&(a=a.insert(v.key,v.mutableCopy()))}return ae.resolve(a)}getAllFromCollectionGroup(e,n,i,s){we(9500)}ii(e,n){return ae.forEach(this.docs,(i=>n(i)))}newChangeBuffer(e){return new e5(this)}getSize(e){return ae.resolve(this.size)}}class e5 extends j6{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((i,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(i)})),ae.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t5{constructor(e){this.persistence=e,this.si=new Oo((n=>my(n)),gy),this.lastRemoteSnapshotVersion=Re.min(),this.highestTargetId=0,this.oi=0,this._i=new Sy,this.targetCount=0,this.ai=Za.ur()}forEachTarget(e,n){return this.si.forEach(((i,s)=>n(s))),ae.resolve()}getLastRemoteSnapshotVersion(e){return ae.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ae.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ae.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.oi&&(this.oi=n),ae.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Za(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,ae.resolve()}updateTargetData(e,n){return this.Pr(n),ae.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,ae.resolve()}removeTargets(e,n,i){let s=0;const a=[];return this.si.forEach(((u,d)=>{d.sequenceNumber<=n&&i.get(d.targetId)===null&&(this.si.delete(u),a.push(this.removeMatchingKeysForTargetId(e,d.targetId)),s++)})),ae.waitFor(a).next((()=>s))}getTargetCount(e){return ae.resolve(this.targetCount)}getTargetData(e,n){const i=this.si.get(n)||null;return ae.resolve(i)}addMatchingKeys(e,n,i){return this._i.Wr(n,i),ae.resolve()}removeMatchingKeys(e,n,i){this._i.zr(n,i);const s=this.persistence.referenceDelegate,a=[];return s&&n.forEach((u=>{a.push(s.markPotentiallyOrphaned(e,u))})),ae.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),ae.resolve()}getMatchingKeysForTargetId(e,n){const i=this._i.Hr(n);return ae.resolve(i)}containsKey(e,n){return ae.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WC{constructor(e,n){this.ui={},this.overlays={},this.ci=new th(0),this.li=!1,this.li=!0,this.hi=new X6,this.referenceDelegate=e(this),this.Pi=new t5(this),this.indexManager=new F6,this.remoteDocumentCache=(function(s){return new Z6(s)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new U6(n),this.Ii=new Y6(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Q6,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.ui[e.toKey()];return i||(i=new W6(n,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,i){me("MemoryPersistence","Starting transaction:",e);const s=new n5(this.ci.next());return this.referenceDelegate.Ei(),i(s).next((a=>this.referenceDelegate.di(s).next((()=>a)))).toPromise().then((a=>(s.raiseOnCommittedEvent(),a)))}Ai(e,n){return ae.or(Object.values(this.ui).map((i=>()=>i.containsKey(e,n))))}}class n5 extends N3{constructor(e){super(),this.currentSequenceNumber=e}}class Ay{constructor(e){this.persistence=e,this.Ri=new Sy,this.Vi=null}static mi(e){return new Ay(e)}get fi(){if(this.Vi)return this.Vi;throw we(60996)}addReference(e,n,i){return this.Ri.addReference(i,n),this.fi.delete(i.toString()),ae.resolve()}removeReference(e,n,i){return this.Ri.removeReference(i,n),this.fi.add(i.toString()),ae.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),ae.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((s=>this.fi.add(s.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next((s=>{s.forEach((a=>this.fi.add(a.toString())))})).next((()=>i.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ae.forEach(this.fi,(i=>{const s=Te.fromPath(i);return this.gi(e,s).next((a=>{a||n.removeEntry(s,Re.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((i=>{i?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return ae.or([()=>ae.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Mf{constructor(e,n){this.persistence=e,this.pi=new Oo((i=>P3(i.path)),((i,s)=>i.isEqual(s))),this.garbageCollector=$6(this,n)}static mi(e,n){return new Mf(e,n)}Ei(){}di(e){return ae.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>n.next((s=>i+s))))}wr(e){let n=0;return this.pr(e,(i=>{n++})).next((()=>n))}pr(e,n){return ae.forEach(this.pi,((i,s)=>this.br(e,i,s).next((a=>a?ae.resolve():n(s)))))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const s=this.persistence.getRemoteDocumentCache(),a=s.newChangeBuffer();return s.ii(e,(u=>this.br(e,u,n).next((d=>{d||(i++,a.removeEntry(u,Re.min()))})))).next((()=>a.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),ae.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),ae.resolve()}removeReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),ae.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),ae.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=af(e.data.value)),n}br(e,n,i){return ae.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return ae.resolve(s!==void 0&&s>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wy{constructor(e,n,i,s){this.targetId=e,this.fromCache=n,this.Es=i,this.ds=s}static As(e,n){let i=Ge(),s=Ge();for(const a of n.docChanges)switch(a.type){case 0:i=i.add(a.doc.key);break;case 1:s=s.add(a.doc.key)}return new wy(e,n.fromCache,i,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i5{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r5{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return Y4()?8:M3(dn())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,i,s){const a={result:null};return this.ys(e,n).next((u=>{a.result=u})).next((()=>{if(!a.result)return this.ws(e,n,s,i).next((u=>{a.result=u}))})).next((()=>{if(a.result)return;const u=new i5;return this.Ss(e,n,u).next((d=>{if(a.result=d,this.Vs)return this.bs(e,n,u,d.size)}))})).next((()=>a.result))}bs(e,n,i,s){return i.documentReadCount<this.fs?(Pa()<=Be.DEBUG&&me("QueryEngine","SDK will not create cache indexes for query:",ka(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ae.resolve()):(Pa()<=Be.DEBUG&&me("QueryEngine","Query:",ka(n),"scans",i.documentReadCount,"local documents and returns",s,"documents as results."),i.documentReadCount>this.gs*s?(Pa()<=Be.DEBUG&&me("QueryEngine","The SDK decides to create cache indexes for query:",ka(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Wi(n))):ae.resolve())}ys(e,n){if(nA(n))return ae.resolve(null);let i=Wi(n);return this.indexManager.getIndexType(e,i).next((s=>s===0?null:(n.limit!==null&&s===1&&(n=wg(n,null,"F"),i=Wi(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next((a=>{const u=Ge(...a);return this.ps.getDocuments(e,u).next((d=>this.indexManager.getMinOffset(e,i).next((p=>{const h=this.Ds(n,d);return this.Cs(n,h,u,p.readTime)?this.ys(e,wg(n,null,"F")):this.vs(e,h,n,p)}))))})))))}ws(e,n,i,s){return nA(n)||s.isEqual(Re.min())?ae.resolve(null):this.ps.getDocuments(e,i).next((a=>{const u=this.Ds(n,a);return this.Cs(n,u,i,s)?ae.resolve(null):(Pa()<=Be.DEBUG&&me("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),ka(n)),this.vs(e,u,n,C3(s,Hu)).next((d=>d)))}))}Ds(e,n){let i=new zt(NC(e));return n.forEach(((s,a)=>{sh(e,a)&&(i=i.add(a))})),i}Cs(e,n,i,s){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(s)>0)}Ss(e,n,i){return Pa()<=Be.DEBUG&&me("QueryEngine","Using full collection scan to execute query:",ka(n)),this.ps.getDocumentsMatchingQuery(e,n,Ms.min(),i)}vs(e,n,i,s){return this.ps.getDocumentsMatchingQuery(e,i,s).next((a=>(n.forEach((u=>{a=a.insert(u.key,u)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xy="LocalStore",s5=3e8;class o5{constructor(e,n,i,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new yt(ze),this.xs=new Oo((a=>my(a)),gy),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new K6(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function a5(t,e,n,i){return new o5(t,e,n,i)}async function ZC(t,e){const n=Me(t);return await n.persistence.runTransaction("Handle user change","readonly",(i=>{let s;return n.mutationQueue.getAllMutationBatches(i).next((a=>(s=a,n.Bs(e),n.mutationQueue.getAllMutationBatches(i)))).next((a=>{const u=[],d=[];let p=Ge();for(const h of s){u.push(h.batchId);for(const v of h.mutations)p=p.add(v.key)}for(const h of a){d.push(h.batchId);for(const v of h.mutations)p=p.add(v.key)}return n.localDocuments.getDocuments(i,p).next((h=>({Ls:h,removedBatchIds:u,addedBatchIds:d})))}))}))}function l5(t,e){const n=Me(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const s=e.batch.keys(),a=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(d,p,h,v){const E=h.batch,S=E.keys();let C=ae.resolve();return S.forEach((D=>{C=C.next((()=>v.getEntry(p,D))).next((U=>{const P=h.docVersions.get(D);Ze(P!==null,48541),U.version.compareTo(P)<0&&(E.applyToRemoteDocument(U,h),U.isValidDocument()&&(U.setReadTime(h.commitVersion),v.addEntry(U)))}))})),C.next((()=>d.mutationQueue.removeMutationBatch(p,E)))})(n,i,e,a).next((()=>a.apply(i))).next((()=>n.mutationQueue.performConsistencyCheck(i))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(i,s,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(d){let p=Ge();for(let h=0;h<d.mutationResults.length;++h)d.mutationResults[h].transformResults.length>0&&(p=p.add(d.batch.mutations[h].key));return p})(e)))).next((()=>n.localDocuments.getDocuments(i,s)))}))}function eI(t){const e=Me(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function u5(t,e){const n=Me(t),i=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const u=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const d=[];e.targetChanges.forEach(((v,E)=>{const S=s.get(E);if(!S)return;d.push(n.Pi.removeMatchingKeys(a,v.removedDocuments,E).next((()=>n.Pi.addMatchingKeys(a,v.addedDocuments,E))));let C=S.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(E)!==null?C=C.withResumeToken(rn.EMPTY_BYTE_STRING,Re.min()).withLastLimboFreeSnapshotVersion(Re.min()):v.resumeToken.approximateByteSize()>0&&(C=C.withResumeToken(v.resumeToken,i)),s=s.insert(E,C),(function(U,P,q){return U.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-U.snapshotVersion.toMicroseconds()>=s5?!0:q.addedDocuments.size+q.modifiedDocuments.size+q.removedDocuments.size>0})(S,C,v)&&d.push(n.Pi.updateTargetData(a,C))}));let p=Vr(),h=Ge();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&d.push(n.persistence.referenceDelegate.updateLimboDocument(a,v))})),d.push(c5(a,u,e.documentUpdates).next((v=>{p=v.ks,h=v.qs}))),!i.isEqual(Re.min())){const v=n.Pi.getLastRemoteSnapshotVersion(a).next((E=>n.Pi.setTargetsMetadata(a,a.currentSequenceNumber,i)));d.push(v)}return ae.waitFor(d).next((()=>u.apply(a))).next((()=>n.localDocuments.getLocalViewOfDocuments(a,p,h))).next((()=>p))})).then((a=>(n.Ms=s,a)))}function c5(t,e,n){let i=Ge(),s=Ge();return n.forEach((a=>i=i.add(a))),e.getEntries(t,i).next((a=>{let u=Vr();return n.forEach(((d,p)=>{const h=a.get(d);p.isFoundDocument()!==h.isFoundDocument()&&(s=s.add(d)),p.isNoDocument()&&p.version.isEqual(Re.min())?(e.removeEntry(d,p.readTime),u=u.insert(d,p)):!h.isValidDocument()||p.version.compareTo(h.version)>0||p.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(p),u=u.insert(d,p)):me(xy,"Ignoring outdated watch update for ",d,". Current version:",h.version," Watch version:",p.version)})),{ks:u,qs:s}}))}function d5(t,e){const n=Me(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=fy),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function f5(t,e){const n=Me(t);return n.persistence.runTransaction("Allocate target","readwrite",(i=>{let s;return n.Pi.getTargetData(i,e).next((a=>a?(s=a,ae.resolve(s)):n.Pi.allocateTargetId(i).next((u=>(s=new ws(e,u,"TargetPurposeListen",i.currentSequenceNumber),n.Pi.addTargetData(i,s).next((()=>s)))))))})).then((i=>{const s=n.Ms.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(i.targetId,i),n.xs.set(e,i.targetId)),i}))}async function Rg(t,e,n){const i=Me(t),s=i.Ms.get(e),a=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",a,(u=>i.persistence.referenceDelegate.removeTarget(u,s)))}catch(u){if(!ul(u))throw u;me(xy,`Failed to update sequence numbers for target ${e}: ${u}`)}i.Ms=i.Ms.remove(e),i.xs.delete(s.target)}function mA(t,e,n){const i=Me(t);let s=Re.min(),a=Ge();return i.persistence.runTransaction("Execute query","readwrite",(u=>(function(p,h,v){const E=Me(p),S=E.xs.get(v);return S!==void 0?ae.resolve(E.Ms.get(S)):E.Pi.getTargetData(h,v)})(i,u,Wi(e)).next((d=>{if(d)return s=d.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(u,d.targetId).next((p=>{a=p}))})).next((()=>i.Fs.getDocumentsMatchingQuery(u,e,n?s:Re.min(),n?a:Ge()))).next((d=>(h5(i,W3(e),d),{documents:d,Qs:a})))))}function h5(t,e,n){let i=t.Os.get(e)||Re.min();n.forEach(((s,a)=>{a.readTime.compareTo(i)>0&&(i=a.readTime)})),t.Os.set(e,i)}class gA{constructor(){this.activeTargetIds=r6()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class p5{constructor(){this.Mo=new gA,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,i){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new gA,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m5{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yA="ConnectivityMonitor";class vA{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){me(yA,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){me(yA,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xd=null;function Ng(){return Xd===null?Xd=(function(){return 268435456+Math.round(2147483648*Math.random())})():Xd++,"0x"+Xd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Om="RestConnection",g5={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class y5{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${i}/databases/${s}`,this.Wo=this.databaseId.database===xf?`project_id=${i}`:`project_id=${i}&database_id=${s}`}Go(e,n,i,s,a){const u=Ng(),d=this.zo(e,n.toUriEncodedString());me(Om,`Sending RPC '${e}' ${u}:`,d,i);const p={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(p,s,a);const{host:h}=new URL(d),v=sl(h);return this.Jo(e,d,p,i,v).then((E=>(me(Om,`Received RPC '${e}' ${u}: `,E),E)),(E=>{throw Ya(Om,`RPC '${e}' ${u} failed with error: `,E,"url: ",d,"request:",i),E}))}Ho(e,n,i,s,a,u){return this.Go(e,n,i,s,a)}jo(e,n,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+al})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((s,a)=>e[a]=s)),i&&i.headers.forEach(((s,a)=>e[a]=s))}zo(e,n){const i=g5[e];return`${this.Uo}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v5{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const on="WebChannelConnection";class _5 extends y5{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,i,s,a){const u=Ng();return new Promise(((d,p)=>{const h=new nC;h.setWithCredentials(!0),h.listenOnce(iC.COMPLETE,(()=>{try{switch(h.getLastErrorCode()){case of.NO_ERROR:const E=h.getResponseJson();me(on,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(E)),d(E);break;case of.TIMEOUT:me(on,`RPC '${e}' ${u} timed out`),p(new pe(re.DEADLINE_EXCEEDED,"Request time out"));break;case of.HTTP_ERROR:const S=h.getStatus();if(me(on,`RPC '${e}' ${u} failed with status:`,S,"response text:",h.getResponseText()),S>0){let C=h.getResponseJson();Array.isArray(C)&&(C=C[0]);const D=C==null?void 0:C.error;if(D&&D.status&&D.message){const U=(function(q){const X=q.toLowerCase().replace(/_/g,"-");return Object.values(re).indexOf(X)>=0?X:re.UNKNOWN})(D.status);p(new pe(U,D.message))}else p(new pe(re.UNKNOWN,"Server responded with status "+h.getStatus()))}else p(new pe(re.UNAVAILABLE,"Connection failed."));break;default:we(9055,{l_:e,streamId:u,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{me(on,`RPC '${e}' ${u} completed.`)}}));const v=JSON.stringify(s);me(on,`RPC '${e}' ${u} sending request:`,s),h.send(n,"POST",v,i,15)}))}T_(e,n,i){const s=Ng(),a=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=oC(),d=sC(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(p.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(p.useFetchStreams=!0),this.jo(p.initMessageHeaders,n,i),p.encodeInitMessageHeaders=!0;const v=a.join("");me(on,`Creating RPC '${e}' stream ${s}: ${v}`,p);const E=u.createWebChannel(v,p);this.I_(E);let S=!1,C=!1;const D=new v5({Yo:P=>{C?me(on,`Not sending because RPC '${e}' stream ${s} is closed:`,P):(S||(me(on,`Opening RPC '${e}' stream ${s} transport.`),E.open(),S=!0),me(on,`RPC '${e}' stream ${s} sending:`,P),E.send(P))},Zo:()=>E.close()}),U=(P,q,X)=>{P.listen(q,(H=>{try{X(H)}catch(ne){setTimeout((()=>{throw ne}),0)}}))};return U(E,xu.EventType.OPEN,(()=>{C||(me(on,`RPC '${e}' stream ${s} transport opened.`),D.o_())})),U(E,xu.EventType.CLOSE,(()=>{C||(C=!0,me(on,`RPC '${e}' stream ${s} transport closed`),D.a_(),this.E_(E))})),U(E,xu.EventType.ERROR,(P=>{C||(C=!0,Ya(on,`RPC '${e}' stream ${s} transport errored. Name:`,P.name,"Message:",P.message),D.a_(new pe(re.UNAVAILABLE,"The operation could not be completed")))})),U(E,xu.EventType.MESSAGE,(P=>{var q;if(!C){const X=P.data[0];Ze(!!X,16349);const H=X,ne=(H==null?void 0:H.error)||((q=H[0])==null?void 0:q.error);if(ne){me(on,`RPC '${e}' stream ${s} received error:`,ne);const le=ne.status;let ce=(function(R){const V=Vt[R];if(V!==void 0)return HC(V)})(le),N=ne.message;ce===void 0&&(ce=re.INTERNAL,N="Unknown error status: "+le+" with message "+ne.message),C=!0,D.a_(new pe(ce,N)),E.close()}else me(on,`RPC '${e}' stream ${s} received:`,X),D.u_(X)}})),U(d,rC.STAT_EVENT,(P=>{P.stat===yg.PROXY?me(on,`RPC '${e}' stream ${s} detected buffering proxy`):P.stat===yg.NOPROXY&&me(on,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{D.__()}),0),D}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function Fm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uh(t){return new A6(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tI{constructor(e,n,i=1e3,s=1.5,a=6e4){this.Mi=e,this.timerId=n,this.d_=i,this.A_=s,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-i);s>0&&me("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _A="PersistentStream";class nI{constructor(e,n,i,s,a,u,d,p){this.Mi=e,this.S_=i,this.b_=s,this.connection=a,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=d,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new tI(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===re.RESOURCE_EXHAUSTED?(kr(n.toString()),kr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===re.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,s])=>{this.D_===n&&this.G_(i,s)}),(i=>{e((()=>{const s=new pe(re.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(s)}))}))}G_(e,n){const i=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((s=>{i((()=>this.z_(s)))})),this.stream.onMessage((s=>{i((()=>++this.F_==1?this.J_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return me(_A,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(me(_A,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class E5 extends nI{constructor(e,n,i,s,a,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,s,u),this.serializer=a}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=C6(this.serializer,e),i=(function(a){if(!("targetChange"in a))return Re.min();const u=a.targetChange;return u.targetIds&&u.targetIds.length?Re.min():u.readTime?Zi(u.readTime):Re.min()})(e);return this.listener.H_(n,i)}Y_(e){const n={};n.database=bg(this.serializer),n.addTarget=(function(a,u){let d;const p=u.target;if(d=Sg(p)?{documents:R6(a,p)}:{query:N6(a,p).ft},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){d.resumeToken=GC(a,u.resumeToken);const h=xg(a,u.expectedCount);h!==null&&(d.expectedCount=h)}else if(u.snapshotVersion.compareTo(Re.min())>0){d.readTime=Nf(a,u.snapshotVersion.toTimestamp());const h=xg(a,u.expectedCount);h!==null&&(d.expectedCount=h)}return d})(this.serializer,e);const i=D6(this.serializer,e);i&&(n.labels=i),this.q_(n)}Z_(e){const n={};n.database=bg(this.serializer),n.removeTarget=e,this.q_(n)}}class T5 extends nI{constructor(e,n,i,s,a,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,s,u),this.serializer=a}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Ze(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ze(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ze(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=b6(e.writeResults,e.commitTime),i=Zi(e.commitTime);return this.listener.na(i,n)}ra(){const e={};e.database=bg(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((i=>I6(this.serializer,i)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S5{}class A5 extends S5{constructor(e,n,i,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new pe(re.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,u])=>this.connection.Go(e,Cg(n,i),s,a,u))).catch((a=>{throw a.name==="FirebaseError"?(a.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new pe(re.UNKNOWN,a.toString())}))}Ho(e,n,i,s,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,d])=>this.connection.Ho(e,Cg(n,i),s,u,d,a))).catch((u=>{throw u.name==="FirebaseError"?(u.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new pe(re.UNKNOWN,u.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class w5{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(kr(n),this.aa=!1):me("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bo="RemoteStore";class x5{constructor(e,n,i,s,a){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=a,this.Aa.Oo((u=>{i.enqueueAndForget((async()=>{Fo(this)&&(me(bo,"Restarting streams for network reachability change."),await(async function(p){const h=Me(p);h.Ea.add(4),await ic(h),h.Ra.set("Unknown"),h.Ea.delete(4),await ch(h)})(this))}))})),this.Ra=new w5(i,s)}}async function ch(t){if(Fo(t))for(const e of t.da)await e(!0)}async function ic(t){for(const e of t.da)await e(!1)}function iI(t,e){const n=Me(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Ry(n)?by(n):dl(n).O_()&&Iy(n,e))}function Cy(t,e){const n=Me(t),i=dl(n);n.Ia.delete(e),i.O_()&&rI(n,e),n.Ia.size===0&&(i.O_()?i.L_():Fo(n)&&n.Ra.set("Unknown"))}function Iy(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Re.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}dl(t).Y_(e)}function rI(t,e){t.Va.Ue(e),dl(t).Z_(e)}function by(t){t.Va=new _6({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),dl(t).start(),t.Ra.ua()}function Ry(t){return Fo(t)&&!dl(t).x_()&&t.Ia.size>0}function Fo(t){return Me(t).Ea.size===0}function sI(t){t.Va=void 0}async function C5(t){t.Ra.set("Online")}async function I5(t){t.Ia.forEach(((e,n)=>{Iy(t,e)}))}async function b5(t,e){sI(t),Ry(t)?(t.Ra.ha(e),by(t)):t.Ra.set("Unknown")}async function R5(t,e,n){if(t.Ra.set("Online"),e instanceof zC&&e.state===2&&e.cause)try{await(async function(s,a){const u=a.cause;for(const d of a.targetIds)s.Ia.has(d)&&(await s.remoteSyncer.rejectListen(d,u),s.Ia.delete(d),s.Va.removeTarget(d))})(t,e)}catch(i){me(bo,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Df(t,i)}else if(e instanceof cf?t.Va.Ze(e):e instanceof BC?t.Va.st(e):t.Va.tt(e),!n.isEqual(Re.min()))try{const i=await eI(t.localStore);n.compareTo(i)>=0&&await(function(a,u){const d=a.Va.Tt(u);return d.targetChanges.forEach(((p,h)=>{if(p.resumeToken.approximateByteSize()>0){const v=a.Ia.get(h);v&&a.Ia.set(h,v.withResumeToken(p.resumeToken,u))}})),d.targetMismatches.forEach(((p,h)=>{const v=a.Ia.get(p);if(!v)return;a.Ia.set(p,v.withResumeToken(rn.EMPTY_BYTE_STRING,v.snapshotVersion)),rI(a,p);const E=new ws(v.target,p,h,v.sequenceNumber);Iy(a,E)})),a.remoteSyncer.applyRemoteEvent(d)})(t,n)}catch(i){me(bo,"Failed to raise snapshot:",i),await Df(t,i)}}async function Df(t,e,n){if(!ul(e))throw e;t.Ea.add(1),await ic(t),t.Ra.set("Offline"),n||(n=()=>eI(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{me(bo,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await ch(t)}))}function oI(t,e){return e().catch((n=>Df(t,n,e)))}async function dh(t){const e=Me(t),n=Vs(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:fy;for(;N5(e);)try{const s=await d5(e.localStore,i);if(s===null){e.Ta.length===0&&n.L_();break}i=s.batchId,M5(e,s)}catch(s){await Df(e,s)}aI(e)&&lI(e)}function N5(t){return Fo(t)&&t.Ta.length<10}function M5(t,e){t.Ta.push(e);const n=Vs(t);n.O_()&&n.X_&&n.ea(e.mutations)}function aI(t){return Fo(t)&&!Vs(t).x_()&&t.Ta.length>0}function lI(t){Vs(t).start()}async function D5(t){Vs(t).ra()}async function P5(t){const e=Vs(t);for(const n of t.Ta)e.ea(n.mutations)}async function k5(t,e,n){const i=t.Ta.shift(),s=_y.from(i,e,n);await oI(t,(()=>t.remoteSyncer.applySuccessfulWrite(s))),await dh(t)}async function V5(t,e){e&&Vs(t).X_&&await(async function(i,s){if((function(u){return g6(u)&&u!==re.ABORTED})(s.code)){const a=i.Ta.shift();Vs(i).B_(),await oI(i,(()=>i.remoteSyncer.rejectFailedWrite(a.batchId,s))),await dh(i)}})(t,e),aI(t)&&lI(t)}async function EA(t,e){const n=Me(t);n.asyncQueue.verifyOperationInProgress(),me(bo,"RemoteStore received new credentials");const i=Fo(n);n.Ea.add(3),await ic(n),i&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await ch(n)}async function L5(t,e){const n=Me(t);e?(n.Ea.delete(2),await ch(n)):e||(n.Ea.add(2),await ic(n),n.Ra.set("Unknown"))}function dl(t){return t.ma||(t.ma=(function(n,i,s){const a=Me(n);return a.sa(),new E5(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)})(t.datastore,t.asyncQueue,{Xo:C5.bind(null,t),t_:I5.bind(null,t),r_:b5.bind(null,t),H_:R5.bind(null,t)}),t.da.push((async e=>{e?(t.ma.B_(),Ry(t)?by(t):t.Ra.set("Unknown")):(await t.ma.stop(),sI(t))}))),t.ma}function Vs(t){return t.fa||(t.fa=(function(n,i,s){const a=Me(n);return a.sa(),new T5(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)})(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:D5.bind(null,t),r_:V5.bind(null,t),ta:P5.bind(null,t),na:k5.bind(null,t)}),t.da.push((async e=>{e?(t.fa.B_(),await dh(t)):(await t.fa.stop(),t.Ta.length>0&&(me(bo,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ny{constructor(e,n,i,s,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=s,this.removalCallback=a,this.deferred=new bs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,s,a){const u=Date.now()+i,d=new Ny(e,n,u,s,a);return d.start(i),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new pe(re.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function My(t,e){if(kr("AsyncQueue",`${e}: ${t}`),ul(t))return new pe(re.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba{static emptySet(e){return new Ba(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||Te.comparator(n.key,i.key):(n,i)=>Te.comparator(n.key,i.key),this.keyedMap=Cu(),this.sortedSet=new yt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,i)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ba)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,a=i.getNext().key;if(!s.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new Ba;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TA{constructor(){this.ga=new yt(Te.comparator)}track(e){const n=e.doc.key,i=this.ga.get(n);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(n,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(n):e.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):we(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,i)=>{e.push(i)})),e}}class el{constructor(e,n,i,s,a,u,d,p,h){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=a,this.fromCache=u,this.syncStateChanged=d,this.excludesMetadataChanges=p,this.hasCachedResults=h}static fromInitialDocuments(e,n,i,s,a){const u=[];return n.forEach((d=>{u.push({type:0,doc:d})})),new el(e,n,Ba.emptySet(n),u,i,s,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&rh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==i[s].type||!n[s].doc.isEqual(i[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U5{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class O5{constructor(){this.queries=SA(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const s=Me(n),a=s.queries;s.queries=SA(),a.forEach(((u,d)=>{for(const p of d.Sa)p.onError(i)}))})(this,new pe(re.ABORTED,"Firestore shutting down"))}}function SA(){return new Oo((t=>RC(t)),rh)}async function F5(t,e){const n=Me(t);let i=3;const s=e.query;let a=n.queries.get(s);a?!a.ba()&&e.Da()&&(i=2):(a=new U5,i=e.Da()?0:1);try{switch(i){case 0:a.wa=await n.onListen(s,!0);break;case 1:a.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(u){const d=My(u,`Initialization of query '${ka(e.query)}' failed`);return void e.onError(d)}n.queries.set(s,a),a.Sa.push(e),e.va(n.onlineState),a.wa&&e.Fa(a.wa)&&Dy(n)}async function q5(t,e){const n=Me(t),i=e.query;let s=3;const a=n.queries.get(i);if(a){const u=a.Sa.indexOf(e);u>=0&&(a.Sa.splice(u,1),a.Sa.length===0?s=e.Da()?0:1:!a.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function H5(t,e){const n=Me(t);let i=!1;for(const s of e){const a=s.query,u=n.queries.get(a);if(u){for(const d of u.Sa)d.Fa(s)&&(i=!0);u.wa=s}}i&&Dy(n)}function B5(t,e,n){const i=Me(t),s=i.queries.get(e);if(s)for(const a of s.Sa)a.onError(n);i.queries.delete(e)}function Dy(t){t.Ca.forEach((e=>{e.next()}))}var Mg,AA;(AA=Mg||(Mg={})).Ma="default",AA.Cache="cache";class z5{constructor(e,n,i){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const s of e.docChanges)s.type!==3&&i.push(s);e=new el(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=el.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Mg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uI{constructor(e){this.key=e}}class cI{constructor(e){this.key=e}}class G5{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ge(),this.mutatedKeys=Ge(),this.eu=NC(e),this.tu=new Ba(this.eu)}get nu(){return this.Ya}ru(e,n){const i=n?n.iu:new TA,s=n?n.tu:this.tu;let a=n?n.mutatedKeys:this.mutatedKeys,u=s,d=!1;const p=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,h=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((v,E)=>{const S=s.get(v),C=sh(this.query,E)?E:null,D=!!S&&this.mutatedKeys.has(S.key),U=!!C&&(C.hasLocalMutations||this.mutatedKeys.has(C.key)&&C.hasCommittedMutations);let P=!1;S&&C?S.data.isEqual(C.data)?D!==U&&(i.track({type:3,doc:C}),P=!0):this.su(S,C)||(i.track({type:2,doc:C}),P=!0,(p&&this.eu(C,p)>0||h&&this.eu(C,h)<0)&&(d=!0)):!S&&C?(i.track({type:0,doc:C}),P=!0):S&&!C&&(i.track({type:1,doc:S}),P=!0,(p||h)&&(d=!0)),P&&(C?(u=u.add(C),a=U?a.add(v):a.delete(v)):(u=u.delete(v),a=a.delete(v)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const v=this.query.limitType==="F"?u.last():u.first();u=u.delete(v.key),a=a.delete(v.key),i.track({type:1,doc:v})}return{tu:u,iu:i,Cs:d,mutatedKeys:a}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,s){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const u=e.iu.ya();u.sort(((v,E)=>(function(C,D){const U=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return we(20277,{Rt:P})}};return U(C)-U(D)})(v.type,E.type)||this.eu(v.doc,E.doc))),this.ou(i),s=s??!1;const d=n&&!s?this._u():[],p=this.Xa.size===0&&this.current&&!s?1:0,h=p!==this.Za;return this.Za=p,u.length!==0||h?{snapshot:new el(this.query,e.tu,a,u,e.mutatedKeys,p===0,h,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:d}:{au:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new TA,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ge(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const n=[];return e.forEach((i=>{this.Xa.has(i)||n.push(new cI(i))})),this.Xa.forEach((i=>{e.has(i)||n.push(new uI(i))})),n}cu(e){this.Ya=e.Qs,this.Xa=Ge();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return el.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Py="SyncEngine";class $5{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class j5{constructor(e){this.key=e,this.hu=!1}}class J5{constructor(e,n,i,s,a,u){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=s,this.currentUser=a,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new Oo((d=>RC(d)),rh),this.Iu=new Map,this.Eu=new Set,this.du=new yt(Te.comparator),this.Au=new Map,this.Ru=new Sy,this.Vu={},this.mu=new Map,this.fu=Za.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function K5(t,e,n=!0){const i=gI(t);let s;const a=i.Tu.get(e);return a?(i.sharedClientState.addLocalQueryTarget(a.targetId),s=a.view.lu()):s=await dI(i,e,n,!0),s}async function Y5(t,e){const n=gI(t);await dI(n,e,!0,!1)}async function dI(t,e,n,i){const s=await f5(t.localStore,Wi(e)),a=s.targetId,u=t.sharedClientState.addLocalQueryTarget(a,n);let d;return i&&(d=await Q5(t,e,a,u==="current",s.resumeToken)),t.isPrimaryClient&&n&&iI(t.remoteStore,s),d}async function Q5(t,e,n,i,s){t.pu=(E,S,C)=>(async function(U,P,q,X){let H=P.view.ru(q);H.Cs&&(H=await mA(U.localStore,P.query,!1).then((({documents:N})=>P.view.ru(N,H))));const ne=X&&X.targetChanges.get(P.targetId),le=X&&X.targetMismatches.get(P.targetId)!=null,ce=P.view.applyChanges(H,U.isPrimaryClient,ne,le);return xA(U,P.targetId,ce.au),ce.snapshot})(t,E,S,C);const a=await mA(t.localStore,e,!0),u=new G5(e,a.Qs),d=u.ru(a.documents),p=nc.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",s),h=u.applyChanges(d,t.isPrimaryClient,p);xA(t,n,h.au);const v=new $5(e,n,u);return t.Tu.set(e,v),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),h.snapshot}async function X5(t,e,n){const i=Me(t),s=i.Tu.get(e),a=i.Iu.get(s.targetId);if(a.length>1)return i.Iu.set(s.targetId,a.filter((u=>!rh(u,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||await Rg(i.localStore,s.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(s.targetId),n&&Cy(i.remoteStore,s.targetId),Dg(i,s.targetId)})).catch(ll)):(Dg(i,s.targetId),await Rg(i.localStore,s.targetId,!0))}async function W5(t,e){const n=Me(t),i=n.Tu.get(e),s=n.Iu.get(i.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),Cy(n.remoteStore,i.targetId))}async function Z5(t,e,n){const i=oF(t);try{const s=await(function(u,d){const p=Me(u),h=ft.now(),v=d.reduce(((C,D)=>C.add(D.key)),Ge());let E,S;return p.persistence.runTransaction("Locally write mutations","readwrite",(C=>{let D=Vr(),U=Ge();return p.Ns.getEntries(C,v).next((P=>{D=P,D.forEach(((q,X)=>{X.isValidDocument()||(U=U.add(q))}))})).next((()=>p.localDocuments.getOverlayedDocuments(C,D))).next((P=>{E=P;const q=[];for(const X of d){const H=d6(X,E.get(X.key).overlayedDocument);H!=null&&q.push(new qs(X.key,H,EC(H.value.mapValue),Si.exists(!0)))}return p.mutationQueue.addMutationBatch(C,h,q,d)})).next((P=>{S=P;const q=P.applyToLocalDocumentSet(E,U);return p.documentOverlayCache.saveOverlays(C,P.batchId,q)}))})).then((()=>({batchId:S.batchId,changes:DC(E)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(s.batchId),(function(u,d,p){let h=u.Vu[u.currentUser.toKey()];h||(h=new yt(ze)),h=h.insert(d,p),u.Vu[u.currentUser.toKey()]=h})(i,s.batchId,n),await rc(i,s.changes),await dh(i.remoteStore)}catch(s){const a=My(s,"Failed to persist write");n.reject(a)}}async function fI(t,e){const n=Me(t);try{const i=await u5(n.localStore,e);e.targetChanges.forEach(((s,a)=>{const u=n.Au.get(a);u&&(Ze(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?u.hu=!0:s.modifiedDocuments.size>0?Ze(u.hu,14607):s.removedDocuments.size>0&&(Ze(u.hu,42227),u.hu=!1))})),await rc(n,i,e)}catch(i){await ll(i)}}function wA(t,e,n){const i=Me(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const s=[];i.Tu.forEach(((a,u)=>{const d=u.view.va(e);d.snapshot&&s.push(d.snapshot)})),(function(u,d){const p=Me(u);p.onlineState=d;let h=!1;p.queries.forEach(((v,E)=>{for(const S of E.Sa)S.va(d)&&(h=!0)})),h&&Dy(p)})(i.eventManager,e),s.length&&i.Pu.H_(s),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function eF(t,e,n){const i=Me(t);i.sharedClientState.updateQueryState(e,"rejected",n);const s=i.Au.get(e),a=s&&s.key;if(a){let u=new yt(Te.comparator);u=u.insert(a,un.newNoDocument(a,Re.min()));const d=Ge().add(a),p=new lh(Re.min(),new Map,new yt(ze),u,d);await fI(i,p),i.du=i.du.remove(a),i.Au.delete(e),ky(i)}else await Rg(i.localStore,e,!1).then((()=>Dg(i,e,n))).catch(ll)}async function tF(t,e){const n=Me(t),i=e.batch.batchId;try{const s=await l5(n.localStore,e);pI(n,i,null),hI(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await rc(n,s)}catch(s){await ll(s)}}async function nF(t,e,n){const i=Me(t);try{const s=await(function(u,d){const p=Me(u);return p.persistence.runTransaction("Reject batch","readwrite-primary",(h=>{let v;return p.mutationQueue.lookupMutationBatch(h,d).next((E=>(Ze(E!==null,37113),v=E.keys(),p.mutationQueue.removeMutationBatch(h,E)))).next((()=>p.mutationQueue.performConsistencyCheck(h))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(h,v,d))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,v))).next((()=>p.localDocuments.getDocuments(h,v)))}))})(i.localStore,e);pI(i,e,n),hI(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await rc(i,s)}catch(s){await ll(s)}}function hI(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function pI(t,e,n){const i=Me(t);let s=i.Vu[i.currentUser.toKey()];if(s){const a=s.get(e);a&&(n?a.reject(n):a.resolve(),s=s.remove(e)),i.Vu[i.currentUser.toKey()]=s}}function Dg(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Iu.get(e))t.Tu.delete(i),n&&t.Pu.yu(i,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach((i=>{t.Ru.containsKey(i)||mI(t,i)}))}function mI(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Cy(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),ky(t))}function xA(t,e,n){for(const i of n)i instanceof uI?(t.Ru.addReference(i.key,e),iF(t,i)):i instanceof cI?(me(Py,"Document no longer in limbo: "+i.key),t.Ru.removeReference(i.key,e),t.Ru.containsKey(i.key)||mI(t,i.key)):we(19791,{wu:i})}function iF(t,e){const n=e.key,i=n.path.canonicalString();t.du.get(n)||t.Eu.has(i)||(me(Py,"New document in limbo: "+n),t.Eu.add(i),ky(t))}function ky(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new Te(ut.fromString(e)),i=t.fu.next();t.Au.set(i,new j5(n)),t.du=t.du.insert(n,i),iI(t.remoteStore,new ws(Wi(IC(n.path)),i,"TargetPurposeLimboResolution",th.ce))}}async function rc(t,e,n){const i=Me(t),s=[],a=[],u=[];i.Tu.isEmpty()||(i.Tu.forEach(((d,p)=>{u.push(i.pu(p,e,n).then((h=>{var v;if((h||n)&&i.isPrimaryClient){const E=h?!h.fromCache:(v=n==null?void 0:n.targetChanges.get(p.targetId))==null?void 0:v.current;i.sharedClientState.updateQueryState(p.targetId,E?"current":"not-current")}if(h){s.push(h);const E=wy.As(p.targetId,h);a.push(E)}})))})),await Promise.all(u),i.Pu.H_(s),await(async function(p,h){const v=Me(p);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>ae.forEach(h,(S=>ae.forEach(S.Es,(C=>v.persistence.referenceDelegate.addReference(E,S.targetId,C))).next((()=>ae.forEach(S.ds,(C=>v.persistence.referenceDelegate.removeReference(E,S.targetId,C)))))))))}catch(E){if(!ul(E))throw E;me(xy,"Failed to update sequence numbers: "+E)}for(const E of h){const S=E.targetId;if(!E.fromCache){const C=v.Ms.get(S),D=C.snapshotVersion,U=C.withLastLimboFreeSnapshotVersion(D);v.Ms=v.Ms.insert(S,U)}}})(i.localStore,a))}async function rF(t,e){const n=Me(t);if(!n.currentUser.isEqual(e)){me(Py,"User change. New user:",e.toKey());const i=await ZC(n.localStore,e);n.currentUser=e,(function(a,u){a.mu.forEach((d=>{d.forEach((p=>{p.reject(new pe(re.CANCELLED,u))}))})),a.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await rc(n,i.Ls)}}function sF(t,e){const n=Me(t),i=n.Au.get(e);if(i&&i.hu)return Ge().add(i.key);{let s=Ge();const a=n.Iu.get(e);if(!a)return s;for(const u of a){const d=n.Tu.get(u);s=s.unionWith(d.view.nu)}return s}}function gI(t){const e=Me(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=fI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=sF.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=eF.bind(null,e),e.Pu.H_=H5.bind(null,e.eventManager),e.Pu.yu=B5.bind(null,e.eventManager),e}function oF(t){const e=Me(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=tF.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=nF.bind(null,e),e}class Pf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=uh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return a5(this.persistence,new r5,e.initialUser,this.serializer)}Cu(e){return new WC(Ay.mi,this.serializer)}Du(e){return new p5}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Pf.provider={build:()=>new Pf};class aF extends Pf{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Ze(this.persistence.referenceDelegate instanceof Mf,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new z6(i,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Cn.withCacheSize(this.cacheSizeBytes):Cn.DEFAULT;return new WC((i=>Mf.mi(i,n)),this.serializer)}}class Pg{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>wA(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=rF.bind(null,this.syncEngine),await L5(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new O5})()}createDatastore(e){const n=uh(e.databaseInfo.databaseId),i=(function(a){return new _5(a)})(e.databaseInfo);return(function(a,u,d,p){return new A5(a,u,d,p)})(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return(function(i,s,a,u,d){return new x5(i,s,a,u,d)})(this.localStore,this.datastore,e.asyncQueue,(n=>wA(this.syncEngine,n,0)),(function(){return vA.v()?new vA:new m5})())}createSyncEngine(e,n){return(function(s,a,u,d,p,h,v){const E=new J5(s,a,u,d,p,h);return v&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(s){const a=Me(s);me(bo,"RemoteStore shutting down."),a.Ea.add(5),await ic(a),a.Aa.shutdown(),a.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Pg.provider={build:()=>new Pg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lF{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):kr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ls="FirestoreClient";class uF{constructor(e,n,i,s,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=s,this.user=ln.UNAUTHENTICATED,this.clientId=dy.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(i,(async u=>{me(Ls,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(i,(u=>(me(Ls,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new bs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=My(n,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function qm(t,e){t.asyncQueue.verifyOperationInProgress(),me(Ls,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener((async s=>{i.isEqual(s)||(await ZC(e.localStore,s),i=s)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function CA(t,e){t.asyncQueue.verifyOperationInProgress();const n=await cF(t);me(Ls,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((i=>EA(e.remoteStore,i))),t.setAppCheckTokenChangeListener(((i,s)=>EA(e.remoteStore,s))),t._onlineComponents=e}async function cF(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){me(Ls,"Using user provided OfflineComponentProvider");try{await qm(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(s){return s.name==="FirebaseError"?s.code===re.FAILED_PRECONDITION||s.code===re.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(n))throw n;Ya("Error using user provided cache. Falling back to memory cache: "+n),await qm(t,new Pf)}}else me(Ls,"Using default OfflineComponentProvider"),await qm(t,new aF(void 0));return t._offlineComponents}async function yI(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(me(Ls,"Using user provided OnlineComponentProvider"),await CA(t,t._uninitializedComponentsProvider._online)):(me(Ls,"Using default OnlineComponentProvider"),await CA(t,new Pg))),t._onlineComponents}function dF(t){return yI(t).then((e=>e.syncEngine))}async function fF(t){const e=await yI(t),n=e.eventManager;return n.onListen=K5.bind(null,e.syncEngine),n.onUnlisten=X5.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Y5.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=W5.bind(null,e.syncEngine),n}function hF(t,e,n={}){const i=new bs;return t.asyncQueue.enqueueAndForget((async()=>(function(a,u,d,p,h){const v=new lF({next:S=>{v.Nu(),u.enqueueAndForget((()=>q5(a,E))),S.fromCache&&p.source==="server"?h.reject(new pe(re.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(S)},error:S=>h.reject(S)}),E=new z5(d,v,{includeMetadataChanges:!0,qa:!0});return F5(a,E)})(await fF(t),t.asyncQueue,e,n,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vI(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IA=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _I="firestore.googleapis.com",bA=!0;class RA{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new pe(re.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=_I,this.ssl=bA}else this.host=e.host,this.ssl=e.ssl??bA;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=XC;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<H6)throw new pe(re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}x3("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=vI(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new pe(re.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new pe(re.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new pe(re.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,s){return i.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class fh{constructor(e,n,i,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new RA({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new pe(re.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new pe(re.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new RA(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new m3;switch(i.type){case"firstParty":return new _3(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new pe(re.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const i=IA.get(n);i&&(me("ComponentProvider","Removing Datastore"),IA.delete(n),i.terminate())})(this),Promise.resolve()}}function pF(t,e,n,i={}){var h;t=Io(t,fh);const s=sl(e),a=t._getSettings(),u={...a,emulatorOptions:t._getEmulatorOptions()},d=`${e}:${n}`;s&&(Gx(`https://${d}`),$x("Firestore",!0)),a.host!==_I&&a.host!==d&&Ya("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...a,host:d,ssl:s,emulatorOptions:i};if(!Ns(p,u)&&(t._setSettings(p),i.mockUserToken)){let v,E;if(typeof i.mockUserToken=="string")v=i.mockUserToken,E=ln.MOCK_USER;else{v=H4(i.mockUserToken,(h=t._app)==null?void 0:h.options.projectId);const S=i.mockUserToken.sub||i.mockUserToken.user_id;if(!S)throw new pe(re.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new ln(S)}t._authCredentials=new g3(new lC(v,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new qo(this.firestore,e,this._query)}}class Bt{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Rs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Bt(this.firestore,e,this._key)}toJSON(){return{type:Bt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(ec(n,Bt._jsonSchema))return new Bt(e,i||null,new Te(ut.fromString(n.referencePath)))}}Bt._jsonSchemaVersion="firestore/documentReference/1.0",Bt._jsonSchema={type:Ut("string",Bt._jsonSchemaVersion),referencePath:Ut("string")};class Rs extends qo{constructor(e,n,i){super(e,n,IC(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Bt(this.firestore,null,new Te(e))}withConverter(e){return new Rs(this.firestore,e,this._path)}}function To(t,e,...n){if(t=Ot(t),uC("collection","path",e),t instanceof fh){const i=ut.fromString(e,...n);return BS(i),new Rs(t,null,i)}{if(!(t instanceof Bt||t instanceof Rs))throw new pe(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(ut.fromString(e,...n));return BS(i),new Rs(t.firestore,null,i)}}function bu(t,e,...n){if(t=Ot(t),arguments.length===1&&(e=dy.newId()),uC("doc","path",e),t instanceof fh){const i=ut.fromString(e,...n);return HS(i),new Bt(t,null,new Te(i))}{if(!(t instanceof Bt||t instanceof Rs))throw new pe(re.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(ut.fromString(e,...n));return HS(i),new Bt(t.firestore,t instanceof Rs?t.converter:null,new Te(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NA="AsyncQueue";class MA{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new tI(this,"async_queue_retry"),this._c=()=>{const i=Fm();i&&me(NA,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const n=Fm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Fm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new bs;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ul(e))throw e;me(NA,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,kr("INTERNAL UNHANDLED ERROR: ",DA(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=n,n}enqueueAfterDelay(e,n,i){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=Ny.createAndSchedule(this,e,n,i,(a=>this.hc(a)));return this.tc.push(s),s}uc(){this.nc&&we(47125,{Pc:DA(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,i)=>n.targetTimeMs-i.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function DA(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class sc extends fh{constructor(e,n,i,s){super(e,n,i,s),this.type="firestore",this._queue=new MA,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new MA(e),this._firestoreClient=void 0,await e}}}function mF(t,e){const n=typeof t=="object"?t:uy(),i=typeof t=="string"?t:xf,s=Uo(n,"firestore").getImmediate({identifier:i});if(!s._initialized){const a=F4("firestore");a&&pF(s,...a)}return s}function EI(t){if(t._terminated)throw new pe(re.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||gF(t),t._firestoreClient}function gF(t){var i,s,a;const e=t._freezeSettings(),n=(function(d,p,h,v){return new L3(d,p,h,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,vI(v.experimentalLongPollingOptions),v.useFetchStreams,v.isUsingEmulator)})(t._databaseId,((i=t._app)==null?void 0:i.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((a=e.localCache)!=null&&a._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new uF(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(d){const p=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(p),_online:p}})(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ti(rn.fromBase64String(e))}catch(n){throw new pe(re.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ti(rn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ti._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ec(e,ti._jsonSchema))return ti.fromBase64String(e.bytes)}}ti._jsonSchemaVersion="firestore/bytes/1.0",ti._jsonSchema={type:Ut("string",ti._jsonSchemaVersion),bytes:Ut("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hh{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new pe(re.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new nn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vy{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new pe(re.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new pe(re.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ze(this._lat,e._lat)||ze(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:er._jsonSchemaVersion}}static fromJSON(e){if(ec(e,er._jsonSchema))return new er(e.latitude,e.longitude)}}er._jsonSchemaVersion="firestore/geoPoint/1.0",er._jsonSchema={type:Ut("string",er._jsonSchemaVersion),latitude:Ut("number"),longitude:Ut("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,s){if(i.length!==s.length)return!1;for(let a=0;a<i.length;++a)if(i[a]!==s[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:tr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ec(e,tr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new tr(e.vectorValues);throw new pe(re.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}tr._jsonSchemaVersion="firestore/vectorValue/1.0",tr._jsonSchema={type:Ut("string",tr._jsonSchemaVersion),vectorValues:Ut("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yF=/^__.*__$/;class vF{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new qs(e,this.data,this.fieldMask,n,this.fieldTransforms):new tc(e,this.data,n,this.fieldTransforms)}}class TI{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new qs(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function SI(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw we(40011,{Ac:t})}}class Ly{constructor(e,n,i,s,a,u){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=s,a===void 0&&this.Rc(),this.fieldTransforms=a||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Ly({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),i=this.Vc({path:n,fc:!1});return i.gc(e),i}yc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),i=this.Vc({path:n,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return kf(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(SI(this.Ac)&&yF.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class _F{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||uh(e)}Cc(e,n,i,s=!1){return new Ly({Ac:e,methodName:n,Dc:i,path:nn.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Uy(t){const e=t._freezeSettings(),n=uh(t._databaseId);return new _F(t._databaseId,!!e.ignoreUndefinedProperties,n)}function EF(t,e,n,i,s,a={}){const u=t.Cc(a.merge||a.mergeFields?2:0,e,n,s);Oy("Data must be an object, but it was:",u,i);const d=AI(i,u);let p,h;if(a.merge)p=new On(u.fieldMask),h=u.fieldTransforms;else if(a.mergeFields){const v=[];for(const E of a.mergeFields){const S=kg(e,E,n);if(!u.contains(S))throw new pe(re.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);xI(v,S)||v.push(S)}p=new On(v),h=u.fieldTransforms.filter((E=>p.covers(E.field)))}else p=null,h=u.fieldTransforms;return new vF(new In(d),p,h)}class ph extends Vy{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ph}}function TF(t,e,n,i){const s=t.Cc(1,e,n);Oy("Data must be an object, but it was:",s,i);const a=[],u=In.empty();Fs(i,((p,h)=>{const v=Fy(e,p,n);h=Ot(h);const E=s.yc(v);if(h instanceof ph)a.push(v);else{const S=oc(h,E);S!=null&&(a.push(v),u.set(v,S))}}));const d=new On(a);return new TI(u,d,s.fieldTransforms)}function SF(t,e,n,i,s,a){const u=t.Cc(1,e,n),d=[kg(e,i,n)],p=[s];if(a.length%2!=0)throw new pe(re.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<a.length;S+=2)d.push(kg(e,a[S])),p.push(a[S+1]);const h=[],v=In.empty();for(let S=d.length-1;S>=0;--S)if(!xI(h,d[S])){const C=d[S];let D=p[S];D=Ot(D);const U=u.yc(C);if(D instanceof ph)h.push(C);else{const P=oc(D,U);P!=null&&(h.push(C),v.set(C,P))}}const E=new On(h);return new TI(v,E,u.fieldTransforms)}function AF(t,e,n,i=!1){return oc(n,t.Cc(i?4:3,e))}function oc(t,e){if(wI(t=Ot(t)))return Oy("Unsupported field value:",e,t),AI(t,e);if(t instanceof Vy)return(function(i,s){if(!SI(s.Ac))throw s.Sc(`${i._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${i._methodName}() is not currently supported inside arrays`);const a=i._toFieldTransform(s);a&&s.fieldTransforms.push(a)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(i,s){const a=[];let u=0;for(const d of i){let p=oc(d,s.wc(u));p==null&&(p={nullValue:"NULL_VALUE"}),a.push(p),u++}return{arrayValue:{values:a}}})(t,e)}return(function(i,s){if((i=Ot(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return s6(s.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const a=ft.fromDate(i);return{timestampValue:Nf(s.serializer,a)}}if(i instanceof ft){const a=new ft(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Nf(s.serializer,a)}}if(i instanceof er)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof ti)return{bytesValue:GC(s.serializer,i._byteString)};if(i instanceof Bt){const a=s.databaseId,u=i.firestore._databaseId;if(!u.isEqual(a))throw s.Sc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Ty(i.firestore._databaseId||s.databaseId,i._key.path)}}if(i instanceof tr)return(function(u,d){return{mapValue:{fields:{[vC]:{stringValue:_C},[Cf]:{arrayValue:{values:u.toArray().map((h=>{if(typeof h!="number")throw d.Sc("VectorValues must only contain numeric values.");return yy(d.serializer,h)}))}}}}}})(i,s);throw s.Sc(`Unsupported field value: ${eh(i)}`)})(t,e)}function AI(t,e){const n={};return fC(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Fs(t,((i,s)=>{const a=oc(s,e.mc(i));a!=null&&(n[i]=a)})),{mapValue:{fields:n}}}function wI(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ft||t instanceof er||t instanceof ti||t instanceof Bt||t instanceof Vy||t instanceof tr)}function Oy(t,e,n){if(!wI(n)||!cC(n)){const i=eh(n);throw i==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+i)}}function kg(t,e,n){if((e=Ot(e))instanceof hh)return e._internalPath;if(typeof e=="string")return Fy(t,e);throw kf("Field path arguments must be of type string or ",t,!1,void 0,n)}const wF=new RegExp("[~\\*/\\[\\]]");function Fy(t,e,n){if(e.search(wF)>=0)throw kf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new hh(...e.split("."))._internalPath}catch{throw kf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function kf(t,e,n,i,s){const a=i&&!i.isEmpty(),u=s!==void 0;let d=`Function ${e}() called with invalid data`;n&&(d+=" (via `toFirestore()`)"),d+=". ";let p="";return(a||u)&&(p+=" (found",a&&(p+=` in field ${i}`),u&&(p+=` in document ${s}`),p+=")"),new pe(re.INVALID_ARGUMENT,d+t+p)}function xI(t,e){return t.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CI{constructor(e,n,i,s,a){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Bt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new xF(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(mh("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class xF extends CI{data(){return super.data()}}function mh(t,e){return typeof e=="string"?Fy(t,e):e instanceof hh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CF(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new pe(re.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class qy{}class II extends qy{}function IF(t,e,...n){let i=[];e instanceof qy&&i.push(e),i=i.concat(n),(function(a){const u=a.filter((p=>p instanceof Hy)).length,d=a.filter((p=>p instanceof gh)).length;if(u>1||u>0&&d>0)throw new pe(re.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const s of i)t=s._apply(t);return t}class gh extends II{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new gh(e,n,i)}_apply(e){const n=this._parse(e);return bI(e._query,n),new qo(e.firestore,e.converter,Ag(e._query,n))}_parse(e){const n=Uy(e.firestore);return(function(a,u,d,p,h,v,E){let S;if(h.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new pe(re.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){kA(E,v);const D=[];for(const U of E)D.push(PA(p,a,U));S={arrayValue:{values:D}}}else S=PA(p,a,E)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||kA(E,v),S=AF(d,u,E,v==="in"||v==="not-in");return Lt.create(h,v,S)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function bF(t,e,n){const i=e,s=mh("where",t);return gh._create(s,i,n)}class Hy extends qy{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Hy(e,n)}_parse(e){const n=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return n.length===1?n[0]:wi.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(s,a){let u=s;const d=a.getFlattenedFilters();for(const p of d)bI(u,p),u=Ag(u,p)})(e._query,n),new qo(e.firestore,e.converter,Ag(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class By extends II{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new By(e,n)}_apply(e){const n=(function(s,a,u){if(s.startAt!==null)throw new pe(re.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new pe(re.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new $u(a,u)})(e._query,this._field,this._direction);return new qo(e.firestore,e.converter,(function(s,a){const u=s.explicitOrderBy.concat([a]);return new cl(s.path,s.collectionGroup,u,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)})(e._query,n))}}function RF(t,e="asc"){const n=e,i=mh("orderBy",t);return By._create(i,n)}function PA(t,e,n){if(typeof(n=Ot(n))=="string"){if(n==="")throw new pe(re.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!bC(e)&&n.indexOf("/")!==-1)throw new pe(re.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(ut.fromString(n));if(!Te.isDocumentKey(i))throw new pe(re.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return QS(t,new Te(i))}if(n instanceof Bt)return QS(t,n._key);throw new pe(re.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${eh(n)}.`)}function kA(t,e){if(!Array.isArray(t)||t.length===0)throw new pe(re.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function bI(t,e){const n=(function(s,a){for(const u of s)for(const d of u.getFlattenedFilters())if(a.indexOf(d.op)>=0)return d.op;return null})(t.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new pe(re.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new pe(re.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class NF{convertValue(e,n="none"){switch(ks(e)){case 0:return null;case 1:return e.booleanValue;case 2:return xt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ps(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw we(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return Fs(e,((s,a)=>{i[s]=this.convertValue(a,n)})),i}convertVectorValue(e){var i,s,a;const n=(a=(s=(i=e.fields)==null?void 0:i[Cf].arrayValue)==null?void 0:s.values)==null?void 0:a.map((u=>xt(u.doubleValue)));return new tr(n)}convertGeoPoint(e){return new er(xt(e.latitude),xt(e.longitude))}convertArray(e,n){return(e.values||[]).map((i=>this.convertValue(i,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const i=ih(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Bu(e));default:return null}}convertTimestamp(e){const n=Ds(e);return new ft(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=ut.fromString(e);Ze(QC(i),9688,{name:e});const s=new zu(i.get(1),i.get(3)),a=new Te(i.popFirst(5));return s.isEqual(n)||kr(`Document ${a} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MF(t,e,n){let i;return i=t?t.toFirestore(e):e,i}class Wd{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class za extends CI{constructor(e,n,i,s,a,u){super(e,n,i,s,u),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new df(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(mh("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new pe(re.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=za._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}za._jsonSchemaVersion="firestore/documentSnapshot/1.0",za._jsonSchema={type:Ut("string",za._jsonSchemaVersion),bundleSource:Ut("string","DocumentSnapshot"),bundleName:Ut("string"),bundle:Ut("string")};class df extends za{data(e={}){return super.data(e)}}class Ga{constructor(e,n,i,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Wd(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((i=>{e.call(n,new df(this._firestore,this._userDataWriter,i.key,i,new Wd(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new pe(re.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(s,a){if(s._snapshot.oldDocs.isEmpty()){let u=0;return s._snapshot.docChanges.map((d=>{const p=new df(s._firestore,s._userDataWriter,d.doc.key,d.doc,new Wd(s._snapshot.mutatedKeys.has(d.doc.key),s._snapshot.fromCache),s.query.converter);return d.doc,{type:"added",doc:p,oldIndex:-1,newIndex:u++}}))}{let u=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((d=>a||d.type!==3)).map((d=>{const p=new df(s._firestore,s._userDataWriter,d.doc.key,d.doc,new Wd(s._snapshot.mutatedKeys.has(d.doc.key),s._snapshot.fromCache),s.query.converter);let h=-1,v=-1;return d.type!==0&&(h=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),d.type!==1&&(u=u.add(d.doc),v=u.indexOf(d.doc.key)),{type:DF(d.type),doc:p,oldIndex:h,newIndex:v}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new pe(re.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ga._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=dy.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],s=[];return this.docs.forEach((a=>{a._document!==null&&(n.push(a._document),i.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),s.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function DF(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return we(61501,{type:t})}}Ga._jsonSchemaVersion="firestore/querySnapshot/1.0",Ga._jsonSchema={type:Ut("string",Ga._jsonSchemaVersion),bundleSource:Ut("string","QuerySnapshot"),bundleName:Ut("string"),bundle:Ut("string")};class PF extends NF{constructor(e){super(),this.firestore=e}convertBytes(e){return new ti(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Bt(this.firestore,null,n)}}function Hm(t){t=Io(t,qo);const e=Io(t.firestore,sc),n=EI(e),i=new PF(e);return CF(t._query),hF(n,t._query).then((s=>new Ga(e,i,t,s)))}function VA(t,e,n,...i){t=Io(t,Bt);const s=Io(t.firestore,sc),a=Uy(s);let u;return u=typeof(e=Ot(e))=="string"||e instanceof hh?SF(a,"updateDoc",t._key,e,n,i):TF(a,"updateDoc",t._key,e),zy(s,[u.toMutation(t._key,Si.exists(!0))])}function LA(t){return zy(Io(t.firestore,sc),[new vy(t._key,Si.none())])}function Zd(t,e){const n=Io(t.firestore,sc),i=bu(t),s=MF(t.converter,e);return zy(n,[EF(Uy(t.firestore),"addDoc",i._key,s,t.converter!==null,{}).toMutation(i._key,Si.exists(!1))]).then((()=>i))}function zy(t,e){return(function(i,s){const a=new bs;return i.asyncQueue.enqueueAndForget((async()=>Z5(await dF(i),s,a))),a.promise})(EI(t),e)}(function(e,n=!0){(function(s){al=s})(ol),rr(new Ai("firestore",((i,{instanceIdentifier:s,options:a})=>{const u=i.getProvider("app").getImmediate(),d=new sc(new y3(i.getProvider("auth-internal")),new E3(u,i.getProvider("app-check-internal")),(function(h,v){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new pe(re.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new zu(h.options.projectId,v)})(u,s),u);return a={useFetchStreams:n,...a},d._setSettings(a),d}),"PUBLIC").setMultipleInstances(!0)),ii(US,OS,e),ii(US,OS,"esm2020")})();function RI(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const kF=RI,NI=new Lo("auth","Firebase",RI());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vf=new Zf("@firebase/auth");function VF(t,...e){Vf.logLevel<=Be.WARN&&Vf.warn(`Auth (${ol}): ${t}`,...e)}function ff(t,...e){Vf.logLevel<=Be.ERROR&&Vf.error(`Auth (${ol}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xi(t,...e){throw Gy(t,...e)}function nr(t,...e){return Gy(t,...e)}function MI(t,e,n){const i={...kF(),[e]:n};return new Lo("auth","Firebase",i).create(e,{appName:t.name})}function Nr(t){return MI(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Gy(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return NI.create(t,...e)}function Ae(t,e,...n){if(!t)throw Gy(e,...n)}function Ir(t){const e="INTERNAL ASSERTION FAILED: "+t;throw ff(e),new Error(e)}function Lr(t,e){t||Ir(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vg(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function LF(){return UA()==="http:"||UA()==="https:"}function UA(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UF(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(LF()||jx()||"connection"in navigator)?navigator.onLine:!0}function OF(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ac{constructor(e,n){this.shortDelay=e,this.longDelay=n,Lr(n>e,"Short delay should be less than long delay!"),this.isMobile=G4()||J4()}get(){return UF()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $y(t,e){Lr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ir("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ir("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ir("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FF={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qF=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],HF=new ac(3e4,6e4);function Hs(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Bs(t,e,n,i,s={}){return PI(t,s,async()=>{let a={},u={};i&&(e==="GET"?u=i:a={body:JSON.stringify(i)});const d=Zu({key:t.config.apiKey,...u}).slice(1),p=await t._getAdditionalHeaders();p["Content-Type"]="application/json",t.languageCode&&(p["X-Firebase-Locale"]=t.languageCode);const h={method:e,headers:p,...a};return j4()||(h.referrerPolicy="no-referrer"),t.emulatorConfig&&sl(t.emulatorConfig.host)&&(h.credentials="include"),DI.fetch()(await kI(t,t.config.apiHost,n,d),h)})}async function PI(t,e,n){t._canInitEmulator=!1;const i={...FF,...e};try{const s=new zF(t),a=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const u=await a.json();if("needConfirmation"in u)throw ef(t,"account-exists-with-different-credential",u);if(a.ok&&!("errorMessage"in u))return u;{const d=a.ok?u.errorMessage:u.error.message,[p,h]=d.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw ef(t,"credential-already-in-use",u);if(p==="EMAIL_EXISTS")throw ef(t,"email-already-in-use",u);if(p==="USER_DISABLED")throw ef(t,"user-disabled",u);const v=i[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw MI(t,v,h);xi(t,v)}}catch(s){if(s instanceof Ii)throw s;xi(t,"network-request-failed",{message:String(s)})}}async function lc(t,e,n,i,s={}){const a=await Bs(t,e,n,i,s);return"mfaPendingCredential"in a&&xi(t,"multi-factor-auth-required",{_serverResponse:a}),a}async function kI(t,e,n,i){const s=`${e}${n}?${i}`,a=t,u=a.config.emulator?$y(t.config,s):`${t.config.apiScheme}://${s}`;return qF.includes(n)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(u).toString():u}function BF(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class zF{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(nr(this.auth,"network-request-failed")),HF.get())})}}function ef(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const s=nr(t,e,i);return s.customData._tokenResponse=n,s}function OA(t){return t!==void 0&&t.enterprise!==void 0}class GF{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return BF(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function $F(t,e){return Bs(t,"GET","/v2/recaptchaConfig",Hs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jF(t,e){return Bs(t,"POST","/v1/accounts:delete",e)}async function Lf(t,e){return Bs(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vu(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function JF(t,e=!1){const n=Ot(t),i=await n.getIdToken(e),s=jy(i);Ae(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const a=typeof s.firebase=="object"?s.firebase:void 0,u=a==null?void 0:a.sign_in_provider;return{claims:s,token:i,authTime:Vu(Bm(s.auth_time)),issuedAtTime:Vu(Bm(s.iat)),expirationTime:Vu(Bm(s.exp)),signInProvider:u||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function Bm(t){return Number(t)*1e3}function jy(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return ff("JWT malformed, contained fewer than 3 sections"),null;try{const s=qx(n);return s?JSON.parse(s):(ff("Failed to decode base64 JWT payload"),null)}catch(s){return ff("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function FA(t){const e=jy(t);return Ae(e,"internal-error"),Ae(typeof e.exp<"u","internal-error"),Ae(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ku(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof Ii&&KF(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function KF({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YF{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lg{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Vu(this.lastLoginAt),this.creationTime=Vu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uf(t){var E;const e=t.auth,n=await t.getIdToken(),i=await Ku(t,Lf(e,{idToken:n}));Ae(i==null?void 0:i.users.length,e,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const a=(E=s.providerUserInfo)!=null&&E.length?VI(s.providerUserInfo):[],u=XF(t.providerData,a),d=t.isAnonymous,p=!(t.email&&s.passwordHash)&&!(u!=null&&u.length),h=d?p:!1,v={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:u,metadata:new Lg(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(t,v)}async function QF(t){const e=Ot(t);await Uf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function XF(t,e){return[...t.filter(i=>!e.some(s=>s.providerId===i.providerId)),...e]}function VI(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WF(t,e){const n=await PI(t,{},async()=>{const i=Zu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:a}=t.config,u=await kI(t,s,"/v1/token",`key=${a}`),d=await t._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:d,body:i};return t.emulatorConfig&&sl(t.emulatorConfig.host)&&(p.credentials="include"),DI.fetch()(u,p)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function ZF(t,e){return Bs(t,"POST","/v2/accounts:revokeToken",Hs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $a{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ae(e.idToken,"internal-error"),Ae(typeof e.idToken<"u","internal-error"),Ae(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):FA(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Ae(e.length!==0,"internal-error");const n=FA(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ae(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:s,expiresIn:a}=await WF(e,n);this.updateTokensAndExpiration(i,s,Number(a))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:s,expirationTime:a}=n,u=new $a;return i&&(Ae(typeof i=="string","internal-error",{appName:e}),u.refreshToken=i),s&&(Ae(typeof s=="string","internal-error",{appName:e}),u.accessToken=s),a&&(Ae(typeof a=="number","internal-error",{appName:e}),u.expirationTime=a),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new $a,this.toJSON())}_performRefresh(){return Ir("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _s(t,e){Ae(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class _i{constructor({uid:e,auth:n,stsTokenManager:i,...s}){this.providerId="firebase",this.proactiveRefresh=new YF(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Lg(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Ku(this,this.stsTokenManager.getToken(this.auth,e));return Ae(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return JF(this,e)}reload(){return QF(this)}_assign(e){this!==e&&(Ae(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new _i({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Ae(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await Uf(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ei(this.auth.app))return Promise.reject(Nr(this.auth));const e=await this.getIdToken();return await Ku(this,jF(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const i=n.displayName??void 0,s=n.email??void 0,a=n.phoneNumber??void 0,u=n.photoURL??void 0,d=n.tenantId??void 0,p=n._redirectEventId??void 0,h=n.createdAt??void 0,v=n.lastLoginAt??void 0,{uid:E,emailVerified:S,isAnonymous:C,providerData:D,stsTokenManager:U}=n;Ae(E&&U,e,"internal-error");const P=$a.fromJSON(this.name,U);Ae(typeof E=="string",e,"internal-error"),_s(i,e.name),_s(s,e.name),Ae(typeof S=="boolean",e,"internal-error"),Ae(typeof C=="boolean",e,"internal-error"),_s(a,e.name),_s(u,e.name),_s(d,e.name),_s(p,e.name),_s(h,e.name),_s(v,e.name);const q=new _i({uid:E,auth:e,email:s,emailVerified:S,displayName:i,isAnonymous:C,photoURL:u,phoneNumber:a,tenantId:d,stsTokenManager:P,createdAt:h,lastLoginAt:v});return D&&Array.isArray(D)&&(q.providerData=D.map(X=>({...X}))),p&&(q._redirectEventId=p),q}static async _fromIdTokenResponse(e,n,i=!1){const s=new $a;s.updateFromServerResponse(n);const a=new _i({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:i});return await Uf(a),a}static async _fromGetAccountInfoResponse(e,n,i){const s=n.users[0];Ae(s.localId!==void 0,"internal-error");const a=s.providerUserInfo!==void 0?VI(s.providerUserInfo):[],u=!(s.email&&s.passwordHash)&&!(a!=null&&a.length),d=new $a;d.updateFromIdToken(i);const p=new _i({uid:s.localId,auth:e,stsTokenManager:d,isAnonymous:u}),h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Lg(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(a!=null&&a.length)};return Object.assign(p,h),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qA=new Map;function br(t){Lr(t instanceof Function,"Expected a class definition");let e=qA.get(t);return e?(Lr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,qA.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LI{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}LI.type="NONE";const HA=LI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hf(t,e,n){return`firebase:${t}:${e}:${n}`}class ja{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:s,name:a}=this.auth;this.fullUserKey=hf(this.userKey,s.apiKey,a),this.fullPersistenceKey=hf("persistence",s.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Lf(this.auth,{idToken:e}).catch(()=>{});return n?_i._fromGetAccountInfoResponse(this.auth,n,e):null}return _i._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new ja(br(HA),e,i);const s=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let a=s[0]||br(HA);const u=hf(i,e.config.apiKey,e.name);let d=null;for(const h of n)try{const v=await h._get(u);if(v){let E;if(typeof v=="string"){const S=await Lf(e,{idToken:v}).catch(()=>{});if(!S)break;E=await _i._fromGetAccountInfoResponse(e,S,v)}else E=_i._fromJSON(e,v);h!==a&&(d=E),a=h;break}}catch{}const p=s.filter(h=>h._shouldAllowMigration);return!a._shouldAllowMigration||!p.length?new ja(a,e,i):(a=p[0],d&&await a._set(u,d.toJSON()),await Promise.all(n.map(async h=>{if(h!==a)try{await h._remove(u)}catch{}})),new ja(a,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BA(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(qI(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(UI(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(BI(e))return"Blackberry";if(zI(e))return"Webos";if(OI(e))return"Safari";if((e.includes("chrome/")||FI(e))&&!e.includes("edge/"))return"Chrome";if(HI(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function UI(t=dn()){return/firefox\//i.test(t)}function OI(t=dn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function FI(t=dn()){return/crios\//i.test(t)}function qI(t=dn()){return/iemobile/i.test(t)}function HI(t=dn()){return/android/i.test(t)}function BI(t=dn()){return/blackberry/i.test(t)}function zI(t=dn()){return/webos/i.test(t)}function Jy(t=dn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function eq(t=dn()){var e;return Jy(t)&&!!((e=window.navigator)!=null&&e.standalone)}function tq(){return K4()&&document.documentMode===10}function GI(t=dn()){return Jy(t)||HI(t)||zI(t)||BI(t)||/windows phone/i.test(t)||qI(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $I(t,e=[]){let n;switch(t){case"Browser":n=BA(dn());break;case"Worker":n=`${BA(dn())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ol}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nq{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=a=>new Promise((u,d)=>{try{const p=e(a);u(p)}catch(p){d(p)}});i.onAbort=n,this.queue.push(i);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iq(t,e={}){return Bs(t,"GET","/v2/passwordPolicy",Hs(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rq=6;class sq{constructor(e){var i;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??rq,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let s=0;s<e.length;s++)i=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,s,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oq{constructor(e,n,i,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new zA(this),this.idTokenSubscription=new zA(this),this.beforeStateQueue=new nq(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=NI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=br(n)),this._initializationPromise=this.queue(async()=>{var i,s,a;if(!this._deleted&&(this.persistenceManager=await ja.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((a=this.currentUser)==null?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Lf(this,{idToken:e}),i=await _i._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var a;if(ei(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(d,d))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(a=this.redirectUser)==null?void 0:a._redirectEventId,d=i==null?void 0:i._redirectEventId,p=await this.tryRedirectSignIn(e);(!u||u===d)&&(p!=null&&p.user)&&(i=p.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(u){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Ae(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Uf(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=OF()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ei(this.app))return Promise.reject(Nr(this));const n=e?Ot(e):null;return n&&Ae(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ae(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ei(this.app)?Promise.reject(Nr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ei(this.app)?Promise.reject(Nr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(br(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await iq(this),n=new sq(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Lo("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await ZF(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&br(e)||this._popupRedirectResolver;Ae(n,this,"argument-error"),this.redirectPersistenceManager=await ja.create(this,[br(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,s){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let u=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ae(d,this,"internal-error"),d.then(()=>{u||a(this.currentUser)}),typeof n=="function"){const p=e.addObserver(n,i,s);return()=>{u=!0,p()}}else{const p=e.addObserver(n);return()=>{u=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ae(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=$I(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var n;if(ei(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&VF(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Ho(t){return Ot(t)}class zA{constructor(e){this.auth=e,this.observer=null,this.addObserver=tO(n=>this.observer=n)}get next(){return Ae(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function aq(t){yh=t}function jI(t){return yh.loadJS(t)}function lq(){return yh.recaptchaEnterpriseScript}function uq(){return yh.gapiScript}function cq(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class dq{constructor(){this.enterprise=new fq}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class fq{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const hq="recaptcha-enterprise",JI="NO_RECAPTCHA";class pq{constructor(e){this.type=hq,this.auth=Ho(e)}async verify(e="verify",n=!1){async function i(a){if(!n){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(u,d)=>{$F(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const h=new GF(p);return a.tenantId==null?a._agentRecaptchaConfig=h:a._tenantRecaptchaConfigs[a.tenantId]=h,u(h.siteKey)}}).catch(p=>{d(p)})})}function s(a,u,d){const p=window.grecaptcha;OA(p)?p.enterprise.ready(()=>{p.enterprise.execute(a,{action:e}).then(h=>{u(h)}).catch(()=>{u(JI)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new dq().execute("siteKey",{action:"verify"}):new Promise((a,u)=>{i(this.auth).then(d=>{if(!n&&OA(window.grecaptcha))s(d,a,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let p=lq();p.length!==0&&(p+=d),jI(p).then(()=>{s(d,a,u)}).catch(h=>{u(h)})}}).catch(d=>{u(d)})})}}async function GA(t,e,n,i=!1,s=!1){const a=new pq(t);let u;if(s)u=JI;else try{u=await a.verify(n)}catch{u=await a.verify(n,!0)}const d={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const p=d.phoneEnrollmentInfo.phoneNumber,h=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:h,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const p=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return i?Object.assign(d,{captchaResp:u}):Object.assign(d,{captchaResponse:u}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function Ug(t,e,n,i,s){var a;if((a=t._getRecaptchaConfig())!=null&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await GA(t,e,n,n==="getOobCode");return i(t,u)}else return i(t,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await GA(t,e,n,n==="getOobCode");return i(t,d)}else return Promise.reject(u)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mq(t,e){const n=Uo(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),a=n.getOptions();if(Ns(a,e??{}))return s;xi(s,"already-initialized")}return n.initialize({options:e})}function gq(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(br);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function yq(t,e,n){const i=Ho(t);Ae(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const s=!1,a=KI(e),{host:u,port:d}=vq(e),p=d===null?"":`:${d}`,h={url:`${a}//${u}${p}/`},v=Object.freeze({host:u,port:d,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!i._canInitEmulator){Ae(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Ae(Ns(h,i.config.emulator)&&Ns(v,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=h,i.emulatorConfig=v,i.settings.appVerificationDisabledForTesting=!0,sl(u)?(Gx(`${a}//${u}${p}`),$x("Auth",!0)):_q()}function KI(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function vq(t){const e=KI(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const a=s[1];return{host:a,port:$A(i.substr(a.length+1))}}else{const[a,u]=i.split(":");return{host:a,port:$A(u)}}}function $A(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function _q(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ky{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ir("not implemented")}_getIdTokenResponse(e){return Ir("not implemented")}_linkToIdToken(e,n){return Ir("not implemented")}_getReauthenticationResolver(e){return Ir("not implemented")}}async function Eq(t,e){return Bs(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tq(t,e){return lc(t,"POST","/v1/accounts:signInWithPassword",Hs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sq(t,e){return lc(t,"POST","/v1/accounts:signInWithEmailLink",Hs(t,e))}async function Aq(t,e){return lc(t,"POST","/v1/accounts:signInWithEmailLink",Hs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yu extends Ky{constructor(e,n,i,s=null){super("password",i),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Yu(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new Yu(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ug(e,n,"signInWithPassword",Tq);case"emailLink":return Sq(e,{email:this._email,oobCode:this._password});default:xi(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ug(e,i,"signUpPassword",Eq);case"emailLink":return Aq(e,{idToken:n,email:this._email,oobCode:this._password});default:xi(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ja(t,e){return lc(t,"POST","/v1/accounts:signInWithIdp",Hs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wq="http://localhost";class Ro extends Ky{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ro(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):xi("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:s,...a}=n;if(!i||!s)return null;const u=new Ro(i,s);return u.idToken=a.idToken||void 0,u.accessToken=a.accessToken||void 0,u.secret=a.secret,u.nonce=a.nonce,u.pendingToken=a.pendingToken||null,u}_getIdTokenResponse(e){const n=this.buildRequest();return Ja(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,Ja(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ja(e,n)}buildRequest(){const e={requestUri:wq,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Zu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xq(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Cq(t){const e=Au(wu(t)).link,n=e?Au(wu(e)).deep_link_id:null,i=Au(wu(t)).deep_link_id;return(i?Au(wu(i)).link:null)||i||n||e||t}class Yy{constructor(e){const n=Au(wu(e)),i=n.apiKey??null,s=n.oobCode??null,a=xq(n.mode??null);Ae(i&&s&&a,"argument-error"),this.apiKey=i,this.operation=a,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=Cq(e);try{return new Yy(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fl{constructor(){this.providerId=fl.PROVIDER_ID}static credential(e,n){return Yu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=Yy.parseLink(n);return Ae(i,"argument-error"),Yu._fromEmailAndCode(e,i.code,i.tenantId)}}fl.PROVIDER_ID="password";fl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";fl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YI{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc extends YI{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es extends uc{constructor(){super("facebook.com")}static credential(e){return Ro._fromParams({providerId:Es.PROVIDER_ID,signInMethod:Es.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Es.credentialFromTaggedObject(e)}static credentialFromError(e){return Es.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Es.credential(e.oauthAccessToken)}catch{return null}}}Es.FACEBOOK_SIGN_IN_METHOD="facebook.com";Es.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts extends uc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ro._fromParams({providerId:Ts.PROVIDER_ID,signInMethod:Ts.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ts.credentialFromTaggedObject(e)}static credentialFromError(e){return Ts.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return Ts.credential(n,i)}catch{return null}}}Ts.GOOGLE_SIGN_IN_METHOD="google.com";Ts.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss extends uc{constructor(){super("github.com")}static credential(e){return Ro._fromParams({providerId:Ss.PROVIDER_ID,signInMethod:Ss.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ss.credentialFromTaggedObject(e)}static credentialFromError(e){return Ss.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ss.credential(e.oauthAccessToken)}catch{return null}}}Ss.GITHUB_SIGN_IN_METHOD="github.com";Ss.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As extends uc{constructor(){super("twitter.com")}static credential(e,n){return Ro._fromParams({providerId:As.PROVIDER_ID,signInMethod:As.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return As.credentialFromTaggedObject(e)}static credentialFromError(e){return As.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return As.credential(n,i)}catch{return null}}}As.TWITTER_SIGN_IN_METHOD="twitter.com";As.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Iq(t,e){return lc(t,"POST","/v1/accounts:signUp",Hs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,s=!1){const a=await _i._fromIdTokenResponse(e,i,s),u=jA(i);return new No({user:a,providerId:u,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const s=jA(i);return new No({user:e,providerId:s,_tokenResponse:i,operationType:n})}}function jA(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Of extends Ii{constructor(e,n,i,s){super(n.code,n.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,Of.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,s){return new Of(e,n,i,s)}}function QI(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Of._fromErrorAndOperation(t,a,e,i):a})}async function bq(t,e,n=!1){const i=await Ku(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return No._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rq(t,e,n=!1){const{auth:i}=t;if(ei(i.app))return Promise.reject(Nr(i));const s="reauthenticate";try{const a=await Ku(t,QI(i,s,e,t),n);Ae(a.idToken,i,"internal-error");const u=jy(a.idToken);Ae(u,i,"internal-error");const{sub:d}=u;return Ae(t.uid===d,i,"user-mismatch"),No._forOperation(t,s,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&xi(i,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XI(t,e,n=!1){if(ei(t.app))return Promise.reject(Nr(t));const i="signIn",s=await QI(t,i,e),a=await No._fromIdTokenResponse(t,i,s);return n||await t._updateCurrentUser(a.user),a}async function Nq(t,e){return XI(Ho(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WI(t){const e=Ho(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Mq(t,e,n){if(ei(t.app))return Promise.reject(Nr(t));const i=Ho(t),u=await Ug(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Iq).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&WI(t),p}),d=await No._fromIdTokenResponse(i,"signIn",u);return await i._updateCurrentUser(d.user),d}function Dq(t,e,n){return ei(t.app)?Promise.reject(Nr(t)):Nq(Ot(t),fl.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&WI(t),i})}function Pq(t,e,n,i){return Ot(t).onIdTokenChanged(e,n,i)}function kq(t,e,n){return Ot(t).beforeAuthStateChanged(e,n)}function Vq(t){return Ot(t).signOut()}const Ff="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZI{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Ff,"1"),this.storage.removeItem(Ff),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lq=1e3,Uq=10;class eb extends ZI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=GI(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),s=this.localCache[n];i!==s&&e(n,s,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((u,d,p)=>{this.notifyListeners(u,p)});return}const i=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const u=this.storage.getItem(i);!n&&this.localCache[i]===u||this.notifyListeners(i,u)},a=this.storage.getItem(i);tq()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,Uq):s()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},Lq)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}eb.type="LOCAL";const Oq=eb;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tb extends ZI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}tb.type="SESSION";const nb=tb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fq(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const i=new vh(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:s,data:a}=n.data,u=this.handlersMap[s];if(!(u!=null&&u.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const d=Array.from(u).map(async h=>h(n.origin,a)),p=await Fq(d);n.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:p})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}vh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qy(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qq{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let a,u;return new Promise((d,p)=>{const h=Qy("",20);s.port1.start();const v=setTimeout(()=>{p(new Error("unsupported_event"))},i);u={messageChannel:s,onMessage(E){const S=E;if(S.data.eventId===h)switch(S.data.status){case"ack":clearTimeout(v),a=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),d(S.data.response);break;default:clearTimeout(v),clearTimeout(a),p(new Error("invalid_response"));break}}},this.handlers.add(u),s.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:h,data:n},[s.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ir(){return window}function Hq(t){ir().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ib(){return typeof ir().WorkerGlobalScope<"u"&&typeof ir().importScripts=="function"}async function Bq(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function zq(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function Gq(){return ib()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rb="firebaseLocalStorageDb",$q=1,qf="firebaseLocalStorage",sb="fbase_key";class cc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function _h(t,e){return t.transaction([qf],e?"readwrite":"readonly").objectStore(qf)}function jq(){const t=indexedDB.deleteDatabase(rb);return new cc(t).toPromise()}function Og(){const t=indexedDB.open(rb,$q);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(qf,{keyPath:sb})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(qf)?e(i):(i.close(),await jq(),e(await Og()))})})}async function JA(t,e,n){const i=_h(t,!0).put({[sb]:e,value:n});return new cc(i).toPromise()}async function Jq(t,e){const n=_h(t,!1).get(e),i=await new cc(n).toPromise();return i===void 0?null:i.value}function KA(t,e){const n=_h(t,!0).delete(e);return new cc(n).toPromise()}const Kq=800,Yq=3;class ob{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Og(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>Yq)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ib()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=vh._getInstance(Gq()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,i;if(this.activeServiceWorker=await Bq(),!this.activeServiceWorker)return;this.sender=new qq(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||zq()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Og();return await JA(e,Ff,"1"),await KA(e,Ff),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>JA(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>Jq(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>KA(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const a=_h(s,!1).getAll();return new cc(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:s,value:a}of e)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Kq)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}ob.type="LOCAL";const Qq=ob;new ac(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xq(t,e){return e?br(e):(Ae(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xy extends Ky{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ja(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ja(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ja(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Wq(t){return XI(t.auth,new Xy(t),t.bypassAuthState)}function Zq(t){const{auth:e,user:n}=t;return Ae(n,e,"internal-error"),Rq(n,new Xy(t),t.bypassAuthState)}async function e9(t){const{auth:e,user:n}=t;return Ae(n,e,"internal-error"),bq(n,new Xy(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ab{constructor(e,n,i,s,a=!1){this.auth=e,this.resolver=i,this.user=s,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:s,tenantId:a,error:u,type:d}=e;if(u){this.reject(u);return}const p={auth:this.auth,requestUri:n,sessionId:i,tenantId:a||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(p))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Wq;case"linkViaPopup":case"linkViaRedirect":return e9;case"reauthViaPopup":case"reauthViaRedirect":return Zq;default:xi(this.auth,"internal-error")}}resolve(e){Lr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Lr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t9=new ac(2e3,1e4);class Fa extends ab{constructor(e,n,i,s,a){super(e,n,s,a),this.provider=i,this.authWindow=null,this.pollId=null,Fa.currentPopupAction&&Fa.currentPopupAction.cancel(),Fa.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ae(e,this.auth,"internal-error"),e}async onExecution(){Lr(this.filter.length===1,"Popup operations only handle one event");const e=Qy();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(nr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(nr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Fa.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if((i=(n=this.authWindow)==null?void 0:n.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(nr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,t9.get())};e()}}Fa.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n9="pendingRedirect",pf=new Map;class i9 extends ab{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=pf.get(this.auth._key());if(!e){try{const i=await r9(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}pf.set(this.auth._key(),e)}return this.bypassAuthState||pf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function r9(t,e){const n=a9(e),i=o9(t);if(!await i._isAvailable())return!1;const s=await i._get(n)==="true";return await i._remove(n),s}function s9(t,e){pf.set(t._key(),e)}function o9(t){return br(t._redirectPersistence)}function a9(t){return hf(n9,t.config.apiKey,t.name)}async function l9(t,e,n=!1){if(ei(t.app))return Promise.reject(Nr(t));const i=Ho(t),s=Xq(i,e),u=await new i9(i,s,n).execute();return u&&!n&&(delete u.user._redirectEventId,await i._persistUserIfCurrent(u.user),await i._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u9=600*1e3;class c9{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!d9(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!lb(e)){const s=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";n.onError(nr(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=u9&&this.cachedEventUids.clear(),this.cachedEventUids.has(YA(e))}saveEventToCache(e){this.cachedEventUids.add(YA(e)),this.lastProcessedEventTime=Date.now()}}function YA(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function lb({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function d9(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return lb(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f9(t,e={}){return Bs(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h9=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,p9=/^https?/;async function m9(t){if(t.config.emulator)return;const{authorizedDomains:e}=await f9(t);for(const n of e)try{if(g9(n))return}catch{}xi(t,"unauthorized-domain")}function g9(t){const e=Vg(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const u=new URL(t);return u.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&u.hostname===i}if(!p9.test(n))return!1;if(h9.test(t))return i===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y9=new ac(3e4,6e4);function QA(){const t=ir().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function v9(t){return new Promise((e,n)=>{var s,a,u;function i(){QA(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{QA(),n(nr(t,"network-request-failed"))},timeout:y9.get()})}if((a=(s=ir().gapi)==null?void 0:s.iframes)!=null&&a.Iframe)e(gapi.iframes.getContext());else if((u=ir().gapi)!=null&&u.load)i();else{const d=cq("iframefcb");return ir()[d]=()=>{gapi.load?i():n(nr(t,"network-request-failed"))},jI(`${uq()}?onload=${d}`).catch(p=>n(p))}}).catch(e=>{throw mf=null,e})}let mf=null;function _9(t){return mf=mf||v9(t),mf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E9=new ac(5e3,15e3),T9="__/auth/iframe",S9="emulator/auth/iframe",A9={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},w9=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function x9(t){const e=t.config;Ae(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?$y(e,S9):`https://${t.config.authDomain}/${T9}`,i={apiKey:e.apiKey,appName:t.name,v:ol},s=w9.get(t.config.apiHost);s&&(i.eid=s);const a=t._getFrameworks();return a.length&&(i.fw=a.join(",")),`${n}?${Zu(i).slice(1)}`}async function C9(t){const e=await _9(t),n=ir().gapi;return Ae(n,t,"internal-error"),e.open({where:document.body,url:x9(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:A9,dontclear:!0},i=>new Promise(async(s,a)=>{await i.restyle({setHideOnLeave:!1});const u=nr(t,"network-request-failed"),d=ir().setTimeout(()=>{a(u)},E9.get());function p(){ir().clearTimeout(d),s(i)}i.ping(p).then(p,()=>{a(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I9={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},b9=500,R9=600,N9="_blank",M9="http://localhost";class XA{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function D9(t,e,n,i=b9,s=R9){const a=Math.max((window.screen.availHeight-s)/2,0).toString(),u=Math.max((window.screen.availWidth-i)/2,0).toString();let d="";const p={...I9,width:i.toString(),height:s.toString(),top:a,left:u},h=dn().toLowerCase();n&&(d=FI(h)?N9:n),UI(h)&&(e=e||M9,p.scrollbars="yes");const v=Object.entries(p).reduce((S,[C,D])=>`${S}${C}=${D},`,"");if(eq(h)&&d!=="_self")return P9(e||"",d),new XA(null);const E=window.open(e||"",d,v);Ae(E,t,"popup-blocked");try{E.focus()}catch{}return new XA(E)}function P9(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k9="__/auth/handler",V9="emulator/auth/handler",L9=encodeURIComponent("fac");async function WA(t,e,n,i,s,a){Ae(t.config.authDomain,t,"auth-domain-config-required"),Ae(t.config.apiKey,t,"invalid-api-key");const u={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:ol,eventId:s};if(e instanceof YI){e.setDefaultLanguage(t.languageCode),u.providerId=e.providerId||"",eO(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,E]of Object.entries({}))u[v]=E}if(e instanceof uc){const v=e.getScopes().filter(E=>E!=="");v.length>0&&(u.scopes=v.join(","))}t.tenantId&&(u.tid=t.tenantId);const d=u;for(const v of Object.keys(d))d[v]===void 0&&delete d[v];const p=await t._getAppCheckToken(),h=p?`#${L9}=${encodeURIComponent(p)}`:"";return`${U9(t)}?${Zu(d).slice(1)}${h}`}function U9({config:t}){return t.emulator?$y(t,V9):`https://${t.authDomain}/${k9}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zm="webStorageSupport";class O9{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=nb,this._completeRedirectFn=l9,this._overrideRedirectResult=s9}async _openPopup(e,n,i,s){var u;Lr((u=this.eventManagers[e._key()])==null?void 0:u.manager,"_initialize() not called before _openPopup()");const a=await WA(e,n,i,Vg(),s);return D9(e,a,Qy())}async _openRedirect(e,n,i,s){await this._originValidation(e);const a=await WA(e,n,i,Vg(),s);return Hq(a),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:a}=this.eventManagers[n];return s?Promise.resolve(s):(Lr(a,"If manager is not set, promise should be"),a)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await C9(e),i=new c9(e);return n.register("authEvent",s=>(Ae(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(zm,{type:zm},s=>{var u;const a=(u=s==null?void 0:s[0])==null?void 0:u[zm];a!==void 0&&n(!!a),xi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=m9(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return GI()||OI()||Jy()}}const F9=O9;var ZA="@firebase/auth",ew="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q9{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ae(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H9(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function B9(t){rr(new Ai("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:u,authDomain:d}=i.options;Ae(u&&!u.includes(":"),"invalid-api-key",{appName:i.name});const p={apiKey:u,authDomain:d,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:$I(t)},h=new oq(i,s,a,p);return gq(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),rr(new Ai("auth-internal",e=>{const n=Ho(e.getProvider("auth").getImmediate());return(i=>new q9(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ii(ZA,ew,H9(t)),ii(ZA,ew,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z9=300,G9=zx("authIdTokenMaxAge")||z9;let tw=null;const $9=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>G9)return;const s=n==null?void 0:n.token;tw!==s&&(tw=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function j9(t=uy()){const e=Uo(t,"auth");if(e.isInitialized())return e.getImmediate();const n=mq(t,{popupRedirectResolver:F9,persistence:[Qq,Oq,nb]}),i=zx("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(i,location.origin);if(location.origin===a.origin){const u=$9(a.toString());kq(n,u,()=>u(n.currentUser)),Pq(n,d=>u(d))}}const s=Hx("auth");return s&&yq(n,`http://${s}`),n}function J9(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}aq({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=s=>{const a=nr("internal-error");a.customData=s,n(a)},i.type="text/javascript",i.charset="UTF-8",J9().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});B9("Browser");var K9="firebase",Y9="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ii(K9,Y9,"app");const ub="@firebase/installations",Wy="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cb=1e4,db=`w:${Wy}`,fb="FIS_v2",Q9="https://firebaseinstallations.googleapis.com/v1",X9=3600*1e3,W9="installations",Z9="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eH={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Mo=new Lo(W9,Z9,eH);function hb(t){return t instanceof Ii&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pb({projectId:t}){return`${Q9}/projects/${t}/installations`}function mb(t){return{token:t.token,requestStatus:2,expiresIn:nH(t.expiresIn),creationTime:Date.now()}}async function gb(t,e){const i=(await e.json()).error;return Mo.create("request-failed",{requestName:t,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})}function yb({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function tH(t,{refreshToken:e}){const n=yb(t);return n.append("Authorization",iH(e)),n}async function vb(t){const e=await t();return e.status>=500&&e.status<600?t():e}function nH(t){return Number(t.replace("s","000"))}function iH(t){return`${fb} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rH({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const i=pb(t),s=yb(t),a=e.getImmediate({optional:!0});if(a){const h=await a.getHeartbeatsHeader();h&&s.append("x-firebase-client",h)}const u={fid:n,authVersion:fb,appId:t.appId,sdkVersion:db},d={method:"POST",headers:s,body:JSON.stringify(u)},p=await vb(()=>fetch(i,d));if(p.ok){const h=await p.json();return{fid:h.fid||n,registrationStatus:2,refreshToken:h.refreshToken,authToken:mb(h.authToken)}}else throw await gb("Create Installation",p)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _b(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sH(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oH=/^[cdef][\w-]{21}$/,Fg="";function aH(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=lH(t);return oH.test(n)?n:Fg}catch{return Fg}}function lH(t){return sH(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eh(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eb=new Map;function Tb(t,e){const n=Eh(t);Sb(n,e),uH(n,e)}function Sb(t,e){const n=Eb.get(t);if(n)for(const i of n)i(e)}function uH(t,e){const n=cH();n&&n.postMessage({key:t,fid:e}),dH()}let xo=null;function cH(){return!xo&&"BroadcastChannel"in self&&(xo=new BroadcastChannel("[Firebase] FID Change"),xo.onmessage=t=>{Sb(t.data.key,t.data.fid)}),xo}function dH(){Eb.size===0&&xo&&(xo.close(),xo=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fH="firebase-installations-database",hH=1,Do="firebase-installations-store";let Gm=null;function Zy(){return Gm||(Gm=Xx(fH,hH,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Do)}}})),Gm}async function Hf(t,e){const n=Eh(t),s=(await Zy()).transaction(Do,"readwrite"),a=s.objectStore(Do),u=await a.get(n);return await a.put(e,n),await s.done,(!u||u.fid!==e.fid)&&Tb(t,e.fid),e}async function Ab(t){const e=Eh(t),i=(await Zy()).transaction(Do,"readwrite");await i.objectStore(Do).delete(e),await i.done}async function Th(t,e){const n=Eh(t),s=(await Zy()).transaction(Do,"readwrite"),a=s.objectStore(Do),u=await a.get(n),d=e(u);return d===void 0?await a.delete(n):await a.put(d,n),await s.done,d&&(!u||u.fid!==d.fid)&&Tb(t,d.fid),d}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ev(t){let e;const n=await Th(t.appConfig,i=>{const s=pH(i),a=mH(t,s);return e=a.registrationPromise,a.installationEntry});return n.fid===Fg?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function pH(t){const e=t||{fid:aH(),registrationStatus:0};return wb(e)}function mH(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(Mo.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=gH(t,n);return{installationEntry:n,registrationPromise:i}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:yH(t)}:{installationEntry:e}}async function gH(t,e){try{const n=await rH(t,e);return Hf(t.appConfig,n)}catch(n){throw hb(n)&&n.customData.serverCode===409?await Ab(t.appConfig):await Hf(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function yH(t){let e=await nw(t.appConfig);for(;e.registrationStatus===1;)await _b(100),e=await nw(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:i}=await ev(t);return i||n}return e}function nw(t){return Th(t,e=>{if(!e)throw Mo.create("installation-not-found");return wb(e)})}function wb(t){return vH(t)?{fid:t.fid,registrationStatus:0}:t}function vH(t){return t.registrationStatus===1&&t.registrationTime+cb<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _H({appConfig:t,heartbeatServiceProvider:e},n){const i=EH(t,n),s=tH(t,n),a=e.getImmediate({optional:!0});if(a){const h=await a.getHeartbeatsHeader();h&&s.append("x-firebase-client",h)}const u={installation:{sdkVersion:db,appId:t.appId}},d={method:"POST",headers:s,body:JSON.stringify(u)},p=await vb(()=>fetch(i,d));if(p.ok){const h=await p.json();return mb(h)}else throw await gb("Generate Auth Token",p)}function EH(t,{fid:e}){return`${pb(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tv(t,e=!1){let n;const i=await Th(t.appConfig,a=>{if(!xb(a))throw Mo.create("not-registered");const u=a.authToken;if(!e&&AH(u))return a;if(u.requestStatus===1)return n=TH(t,e),a;{if(!navigator.onLine)throw Mo.create("app-offline");const d=xH(a);return n=SH(t,d),d}});return n?await n:i.authToken}async function TH(t,e){let n=await iw(t.appConfig);for(;n.authToken.requestStatus===1;)await _b(100),n=await iw(t.appConfig);const i=n.authToken;return i.requestStatus===0?tv(t,e):i}function iw(t){return Th(t,e=>{if(!xb(e))throw Mo.create("not-registered");const n=e.authToken;return CH(n)?{...e,authToken:{requestStatus:0}}:e})}async function SH(t,e){try{const n=await _H(t,e),i={...e,authToken:n};return await Hf(t.appConfig,i),n}catch(n){if(hb(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await Ab(t.appConfig);else{const i={...e,authToken:{requestStatus:0}};await Hf(t.appConfig,i)}throw n}}function xb(t){return t!==void 0&&t.registrationStatus===2}function AH(t){return t.requestStatus===2&&!wH(t)}function wH(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+X9}function xH(t){const e={requestStatus:1,requestTime:Date.now()};return{...t,authToken:e}}function CH(t){return t.requestStatus===1&&t.requestTime+cb<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IH(t){const e=t,{installationEntry:n,registrationPromise:i}=await ev(e);return i?i.catch(console.error):tv(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bH(t,e=!1){const n=t;return await RH(n),(await tv(n,e)).token}async function RH(t){const{registrationPromise:e}=await ev(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NH(t){if(!t||!t.options)throw $m("App Configuration");if(!t.name)throw $m("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw $m(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function $m(t){return Mo.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cb="installations",MH="installations-internal",DH=t=>{const e=t.getProvider("app").getImmediate(),n=NH(e),i=Uo(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},PH=t=>{const e=t.getProvider("app").getImmediate(),n=Uo(e,Cb).getImmediate();return{getId:()=>IH(n),getToken:s=>bH(n,s)}};function kH(){rr(new Ai(Cb,DH,"PUBLIC")),rr(new Ai(MH,PH,"PRIVATE"))}kH();ii(ub,Wy);ii(ub,Wy,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bf="analytics",VH="firebase_id",LH="origin",UH=60*1e3,OH="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",nv="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yn=new Zf("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FH={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Fn=new Lo("analytics","Analytics",FH);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qH(t){if(!t.startsWith(nv)){const e=Fn.create("invalid-gtag-resource",{gtagURL:t});return yn.warn(e.message),""}return t}function Ib(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function HH(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function BH(t,e){const n=HH("firebase-js-sdk-policy",{createScriptURL:qH}),i=document.createElement("script"),s=`${nv}?l=${t}&id=${e}`;i.src=n?n==null?void 0:n.createScriptURL(s):s,i.async=!0,document.head.appendChild(i)}function zH(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function GH(t,e,n,i,s,a){const u=i[s];try{if(u)await e[u];else{const p=(await Ib(n)).find(h=>h.measurementId===s);p&&await e[p.appId]}}catch(d){yn.error(d)}t("config",s,a)}async function $H(t,e,n,i,s){try{let a=[];if(s&&s.send_to){let u=s.send_to;Array.isArray(u)||(u=[u]);const d=await Ib(n);for(const p of u){const h=d.find(E=>E.measurementId===p),v=h&&e[h.appId];if(v)a.push(v);else{a=[];break}}}a.length===0&&(a=Object.values(e)),await Promise.all(a),t("event",i,s||{})}catch(a){yn.error(a)}}function jH(t,e,n,i){async function s(a,...u){try{if(a==="event"){const[d,p]=u;await $H(t,e,n,d,p)}else if(a==="config"){const[d,p]=u;await GH(t,e,n,i,d,p)}else if(a==="consent"){const[d,p]=u;t("consent",d,p)}else if(a==="get"){const[d,p,h]=u;t("get",d,p,h)}else if(a==="set"){const[d]=u;t("set",d)}else t(a,...u)}catch(d){yn.error(d)}}return s}function JH(t,e,n,i,s){let a=function(...u){window[i].push(arguments)};return window[s]&&typeof window[s]=="function"&&(a=window[s]),window[s]=jH(a,t,e,n),{gtagCore:a,wrappedGtag:window[s]}}function KH(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(nv)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YH=30,QH=1e3;class XH{constructor(e={},n=QH){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const bb=new XH;function WH(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function ZH(t){var u;const{appId:e,apiKey:n}=t,i={method:"GET",headers:WH(n)},s=OH.replace("{app-id}",e),a=await fetch(s,i);if(a.status!==200&&a.status!==304){let d="";try{const p=await a.json();(u=p.error)!=null&&u.message&&(d=p.error.message)}catch{}throw Fn.create("config-fetch-failed",{httpStatus:a.status,responseMessage:d})}return a.json()}async function eB(t,e=bb,n){const{appId:i,apiKey:s,measurementId:a}=t.options;if(!i)throw Fn.create("no-app-id");if(!s){if(a)return{measurementId:a,appId:i};throw Fn.create("no-api-key")}const u=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},d=new iB;return setTimeout(async()=>{d.abort()},UH),Rb({appId:i,apiKey:s,measurementId:a},u,d,e)}async function Rb(t,{throttleEndTimeMillis:e,backoffCount:n},i,s=bb){var d;const{appId:a,measurementId:u}=t;try{await tB(i,e)}catch(p){if(u)return yn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${u} provided in the "measurementId" field in the local Firebase config. [${p==null?void 0:p.message}]`),{appId:a,measurementId:u};throw p}try{const p=await ZH(t);return s.deleteThrottleMetadata(a),p}catch(p){const h=p;if(!nB(h)){if(s.deleteThrottleMetadata(a),u)return yn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${u} provided in the "measurementId" field in the local Firebase config. [${h==null?void 0:h.message}]`),{appId:a,measurementId:u};throw p}const v=Number((d=h==null?void 0:h.customData)==null?void 0:d.httpStatus)===503?IS(n,s.intervalMillis,YH):IS(n,s.intervalMillis),E={throttleEndTimeMillis:Date.now()+v,backoffCount:n+1};return s.setThrottleMetadata(a,E),yn.debug(`Calling attemptFetch again in ${v} millis`),Rb(t,E,i,s)}}function tB(t,e){return new Promise((n,i)=>{const s=Math.max(e-Date.now(),0),a=setTimeout(n,s);t.addEventListener(()=>{clearTimeout(a),i(Fn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function nB(t){if(!(t instanceof Ii)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class iB{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function rB(t,e,n,i,s){if(s&&s.global){t("event",n,i);return}else{const a=await e,u={...i,send_to:a};t("event",n,u)}}async function sB(t,e,n,i){if(i&&i.global){const s={};for(const a of Object.keys(n))s[`user_properties.${a}`]=n[a];return t("set",s),Promise.resolve()}else{const s=await e;t("config",s,{update:!0,user_properties:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oB(){if(Jx())try{await Kx()}catch(t){return yn.warn(Fn.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return yn.warn(Fn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function aB(t,e,n,i,s,a,u){const d=eB(t);d.then(S=>{n[S.measurementId]=S.appId,t.options.measurementId&&S.measurementId!==t.options.measurementId&&yn.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${S.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(S=>yn.error(S)),e.push(d);const p=oB().then(S=>{if(S)return i.getId()}),[h,v]=await Promise.all([d,p]);KH(a)||BH(a,h.measurementId),s("js",new Date);const E=(u==null?void 0:u.config)??{};return E[LH]="firebase",E.update=!0,v!=null&&(E[VH]=v),s("config",h.measurementId,E),h.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lB{constructor(e){this.app=e}_delete(){return delete Ka[this.app.options.appId],Promise.resolve()}}let Ka={},rw=[];const sw={};let jm="dataLayer",uB="gtag",ow,iv,aw=!1;function cB(){const t=[];if(jx()&&t.push("This is a browser extension environment."),Q4()||t.push("Cookies are not available."),t.length>0){const e=t.map((i,s)=>`(${s+1}) ${i}`).join(" "),n=Fn.create("invalid-analytics-context",{errorInfo:e});yn.warn(n.message)}}function dB(t,e,n){cB();const i=t.options.appId;if(!i)throw Fn.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)yn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Fn.create("no-api-key");if(Ka[i]!=null)throw Fn.create("already-exists",{id:i});if(!aw){zH(jm);const{wrappedGtag:a,gtagCore:u}=JH(Ka,rw,sw,jm,uB);iv=a,ow=u,aw=!0}return Ka[i]=aB(t,rw,sw,e,ow,jm,n),new lB(t)}function fB(t=uy()){t=Ot(t);const e=Uo(t,Bf);return e.isInitialized()?e.getImmediate():hB(t)}function hB(t,e={}){const n=Uo(t,Bf);if(n.isInitialized()){const s=n.getImmediate();if(Ns(e,n.getOptions()))return s;throw Fn.create("already-initialized")}return n.initialize({options:e})}function pB(t,e,n){t=Ot(t),sB(iv,Ka[t.app.options.appId],e,n).catch(i=>yn.error(i))}function mB(t,e,n,i){t=Ot(t),rB(iv,Ka[t.app.options.appId],e,n,i).catch(s=>yn.error(s))}const lw="@firebase/analytics",uw="0.10.19";function gB(){rr(new Ai(Bf,(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return dB(i,s,n)},"PUBLIC")),rr(new Ai("analytics-internal",t,"PRIVATE")),ii(lw,uw),ii(lw,uw,"esm2020");function t(e){try{const n=e.getProvider(Bf).getImmediate();return{logEvent:(i,s,a)=>mB(n,i,s,a),setUserProperties:(i,s)=>pB(n,i,s)}}catch(n){throw Fn.create("interop-component-reg-failed",{reason:n})}}}gB();const yB={apiKey:"AIzaSyC8HHHPVTtHpkunflCmD3FTbHTo1l9JbgQ",authDomain:"chatterbox-d7i21.firebaseapp.com",projectId:"chatterbox-d7i21",storageBucket:"chatterbox-d7i21.firebasestorage.app",messagingSenderId:"218217233946",appId:"1:218217233946:web:c7504871b112a8f4085ba3"},rv=Wx(yB),vi=mF(rv),Jm=j9(rv);fB(rv);const Km={async getProducts(){return(await Hm(To(vi,"products"))).docs.map(e=>({id:e.id,...e.data()}))},async addProduct(t){return{id:(await Zd(To(vi,"products"),t)).id,...t}},async updateProduct(t,e){return await VA(bu(vi,"products",t),e),{id:t,...e}},async deleteProduct(t){await LA(bu(vi,"products",t))},async registerUser(t,e,n){const i=await Mq(Jm,t,e);return await Zd(To(vi,"users"),{uid:i.user.uid,...n,createdAt:new Date}),i.user},async loginUser(t,e){return await Dq(Jm,t,e)},async logoutUser(){await Vq(Jm)},async createOrder(t){return{id:(await Zd(To(vi,"orders"),{...t,createdAt:new Date,status:"pending"})).id,...t}},async getUserOrders(t){const e=IF(To(vi,"orders"),bF("userId","==",t),RF("createdAt","desc"));return(await Hm(e)).docs.map(i=>({id:i.id,...i.data()}))},async getHeroSlides(){return(await Hm(To(vi,"heroSlides"))).docs.map(e=>({id:e.id,...e.data()}))},async addHeroSlide(t){return{id:(await Zd(To(vi,"heroSlides"),t)).id,...t}},async updateHeroSlide(t,e){return await VA(bu(vi,"heroSlides",t),e),{id:t,...e}},async deleteHeroSlide(t){await LA(bu(vi,"heroSlides",t))}},Cr="/api",qg=()=>localStorage.getItem("himalayan_token"),Qi=async(t,e={})=>{const n=qg(),i={"Content-Type":"application/json",...e.headers};n&&(i.Authorization=`Bearer ${n}`);const s=await fetch(`${Cr}${t}`,{...e,headers:i});if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);return s.json()},wt={getProducts:async()=>{try{return await Km.getProducts()}catch(t){return console.error("Firestore error:",t),[]}try{return await Qi("/products")}catch(t){return console.error("Failed to fetch products:",t),[]}},getProductById:async t=>{try{return await Qi(`/products/${t}`)}catch(e){console.error("Failed to fetch product:",e);return}},addProduct:async t=>await Qi("/products",{method:"POST",body:JSON.stringify(t)}),updateProduct:async(t,e)=>await Qi(`/products/${t}`,{method:"PUT",body:JSON.stringify(e)}),deleteProduct:async t=>{await Qi(`/products/${t}`,{method:"DELETE"})},login:async(t,e)=>{try{const i=await(await fetch(`${Cr}/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:e})})).json();return i.success&&i.token?(localStorage.setItem("himalayan_token",i.token),localStorage.setItem("himalayan_auth","true"),{success:!0,token:i.token}):{success:!1}}catch(n){return console.error("Login failed:",n),{success:!1}}},registerAdmin:async t=>{try{return{success:(await(await fetch(`${Cr}/auth/register`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).json()).success}}catch(e){return console.error("Registration failed:",e),{success:!1}}},logout:()=>{localStorage.removeItem("himalayan_token"),localStorage.removeItem("himalayan_auth")},isAuthenticated:()=>localStorage.getItem("himalayan_auth")==="true"&&qg()!==null,uploadImage:async t=>{const e=new FormData;e.append("image",t);const n=qg(),i=await fetch(`${Cr}/upload`,{method:"POST",headers:{Authorization:`Bearer ${n}`},body:e});if(!i.ok)throw new Error("Upload failed");return(await i.json()).imageUrl},getHeroSlides:async()=>{try{return await Qi("/hero-slides")}catch(t){return console.error("Failed to fetch hero slides:",t),[]}},addHeroSlide:async t=>{try{return await Qi("/hero-slides",{method:"POST",body:JSON.stringify(t)})}catch(e){throw console.error("API Error adding hero slide:",e),e}},updateHeroSlide:async(t,e)=>{try{return await Qi(`/hero-slides/${t}`,{method:"PUT",body:JSON.stringify(e)})}catch(n){throw console.error("API Error updating hero slide:",n),n}},deleteHeroSlide:async t=>{await Qi(`/hero-slides/${t}`,{method:"DELETE"})},submitContact:async t=>{try{return{success:(await(await fetch(`${Cr}/contact`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).json()).success}}catch(e){return console.error("Contact submission failed:",e),{success:!1}}},getContactMessages:async()=>{try{return await Qi("/contact")}catch(t){return console.error("Failed to fetch contact messages:",t),[]}},userRegister:async t=>{try{return{success:!0,user:{id:(await Km.registerUser(t.email,t.password,{name:t.name,phone:t.phone,email:t.email})).uid,name:t.name,email:t.email}}}catch(e){return{success:!1,error:e.message}}try{return await(await fetch(`${Cr}/users/register`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).json()}catch(e){return console.error("Registration failed:",e),{success:!1}}},userLogin:async(t,e)=>{try{const n=await Km.loginUser(t,e);return{success:!0,user:{id:n.user.uid,email:n.user.email,name:n.user.displayName||"User"}}}catch(n){return{success:!1,error:n.message}}try{return await(await fetch(`${Cr}/users/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:e})})).json()}catch(n){return console.error("Login failed:",n),{success:!1}}},createOrder:async t=>{try{return await(await fetch(`${Cr}/orders`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).json()}catch(e){return console.error("Order creation failed:",e),{success:!1}}},getUserOrders:async t=>{try{return await(await fetch(`${Cr}/orders/${t}`)).json()}catch(e){return console.error("Failed to fetch user orders:",e),[]}}};function vB(t){const e=atob(t),n=e.length,i=new Uint8Array(n);for(let s=0;s<n;s++)i[s]=e.charCodeAt(s);return i}function _B(t){let e="";const n=t.byteLength;for(let i=0;i<n;i++)e+=String.fromCharCode(t[i]);return btoa(e)}async function EB(t,e,n,i){const s=new Int16Array(t.buffer),a=s.length/i,u=e.createBuffer(i,a,n);for(let d=0;d<i;d++){const p=u.getChannelData(d);for(let h=0;h<a;h++)p[h]=s[h*i+d]/32768}return u}const TB=()=>{const[t,e]=G.useState(!1),[n,i]=G.useState(!1),[s,a]=G.useState(!1),[u,d]=G.useState(null),p=Us(),{addToCart:h}=ko(),v=G.useRef({addToCart:h});v.current={addToCart:h};const E=G.useRef({}),S=G.useRef(0),C=G.useRef(new Set),D=G.useRef(null),U=G.useRef(null),P=()=>{U.current=null,D.current&&(D.current.getTracks().forEach(H=>H.stop()),D.current=null),C.current.forEach(H=>{try{H.stop()}catch{}}),C.current.clear(),e(!1),i(!1),S.current=0},q=[{name:"navigate_to",parameters:{type:gn.OBJECT,description:"Navigate the user to specific parts of the Nepali store.",properties:{page:{type:gn.STRING,description:"Target: home, products, about, cart, contact"},category:{type:gn.STRING,description:"Filter: Jadibuti or Local Fruits"},search_query:{type:gn.STRING,description:"Product name in English or Nepali"}},required:["page"]}},{name:"add_product_to_cart",parameters:{type:gn.OBJECT,description:"Add a high-quality Himalayan product to the cart.",properties:{product_name:{type:gn.STRING,description:"Name of the product (e.g., Timur, Apple)"},quantity:{type:gn.NUMBER,description:"Quantity (defaults to 1)"}},required:["product_name"]}}],X=async()=>{d(null),i(!0);try{const H=new N4({apiKey:"PLACEHOLDER_API_KEY"}),ne=await wt.getProducts();(!E.current.input||E.current.input.state==="closed")&&(E.current.input=new(window.AudioContext||window.webkitAudioContext)({sampleRate:16e3})),(!E.current.output||E.current.output.state==="closed")&&(E.current.output=new(window.AudioContext||window.webkitAudioContext)({sampleRate:24e3})),await E.current.input.resume(),await E.current.output.resume();const le=await navigator.mediaDevices.getUserMedia({audio:!0});D.current=le;const ce=H.live.connect({model:"gemini-2.5-flash-native-audio-preview-09-2025",config:{responseModalities:[Fu.AUDIO],tools:[{functionDeclarations:q}],speechConfig:{voiceConfig:{prebuiltVoiceConfig:{voiceName:"Puck"}}},systemInstruction:` 'Himalayan Herbs & Fruits'    (Himalayan Sathi)  
          
          Persona & Culture:
          - Always start with a warm "Namaste". 
          - Be extremely polite, use "Hajur", "Dhanyabaad", and respect the Nepali value "Atithi Devo Bhava" (Guest is God).
          - You are an expert in local Jadibuti (Timur, Jatamasi) and organic Fruits from Jumla/Mustang.
          
          Technical Duties:
          - Inventory: ${JSON.stringify(ne.map(N=>({name:N.name,nepali:N.nepaliName,price:N.price,benefits:N.benefits})))}
          - Commands:
            1. If they want to see products or categories, use 'navigate_to'.
            2. If they want to buy, use 'add_product_to_cart'.
            3. Always verbally confirm the action after calling the tool (e.g., "Hajur, I've added Timur to your cart!").
          - Language: You understand both Nepali and English perfectly.
          
          Respond naturally, keeping responses short enough for a voice conversation.`},callbacks:{onopen:()=>{i(!1),e(!0);const N=E.current.input.createMediaStreamSource(le),M=E.current.input.createScriptProcessor(4096,1,1);M.onaudioprocess=R=>{const V=R.inputBuffer.getChannelData(0),O=V.length,z=new Int16Array(O);for(let oe=0;oe<O;oe++)z[oe]=V[oe]*32768;const k={data:_B(new Uint8Array(z.buffer)),mimeType:"audio/pcm;rate=16000"};ce.then(oe=>{oe.sendRealtimeInput({media:k})}).catch(()=>{})},N.connect(M),M.connect(E.current.input.destination)},onmessage:async N=>{var R,V,O,z,k;if(N.toolCall){const oe=[];for(const Ce of N.toolCall.functionCalls){let Y="Action performed successfully.";if(Ce.name==="navigate_to"){const{page:ue,category:_e,search_query:ke}=Ce.args;let Ue="/";ue==="products"?Ue="/products":ue==="cart"?Ue="/cart":ue==="contact"&&(Ue="/contact"),_e?Ue+=`?category=${encodeURIComponent(_e)}`:ke&&(Ue+=`?search=${encodeURIComponent(ke)}`),p(Ue),Y=`Navigation successful. User is now viewing ${ue}.`}else if(Ce.name==="add_product_to_cart"){const{product_name:ue,quantity:_e=1}=Ce.args,ke=ne.find(Ue=>Ue.name.toLowerCase().includes(ue.toLowerCase())||Ue.nepaliName.includes(ue));ke?(v.current.addToCart(ke,Number(_e)),Y=`Added ${_e} units of ${ke.name} to the cart. Price: Rs. ${ke.price}.`):Y=`Product '${ue}' not found.`}oe.push({id:Ce.id,name:Ce.name,response:{result:Y}})}oe.length>0&&ce.then(Ce=>{Ce.sendToolResponse({functionResponses:oe})})}const M=(z=(O=(V=(R=N.serverContent)==null?void 0:R.modelTurn)==null?void 0:V.parts[0])==null?void 0:O.inlineData)==null?void 0:z.data;if(M&&E.current.output){const oe=E.current.output;S.current=Math.max(S.current,oe.currentTime);const Ce=await EB(vB(M),oe,24e3,1),Y=oe.createBufferSource();Y.buffer=Ce,Y.connect(oe.destination),Y.addEventListener("ended",()=>{C.current.delete(Y),C.current.size===0&&a(!1)}),a(!0),Y.start(S.current),S.current+=Ce.duration,C.current.add(Y)}(k=N.serverContent)!=null&&k.interrupted&&(C.current.forEach(oe=>{try{oe.stop()}catch{}}),C.current.clear(),S.current=0,a(!1))},onerror:N=>{console.error("Live API Error:",N),d("Network error. Please try again."),P()},onclose:()=>{P()}}});U.current=await ce}catch(H){console.error("Assistant Start Error:",H),d("Connection failed. Check your microphone or network."),i(!1)}};return T.jsxs("div",{className:"fixed bottom-8 right-8 z-[100] flex flex-col items-end gap-4",children:[t&&T.jsxs("div",{className:"bg-white rounded-[3rem] shadow-2xl p-8 w-80 border-t-8 border-primary-green overflow-hidden animate-in slide-in-from-bottom-6 duration-500 relative",children:[T.jsx("div",{className:"absolute top-0 right-0 opacity-[0.03] pointer-events-none",children:T.jsx("div",{className:"grid grid-cols-4 gap-1",children:[...Array(20)].map((H,ne)=>T.jsx("div",{className:"w-10 h-10 bg-red-500 rotate-45"},ne))})}),T.jsxs("div",{className:"flex justify-between items-center mb-8",children:[T.jsxs("div",{className:"flex items-center gap-2",children:[T.jsx("div",{className:"w-3 h-3 bg-red-600 rounded-full animate-pulse shadow-sm shadow-red-500"}),T.jsxs("div",{className:"flex flex-col",children:[T.jsx("span",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-text-dark/40",children:"Himalayan Sathi"}),T.jsx("span",{className:"text-xs font-bold text-primary-green",children:"   LIVE"})]})]}),T.jsx("button",{onClick:P,className:"p-2 hover:bg-neutral-bg rounded-full transition-colors",children:T.jsx(Xg,{size:20,className:"text-text-dark/50"})})]}),T.jsxs("div",{className:"flex flex-col items-center py-6",children:[T.jsxs("div",{className:`w-28 h-28 rounded-full bg-accent-cream flex items-center justify-center relative transition-all duration-500 shadow-inner ${s?"scale-110 shadow-primary-green/20":"scale-100"}`,children:[T.jsx("div",{className:"flex gap-1.5 items-end h-10",children:[...Array(6)].map((H,ne)=>T.jsx("div",{className:`w-1.5 bg-primary-green rounded-full transition-all duration-300 ${s?"animate-bounce":"h-2 opacity-30"}`,style:{animationDelay:`${ne*.1}s`,height:s?`${20+Math.random()*30}px`:"8px"}},ne))}),s&&T.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-primary-green/20 animate-ping"})]}),T.jsxs("div",{className:"mt-8 text-center",children:[T.jsx("p",{className:"text-lg font-bold text-text-dark mb-1",children:s?"Namaste! I'm speaking...":"Listening..."}),T.jsx("p",{className:"text-[10px] font-bold text-earth-brown uppercase tracking-widest opacity-60",children:s?"!  ?":"! ..."})]})]}),T.jsxs("div",{className:"mt-6 pt-6 border-t border-neutral-bg flex flex-col gap-3",children:[T.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-text-dark/40 bg-neutral-bg/50 px-3 py-2 rounded-xl italic",children:[T.jsx(q2,{size:12}),'"Show me Apples" or "  "']}),T.jsxs("button",{onClick:P,className:"w-full bg-red-50 text-red-600 py-4 rounded-[1.5rem] font-bold text-sm hover:bg-red-100 transition-all flex items-center justify-center gap-2 active:scale-95",children:[T.jsx(B2,{size:18})," End Session ( )"]})]})]}),!t&&T.jsxs("div",{className:"group flex items-center gap-4",children:[u&&T.jsx("div",{className:"bg-red-600 text-white text-[10px] font-black px-5 py-2.5 rounded-full shadow-2xl animate-in slide-in-from-right-4",children:u}),T.jsx("div",{className:"bg-white px-5 py-3 rounded-2xl shadow-xl border border-primary-green/10 opacity-0 group-hover:opacity-100 transition-all -translate-x-2 group-hover:translate-x-0",children:T.jsxs("div",{className:"flex flex-col items-end",children:[T.jsx("span",{className:"text-xs font-bold text-primary-green",children:"Ask our Himalayan Sathi"}),T.jsx("span",{className:"text-[9px] font-bold text-earth-brown/60 uppercase tracking-widest",children:"!  ?"})]})}),T.jsxs("button",{onClick:X,disabled:n,className:"w-20 h-20 bg-primary-green text-white rounded-full flex flex-col items-center justify-center shadow-[0_20px_50px_rgba(29,124,75,0.3)] hover:scale-110 active:scale-90 transition-all disabled:opacity-50 relative overflow-hidden group/btn",children:[n?T.jsx(Ru,{className:"animate-spin",size:32}):T.jsxs(T.Fragment,{children:[T.jsx(Uu,{size:32,className:"relative z-10 group-hover/btn:rotate-12 transition-transform"}),T.jsx("span",{className:"text-[8px] font-black uppercase tracking-tighter mt-1 opacity-60",children:"Voice"})]}),T.jsx("div",{className:"absolute top-0 left-0 w-full h-1/2 bg-white/10"})]})]})]})},SB=()=>{const t=localStorage.getItem("user_token"),e=localStorage.getItem("user_name"),n=()=>{localStorage.removeItem("user_token"),localStorage.removeItem("user_email"),localStorage.removeItem("user_name"),window.location.reload()};return t?T.jsxs("div",{className:"flex items-center gap-2",children:[T.jsxs("span",{className:"text-sm text-earth-brown",children:["Hi, ",e||"User"]}),T.jsxs("button",{onClick:n,className:"flex items-center gap-1 text-sm font-medium text-text-dark hover:text-primary-green transition-colors",children:[T.jsx(Lw,{size:16})," Logout"]})]}):T.jsxs("div",{className:"flex items-center gap-4",children:[T.jsx(it,{to:"/login",className:"text-sm font-medium text-text-dark hover:text-primary-green transition-colors",children:"Login"}),T.jsx(it,{to:"/signup",className:"bg-primary-green text-white px-4 py-2 rounded-xl text-sm font-medium hover:bg-primary-green/90 transition-colors",children:"Sign Up"})]})},AB=({children:t})=>{const[e,n]=dw.useState(!1),{totalItems:i}=ko(),s=Ur(),a=[{path:"/",label:"Home"},{path:"/products",label:"Products"},{path:"/about",label:"About"},{path:"/testimonials",label:"Testimonials"},{path:"/contact",label:"Contact"}];return s.pathname==="/admin/dashboard"?T.jsx(T.Fragment,{children:t}):T.jsxs("div",{className:"flex flex-col min-h-screen font-sans",children:[T.jsxs("nav",{className:"sticky top-0 z-50 bg-accent-cream shadow-sm border-b border-primary-green/10",children:[T.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:T.jsxs("div",{className:"flex justify-between h-20 items-center",children:[T.jsxs(it,{to:"/",className:"flex items-center gap-2 group",children:[T.jsx("div",{className:"bg-primary-green p-2 rounded-lg text-white",children:T.jsx(Uu,{size:24})}),T.jsxs("div",{className:"flex flex-col",children:[T.jsx("span",{className:"text-primary-green font-bold text-xl leading-tight tracking-tight",children:"HIMALAYAN"}),T.jsx("span",{className:"text-earth-brown text-sm font-semibold tracking-wider",children:"HERBS & FRUITS"})]})]}),T.jsxs("div",{className:"hidden md:flex items-center space-x-8",children:[a.map(u=>T.jsx(it,{to:u.path,className:`text-sm font-medium transition-colors hover:text-primary-green ${s.pathname===u.path?"text-primary-green border-b-2 border-primary-green":"text-text-dark"}`,children:u.label},u.path)),T.jsx(SB,{}),T.jsxs(it,{to:"/cart",className:"relative p-2 text-text-dark hover:text-primary-green transition-colors",children:[T.jsx(zE,{size:24}),i>0&&T.jsx("span",{className:"absolute top-0 right-0 bg-primary-green text-white text-[10px] font-bold h-5 w-5 rounded-full flex items-center justify-center border-2 border-accent-cream",children:i})]})]}),T.jsxs("div",{className:"md:hidden flex items-center gap-4",children:[T.jsxs(it,{to:"/cart",className:"relative p-2 text-text-dark",children:[T.jsx(zE,{size:24}),i>0&&T.jsx("span",{className:"absolute top-0 right-0 bg-primary-green text-white text-[10px] font-bold h-4 w-4 rounded-full flex items-center justify-center",children:i})]}),T.jsx("button",{onClick:()=>n(!e),className:"text-text-dark",children:e?T.jsx(Xg,{size:28}):T.jsx(O2,{size:28})})]})]})}),e&&T.jsx("div",{className:"md:hidden bg-accent-cream border-t border-primary-green/10 py-4 px-4 space-y-4",children:a.map(u=>T.jsx(it,{to:u.path,className:"block text-lg font-medium text-text-dark",onClick:()=>n(!1),children:u.label},u.path))})]}),T.jsx("main",{className:"flex-grow",children:t}),T.jsx(TB,{}),T.jsx("footer",{className:"bg-text-dark text-accent-cream pt-16 pb-8",children:T.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[T.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-12 mb-12",children:[T.jsxs("div",{className:"col-span-1 md:col-span-2",children:[T.jsxs(it,{to:"/",className:"flex items-center gap-2 mb-6",children:[T.jsx(Uu,{className:"text-primary-green",size:28}),T.jsx("span",{className:"text-2xl font-bold tracking-tight",children:"Himalayan Herbs & Fruits"})]}),T.jsx("p",{className:"text-accent-cream/70 leading-relaxed max-w-md",children:"Our mission is to support local Nepali farmers and promote organic Himalayan products. Bringing the authentic taste of the mountains and the ancient wisdom of Himalayan herbs to your doorstep."})]}),T.jsxs("div",{children:[T.jsx("h4",{className:"text-lg font-semibold mb-6 text-primary-green",children:"Quick Links"}),T.jsxs("ul",{className:"space-y-4 text-accent-cream/70",children:[T.jsx("li",{children:T.jsx(it,{to:"/",className:"hover:text-primary-green transition-colors",children:"Home"})}),T.jsx("li",{children:T.jsx(it,{to:"/products",className:"hover:text-primary-green transition-colors",children:"All Products"})}),T.jsx("li",{children:T.jsx(it,{to:"/about",className:"hover:text-primary-green transition-colors",children:"About Us"})}),T.jsx("li",{children:T.jsx(it,{to:"/contact",className:"hover:text-primary-green transition-colors",children:"Contact"})})]})]}),T.jsxs("div",{children:[T.jsx("h4",{className:"text-lg font-semibold mb-6 text-primary-green",children:"Stay Connected"}),T.jsxs("div",{className:"flex space-x-4 mb-8",children:[T.jsx("a",{href:"#",className:"p-2 bg-accent-cream/10 rounded-full hover:bg-primary-green transition-colors",children:T.jsx(x2,{size:20})}),T.jsx("a",{href:"#",className:"p-2 bg-accent-cream/10 rounded-full hover:bg-primary-green transition-colors",children:T.jsx(v2,{size:20})}),T.jsx("a",{href:"#",className:"p-2 bg-accent-cream/10 rounded-full hover:bg-primary-green transition-colors",children:T.jsx(pM,{size:20})})]}),T.jsxs(it,{to:"/admin/login",className:"flex items-center gap-2 text-primary-green/60 hover:text-primary-green transition-colors text-sm font-medium",children:[T.jsx(Bw,{size:16})," Admin Portal"]})]})]}),T.jsx("div",{className:"pt-8 border-t border-accent-cream/10 text-center text-sm text-accent-cream/50",children:T.jsx("p",{children:" 2025 Himalayan Herbs & Fruits. All rights reserved."})})]})})]})};var an=(t=>(t.HERBS="Jadibuti",t.FRUITS="Local Fruits",t))(an||{});an.HERBS,an.HERBS,an.HERBS,an.HERBS,an.HERBS,an.HERBS,an.FRUITS,an.FRUITS,an.FRUITS,an.FRUITS,an.FRUITS;const Nb=[{id:"t1",name:"Ram Kumar Shrestha",text:"             ",location:"Kathmandu, Nepal"},{id:"t2",name:"Anjali Gurung",text:"               ",location:"Pokhara, Nepal"},{id:"t3",name:"David Wilson",text:"Nepali local products with great packaging. The Kurilo roots are authentic and high quality.",location:"Expat in Nepal"}],wB=()=>{const[t,e]=G.useState([]),[n,i]=G.useState(0),[s,a]=G.useState(!0);G.useEffect(()=>{u()},[]),G.useEffect(()=>{if(t.length>1){const v=setInterval(()=>{i(E=>(E+1)%t.length)},5e3);return()=>clearInterval(v)}},[t.length]);const u=async()=>{try{const E=(await wt.getHeroSlides()).filter(S=>S.isActive).sort((S,C)=>S.order-C.order);e(E)}catch(v){console.error("Failed to load hero slides:",v)}finally{a(!1)}},d=()=>{i(v=>(v+1)%t.length)},p=()=>{i(v=>(v-1+t.length)%t.length)},h=v=>{i(v)};return s?T.jsx("div",{className:"relative h-[70vh] bg-gradient-to-r from-primary-green to-earth-brown animate-pulse",children:T.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:T.jsx("div",{className:"text-white text-xl",children:"Loading..."})})}):t.length===0?T.jsx("div",{className:"relative h-[70vh] bg-gradient-to-r from-primary-green to-earth-brown",children:T.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:T.jsxs("div",{className:"text-center text-white",children:[T.jsx("h1",{className:"text-4xl font-bold mb-4",children:"Welcome to Himalayan Herbs & Fruits"}),T.jsx("p",{className:"text-xl",children:"Authentic organic products from Nepal"})]})})}):T.jsxs("div",{className:"relative h-[70vh] overflow-hidden",children:[T.jsx("div",{className:"flex transition-transform duration-500 ease-in-out h-full",style:{transform:`translateX(-${n*100}%)`},children:t.map((v,E)=>T.jsxs("div",{className:"min-w-full h-full relative",children:[T.jsx("div",{className:"absolute inset-0 bg-cover bg-center bg-no-repeat",style:{backgroundImage:`url(${v.image})`},children:T.jsx("div",{className:"absolute inset-0 bg-black/40"})}),T.jsx("div",{className:"relative z-10 h-full flex items-center",children:T.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:T.jsxs("div",{className:"max-w-3xl",children:[T.jsx("h1",{className:"text-4xl md:text-6xl font-bold text-white mb-6 leading-tight",children:v.title}),T.jsx("p",{className:"text-xl md:text-2xl text-white/90 mb-8 leading-relaxed",children:v.subtitle}),T.jsx(it,{to:v.buttonLink,className:"inline-block bg-primary-green text-white px-8 py-4 rounded-2xl font-bold text-lg hover:bg-primary-green/90 transition-all shadow-lg hover:shadow-xl transform hover:scale-105",children:v.buttonText})]})})})]},v.id))}),t.length>1&&T.jsxs(T.Fragment,{children:[T.jsx("button",{onClick:p,className:"absolute left-4 top-1/2 -translate-y-1/2 bg-white/20 hover:bg-white/30 text-white p-3 rounded-full transition-all backdrop-blur-sm",children:T.jsx(u2,{size:24})}),T.jsx("button",{onClick:d,className:"absolute right-4 top-1/2 -translate-y-1/2 bg-white/20 hover:bg-white/30 text-white p-3 rounded-full transition-all backdrop-blur-sm",children:T.jsx(d2,{size:24})})]}),t.length>1&&T.jsx("div",{className:"absolute bottom-6 left-1/2 -translate-x-1/2 flex space-x-3",children:t.map((v,E)=>T.jsx("button",{onClick:()=>h(E),className:`w-3 h-3 rounded-full transition-all ${E===n?"bg-white scale-125":"bg-white/50 hover:bg-white/75"}`},E))})]})},xB=()=>{const[t,e]=G.useState([]),{addToCart:n}=ko();return G.useEffect(()=>{wt.getProducts().then(i=>{e(i.slice(0,4))})},[]),T.jsxs("div",{className:"animate-in fade-in duration-500",children:[T.jsx(wB,{}),T.jsxs("section",{className:"py-24 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[T.jsxs("div",{className:"text-center mb-16",children:[T.jsx("h3",{className:"text-3xl font-bold text-text-dark mb-4",children:"Our Categories"}),T.jsx("div",{className:"w-20 h-1 bg-primary-green mx-auto"})]}),T.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[T.jsxs(it,{to:"/products?category=Jadibuti",className:"group relative h-80 rounded-3xl overflow-hidden shadow-xl",children:[T.jsx("img",{src:"https://picsum.photos/seed/herb-cat/800/600",className:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-110",alt:"Herbs"}),T.jsxs("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 to-transparent flex flex-col justify-end p-8",children:[T.jsx(Uu,{className:"text-primary-green mb-4",size:40}),T.jsx("h4",{className:"text-3xl font-bold text-white mb-2",children:"Jadibuti / Herbs"}),T.jsx("p",{className:"text-white/80",children:"Traditional medicinal herbs from the high Himalayas."})]})]}),T.jsxs(it,{to:"/products?category=Local Fruits",className:"group relative h-80 rounded-3xl overflow-hidden shadow-xl",children:[T.jsx("img",{src:"https://picsum.photos/seed/fruit-cat/800/600",className:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-110",alt:"Fruits"}),T.jsxs("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 to-transparent flex flex-col justify-end p-8",children:[T.jsx(r2,{className:"text-primary-green mb-4",size:40}),T.jsx("h4",{className:"text-3xl font-bold text-white mb-2",children:"Local Fruits"}),T.jsx("p",{className:"text-white/80",children:"Sweet, sun-ripened organic fruits from Nepal's hills."})]})]})]})]}),T.jsx("section",{className:"py-24 bg-accent-cream",children:T.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[T.jsxs("div",{className:"flex justify-between items-end mb-12",children:[T.jsxs("div",{children:[T.jsx("h3",{className:"text-3xl font-bold text-text-dark mb-2",children:"Featured Products"}),T.jsx("p",{className:"text-earth-brown font-medium",children:"Hand-picked selections for your wellness."})]}),T.jsxs(it,{to:"/products",className:"text-primary-green font-bold flex items-center gap-1 hover:gap-2 transition-all",children:["View All ",T.jsx(kw,{size:18})]})]}),T.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8",children:t.map(i=>T.jsxs("div",{className:"bg-white rounded-2xl overflow-hidden shadow-md hover:shadow-xl transition-shadow border border-neutral-bg group",children:[T.jsxs(it,{to:`/product/${i.id}`,className:"block relative aspect-[4/3] overflow-hidden",children:[T.jsx("img",{src:i.image,alt:i.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500"}),T.jsx("div",{className:"absolute top-4 left-4 bg-primary-green text-white text-[10px] font-bold px-3 py-1 rounded-full uppercase tracking-widest",children:i.category})]}),T.jsxs("div",{className:"p-6",children:[T.jsx("h4",{className:"text-lg font-bold text-text-dark mb-1 line-clamp-1",children:i.name}),T.jsxs("p",{className:"text-primary-green font-bold text-lg mb-4",children:["Rs. ",i.price]}),T.jsx("button",{onClick:()=>n(i,1),className:"w-full py-3 bg-neutral-bg text-primary-green font-bold rounded-xl hover:bg-primary-green hover:text-white transition-colors border border-primary-green/10",children:"Add to Cart"})]})]},i.id))})]})}),T.jsxs("section",{className:"py-24 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[T.jsxs("div",{className:"text-center mb-16",children:[T.jsx("h3",{className:"text-3xl font-bold text-text-dark mb-4",children:"What Our Customers Say"}),T.jsx("div",{className:"w-20 h-1 bg-primary-green mx-auto"})]}),T.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:Nb.map(i=>T.jsxs("div",{className:"bg-white p-8 rounded-3xl shadow-sm border border-neutral-bg relative",children:[T.jsx("div",{className:"flex gap-1 text-yellow-500 mb-6",children:[...Array(5)].map((s,a)=>T.jsx(Gw,{size:16,fill:"currentColor"},a))}),T.jsxs("p",{className:"text-text-dark/80 italic mb-6 leading-relaxed",children:['"',i.text,'"']}),T.jsxs("div",{children:[T.jsx("h5",{className:"font-bold text-text-dark",children:i.name}),T.jsx("p",{className:"text-sm text-earth-brown",children:i.location})]})]},i.id))})]})]})},CB=()=>{const[t,e]=G.useState([]),[n,i]=G.useState([]),[s,a]=G.useState(!0),[u,d]=jN(),[p,h]=G.useState(""),v=u.get("category"),{addToCart:E}=ko();G.useEffect(()=>{wt.getProducts().then(C=>{e(C),a(!1)})},[]),G.useEffect(()=>{let C=t;v&&(C=C.filter(D=>D.category===v)),p&&(C=C.filter(D=>D.name.toLowerCase().includes(p.toLowerCase())||D.nepaliName.includes(p))),i(C)},[t,v,p]);const S=Object.values(an);return T.jsx("div",{className:"bg-accent-cream min-h-screen py-12",children:T.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[T.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-6 mb-12",children:[T.jsxs("div",{children:[T.jsx("h1",{className:"text-4xl font-bold text-text-dark mb-2",children:"Our Store"}),T.jsx("p",{className:"text-earth-brown font-medium",children:"Authentic Himalayan Herbs & Local Fruits"})]}),T.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 w-full md:w-auto",children:[T.jsxs("div",{className:"relative",children:[T.jsx(Z2,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-earth-brown/50",size:18}),T.jsx("input",{type:"text",placeholder:"Search products...",value:p,onChange:C=>h(C.target.value),className:"pl-10 pr-4 py-3 rounded-xl border border-primary-green/10 bg-white w-full sm:w-64 focus:ring-2 focus:ring-primary-green outline-none"})]}),T.jsxs("div",{className:"flex items-center gap-2 overflow-x-auto pb-2 sm:pb-0 no-scrollbar",children:[T.jsx("button",{onClick:()=>d({}),className:`px-4 py-3 rounded-xl font-bold text-sm transition-all whitespace-nowrap ${v?"bg-white text-text-dark border border-primary-green/10 hover:border-primary-green/50":"bg-primary-green text-white shadow-lg shadow-primary-green/20"}`,children:"All"}),S.map(C=>T.jsx("button",{onClick:()=>d({category:C}),className:`px-4 py-3 rounded-xl font-bold text-sm transition-all whitespace-nowrap ${v===C?"bg-primary-green text-white shadow-lg shadow-primary-green/20":"bg-white text-text-dark border border-primary-green/10 hover:border-primary-green/50"}`,children:C},C))]})]})]}),s?T.jsx("div",{className:"flex justify-center items-center h-64",children:T.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-green"})}):n.length>0?T.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8 animate-in slide-in-from-bottom-4 duration-500",children:n.map(C=>T.jsxs("div",{className:"bg-white rounded-2xl overflow-hidden shadow-sm hover:shadow-xl transition-all border border-primary-green/5 group flex flex-col h-full",children:[T.jsxs(it,{to:`/product/${C.id}`,className:"block relative aspect-[4/3] overflow-hidden",children:[T.jsx("img",{src:C.image,alt:C.name,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-700"}),T.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/10 transition-colors"})]}),T.jsxs("div",{className:"p-6 flex flex-col flex-grow",children:[T.jsxs("div",{className:"flex justify-between items-start mb-2",children:[T.jsx("span",{className:"text-xs font-bold text-primary-green uppercase tracking-widest",children:C.category}),T.jsx("span",{className:"text-xs font-medium text-earth-brown bg-neutral-bg px-2 py-1 rounded",children:C.nepaliName})]}),T.jsx("h3",{className:"text-xl font-bold text-text-dark mb-2 group-hover:text-primary-green transition-colors",children:C.name}),T.jsx("p",{className:"text-text-dark/60 text-sm mb-4 line-clamp-2 flex-grow",children:C.description}),T.jsxs("div",{className:"flex items-center justify-between mt-auto pt-4 border-t border-neutral-bg",children:[T.jsxs("span",{className:"text-2xl font-bold text-primary-green",children:["Rs. ",C.price]}),T.jsx("button",{onClick:()=>E(C,1),className:"p-3 bg-primary-green text-white rounded-xl hover:bg-primary-green/90 transition-transform active:scale-95",title:"Add to Cart",children:"Add to Cart"})]})]})]},C.id))}):T.jsxs("div",{className:"text-center py-24 bg-white rounded-3xl border border-dashed border-primary-green/20",children:[T.jsx(E2,{size:48,className:"mx-auto text-primary-green/20 mb-4"}),T.jsx("h3",{className:"text-xl font-bold text-text-dark mb-2",children:"No products found"}),T.jsx("p",{className:"text-earth-brown",children:"Try adjusting your search or filters to find what you're looking for."})]})]})})},IB=()=>{const{id:t}=tN(),[e,n]=G.useState(null),[i,s]=G.useState(1),[a,u]=G.useState(!0),{addToCart:d}=ko(),p=Us();if(G.useEffect(()=>{t&&wt.getProductById(t).then(v=>{v&&n(v),u(!1)})},[t]),a)return T.jsx("div",{className:"h-screen flex items-center justify-center",children:T.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-primary-green"})});if(!e)return T.jsxs("div",{className:"p-20 text-center",children:["Product not found. ",T.jsx(it,{to:"/products",className:"text-primary-green font-bold",children:"Back to shop"})]});const h=()=>{d(e,i),p("/cart")};return T.jsx("div",{className:"bg-neutral-bg min-h-screen py-12",children:T.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[T.jsxs(it,{to:"/products",className:"inline-flex items-center gap-2 text-primary-green font-bold mb-8 hover:gap-3 transition-all",children:[T.jsx(Pw,{size:20})," Back to Products"]}),T.jsxs("div",{className:"bg-white rounded-3xl overflow-hidden shadow-xl grid grid-cols-1 lg:grid-cols-2 animate-in fade-in zoom-in-95 duration-500",children:[T.jsxs("div",{className:"relative h-[400px] lg:h-auto overflow-hidden",children:[T.jsx("img",{src:e.image,alt:e.name,className:"w-full h-full object-cover"}),T.jsxs("div",{className:"absolute top-6 left-6 flex flex-col gap-2",children:[T.jsx("span",{className:"bg-primary-green text-white text-xs font-bold px-4 py-2 rounded-full uppercase tracking-widest shadow-lg",children:e.category}),T.jsx("span",{className:"bg-earth-brown text-white text-xs font-bold px-4 py-2 rounded-full uppercase tracking-widest shadow-lg",children:"100% Organic"})]})]}),T.jsxs("div",{className:"p-8 lg:p-16 flex flex-col",children:[T.jsxs("div",{className:"mb-8",children:[T.jsx("h1",{className:"text-4xl font-bold text-text-dark mb-2",children:e.name}),T.jsx("p",{className:"text-2xl text-primary-green font-bold mb-4",children:e.nepaliName}),T.jsxs("p",{className:"text-3xl font-extrabold text-earth-brown",children:["Rs. ",e.price]})]}),T.jsxs("div",{className:"space-y-6 mb-10",children:[T.jsxs("div",{children:[T.jsx("h3",{className:"text-sm font-bold uppercase tracking-widest text-primary-green/60 mb-2",children:"Description"}),T.jsx("p",{className:"text-text-dark/80 leading-relaxed text-lg",children:e.description})]}),T.jsxs("div",{className:"bg-neutral-bg/50 p-6 rounded-2xl border border-primary-green/5",children:[T.jsxs("h3",{className:"text-sm font-bold uppercase tracking-widest text-primary-green/60 mb-3 flex items-center gap-2",children:[T.jsx(S2,{size:16,className:"text-primary-green"})," Key Benefits"]}),T.jsx("p",{className:"text-text-dark font-medium",children:e.benefits})]})]}),T.jsxs("div",{className:"mt-auto space-y-6",children:[T.jsxs("div",{className:"flex items-center gap-6",children:[T.jsxs("div",{className:"flex items-center border-2 border-primary-green/20 rounded-2xl p-1 bg-neutral-bg/30",children:[T.jsx("button",{onClick:()=>s(Math.max(1,i-1)),className:"w-12 h-12 flex items-center justify-center font-bold text-2xl hover:bg-white rounded-xl transition-colors",children:"-"}),T.jsx("span",{className:"w-12 text-center font-bold text-xl",children:i}),T.jsx("button",{onClick:()=>s(i+1),className:"w-12 h-12 flex items-center justify-center font-bold text-2xl hover:bg-white rounded-xl transition-colors",children:"+"})]}),T.jsxs("button",{onClick:h,className:"flex-grow flex items-center justify-center gap-3 bg-primary-green text-white py-4 px-8 rounded-2xl font-bold text-xl hover:bg-primary-green/90 shadow-xl shadow-primary-green/20 transition-all hover:-translate-y-1 active:scale-95",children:[T.jsx(zw,{size:24})," Add to Cart"]})]}),T.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-8 border-t border-neutral-bg",children:[T.jsxs("div",{className:"flex items-center gap-3 text-sm text-text-dark/70 font-medium",children:[T.jsx(iM,{className:"text-primary-green",size:20}),"Quality Assured"]}),T.jsxs("div",{className:"flex items-center gap-3 text-sm text-text-dark/70 font-medium",children:[T.jsx(fM,{className:"text-primary-green",size:20}),"Delivery Available"]})]})]})]})]})]})})},bB=()=>T.jsxs("div",{className:"animate-in fade-in duration-700",children:[T.jsx("section",{className:"bg-primary-green text-white py-24",children:T.jsxs("div",{className:"max-w-7xl mx-auto px-4 text-center",children:[T.jsx("h1",{className:"text-5xl font-bold mb-6",children:"Our Himalayan Journey"}),T.jsx("p",{className:"text-xl text-white/80 max-w-2xl mx-auto leading-relaxed",children:"Preserving the ancient wisdom of Himalayan herbs and supporting the hardworking farmers of Nepal."})]})}),T.jsx("section",{className:"py-24 max-w-7xl mx-auto px-4",children:T.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-16 items-center",children:[T.jsxs("div",{children:[T.jsx("h2",{className:"text-4xl font-bold text-text-dark mb-6",children:"Our Mission"}),T.jsx("p",{className:"text-lg text-text-dark/70 leading-relaxed mb-6",children:"Himalayan Herbs & Fruits was founded with a simple yet powerful goal: to connect the incredible biodiversity of the Himalayas with the rest of the world."}),T.jsx("p",{className:"text-lg text-text-dark/70 leading-relaxed mb-8",children:"We specialize in sourcing high-quality Jadibuti (medicinal herbs) and organic fruits directly from local farmers in Jumla, Mustang, Dhankuta, and beyond. By cutting out middlemen, we ensure that farmers get fair prices and you get the freshest products."}),T.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[T.jsxs("div",{className:"flex flex-col items-center p-6 bg-accent-cream rounded-3xl text-center",children:[T.jsx(lM,{size:32,className:"text-primary-green mb-3"}),T.jsx("span",{className:"font-bold",children:"100% Organic"})]}),T.jsxs("div",{className:"flex flex-col items-center p-6 bg-accent-cream rounded-3xl text-center",children:[T.jsx(GE,{size:32,className:"text-primary-green mb-3"}),T.jsx("span",{className:"font-bold",children:"Fair Trade"})]})]})]}),T.jsxs("div",{className:"relative",children:[T.jsx("div",{className:"absolute -inset-4 bg-primary-green/10 rounded-[4rem] rotate-3"}),T.jsx("img",{src:"https://images.unsplash.com/photo-1595181048473-199468e8267d?auto=format&fit=crop&q=80&w=1200",className:"relative w-full h-[500px] object-cover rounded-[3rem] shadow-2xl",alt:"Farmers working"})]})]})}),T.jsx("section",{className:"py-24 bg-neutral-bg",children:T.jsxs("div",{className:"max-w-7xl mx-auto px-4",children:[T.jsxs("div",{className:"text-center mb-16",children:[T.jsx("h2",{className:"text-4xl font-bold text-text-dark mb-4",children:"Why Choose Us?"}),T.jsx("div",{className:"w-20 h-1 bg-primary-green mx-auto"})]}),T.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-12",children:[T.jsxs("div",{className:"text-center group",children:[T.jsx("div",{className:"w-20 h-20 bg-white rounded-full flex items-center justify-center mx-auto mb-6 shadow-md text-primary-green group-hover:bg-primary-green group-hover:text-white transition-all",children:T.jsx(Bw,{size:32})}),T.jsx("h4",{className:"text-xl font-bold mb-4",children:"Guaranteed Purity"}),T.jsx("p",{className:"text-text-dark/60 leading-relaxed",children:"Our herbs are tested for purity and potency, ensuring you receive the true healing power of nature."})]}),T.jsxs("div",{className:"text-center group",children:[T.jsx("div",{className:"w-20 h-20 bg-white rounded-full flex items-center justify-center mx-auto mb-6 shadow-md text-primary-green group-hover:bg-primary-green group-hover:text-white transition-all",children:T.jsx(Uu,{size:32})}),T.jsx("h4",{className:"text-xl font-bold mb-4",children:"Sustainable Sourcing"}),T.jsx("p",{className:"text-text-dark/60 leading-relaxed",children:"We practice sustainable wild harvesting and support biodiversity conservation in the mountains."})]}),T.jsxs("div",{className:"text-center group",children:[T.jsx("div",{className:"w-20 h-20 bg-white rounded-full flex items-center justify-center mx-auto mb-6 shadow-md text-primary-green group-hover:bg-primary-green group-hover:text-white transition-all",children:T.jsx(GE,{size:32})}),T.jsx("h4",{className:"text-xl font-bold mb-4",children:"Empowering Communities"}),T.jsx("p",{className:"text-text-dark/60 leading-relaxed",children:"Every purchase directly impacts the lives of Nepali highland farming families and their children's education."})]})]})]})})]}),RB=()=>T.jsx("div",{className:"bg-accent-cream min-h-screen py-24",children:T.jsxs("div",{className:"max-w-4xl mx-auto px-4",children:[T.jsxs("div",{className:"text-center mb-16",children:[T.jsx(X2,{size:48,className:"mx-auto text-primary-green/30 mb-6"}),T.jsx("h1",{className:"text-4xl font-bold text-text-dark mb-4",children:"Customer Stories"}),T.jsx("p",{className:"text-lg text-earth-brown",children:"Real experiences from our community of Himalayan enthusiasts."})]}),T.jsx("div",{className:"space-y-8",children:Nb.map((t,e)=>T.jsxs("div",{className:"bg-white p-10 rounded-[3rem] shadow-sm border border-primary-green/5 animate-in slide-in-from-bottom-8 duration-700",style:{animationDelay:`${e*150}ms`},children:[T.jsx("div",{className:"flex gap-1 text-yellow-500 mb-6",children:[...Array(5)].map((n,i)=>T.jsx(Gw,{size:20,fill:"currentColor"},i))}),T.jsxs("p",{className:"text-2xl text-text-dark leading-relaxed mb-8 italic",children:['"',t.text,'"']}),T.jsxs("div",{className:"flex items-center gap-4",children:[T.jsx("div",{className:"w-12 h-12 bg-primary-green/10 rounded-full flex items-center justify-center text-primary-green font-bold text-xl",children:t.name.charAt(0)}),T.jsxs("div",{children:[T.jsx("h4",{className:"text-lg font-bold text-text-dark",children:t.name}),T.jsx("p",{className:"text-primary-green text-sm font-medium",children:t.location})]})]})]},t.id))}),T.jsxs("div",{className:"mt-20 text-center p-12 bg-primary-green rounded-[3rem] text-white",children:[T.jsx("h3",{className:"text-2xl font-bold mb-4",children:"Share Your Experience"}),T.jsx("p",{className:"mb-8 text-white/80",children:"Have you tried our products? We would love to hear from you!"}),T.jsx("button",{className:"bg-white text-primary-green font-bold px-8 py-4 rounded-full hover:bg-neutral-bg transition-colors shadow-lg",children:"Write a Review"})]})]})}),NB=()=>{const[t,e]=G.useState({name:"",email:"",message:""}),[n,i]=G.useState("idle"),s=async a=>{a.preventDefault(),i("submitting"),await wt.submitContact({...t,timestamp:new Date().toISOString()}),i("success"),e({name:"",email:"",message:""})};return T.jsx("div",{className:"bg-neutral-bg min-h-screen py-24",children:T.jsx("div",{className:"max-w-7xl mx-auto px-4",children:T.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-16",children:[T.jsxs("div",{className:"animate-in slide-in-from-left-8 duration-700",children:[T.jsx("h1",{className:"text-5xl font-bold text-text-dark mb-6",children:"Get in Touch"}),T.jsx("p",{className:"text-lg text-text-dark/70 mb-12 leading-relaxed",children:"Have questions about our herbs or seasonal fruit availability? Our team is here to help you choose the best products for your health and lifestyle."}),T.jsxs("div",{className:"space-y-8",children:[T.jsxs("div",{className:"flex gap-6 items-start",children:[T.jsx("div",{className:"w-14 h-14 bg-white rounded-2xl flex items-center justify-center text-primary-green shadow-sm shrink-0",children:T.jsx(L2,{size:28})}),T.jsxs("div",{children:[T.jsx("h4",{className:"text-lg font-bold text-text-dark",children:"Our Location"}),T.jsx("p",{className:"text-text-dark/60 italic",children:"Boudha, Kathmandu, Nepal"})]})]}),T.jsxs("div",{className:"flex gap-6 items-start",children:[T.jsx("div",{className:"w-14 h-14 bg-white rounded-2xl flex items-center justify-center text-primary-green shadow-sm shrink-0",children:T.jsx(qw,{size:28})}),T.jsxs("div",{children:[T.jsx("h4",{className:"text-lg font-bold text-text-dark",children:"Call Us"}),T.jsx("p",{className:"text-text-dark/60",children:"+977-1-4XXXXXX"})]})]}),T.jsxs("div",{className:"flex gap-6 items-start",children:[T.jsx("div",{className:"w-14 h-14 bg-white rounded-2xl flex items-center justify-center text-primary-green shadow-sm shrink-0",children:T.jsx(Yg,{size:28})}),T.jsxs("div",{children:[T.jsx("h4",{className:"text-lg font-bold text-text-dark",children:"Email Support"}),T.jsx("p",{className:"text-text-dark/60",children:"info@himalayanherbs.com"})]})]})]})]}),T.jsx("div",{className:"bg-white p-8 lg:p-12 rounded-[3rem] shadow-xl border border-primary-green/5 animate-in slide-in-from-right-8 duration-700",children:n==="success"?T.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center py-12",children:[T.jsx("div",{className:"w-20 h-20 bg-primary-green/10 text-primary-green rounded-full flex items-center justify-center mb-6",children:T.jsx(Vw,{size:48})}),T.jsx("h3",{className:"text-2xl font-bold text-text-dark mb-4",children:"Message Sent!"}),T.jsx("p",{className:"text-text-dark/60 mb-8",children:"Thank you for reaching out. We will get back to you within 24-48 hours."}),T.jsx("button",{onClick:()=>i("idle"),className:"bg-primary-green text-white px-8 py-3 rounded-xl font-bold hover:bg-primary-green/90",children:"Send another message"})]}):T.jsxs("form",{onSubmit:s,className:"space-y-6",children:[T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-bold text-text-dark/70 uppercase tracking-widest mb-2",children:"Your Name"}),T.jsx("input",{required:!0,type:"text",value:t.name,onChange:a=>e({...t,name:a.target.value}),placeholder:"Ram Shrestha",className:"w-full bg-neutral-bg/50 border border-primary-green/10 rounded-2xl px-6 py-4 outline-none focus:ring-2 focus:ring-primary-green transition-all"})]}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-bold text-text-dark/70 uppercase tracking-widest mb-2",children:"Email Address"}),T.jsx("input",{required:!0,type:"email",value:t.email,onChange:a=>e({...t,email:a.target.value}),placeholder:"ram@example.com",className:"w-full bg-neutral-bg/50 border border-primary-green/10 rounded-2xl px-6 py-4 outline-none focus:ring-2 focus:ring-primary-green transition-all"})]}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-bold text-text-dark/70 uppercase tracking-widest mb-2",children:"Your Message"}),T.jsx("textarea",{required:!0,rows:4,value:t.message,onChange:a=>e({...t,message:a.target.value}),placeholder:"How can we help you?",className:"w-full bg-neutral-bg/50 border border-primary-green/10 rounded-2xl px-6 py-4 outline-none focus:ring-2 focus:ring-primary-green transition-all resize-none"})]}),T.jsx("button",{disabled:n==="submitting",className:"w-full bg-primary-green text-white py-5 rounded-2xl font-bold text-lg hover:bg-primary-green/90 transition-all shadow-lg shadow-primary-green/20 flex items-center justify-center gap-3 disabled:opacity-50",children:n==="submitting"?"Sending...":T.jsxs(T.Fragment,{children:["Send Message ",T.jsx(tM,{size:20})]})})]})})]})})})},MB=()=>{const{cart:t,removeFromCart:e,updateQuantity:n,totalPrice:i,totalItems:s}=ko();return t.length===0?T.jsx("div",{className:"bg-neutral-bg min-h-screen py-24 flex items-center justify-center",children:T.jsxs("div",{className:"text-center bg-white p-12 rounded-[3rem] shadow-xl max-w-lg w-full mx-4",children:[T.jsx("div",{className:"w-24 h-24 bg-neutral-bg rounded-full flex items-center justify-center mx-auto mb-8 text-primary-green/30",children:T.jsx(zw,{size:48})}),T.jsx("h2",{className:"text-3xl font-bold text-text-dark mb-4",children:"Your cart is empty"}),T.jsx("p",{className:"text-text-dark/60 mb-8",children:"Looks like you haven't added any Himalayan goodness to your cart yet."}),T.jsx(it,{to:"/products",className:"inline-block bg-primary-green text-white px-10 py-4 rounded-full font-bold text-lg hover:bg-primary-green/90 shadow-lg shadow-primary-green/20",children:"Start Shopping"})]})}):T.jsx("div",{className:"bg-neutral-bg min-h-screen py-12",children:T.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[T.jsxs("h1",{className:"text-4xl font-bold text-text-dark mb-12 flex items-center gap-4",children:["Shopping Cart ",T.jsxs("span",{className:"text-lg font-medium text-earth-brown bg-white px-3 py-1 rounded-full border border-primary-green/10",children:[s," items"]})]}),T.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-12",children:[T.jsx("div",{className:"lg:col-span-2 space-y-6",children:t.map(a=>T.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-sm border border-primary-green/5 flex flex-col sm:flex-row gap-6 animate-in slide-in-from-left-4 duration-500",children:[T.jsx("div",{className:"w-full sm:w-32 h-32 rounded-2xl overflow-hidden shrink-0",children:T.jsx("img",{src:a.product.image,alt:a.product.name,className:"w-full h-full object-cover"})}),T.jsxs("div",{className:"flex-grow flex flex-col justify-between",children:[T.jsxs("div",{className:"flex justify-between items-start",children:[T.jsxs("div",{children:[T.jsx("h3",{className:"text-xl font-bold text-text-dark mb-1",children:a.product.name}),T.jsx("p",{className:"text-primary-green font-medium text-sm",children:a.product.nepaliName})]}),T.jsx("button",{onClick:()=>e(a.product.id),className:"p-2 text-red-400 hover:text-red-600 hover:bg-red-50 rounded-xl transition-all",children:T.jsx(Qg,{size:20})})]}),T.jsxs("div",{className:"flex justify-between items-center mt-4",children:[T.jsxs("div",{className:"flex items-center gap-4 bg-neutral-bg/50 rounded-xl p-1 border border-primary-green/10",children:[T.jsx("button",{onClick:()=>n(a.product.id,a.quantity-1),className:"w-8 h-8 flex items-center justify-center bg-white rounded-lg shadow-sm hover:text-primary-green transition-colors font-bold",children:T.jsx(G2,{size:14})}),T.jsx("span",{className:"w-6 text-center font-bold",children:a.quantity}),T.jsx("button",{onClick:()=>n(a.product.id,a.quantity+1),className:"w-8 h-8 flex items-center justify-center bg-white rounded-lg shadow-sm hover:text-primary-green transition-colors font-bold",children:T.jsx(Hw,{size:14})})]}),T.jsxs("span",{className:"text-xl font-bold text-earth-brown",children:["Rs. ",a.product.price*a.quantity]})]})]})]},a.product.id))}),T.jsx("div",{className:"lg:col-span-1",children:T.jsxs("div",{className:"bg-white p-8 rounded-[2.5rem] shadow-xl border border-primary-green/5 sticky top-28",children:[T.jsx("h2",{className:"text-2xl font-bold text-text-dark mb-8",children:"Order Summary"}),T.jsxs("div",{className:"space-y-4 mb-8",children:[T.jsxs("div",{className:"flex justify-between text-text-dark/70",children:[T.jsx("span",{children:"Subtotal"}),T.jsxs("span",{className:"font-bold",children:["Rs. ",i]})]}),T.jsxs("div",{className:"flex justify-between text-text-dark/70",children:[T.jsx("span",{children:"Shipping"}),T.jsx("span",{className:"text-primary-green font-bold",children:"FREE"})]}),T.jsxs("div",{className:"pt-4 border-t border-neutral-bg flex justify-between items-center",children:[T.jsx("span",{className:"text-xl font-bold text-text-dark",children:"Total"}),T.jsxs("span",{className:"text-3xl font-extrabold text-primary-green",children:["Rs. ",i]})]})]}),T.jsxs(it,{to:"/checkout",className:"w-full bg-primary-green text-white py-5 rounded-2xl font-bold text-xl hover:bg-primary-green/90 transition-all flex items-center justify-center gap-3 shadow-xl shadow-primary-green/20 mb-4",children:["Proceed to Checkout ",T.jsx(kw,{size:24})]}),T.jsx("p",{className:"text-center text-sm text-text-dark/50",children:"Prices inclusive of all local taxes."})]})})]})]})})},DB=()=>{const{clearCart:t,totalPrice:e}=ko(),[n,i]=G.useState(!1),[s,a]=G.useState(!1),u=()=>{i(!0),setTimeout(()=>{i(!1),a(!0),t()},2e3)};return s?T.jsx("div",{className:"bg-neutral-bg min-h-screen py-24 flex items-center justify-center px-4",children:T.jsxs("div",{className:"text-center bg-white p-12 lg:p-20 rounded-[4rem] shadow-2xl max-w-2xl w-full animate-in zoom-in-95 duration-500",children:[T.jsx("div",{className:"w-24 h-24 bg-primary-green/10 text-primary-green rounded-full flex items-center justify-center mx-auto mb-8",children:T.jsx(Vw,{size:64})}),T.jsx("h1",{className:"text-4xl font-extrabold text-text-dark mb-6 tracking-tight",children:"Order Placed Successfully!"}),T.jsxs("p",{className:"text-xl text-text-dark/60 mb-12 leading-relaxed",children:["Thank you for choosing ",T.jsx("span",{className:"text-primary-green font-bold",children:"Himalayan Herbs & Fruits"}),". Your order is being processed and will be delivered shortly."]}),T.jsx(it,{to:"/products",className:"inline-block bg-primary-green text-white px-12 py-5 rounded-full font-bold text-xl hover:bg-primary-green/90 shadow-xl shadow-primary-green/20 transition-all",children:"Continue Shopping"})]})}):T.jsx("div",{className:"bg-neutral-bg min-h-screen py-24",children:T.jsxs("div",{className:"max-w-4xl mx-auto px-4",children:[T.jsx("h1",{className:"text-4xl font-bold text-text-dark mb-12",children:"Checkout"}),T.jsxs("div",{className:"bg-white p-8 lg:p-12 rounded-[3rem] shadow-xl border border-primary-green/5",children:[T.jsxs("div",{className:"mb-12 pb-8 border-b border-neutral-bg",children:[T.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Payment Method"}),T.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[T.jsxs("div",{className:"border-2 border-primary-green bg-primary-green/5 p-6 rounded-3xl cursor-pointer",children:[T.jsxs("div",{className:"flex justify-between mb-4",children:[T.jsx("div",{className:"w-6 h-6 rounded-full border-4 border-primary-green flex items-center justify-center",children:T.jsx("div",{className:"w-2 h-2 bg-primary-green rounded-full"})}),T.jsx("span",{className:"font-bold text-primary-green",children:"COD"})]}),T.jsx("p",{className:"font-bold",children:"Cash on Delivery"}),T.jsx("p",{className:"text-sm text-text-dark/50",children:"Pay when your order arrives"})]}),T.jsxs("div",{className:"border border-neutral-bg p-6 rounded-3xl opacity-50 cursor-not-allowed",children:[T.jsxs("div",{className:"flex justify-between mb-4",children:[T.jsx("div",{className:"w-6 h-6 rounded-full border-2 border-neutral-bg"}),T.jsx("span",{className:"font-bold",children:"eSewa/Khalti"})]}),T.jsx("p",{className:"font-bold",children:"Online Payment"}),T.jsx("p",{className:"text-sm text-text-dark/50",children:"Coming soon"})]})]})]}),T.jsxs("div",{className:"space-y-6",children:[T.jsxs("div",{className:"flex justify-between items-center",children:[T.jsx("span",{className:"text-lg text-text-dark/60",children:"Order Total"}),T.jsxs("span",{className:"text-4xl font-extrabold text-primary-green",children:["Rs. ",e]})]}),T.jsx("button",{onClick:u,disabled:n,className:"w-full bg-primary-green text-white py-6 rounded-[2rem] font-bold text-2xl hover:bg-primary-green/90 transition-all shadow-xl shadow-primary-green/20 flex items-center justify-center gap-4 disabled:opacity-70",children:n?T.jsxs(T.Fragment,{children:[T.jsx(Ru,{className:"animate-spin",size:28})," Processing..."]}):"Place Order"}),T.jsxs(it,{to:"/cart",className:"flex items-center justify-center gap-2 text-text-dark/50 font-bold hover:text-primary-green transition-colors",children:[T.jsx(Pw,{size:18})," Back to Cart"]})]})]})]})})},PB=()=>{const[t,e]=G.useState(""),[n,i]=G.useState(""),[s,a]=G.useState(!1),[u,d]=G.useState(!1),p=Us(),h=async v=>{v.preventDefault(),d(!0);try{const E=await wt.userLogin(t,n);E.success?(localStorage.setItem("user_token",E.token),localStorage.setItem("user_id",E.user.id),localStorage.setItem("user_email",E.user.email),localStorage.setItem("user_name",E.user.name),p("/")):alert("Invalid credentials")}catch{alert("Login failed. Please try again.")}finally{d(!1)}};return T.jsx("div",{className:"min-h-screen bg-neutral-bg flex items-center justify-center px-4",children:T.jsxs("div",{className:"max-w-md w-full bg-white rounded-3xl shadow-lg p-8",children:[T.jsxs("div",{className:"text-center mb-8",children:[T.jsx("h1",{className:"text-3xl font-bold text-text-dark mb-2",children:"Welcome Back"}),T.jsx("p",{className:"text-earth-brown",children:"Sign in to your account"})]}),T.jsxs("form",{onSubmit:h,className:"space-y-6",children:[T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-bold text-text-dark/70 mb-2",children:"Email"}),T.jsxs("div",{className:"relative",children:[T.jsx($w,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-text-dark/30",size:18}),T.jsx("input",{type:"email",required:!0,value:t,onChange:v=>e(v.target.value),className:"w-full bg-neutral-bg/50 border border-primary-green/10 rounded-2xl pl-12 pr-4 py-3 outline-none focus:ring-2 focus:ring-primary-green",placeholder:"Enter your email"})]})]}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-bold text-text-dark/70 mb-2",children:"Password"}),T.jsxs("div",{className:"relative",children:[T.jsx(Ou,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-text-dark/30",size:18}),T.jsx("input",{type:s?"text":"password",required:!0,value:n,onChange:v=>i(v.target.value),className:"w-full bg-neutral-bg/50 border border-primary-green/10 rounded-2xl pl-12 pr-12 py-3 outline-none focus:ring-2 focus:ring-primary-green",placeholder:"Enter your password"}),T.jsx("button",{type:"button",onClick:()=>a(!s),className:"absolute right-4 top-1/2 -translate-y-1/2 text-text-dark/30",children:s?T.jsx(Jg,{size:18}):T.jsx(Kg,{size:18})})]})]}),T.jsx("button",{type:"submit",disabled:u,className:"w-full bg-primary-green text-white py-4 rounded-2xl font-bold hover:bg-primary-green/90 transition-all disabled:opacity-70",children:u?"Signing In...":"Sign In"})]}),T.jsx("div",{className:"text-center mt-6",children:T.jsxs("p",{className:"text-earth-brown",children:["Don't have an account?"," ",T.jsx(it,{to:"/signup",className:"text-primary-green font-bold hover:underline",children:"Sign Up"})]})})]})})},kB=()=>{const[t,e]=G.useState({name:"",email:"",phone:"",password:"",confirmPassword:""}),[n,i]=G.useState(!1),[s,a]=G.useState(!1),u=Us(),d=async p=>{if(p.preventDefault(),t.password!==t.confirmPassword){alert("Passwords do not match");return}a(!0);try{const h=await wt.userRegister({name:t.name,email:t.email,phone:t.phone,password:t.password});h.success?(localStorage.setItem("user_token",h.token),localStorage.setItem("user_id",h.user.id),localStorage.setItem("user_email",h.user.email),localStorage.setItem("user_name",h.user.name),u("/")):alert(h.error||"Registration failed")}catch{alert("Registration failed. Please try again.")}finally{a(!1)}};return T.jsx("div",{className:"min-h-screen bg-neutral-bg flex items-center justify-center px-4 py-8",children:T.jsxs("div",{className:"max-w-md w-full bg-white rounded-3xl shadow-lg p-8",children:[T.jsxs("div",{className:"text-center mb-8",children:[T.jsx("h1",{className:"text-3xl font-bold text-text-dark mb-2",children:"Create Account"}),T.jsx("p",{className:"text-earth-brown",children:"Join our community today"})]}),T.jsxs("form",{onSubmit:d,className:"space-y-6",children:[T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-bold text-text-dark/70 mb-2",children:"Full Name"}),T.jsxs("div",{className:"relative",children:[T.jsx($w,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-text-dark/30",size:18}),T.jsx("input",{type:"text",required:!0,value:t.name,onChange:p=>e({...t,name:p.target.value}),className:"w-full bg-neutral-bg/50 border border-primary-green/10 rounded-2xl pl-12 pr-4 py-3 outline-none focus:ring-2 focus:ring-primary-green",placeholder:"Enter your full name"})]})]}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-bold text-text-dark/70 mb-2",children:"Email"}),T.jsxs("div",{className:"relative",children:[T.jsx(Yg,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-text-dark/30",size:18}),T.jsx("input",{type:"email",required:!0,value:t.email,onChange:p=>e({...t,email:p.target.value}),className:"w-full bg-neutral-bg/50 border border-primary-green/10 rounded-2xl pl-12 pr-4 py-3 outline-none focus:ring-2 focus:ring-primary-green",placeholder:"Enter your email"})]})]}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-bold text-text-dark/70 mb-2",children:"Phone"}),T.jsxs("div",{className:"relative",children:[T.jsx(qw,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-text-dark/30",size:18}),T.jsx("input",{type:"tel",required:!0,value:t.phone,onChange:p=>e({...t,phone:p.target.value}),className:"w-full bg-neutral-bg/50 border border-primary-green/10 rounded-2xl pl-12 pr-4 py-3 outline-none focus:ring-2 focus:ring-primary-green",placeholder:"Enter your phone number"})]})]}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-bold text-text-dark/70 mb-2",children:"Password"}),T.jsxs("div",{className:"relative",children:[T.jsx(Ou,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-text-dark/30",size:18}),T.jsx("input",{type:n?"text":"password",required:!0,value:t.password,onChange:p=>e({...t,password:p.target.value}),className:"w-full bg-neutral-bg/50 border border-primary-green/10 rounded-2xl pl-12 pr-12 py-3 outline-none focus:ring-2 focus:ring-primary-green",placeholder:"Create a password"}),T.jsx("button",{type:"button",onClick:()=>i(!n),className:"absolute right-4 top-1/2 -translate-y-1/2 text-text-dark/30",children:n?T.jsx(Jg,{size:18}):T.jsx(Kg,{size:18})})]})]}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-bold text-text-dark/70 mb-2",children:"Confirm Password"}),T.jsxs("div",{className:"relative",children:[T.jsx(Ou,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-text-dark/30",size:18}),T.jsx("input",{type:"password",required:!0,value:t.confirmPassword,onChange:p=>e({...t,confirmPassword:p.target.value}),className:"w-full bg-neutral-bg/50 border border-primary-green/10 rounded-2xl pl-12 pr-4 py-3 outline-none focus:ring-2 focus:ring-primary-green",placeholder:"Confirm your password"})]})]}),T.jsx("button",{type:"submit",disabled:s,className:"w-full bg-primary-green text-white py-4 rounded-2xl font-bold hover:bg-primary-green/90 transition-all disabled:opacity-70",children:s?"Creating Account...":"Create Account"})]}),T.jsx("div",{className:"text-center mt-6",children:T.jsxs("p",{className:"text-earth-brown",children:["Already have an account?"," ",T.jsx(it,{to:"/login",className:"text-primary-green font-bold hover:underline",children:"Sign In"})]})})]})})},VB=()=>{const[t,e]=G.useState(!1),[n,i]=G.useState(""),[s,a]=G.useState(""),[u,d]=G.useState(""),[p,h]=G.useState(!1),v=Us(),E=async S=>{S.preventDefault(),d(""),h(!0),t?(await wt.registerAdmin({email:n,password:s}),e(!1),d("Account created! Please login."),h(!1)):(await wt.login(n,s)).success?v("/admin/dashboard"):(d("Invalid credentials. Try admin@himalayan.com / admin123"),h(!1))};return T.jsx("div",{className:"min-h-screen bg-neutral-bg flex items-center justify-center px-4",children:T.jsxs("div",{className:"max-w-md w-full bg-white rounded-[3rem] shadow-2xl overflow-hidden border border-primary-green/5",children:[T.jsxs("div",{className:"bg-primary-green p-8 text-white text-center",children:[T.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-2xl flex items-center justify-center mx-auto mb-4",children:T.jsx(Ou,{size:32})}),T.jsx("h1",{className:"text-2xl font-bold",children:"Admin Portal"}),T.jsx("p",{className:"text-white/70",children:"Manage Himalayan Herbs & Fruits"})]}),T.jsxs("form",{onSubmit:E,className:"p-8 space-y-6",children:[u&&T.jsxs("div",{className:"bg-red-50 text-red-600 p-4 rounded-xl flex items-center gap-3 text-sm",children:[T.jsx(h2,{size:18})," ",u]}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-bold text-text-dark/70 uppercase tracking-widest mb-2",children:"Email Address"}),T.jsxs("div",{className:"relative",children:[T.jsx(Yg,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-earth-brown/40",size:18}),T.jsx("input",{required:!0,type:"email",value:n,onChange:S=>i(S.target.value),className:"w-full bg-neutral-bg/50 border border-primary-green/10 rounded-2xl pl-12 pr-6 py-4 outline-none focus:ring-2 focus:ring-primary-green",placeholder:"admin@himalayan.com"})]})]}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-bold text-text-dark/70 uppercase tracking-widest mb-2",children:"Password"}),T.jsxs("div",{className:"relative",children:[T.jsx(Ou,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-earth-brown/40",size:18}),T.jsx("input",{required:!0,type:"password",value:s,onChange:S=>a(S.target.value),className:"w-full bg-neutral-bg/50 border border-primary-green/10 rounded-2xl pl-12 pr-6 py-4 outline-none focus:ring-2 focus:ring-primary-green",placeholder:""})]})]}),T.jsx("button",{disabled:p,className:"w-full bg-primary-green text-white py-4 rounded-2xl font-bold text-lg hover:bg-primary-green/90 transition-all flex items-center justify-center gap-2 shadow-lg shadow-primary-green/20",children:p?"Processing...":t?T.jsxs(T.Fragment,{children:[T.jsx(gM,{size:20})," Create Account"]}):T.jsxs(T.Fragment,{children:[T.jsx(D2,{size:20})," Login"]})}),T.jsxs("p",{className:"text-center text-sm text-text-dark/50",children:[t?"Already have an account?":"Need a new admin account?"," ",T.jsx("button",{type:"button",onClick:()=>e(!t),className:"text-primary-green font-bold hover:underline",children:t?"Login here":"Register here"})]})]})]})})},LB=()=>{const[t,e]=G.useState("products"),[n,i]=G.useState([]),[s,a]=G.useState([]),[u,d]=G.useState(!0),[p,h]=G.useState(!1),[v,E]=G.useState(!1),[S,C]=G.useState(null),[D,U]=G.useState(null),P=Us(),[q,X]=G.useState({name:"",nepaliName:"",category:an.FRUITS,price:0,description:"",benefits:"",image:""}),[H,ne]=G.useState({title:"",subtitle:"",image:"",buttonText:"",buttonLink:"",isActive:!0});G.useEffect(()=>{if(!wt.isAuthenticated()){P("/admin/login");return}le()},[]);const le=async()=>{try{const[oe,Ce]=await Promise.all([wt.getProducts(),wt.getHeroSlides()]);i(oe),a(Ce.sort((Y,ue)=>Y.order-ue.order))}catch(oe){console.error("Failed to load data:",oe)}finally{d(!1)}},ce=()=>{wt.logout(),P("/admin/login")},N=oe=>{oe?(C(oe),X({...oe})):(C(null),X({name:"",nepaliName:"",category:an.FRUITS,price:0,description:"",benefits:"",image:""})),U(null),E(!0)},M=oe=>{oe?(U(oe),ne({...oe})):(U(null),ne({title:"",subtitle:"",image:"",buttonText:"",buttonLink:"",isActive:!0})),C(null),E(!0)},R=async oe=>{oe.preventDefault(),h(!0);try{S?await wt.updateProduct(S.id,q):await wt.addProduct(q),E(!1),await le()}catch{alert("Error saving product. Please try again.")}finally{h(!1)}},V=async oe=>{oe.preventDefault(),h(!0);try{console.log("Submitting slide data:",H),D?await wt.updateHeroSlide(D.id,H):await wt.addHeroSlide(H),E(!1),await le()}catch(Ce){console.error("Error saving slide:",Ce),alert(`Error saving slide: ${Ce.message||"Please try again."}`)}finally{h(!1)}},O=async oe=>{if(window.confirm("Are you sure you want to delete this product?")){const Ce=[...n];i(n.filter(Y=>Y.id!==oe));try{await wt.deleteProduct(oe)}catch(Y){console.error("Delete failed:",Y),alert("Failed to delete product. Please try again."),i(Ce)}}},z=async oe=>{if(window.confirm("Are you sure you want to delete this slide?")){const Ce=[...s];a(s.filter(Y=>Y.id!==oe));try{await wt.deleteHeroSlide(oe)}catch(Y){console.error("Delete failed:",Y),alert("Failed to delete slide. Please try again."),a(Ce)}}},k=async oe=>{try{await wt.updateHeroSlide(oe.id,{...oe,isActive:!oe.isActive}),await le()}catch{alert("Failed to update slide status.")}};return T.jsxs("div",{className:"min-h-screen bg-neutral-bg flex",children:[T.jsxs("aside",{className:"w-64 bg-text-dark text-white hidden md:flex flex-col border-r border-white/5",children:[T.jsx("div",{className:"p-6 border-b border-white/10",children:T.jsxs("h2",{className:"text-xl font-bold flex items-center gap-2",children:[T.jsx(I2,{className:"text-primary-green"})," Admin Panel"]})}),T.jsxs("nav",{className:"flex-grow p-4 space-y-2",children:[T.jsxs("button",{onClick:()=>e("products"),className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl font-bold transition-all ${t==="products"?"bg-primary-green/20 text-primary-green":"text-white/60 hover:text-white hover:bg-white/5"}`,children:[T.jsx(Ow,{size:20})," Products"]}),T.jsxs("button",{onClick:()=>e("hero"),className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl font-bold transition-all ${t==="hero"?"bg-primary-green/20 text-primary-green":"text-white/60 hover:text-white hover:bg-white/5"}`,children:[T.jsx(Uw,{size:20})," Hero Slider"]})]}),T.jsx("div",{className:"p-4 border-t border-white/10",children:T.jsxs("button",{onClick:ce,className:"w-full flex items-center gap-3 px-4 py-3 text-white/60 hover:text-white transition-colors",children:[T.jsx(Lw,{size:20})," Logout"]})})]}),T.jsx("main",{className:"flex-grow p-8 overflow-y-auto h-screen",children:T.jsxs("div",{className:"max-w-6xl mx-auto",children:[T.jsxs("div",{className:"flex justify-between items-center mb-8",children:[T.jsxs("div",{children:[T.jsx("h1",{className:"text-3xl font-bold text-text-dark",children:t==="products"?"Product Management":"Hero Slider Management"}),T.jsx("p",{className:"text-earth-brown",children:t==="products"?"Manage your store inventory and change pictures":"Manage homepage hero slider content"})]}),T.jsxs("button",{onClick:()=>t==="products"?N():M(),className:"bg-primary-green text-white px-6 py-3 rounded-xl font-bold flex items-center gap-2 hover:bg-primary-green/90 shadow-lg shadow-primary-green/20 active:scale-95 transition-all",children:[T.jsx(Hw,{size:20})," ",t==="products"?"Add Product":"Add Slide"]})]}),u?T.jsxs("div",{className:"py-20 text-center flex flex-col items-center gap-4",children:[T.jsx(Ru,{className:"animate-spin text-primary-green",size:40}),T.jsx("p",{className:"text-earth-brown font-medium",children:"Loading data..."})]}):T.jsx("div",{className:"bg-white rounded-3xl shadow-sm border border-primary-green/5 overflow-hidden animate-in fade-in slide-in-from-bottom-4 duration-500",children:t==="products"?T.jsx(UB,{products:n,onEdit:N,onDelete:O}):T.jsx(OB,{slides:s,onEdit:M,onDelete:z,onToggleActive:k})})]})}),v&&T.jsx("div",{className:"fixed inset-0 z-[100] bg-text-dark/60 backdrop-blur-sm flex items-center justify-center p-4 overflow-hidden",children:T.jsxs("div",{className:"bg-white rounded-[3rem] w-full max-w-2xl max-h-[95vh] overflow-y-auto shadow-2xl animate-in zoom-in-95 duration-300",children:[T.jsxs("div",{className:"p-8 border-b border-neutral-bg flex justify-between items-center sticky top-0 bg-white z-20",children:[T.jsxs("div",{children:[T.jsx("h3",{className:"text-2xl font-bold text-text-dark",children:S?"Edit Product":D?"Edit Slide":t==="products"?"Add New Product":"Add New Slide"}),T.jsx("p",{className:"text-xs text-earth-brown mt-1",children:t==="products"?"Fill in the details below to update your store.":"Create engaging hero slider content."})]}),T.jsx("button",{onClick:()=>!p&&E(!1),className:"p-2 hover:bg-neutral-bg rounded-full transition-colors disabled:opacity-50",disabled:p,children:T.jsx(Xg,{})})]}),t==="products"?T.jsxs("form",{onSubmit:R,className:"p-8 space-y-6",children:[T.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-bold text-text-dark/70 mb-2 uppercase tracking-tight",children:"Product Name (EN)"}),T.jsx("input",{required:!0,value:q.name,onChange:oe=>X({...q,name:oe.target.value}),className:"w-full bg-neutral-bg/50 border border-primary-green/10 rounded-2xl px-4 py-3 outline-none focus:ring-2 focus:ring-primary-green",placeholder:"e.g. Organic Apple"})]}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-bold text-text-dark/70 mb-2 uppercase tracking-tight",children:"Product Name (NP)"}),T.jsx("input",{required:!0,value:q.nepaliName,onChange:oe=>X({...q,nepaliName:oe.target.value}),className:"w-full bg-neutral-bg/50 border border-primary-green/10 rounded-2xl px-4 py-3 outline-none focus:ring-2 focus:ring-primary-green",placeholder:"e.g.  "})]})]}),T.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-bold text-text-dark/70 mb-2 uppercase tracking-tight",children:"Category"}),T.jsx("select",{value:q.category,onChange:oe=>X({...q,category:oe.target.value}),className:"w-full bg-neutral-bg/50 border border-primary-green/10 rounded-2xl px-4 py-3 outline-none focus:ring-2 focus:ring-primary-green",children:Object.values(an).map(oe=>T.jsx("option",{value:oe,children:oe},oe))})]}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-bold text-text-dark/70 mb-2 uppercase tracking-tight",children:"Price (Rs.)"}),T.jsx("input",{type:"number",required:!0,value:q.price,onChange:oe=>X({...q,price:Number(oe.target.value)}),className:"w-full bg-neutral-bg/50 border border-primary-green/10 rounded-2xl px-4 py-3 outline-none focus:ring-2 focus:ring-primary-green"})]})]}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-bold text-text-dark/70 mb-2 uppercase tracking-tight",children:"Image URL"}),T.jsxs("div",{className:"flex gap-4",children:[T.jsxs("div",{className:"relative flex-grow",children:[T.jsx(Hd,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-text-dark/30",size:18}),T.jsx("input",{required:!0,placeholder:"Paste image URL here...",value:q.image,onChange:oe=>X({...q,image:oe.target.value}),className:"w-full bg-neutral-bg/50 border border-primary-green/10 rounded-2xl pl-12 pr-4 py-3 outline-none focus:ring-2 focus:ring-primary-green"})]}),T.jsx("div",{className:"w-14 h-14 rounded-xl overflow-hidden border border-neutral-bg shrink-0 shadow-inner bg-neutral-bg flex items-center justify-center",children:q.image?T.jsx("img",{src:q.image,alt:"Preview",className:"w-full h-full object-cover",onError:oe=>{oe.target.src="https://via.placeholder.com/100?text=ERR"}}):T.jsx(Hd,{size:24,className:"text-text-dark/20"})})]})]}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-bold text-text-dark/70 mb-2 uppercase tracking-tight",children:"Description"}),T.jsx("textarea",{required:!0,rows:2,value:q.description,onChange:oe=>X({...q,description:oe.target.value}),className:"w-full bg-neutral-bg/50 border border-primary-green/10 rounded-2xl px-4 py-3 outline-none focus:ring-2 focus:ring-primary-green resize-none"})]}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-bold text-text-dark/70 mb-2 uppercase tracking-tight",children:"Health Benefits"}),T.jsx("textarea",{required:!0,rows:2,value:q.benefits,onChange:oe=>X({...q,benefits:oe.target.value}),className:"w-full bg-neutral-bg/50 border border-primary-green/10 rounded-2xl px-4 py-3 outline-none focus:ring-2 focus:ring-primary-green resize-none"})]}),T.jsxs("div",{className:"flex gap-4 pt-4 sticky bottom-0 bg-white pb-2",children:[T.jsx("button",{type:"button",onClick:()=>E(!1),className:"flex-grow bg-neutral-bg py-4 rounded-2xl font-bold hover:bg-neutral-bg/80 transition-colors",disabled:p,children:"Cancel"}),T.jsx("button",{type:"submit",disabled:p,className:"flex-grow bg-primary-green text-white py-4 rounded-2xl font-bold flex items-center justify-center gap-2 hover:bg-primary-green/90 transition-all shadow-lg shadow-primary-green/20 disabled:opacity-70",children:p?T.jsx(Ru,{className:"animate-spin",size:20}):T.jsxs(T.Fragment,{children:[T.jsx(BE,{size:20})," ",S?"Update Product":"Save Product"]})})]})]}):T.jsxs("form",{onSubmit:V,className:"p-8 space-y-6",children:[T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-bold text-text-dark/70 mb-2 uppercase tracking-tight",children:"Slide Title"}),T.jsx("input",{required:!0,value:H.title,onChange:oe=>ne({...H,title:oe.target.value}),className:"w-full bg-neutral-bg/50 border border-primary-green/10 rounded-2xl px-4 py-3 outline-none focus:ring-2 focus:ring-primary-green",placeholder:"e.g. Authentic Himalayan Herbs"})]}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-bold text-text-dark/70 mb-2 uppercase tracking-tight",children:"Subtitle"}),T.jsx("textarea",{required:!0,rows:3,value:H.subtitle,onChange:oe=>ne({...H,subtitle:oe.target.value}),className:"w-full bg-neutral-bg/50 border border-primary-green/10 rounded-2xl px-4 py-3 outline-none focus:ring-2 focus:ring-primary-green resize-none",placeholder:"Describe your slide content..."})]}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-bold text-text-dark/70 mb-2 uppercase tracking-tight",children:"Background Image URL"}),T.jsxs("div",{className:"flex gap-4",children:[T.jsxs("div",{className:"relative flex-grow",children:[T.jsx(Hd,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-text-dark/30",size:18}),T.jsx("input",{required:!0,placeholder:"Paste image URL here...",value:H.image,onChange:oe=>ne({...H,image:oe.target.value}),className:"w-full bg-neutral-bg/50 border border-primary-green/10 rounded-2xl pl-12 pr-4 py-3 outline-none focus:ring-2 focus:ring-primary-green"})]}),T.jsx("div",{className:"w-20 h-12 rounded-lg overflow-hidden border border-neutral-bg shrink-0 shadow-inner bg-neutral-bg flex items-center justify-center",children:H.image?T.jsx("img",{src:H.image,alt:"Preview",className:"w-full h-full object-cover",onError:oe=>{oe.target.src="https://via.placeholder.com/200x120?text=ERR"}}):T.jsx(Hd,{size:16,className:"text-text-dark/20"})})]})]}),T.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-bold text-text-dark/70 mb-2 uppercase tracking-tight",children:"Button Text"}),T.jsx("input",{required:!0,value:H.buttonText,onChange:oe=>ne({...H,buttonText:oe.target.value}),className:"w-full bg-neutral-bg/50 border border-primary-green/10 rounded-2xl px-4 py-3 outline-none focus:ring-2 focus:ring-primary-green",placeholder:"e.g. Shop Now"})]}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-bold text-text-dark/70 mb-2 uppercase tracking-tight",children:"Button Link"}),T.jsx("input",{required:!0,value:H.buttonLink,onChange:oe=>ne({...H,buttonLink:oe.target.value}),className:"w-full bg-neutral-bg/50 border border-primary-green/10 rounded-2xl px-4 py-3 outline-none focus:ring-2 focus:ring-primary-green",placeholder:"e.g. /products"})]})]}),T.jsx("div",{children:T.jsxs("label",{className:"flex items-center gap-3",children:[T.jsx("input",{type:"checkbox",checked:H.isActive,onChange:oe=>ne({...H,isActive:oe.target.checked}),className:"w-5 h-5 text-primary-green bg-neutral-bg border-primary-green/20 rounded focus:ring-primary-green focus:ring-2"}),T.jsx("span",{className:"text-sm font-bold text-text-dark/70 uppercase tracking-tight",children:"Active (Show on homepage)"})]})}),T.jsxs("div",{className:"flex gap-4 pt-4 sticky bottom-0 bg-white pb-2",children:[T.jsx("button",{type:"button",onClick:()=>E(!1),className:"flex-grow bg-neutral-bg py-4 rounded-2xl font-bold hover:bg-neutral-bg/80 transition-colors",disabled:p,children:"Cancel"}),T.jsx("button",{type:"submit",disabled:p,className:"flex-grow bg-primary-green text-white py-4 rounded-2xl font-bold flex items-center justify-center gap-2 hover:bg-primary-green/90 transition-all shadow-lg shadow-primary-green/20 disabled:opacity-70",children:p?T.jsx(Ru,{className:"animate-spin",size:20}):T.jsxs(T.Fragment,{children:[T.jsx(BE,{size:20})," ",D?"Update Slide":"Save Slide"]})})]})]})]})})]})},UB=({products:t,onEdit:e,onDelete:n})=>T.jsx("div",{className:"overflow-x-auto",children:T.jsxs("table",{className:"w-full text-left",children:[T.jsx("thead",{className:"bg-neutral-bg/50 border-b border-primary-green/5",children:T.jsxs("tr",{children:[T.jsx("th",{className:"px-6 py-4 text-xs font-bold uppercase text-text-dark/50 tracking-widest",children:"Image"}),T.jsx("th",{className:"px-6 py-4 text-xs font-bold uppercase text-text-dark/50 tracking-widest",children:"Name"}),T.jsx("th",{className:"px-6 py-4 text-xs font-bold uppercase text-text-dark/50 tracking-widest",children:"Category"}),T.jsx("th",{className:"px-6 py-4 text-xs font-bold uppercase text-text-dark/50 tracking-widest",children:"Price"}),T.jsx("th",{className:"px-6 py-4 text-xs font-bold uppercase text-text-dark/50 tracking-widest",children:"Actions"})]})}),T.jsx("tbody",{className:"divide-y divide-neutral-bg",children:t.length>0?t.map(i=>T.jsxs("tr",{className:"hover:bg-neutral-bg/20 transition-colors group",children:[T.jsx("td",{className:"px-6 py-4",children:T.jsx("img",{src:i.image,className:"w-14 h-14 rounded-xl object-cover border border-neutral-bg shadow-sm group-hover:scale-105 transition-transform",alt:i.name,onError:s=>{s.target.src="https://via.placeholder.com/100?text=No+Image"}})}),T.jsxs("td",{className:"px-6 py-4",children:[T.jsx("div",{className:"font-bold text-text-dark leading-tight",children:i.name}),T.jsx("div",{className:"text-xs text-primary-green font-medium mt-1",children:i.nepaliName})]}),T.jsx("td",{className:"px-6 py-4",children:T.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wider bg-accent-cream px-3 py-1 rounded-full border border-primary-green/10 text-primary-green",children:i.category})}),T.jsxs("td",{className:"px-6 py-4 font-bold text-earth-brown",children:["Rs. ",i.price]}),T.jsx("td",{className:"px-6 py-4",children:T.jsxs("div",{className:"flex gap-2",children:[T.jsx("button",{onClick:()=>e(i),className:"p-2 text-primary-green hover:bg-primary-green/10 rounded-lg transition-all",title:"Edit Product",children:T.jsx(Fw,{size:18})}),T.jsx("button",{onClick:()=>n(i.id),className:"p-2 text-red-500 hover:bg-red-50 rounded-lg transition-all",title:"Delete Product",children:T.jsx(Qg,{size:18})})]})})]},i.id)):T.jsx("tr",{children:T.jsxs("td",{colSpan:5,className:"px-6 py-20 text-center",children:[T.jsx(Ow,{size:48,className:"mx-auto text-neutral-bg mb-4"}),T.jsx("p",{className:"text-text-dark/50 font-medium",children:"No products found in the store."})]})})})]})}),OB=({slides:t,onEdit:e,onDelete:n,onToggleActive:i})=>T.jsx("div",{className:"overflow-x-auto",children:T.jsxs("table",{className:"w-full text-left",children:[T.jsx("thead",{className:"bg-neutral-bg/50 border-b border-primary-green/5",children:T.jsxs("tr",{children:[T.jsx("th",{className:"px-6 py-4 text-xs font-bold uppercase text-text-dark/50 tracking-widest",children:"Image"}),T.jsx("th",{className:"px-6 py-4 text-xs font-bold uppercase text-text-dark/50 tracking-widest",children:"Title"}),T.jsx("th",{className:"px-6 py-4 text-xs font-bold uppercase text-text-dark/50 tracking-widest",children:"Button"}),T.jsx("th",{className:"px-6 py-4 text-xs font-bold uppercase text-text-dark/50 tracking-widest",children:"Status"}),T.jsx("th",{className:"px-6 py-4 text-xs font-bold uppercase text-text-dark/50 tracking-widest",children:"Actions"})]})}),T.jsx("tbody",{className:"divide-y divide-neutral-bg",children:t.length>0?t.map(s=>T.jsxs("tr",{className:"hover:bg-neutral-bg/20 transition-colors group",children:[T.jsx("td",{className:"px-6 py-4",children:T.jsx("img",{src:s.image,className:"w-20 h-12 rounded-lg object-cover border border-neutral-bg shadow-sm group-hover:scale-105 transition-transform",alt:s.title,onError:a=>{a.target.src="https://via.placeholder.com/200x120?text=No+Image"}})}),T.jsxs("td",{className:"px-6 py-4",children:[T.jsx("div",{className:"font-bold text-text-dark leading-tight",children:s.title}),T.jsx("div",{className:"text-xs text-earth-brown mt-1 line-clamp-2",children:s.subtitle})]}),T.jsx("td",{className:"px-6 py-4",children:T.jsx("span",{className:"text-xs bg-primary-green/10 text-primary-green px-2 py-1 rounded-full",children:s.buttonText})}),T.jsx("td",{className:"px-6 py-4",children:T.jsxs("button",{onClick:()=>i(s),className:`flex items-center gap-2 px-3 py-1 rounded-full text-xs font-bold transition-all ${s.isActive?"bg-green-100 text-green-700 hover:bg-green-200":"bg-gray-100 text-gray-500 hover:bg-gray-200"}`,children:[s.isActive?T.jsx(Kg,{size:14}):T.jsx(Jg,{size:14}),s.isActive?"Active":"Inactive"]})}),T.jsx("td",{className:"px-6 py-4",children:T.jsxs("div",{className:"flex gap-2",children:[T.jsx("button",{onClick:()=>e(s),className:"p-2 text-primary-green hover:bg-primary-green/10 rounded-lg transition-all",title:"Edit Slide",children:T.jsx(Fw,{size:18})}),T.jsx("button",{onClick:()=>n(s.id),className:"p-2 text-red-500 hover:bg-red-50 rounded-lg transition-all",title:"Delete Slide",children:T.jsx(Qg,{size:18})})]})})]},s.id)):T.jsx("tr",{children:T.jsxs("td",{colSpan:5,className:"px-6 py-20 text-center",children:[T.jsx(Uw,{size:48,className:"mx-auto text-neutral-bg mb-4"}),T.jsx("p",{className:"text-text-dark/50 font-medium",children:"No hero slides found."})]})})})]})}),FB=()=>T.jsx(HN,{children:T.jsx(AB,{children:T.jsxs(gN,{children:[T.jsx(Un,{path:"/",element:T.jsx(xB,{})}),T.jsx(Un,{path:"/products",element:T.jsx(CB,{})}),T.jsx(Un,{path:"/product/:id",element:T.jsx(IB,{})}),T.jsx(Un,{path:"/about",element:T.jsx(bB,{})}),T.jsx(Un,{path:"/testimonials",element:T.jsx(RB,{})}),T.jsx(Un,{path:"/contact",element:T.jsx(NB,{})}),T.jsx(Un,{path:"/cart",element:T.jsx(MB,{})}),T.jsx(Un,{path:"/checkout",element:T.jsx(DB,{})}),T.jsx(Un,{path:"/login",element:T.jsx(PB,{})}),T.jsx(Un,{path:"/signup",element:T.jsx(kB,{})}),T.jsx(Un,{path:"/admin/login",element:T.jsx(VB,{})}),T.jsx(Un,{path:"/admin/dashboard",element:T.jsx(LB,{})})]})})}),Mb=document.getElementById("root");if(!Mb)throw new Error("Could not find root element to mount to");const qB=v1.createRoot(Mb);qB.render(T.jsx(dw.StrictMode,{children:T.jsx(FB,{})}));
