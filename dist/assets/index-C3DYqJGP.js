(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function e(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(r){if(r.ep)return;r.ep=!0;const s=e(r);fetch(r.href,s)}})();function cT(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var vw={exports:{}},yu={};/**
* @license React
* react-jsx-runtime.production.js
*
* Copyright (c) Meta Platforms, Inc. and affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var bw;function lN(){if(bw)return yu;bw=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,s,o){var u=null;if(o!==void 0&&(u=""+o),s.key!==void 0&&(u=""+s.key),"key"in s){o={};for(var d in s)d!=="key"&&(o[d]=s[d])}else o=s;return s=o.ref,{$$typeof:t,type:r,key:u,ref:s!==void 0?s:null,props:o}}return yu.Fragment=e,yu.jsx=n,yu.jsxs=n,yu}var ww;function uN(){return ww||(ww=1,vw.exports=lN()),vw.exports}var E=uN(),Ew={exports:{}},Ne={};/**
* @license React
* react.production.js
*
* Copyright (c) Meta Platforms, Inc. and affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var Sw;function cN(){if(Sw)return Ne;Sw=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),w=Symbol.for("react.activity"),S=Symbol.iterator;function I(F){return F===null||typeof F!="object"?null:(F=S&&F[S]||F["@@iterator"],typeof F=="function"?F:null)}var P={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j=Object.assign,D={};function q(F,ie,he){this.props=F,this.context=ie,this.refs=D,this.updater=he||P}q.prototype.isReactComponent={},q.prototype.setState=function(F,ie){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,ie,"setState")},q.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function X(){}X.prototype=q.prototype;function B(F,ie,he){this.props=F,this.context=ie,this.refs=D,this.updater=he||P}var re=B.prototype=new X;re.constructor=B,j(re,q.prototype),re.isPureReactComponent=!0;var ce=Array.isArray;function ue(){}var A={H:null,A:null,T:null,S:null},N=Object.prototype.hasOwnProperty;function O(F,ie,he){var ge=he.ref;return{$$typeof:t,type:F,key:ie,ref:ge!==void 0?ge:null,props:he}}function U(F,ie){return O(F.type,ie,F.props)}function M(F){return typeof F=="object"&&F!==null&&F.$$typeof===t}function H(F){var ie={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(he){return ie[he]})}var R=/\/+/g;function ae(F,ie){return typeof F=="object"&&F!==null&&F.key!=null?H(""+F.key):ie.toString(36)}function Oe(F){switch(F.status){case"fulfilled":return F.value;case"rejected":throw F.reason;default:switch(typeof F.status=="string"?F.then(ue,ue):(F.status="pending",F.then(function(ie){F.status==="pending"&&(F.status="fulfilled",F.value=ie)},function(ie){F.status==="pending"&&(F.status="rejected",F.reason=ie)})),F.status){case"fulfilled":return F.value;case"rejected":throw F.reason}}throw F}function J(F,ie,he,ge,Ie){var De=typeof F;(De==="undefined"||De==="boolean")&&(F=null);var $e=!1;if(F===null)$e=!0;else switch(De){case"bigint":case"string":case"number":$e=!0;break;case"object":switch(F.$$typeof){case t:case e:$e=!0;break;case v:return $e=F._init,J($e(F._payload),ie,he,ge,Ie)}}if($e)return Ie=Ie(F),$e=ge===""?"."+ae(F,0):ge,ce(Ie)?(he="",$e!=null&&(he=$e.replace(R,"$&/")+"/"),J(Ie,ie,he,"",function(zs){return zs})):Ie!=null&&(M(Ie)&&(Ie=U(Ie,he+(Ie.key==null||F&&F.key===Ie.key?"":(""+Ie.key).replace(R,"$&/")+"/")+$e)),ie.push(Ie)),1;$e=0;var Vt=ge===""?".":ge+":";if(ce(F))for(var ft=0;ft<F.length;ft++)ge=F[ft],De=Vt+ae(ge,ft),$e+=J(ge,ie,he,De,Ie);else if(ft=I(F),typeof ft=="function")for(F=ft.call(F),ft=0;!(ge=F.next()).done;)ge=ge.value,De=Vt+ae(ge,ft++),$e+=J(ge,ie,he,De,Ie);else if(De==="object"){if(typeof F.then=="function")return J(Oe(F),ie,he,ge,Ie);throw ie=String(F),Error("Objects are not valid as a React child (found: "+(ie==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":ie)+"). If you meant to render a collection of children, use an array instead.")}return $e}function le(F,ie,he){if(F==null)return F;var ge=[],Ie=0;return J(F,ge,"","",function(De){return ie.call(he,De,Ie++)}),ge}function be(F){if(F._status===-1){var ie=F._result;ie=ie(),ie.then(function(he){(F._status===0||F._status===-1)&&(F._status=1,F._result=he)},function(he){(F._status===0||F._status===-1)&&(F._status=2,F._result=he)}),F._status===-1&&(F._status=0,F._result=ie)}if(F._status===1)return F._result.default;throw F._result}var Re=typeof reportError=="function"?reportError:function(F){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ie=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof F=="object"&&F!==null&&typeof F.message=="string"?String(F.message):String(F),error:F});if(!window.dispatchEvent(ie))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",F);return}console.error(F)},Le={map:le,forEach:function(F,ie,he){le(F,function(){ie.apply(this,arguments)},he)},count:function(F){var ie=0;return le(F,function(){ie++}),ie},toArray:function(F){return le(F,function(ie){return ie})||[]},only:function(F){if(!M(F))throw Error("React.Children.only expected to receive a single React element child.");return F}};return Ne.Activity=w,Ne.Children=Le,Ne.Component=q,Ne.Fragment=n,Ne.Profiler=s,Ne.PureComponent=B,Ne.StrictMode=r,Ne.Suspense=f,Ne.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=A,Ne.__COMPILER_RUNTIME={__proto__:null,c:function(F){return A.H.useMemoCache(F)}},Ne.cache=function(F){return function(){return F.apply(null,arguments)}},Ne.cacheSignal=function(){return null},Ne.cloneElement=function(F,ie,he){if(F==null)throw Error("The argument must be a React element, but you passed "+F+".");var ge=j({},F.props),Ie=F.key;if(ie!=null)for(De in ie.key!==void 0&&(Ie=""+ie.key),ie)!N.call(ie,De)||De==="key"||De==="__self"||De==="__source"||De==="ref"&&ie.ref===void 0||(ge[De]=ie[De]);var De=arguments.length-2;if(De===1)ge.children=he;else if(1<De){for(var $e=Array(De),Vt=0;Vt<De;Vt++)$e[Vt]=arguments[Vt+2];ge.children=$e}return O(F.type,Ie,ge)},Ne.createContext=function(F){return F={$$typeof:u,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null},F.Provider=F,F.Consumer={$$typeof:o,_context:F},F},Ne.createElement=function(F,ie,he){var ge,Ie={},De=null;if(ie!=null)for(ge in ie.key!==void 0&&(De=""+ie.key),ie)N.call(ie,ge)&&ge!=="key"&&ge!=="__self"&&ge!=="__source"&&(Ie[ge]=ie[ge]);var $e=arguments.length-2;if($e===1)Ie.children=he;else if(1<$e){for(var Vt=Array($e),ft=0;ft<$e;ft++)Vt[ft]=arguments[ft+2];Ie.children=Vt}if(F&&F.defaultProps)for(ge in $e=F.defaultProps,$e)Ie[ge]===void 0&&(Ie[ge]=$e[ge]);return O(F,De,Ie)},Ne.createRef=function(){return{current:null}},Ne.forwardRef=function(F){return{$$typeof:d,render:F}},Ne.isValidElement=M,Ne.lazy=function(F){return{$$typeof:v,_payload:{_status:-1,_result:F},_init:be}},Ne.memo=function(F,ie){return{$$typeof:p,type:F,compare:ie===void 0?null:ie}},Ne.startTransition=function(F){var ie=A.T,he={};A.T=he;try{var ge=F(),Ie=A.S;Ie!==null&&Ie(he,ge),typeof ge=="object"&&ge!==null&&typeof ge.then=="function"&&ge.then(ue,Re)}catch(De){Re(De)}finally{ie!==null&&he.types!==null&&(ie.types=he.types),A.T=ie}},Ne.unstable_useCacheRefresh=function(){return A.H.useCacheRefresh()},Ne.use=function(F){return A.H.use(F)},Ne.useActionState=function(F,ie,he){return A.H.useActionState(F,ie,he)},Ne.useCallback=function(F,ie){return A.H.useCallback(F,ie)},Ne.useContext=function(F){return A.H.useContext(F)},Ne.useDebugValue=function(){},Ne.useDeferredValue=function(F,ie){return A.H.useDeferredValue(F,ie)},Ne.useEffect=function(F,ie){return A.H.useEffect(F,ie)},Ne.useEffectEvent=function(F){return A.H.useEffectEvent(F)},Ne.useId=function(){return A.H.useId()},Ne.useImperativeHandle=function(F,ie,he){return A.H.useImperativeHandle(F,ie,he)},Ne.useInsertionEffect=function(F,ie){return A.H.useInsertionEffect(F,ie)},Ne.useLayoutEffect=function(F,ie){return A.H.useLayoutEffect(F,ie)},Ne.useMemo=function(F,ie){return A.H.useMemo(F,ie)},Ne.useOptimistic=function(F,ie){return A.H.useOptimistic(F,ie)},Ne.useReducer=function(F,ie,he){return A.H.useReducer(F,ie,he)},Ne.useRef=function(F){return A.H.useRef(F)},Ne.useState=function(F){return A.H.useState(F)},Ne.useSyncExternalStore=function(F,ie,he){return A.H.useSyncExternalStore(F,ie,he)},Ne.useTransition=function(){return A.H.useTransition()},Ne.version="19.2.3",Ne}var xw;function Dg(){return xw||(xw=1,Ew.exports=cN()),Ew.exports}var z=Dg();const dT=cT(z);var ym={exports:{}},vu={},Tw={exports:{}},Cw={};/**
* @license React
* scheduler.production.js
*
* Copyright (c) Meta Platforms, Inc. and affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var Iw;function dN(){return Iw||(Iw=1,(function(t){function e(J,le){var be=J.length;J.push(le);e:for(;0<be;){var Re=be-1>>>1,Le=J[Re];if(0<s(Le,le))J[Re]=le,J[be]=Le,be=Re;else break e}}function n(J){return J.length===0?null:J[0]}function r(J){if(J.length===0)return null;var le=J[0],be=J.pop();if(be!==le){J[0]=be;e:for(var Re=0,Le=J.length,F=Le>>>1;Re<F;){var ie=2*(Re+1)-1,he=J[ie],ge=ie+1,Ie=J[ge];if(0>s(he,be))ge<Le&&0>s(Ie,he)?(J[Re]=Ie,J[ge]=be,Re=ge):(J[Re]=he,J[ie]=be,Re=ie);else if(ge<Le&&0>s(Ie,be))J[Re]=Ie,J[ge]=be,Re=ge;else break e}}return le}function s(J,le){var be=J.sortIndex-le.sortIndex;return be!==0?be:J.id-le.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,d=u.now();t.unstable_now=function(){return u.now()-d}}var f=[],p=[],v=1,w=null,S=3,I=!1,P=!1,j=!1,D=!1,q=typeof setTimeout=="function"?setTimeout:null,X=typeof clearTimeout=="function"?clearTimeout:null,B=typeof setImmediate<"u"?setImmediate:null;function re(J){for(var le=n(p);le!==null;){if(le.callback===null)r(p);else if(le.startTime<=J)r(p),le.sortIndex=le.expirationTime,e(f,le);else break;le=n(p)}}function ce(J){if(j=!1,re(J),!P)if(n(f)!==null)P=!0,ue||(ue=!0,H());else{var le=n(p);le!==null&&Oe(ce,le.startTime-J)}}var ue=!1,A=-1,N=5,O=-1;function U(){return D?!0:!(t.unstable_now()-O<N)}function M(){if(D=!1,ue){var J=t.unstable_now();O=J;var le=!0;try{e:{P=!1,j&&(j=!1,X(A),A=-1),I=!0;var be=S;try{t:{for(re(J),w=n(f);w!==null&&!(w.expirationTime>J&&U());){var Re=w.callback;if(typeof Re=="function"){w.callback=null,S=w.priorityLevel;var Le=Re(w.expirationTime<=J);if(J=t.unstable_now(),typeof Le=="function"){w.callback=Le,re(J),le=!0;break t}w===n(f)&&r(f),re(J)}else r(f);w=n(f)}if(w!==null)le=!0;else{var F=n(p);F!==null&&Oe(ce,F.startTime-J),le=!1}}break e}finally{w=null,S=be,I=!1}le=void 0}}finally{le?H():ue=!1}}}var H;if(typeof B=="function")H=function(){B(M)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,ae=R.port2;R.port1.onmessage=M,H=function(){ae.postMessage(null)}}else H=function(){q(M,0)};function Oe(J,le){A=q(function(){J(t.unstable_now())},le)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(J){J.callback=null},t.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<J?Math.floor(1e3/J):5},t.unstable_getCurrentPriorityLevel=function(){return S},t.unstable_next=function(J){switch(S){case 1:case 2:case 3:var le=3;break;default:le=S}var be=S;S=le;try{return J()}finally{S=be}},t.unstable_requestPaint=function(){D=!0},t.unstable_runWithPriority=function(J,le){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var be=S;S=J;try{return le()}finally{S=be}},t.unstable_scheduleCallback=function(J,le,be){var Re=t.unstable_now();switch(typeof be=="object"&&be!==null?(be=be.delay,be=typeof be=="number"&&0<be?Re+be:Re):be=Re,J){case 1:var Le=-1;break;case 2:Le=250;break;case 5:Le=1073741823;break;case 4:Le=1e4;break;default:Le=5e3}return Le=be+Le,J={id:v++,callback:le,priorityLevel:J,startTime:be,expirationTime:Le,sortIndex:-1},be>Re?(J.sortIndex=be,e(p,J),n(f)===null&&J===n(p)&&(j?(X(A),A=-1):j=!0,Oe(ce,be-Re))):(J.sortIndex=Le,e(f,J),P||I||(P=!0,ue||(ue=!0,H()))),J},t.unstable_shouldYield=U,t.unstable_wrapCallback=function(J){var le=S;return function(){var be=S;S=le;try{return J.apply(this,arguments)}finally{S=be}}}})(Cw)),Cw}var kw;function hN(){return kw||(kw=1,Tw.exports=dN()),Tw.exports}var vm={exports:{}},sn={};/**
* @license React
* react-dom.production.js
*
* Copyright (c) Meta Platforms, Inc. and affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var _w;function fN(){if(_w)return sn;_w=1;var t=Dg();function e(f){var p="https://react.dev/errors/"+f;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)p+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+f+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},s=Symbol.for("react.portal");function o(f,p,v){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:w==null?null:""+w,children:f,containerInfo:p,implementation:v}}var u=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(f,p){if(f==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return sn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,sn.createPortal=function(f,p){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return o(f,p,null,v)},sn.flushSync=function(f){var p=u.T,v=r.p;try{if(u.T=null,r.p=2,f)return f()}finally{u.T=p,r.p=v,r.d.f()}},sn.preconnect=function(f,p){typeof f=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,r.d.C(f,p))},sn.prefetchDNS=function(f){typeof f=="string"&&r.d.D(f)},sn.preinit=function(f,p){if(typeof f=="string"&&p&&typeof p.as=="string"){var v=p.as,w=d(v,p.crossOrigin),S=typeof p.integrity=="string"?p.integrity:void 0,I=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;v==="style"?r.d.S(f,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:w,integrity:S,fetchPriority:I}):v==="script"&&r.d.X(f,{crossOrigin:w,integrity:S,fetchPriority:I,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},sn.preinitModule=function(f,p){if(typeof f=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var v=d(p.as,p.crossOrigin);r.d.M(f,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&r.d.M(f)},sn.preload=function(f,p){if(typeof f=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var v=p.as,w=d(v,p.crossOrigin);r.d.L(f,v,{crossOrigin:w,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},sn.preloadModule=function(f,p){if(typeof f=="string")if(p){var v=d(p.as,p.crossOrigin);r.d.m(f,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else r.d.m(f)},sn.requestFormReset=function(f){r.d.r(f)},sn.unstable_batchedUpdates=function(f,p){return f(p)},sn.useFormState=function(f,p,v){return u.H.useFormState(f,p,v)},sn.useFormStatus=function(){return u.H.useHostTransitionStatus()},sn.version="19.2.3",sn}var Nw;function pN(){if(Nw)return vm.exports;Nw=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),vm.exports=fN(),vm.exports}/**
* @license React
* react-dom-client.production.js
*
* Copyright (c) Meta Platforms, Inc. and affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var Aw;function mN(){if(Aw)return vu;Aw=1;var t=hN(),e=Dg(),n=pN();function r(i){var a="https://react.dev/errors/"+i;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)a+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+i+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function o(i){var a=i,l=i;if(i.alternate)for(;a.return;)a=a.return;else{i=a;do a=i,(a.flags&4098)!==0&&(l=a.return),i=a.return;while(i)}return a.tag===3?l:null}function u(i){if(i.tag===13){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function d(i){if(i.tag===31){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function f(i){if(o(i)!==i)throw Error(r(188))}function p(i){var a=i.alternate;if(!a){if(a=o(i),a===null)throw Error(r(188));return a!==i?null:i}for(var l=i,c=a;;){var y=l.return;if(y===null)break;var b=y.alternate;if(b===null){if(c=y.return,c!==null){l=c;continue}break}if(y.child===b.child){for(b=y.child;b;){if(b===l)return f(y),i;if(b===c)return f(y),a;b=b.sibling}throw Error(r(188))}if(l.return!==c.return)l=y,c=b;else{for(var T=!1,k=y.child;k;){if(k===l){T=!0,l=y,c=b;break}if(k===c){T=!0,c=y,l=b;break}k=k.sibling}if(!T){for(k=b.child;k;){if(k===l){T=!0,l=b,c=y;break}if(k===c){T=!0,c=b,l=y;break}k=k.sibling}if(!T)throw Error(r(189))}}if(l.alternate!==c)throw Error(r(190))}if(l.tag!==3)throw Error(r(188));return l.stateNode.current===l?i:a}function v(i){var a=i.tag;if(a===5||a===26||a===27||a===6)return i;for(i=i.child;i!==null;){if(a=v(i),a!==null)return a;i=i.sibling}return null}var w=Object.assign,S=Symbol.for("react.element"),I=Symbol.for("react.transitional.element"),P=Symbol.for("react.portal"),j=Symbol.for("react.fragment"),D=Symbol.for("react.strict_mode"),q=Symbol.for("react.profiler"),X=Symbol.for("react.consumer"),B=Symbol.for("react.context"),re=Symbol.for("react.forward_ref"),ce=Symbol.for("react.suspense"),ue=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),O=Symbol.for("react.activity"),U=Symbol.for("react.memo_cache_sentinel"),M=Symbol.iterator;function H(i){return i===null||typeof i!="object"?null:(i=M&&i[M]||i["@@iterator"],typeof i=="function"?i:null)}var R=Symbol.for("react.client.reference");function ae(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===R?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case j:return"Fragment";case q:return"Profiler";case D:return"StrictMode";case ce:return"Suspense";case ue:return"SuspenseList";case O:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case P:return"Portal";case B:return i.displayName||"Context";case X:return(i._context.displayName||"Context")+".Consumer";case re:var a=i.render;return i=i.displayName,i||(i=a.displayName||a.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case A:return a=i.displayName||null,a!==null?a:ae(i.type)||"Memo";case N:a=i._payload,i=i._init;try{return ae(i(a))}catch{}}return null}var Oe=Array.isArray,J=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,le=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,be={pending:!1,data:null,method:null,action:null},Re=[],Le=-1;function F(i){return{current:i}}function ie(i){0>Le||(i.current=Re[Le],Re[Le]=null,Le--)}function he(i,a){Le++,Re[Le]=i.current,i.current=a}var ge=F(null),Ie=F(null),De=F(null),$e=F(null);function Vt(i,a){switch(he(De,a),he(Ie,i),he(ge,null),a.nodeType){case 9:case 11:i=(i=a.documentElement)&&(i=i.namespaceURI)?q0(i):0;break;default:if(i=a.tagName,a=a.namespaceURI)a=q0(a),i=H0(a,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}ie(ge),he(ge,i)}function ft(){ie(ge),ie(Ie),ie(De)}function zs(i){i.memoizedState!==null&&he($e,i);var a=ge.current,l=H0(a,i.type);a!==l&&(he(Ie,i),he(ge,l))}function qa(i){Ie.current===i&&(ie(ge),ie(Ie)),$e.current===i&&(ie($e),fu._currentValue=be)}var Ha,za;function _r(i){if(Ha===void 0)try{throw Error()}catch(l){var a=l.stack.trim().match(/\n( *(at )?)/);Ha=a&&a[1]||"",za=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ha+i+za}var fl=!1;function Gs(i,a){if(!i||fl)return"";fl=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(a){var se=function(){throw Error()};if(Object.defineProperty(se.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(se,[])}catch(Z){var Y=Z}Reflect.construct(i,[],se)}else{try{se.call()}catch(Z){Y=Z}i.call(se.prototype)}}else{try{throw Error()}catch(Z){Y=Z}(se=i())&&typeof se.catch=="function"&&se.catch(function(){})}}catch(Z){if(Z&&Y&&typeof Z.stack=="string")return[Z.stack,Y.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var b=c.DetermineComponentFrameRoot(),T=b[0],k=b[1];if(T&&k){var L=T.split(`
`),K=k.split(`
`);for(y=c=0;c<L.length&&!L[c].includes("DetermineComponentFrameRoot");)c++;for(;y<K.length&&!K[y].includes("DetermineComponentFrameRoot");)y++;if(c===L.length||y===K.length)for(c=L.length-1,y=K.length-1;1<=c&&0<=y&&L[c]!==K[y];)y--;for(;1<=c&&0<=y;c--,y--)if(L[c]!==K[y]){if(c!==1||y!==1)do if(c--,y--,0>y||L[c]!==K[y]){var ee=`
`+L[c].replace(" at new "," at ");return i.displayName&&ee.includes("<anonymous>")&&(ee=ee.replace("<anonymous>",i.displayName)),ee}while(1<=c&&0<=y);break}}}finally{fl=!1,Error.prepareStackTrace=l}return(l=i?i.displayName||i.name:"")?_r(l):""}function pl(i,a){switch(i.tag){case 26:case 27:case 5:return _r(i.type);case 16:return _r("Lazy");case 13:return i.child!==a&&a!==null?_r("Suspense Fallback"):_r("Suspense");case 19:return _r("SuspenseList");case 0:case 15:return Gs(i.type,!1);case 11:return Gs(i.type.render,!1);case 1:return Gs(i.type,!0);case 31:return _r("Activity");default:return""}}function ml(i){try{var a="",l=null;do a+=pl(i,l),l=i,i=i.return;while(i);return a}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var It=Object.prototype.hasOwnProperty,Ft=t.unstable_scheduleCallback,Fi=t.unstable_cancelCallback,bf=t.unstable_shouldYield,dc=t.unstable_requestPaint,hn=t.unstable_now,Bs=t.unstable_getCurrentPriorityLevel,gl=t.unstable_ImmediatePriority,yl=t.unstable_UserBlockingPriority,qi=t.unstable_NormalPriority,wf=t.unstable_LowPriority,hc=t.unstable_IdlePriority,fc=t.log,pc=t.unstable_setDisableYieldValue,sr=null,Jt=null;function qn(i){if(typeof fc=="function"&&pc(i),Jt&&typeof Jt.setStrictMode=="function")try{Jt.setStrictMode(sr,i)}catch{}}var wt=Math.clz32?Math.clz32:gc,mc=Math.log,Ga=Math.LN2;function gc(i){return i>>>=0,i===0?32:31-(mc(i)/Ga|0)|0}var Nr=256,$s=262144,kt=4194304;function Ar(i){var a=i&42;if(a!==0)return a;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function Or(i,a,l){var c=i.pendingLanes;if(c===0)return 0;var y=0,b=i.suspendedLanes,T=i.pingedLanes;i=i.warmLanes;var k=c&134217727;return k!==0?(c=k&~b,c!==0?y=Ar(c):(T&=k,T!==0?y=Ar(T):l||(l=k&~i,l!==0&&(y=Ar(l))))):(k=c&~b,k!==0?y=Ar(k):T!==0?y=Ar(T):l||(l=c&~i,l!==0&&(y=Ar(l)))),y===0?0:a!==0&&a!==y&&(a&b)===0&&(b=y&-y,l=a&-a,b>=l||b===32&&(l&4194048)!==0)?a:y}function ar(i,a){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&a)===0}function Ef(i,a){switch(i){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yc(){var i=kt;return kt<<=1,(kt&62914560)===0&&(kt=4194304),i}function Pr(i){for(var a=[],l=0;31>l;l++)a.push(i);return a}function Ws(i,a){i.pendingLanes|=a,a!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function Sf(i,a,l,c,y,b){var T=i.pendingLanes;i.pendingLanes=l,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=l,i.entangledLanes&=l,i.errorRecoveryDisabledLanes&=l,i.shellSuspendCounter=0;var k=i.entanglements,L=i.expirationTimes,K=i.hiddenUpdates;for(l=T&~l;0<l;){var ee=31-wt(l),se=1<<ee;k[ee]=0,L[ee]=-1;var Y=K[ee];if(Y!==null)for(K[ee]=null,ee=0;ee<Y.length;ee++){var Z=Y[ee];Z!==null&&(Z.lane&=-536870913)}l&=~se}c!==0&&Ks(i,c,0),b!==0&&y===0&&i.tag!==0&&(i.suspendedLanes|=b&~(T&~a))}function Ks(i,a,l){i.pendingLanes|=a,i.suspendedLanes&=~a;var c=31-wt(a);i.entangledLanes|=a,i.entanglements[c]=i.entanglements[c]|1073741824|l&261930}function vl(i,a){var l=i.entangledLanes|=a;for(i=i.entanglements;l;){var c=31-wt(l),y=1<<c;y&a|i[c]&a&&(i[c]|=a),l&=~y}}function bl(i,a){var l=a&-a;return l=(l&42)!==0?1:Js(l),(l&(i.suspendedLanes|a))!==0?0:l}function Js(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function ai(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function vc(){var i=le.p;return i!==0?i:(i=window.event,i===void 0?32:dw(i.type))}function or(i,a){var l=le.p;try{return le.p=i,a()}finally{le.p=l}}var lr=Math.random().toString(36).slice(2),_t="__reactFiber$"+lr,Gt="__reactProps$"+lr,Rr="__reactContainer$"+lr,Ba="__reactEvents$"+lr,xf="__reactListeners$"+lr,bc="__reactHandles$"+lr,wc="__reactResources$"+lr,Dr="__reactMarker$"+lr;function $a(i){delete i[_t],delete i[Gt],delete i[Ba],delete i[xf],delete i[bc]}function jr(i){var a=i[_t];if(a)return a;for(var l=i.parentNode;l;){if(a=l[Rr]||l[_t]){if(l=a.alternate,a.child!==null||l!==null&&l.child!==null)for(i=J0(i);i!==null;){if(l=i[_t])return l;i=J0(i)}return a}i=l,l=i.parentNode}return null}function Hn(i){if(i=i[_t]||i[Rr]){var a=i.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return i}return null}function kn(i){var a=i.tag;if(a===5||a===26||a===27||a===6)return i.stateNode;throw Error(r(33))}function Mr(i){var a=i[wc];return a||(a=i[wc]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function Nt(i){i[Dr]=!0}var wl=new Set,El={};function Lr(i,a){Ur(i,a),Ur(i+"Capture",a)}function Ur(i,a){for(El[i]=a,i=0;i<a.length;i++)wl.add(a[i])}var Sl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),xl={},Tl={};function Ec(i){return It.call(Tl,i)?!0:It.call(xl,i)?!1:Sl.test(i)?Tl[i]=!0:(xl[i]=!0,!1)}function Wa(i,a,l){if(Ec(a))if(l===null)i.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":i.removeAttribute(a);return;case"boolean":var c=a.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){i.removeAttribute(a);return}}i.setAttribute(a,""+l)}}function _n(i,a,l){if(l===null)i.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(a);return}i.setAttribute(a,""+l)}}function At(i,a,l,c){if(c===null)i.removeAttribute(l);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(l);return}i.setAttributeNS(a,l,""+c)}}function Bt(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Hi(i){var a=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Cl(i,a,l){var c=Object.getOwnPropertyDescriptor(i.constructor.prototype,a);if(!i.hasOwnProperty(a)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var y=c.get,b=c.set;return Object.defineProperty(i,a,{configurable:!0,get:function(){return y.call(this)},set:function(T){l=""+T,b.call(this,T)}}),Object.defineProperty(i,a,{enumerable:c.enumerable}),{getValue:function(){return l},setValue:function(T){l=""+T},stopTracking:function(){i._valueTracker=null,delete i[a]}}}}function Ze(i){if(!i._valueTracker){var a=Hi(i)?"checked":"value";i._valueTracker=Cl(i,a,""+i[a])}}function Ys(i){if(!i)return!1;var a=i._valueTracker;if(!a)return!0;var l=a.getValue(),c="";return i&&(c=Hi(i)?i.checked?"true":"false":i.value),i=c,i!==l?(a.setValue(i),!0):!1}function Vr(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var Xs=/[\n"\\]/g;function Nn(i){return i.replace(Xs,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function Ka(i,a,l,c,y,b,T,k){i.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?i.type=T:i.removeAttribute("type"),a!=null?T==="number"?(a===0&&i.value===""||i.value!=a)&&(i.value=""+Bt(a)):i.value!==""+Bt(a)&&(i.value=""+Bt(a)):T!=="submit"&&T!=="reset"||i.removeAttribute("value"),a!=null?Il(i,T,Bt(a)):l!=null?Il(i,T,Bt(l)):c!=null&&i.removeAttribute("value"),y==null&&b!=null&&(i.defaultChecked=!!b),y!=null&&(i.checked=y&&typeof y!="function"&&typeof y!="symbol"),k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"?i.name=""+Bt(k):i.removeAttribute("name")}function Sc(i,a,l,c,y,b,T,k){if(b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(i.type=b),a!=null||l!=null){if(!(b!=="submit"&&b!=="reset"||a!=null)){Ze(i);return}l=l!=null?""+Bt(l):"",a=a!=null?""+Bt(a):l,k||a===i.value||(i.value=a),i.defaultValue=a}c=c??y,c=typeof c!="function"&&typeof c!="symbol"&&!!c,i.checked=k?i.checked:!!c,i.defaultChecked=!!c,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(i.name=T),Ze(i)}function Il(i,a,l){a==="number"&&Vr(i.ownerDocument)===i||i.defaultValue===""+l||(i.defaultValue=""+l)}function zi(i,a,l,c){if(i=i.options,a){a={};for(var y=0;y<l.length;y++)a["$"+l[y]]=!0;for(l=0;l<i.length;l++)y=a.hasOwnProperty("$"+i[l].value),i[l].selected!==y&&(i[l].selected=y),y&&c&&(i[l].defaultSelected=!0)}else{for(l=""+Bt(l),a=null,y=0;y<i.length;y++){if(i[y].value===l){i[y].selected=!0,c&&(i[y].defaultSelected=!0);return}a!==null||i[y].disabled||(a=i[y])}a!==null&&(a.selected=!0)}}function xc(i,a,l){if(a!=null&&(a=""+Bt(a),a!==i.value&&(i.value=a),l==null)){i.defaultValue!==a&&(i.defaultValue=a);return}i.defaultValue=l!=null?""+Bt(l):""}function Gi(i,a,l,c){if(a==null){if(c!=null){if(l!=null)throw Error(r(92));if(Oe(c)){if(1<c.length)throw Error(r(93));c=c[0]}l=c}l==null&&(l=""),a=l}l=Bt(a),i.defaultValue=l,c=i.textContent,c===l&&c!==""&&c!==null&&(i.value=c),Ze(i)}function bn(i,a){if(a){var l=i.firstChild;if(l&&l===i.lastChild&&l.nodeType===3){l.nodeValue=a;return}}i.textContent=a}var Tc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function kl(i,a,l){var c=a.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?c?i.setProperty(a,""):a==="float"?i.cssFloat="":i[a]="":c?i.setProperty(a,l):typeof l!="number"||l===0||Tc.has(a)?a==="float"?i.cssFloat=l:i[a]=(""+l).trim():i[a]=l+"px"}function _l(i,a,l){if(a!=null&&typeof a!="object")throw Error(r(62));if(i=i.style,l!=null){for(var c in l)!l.hasOwnProperty(c)||a!=null&&a.hasOwnProperty(c)||(c.indexOf("--")===0?i.setProperty(c,""):c==="float"?i.cssFloat="":i[c]="");for(var y in a)c=a[y],a.hasOwnProperty(y)&&l[y]!==c&&kl(i,y,c)}else for(var b in a)a.hasOwnProperty(b)&&kl(i,b,a[b])}function Ja(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Cc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Bi=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ya(i){return Bi.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function ur(){}var Nl=null;function zn(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var $i=null,Fr=null;function Qs(i){var a=Hn(i);if(a&&(i=a.stateNode)){var l=i[Gt]||null;e:switch(i=a.stateNode,a.type){case"input":if(Ka(i,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),a=l.name,l.type==="radio"&&a!=null){for(l=i;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+Nn(""+a)+'"][type="radio"]'),a=0;a<l.length;a++){var c=l[a];if(c!==i&&c.form===i.form){var y=c[Gt]||null;if(!y)throw Error(r(90));Ka(c,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(a=0;a<l.length;a++)c=l[a],c.form===i.form&&Ys(c)}break e;case"textarea":xc(i,l.value,l.defaultValue);break e;case"select":a=l.value,a!=null&&zi(i,!!l.multiple,a,!1)}}}var Xa=!1;function Wi(i,a,l){if(Xa)return i(a,l);Xa=!0;try{var c=i(a);return c}finally{if(Xa=!1,($i!==null||Fr!==null)&&(vd(),$i&&(a=$i,i=Fr,Fr=$i=null,Qs(a),i)))for(a=0;a<i.length;a++)Qs(i[a])}}function cr(i,a){var l=i.stateNode;if(l===null)return null;var c=l[Gt]||null;if(c===null)return null;l=c[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(i=i.type,c=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!c;break e;default:i=!1}if(i)return null;if(l&&typeof l!="function")throw Error(r(231,a,typeof l));return l}var Gn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Zs=!1;if(Gn)try{var it={};Object.defineProperty(it,"passive",{get:function(){Zs=!0}}),window.addEventListener("test",it,it),window.removeEventListener("test",it,it)}catch{Zs=!1}var qr=null,Al=null,ea=null;function Ol(){if(ea)return ea;var i,a=Al,l=a.length,c,y="value"in qr?qr.value:qr.textContent,b=y.length;for(i=0;i<l&&a[i]===y[i];i++);var T=l-i;for(c=1;c<=T&&a[l-c]===y[b-c];c++);return ea=y.slice(i,1<c?1-c:void 0)}function ta(i){var a=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&a===13&&(i=13)):i=a,i===10&&(i=13),32<=i||i===13?i:0}function oi(){return!0}function dr(){return!1}function Yt(i){function a(l,c,y,b,T){this._reactName=l,this._targetInst=y,this.type=c,this.nativeEvent=b,this.target=T,this.currentTarget=null;for(var k in i)i.hasOwnProperty(k)&&(l=i[k],this[k]=l?l(b):b[k]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?oi:dr,this.isPropagationStopped=dr,this}return w(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=oi)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=oi)},persist:function(){},isPersistent:oi}),a}var li={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Hr=Yt(li),Ki=w({},li,{view:0,detail:0}),Pl=Yt(Ki),Ji,Qa,zr,Za=w({},Ki,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Yi,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==zr&&(zr&&i.type==="mousemove"?(Ji=i.screenX-zr.screenX,Qa=i.screenY-zr.screenY):Qa=Ji=0,zr=i),Ji)},movementY:function(i){return"movementY"in i?i.movementY:Qa}}),Rl=Yt(Za),na=w({},Za,{dataTransfer:0}),Ic=Yt(na),kc=w({},Ki,{relatedTarget:0}),ra=Yt(kc),Dl=w({},li,{animationName:0,elapsedTime:0,pseudoElement:0}),_c=Yt(Dl),eo=w({},li,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Nc=Yt(eo),Ac=w({},li,{data:0}),Gr=Yt(Ac),Oc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Pc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Rc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Dc(i){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(i):(i=Rc[i])?!!a[i]:!1}function Yi(){return Dc}var fn=w({},Ki,{key:function(i){if(i.key){var a=Oc[i.key]||i.key;if(a!=="Unidentified")return a}return i.type==="keypress"?(i=ta(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Pc[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Yi,charCode:function(i){return i.type==="keypress"?ta(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?ta(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),jc=Yt(fn),Mc=w({},Za,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ui=Yt(Mc),g=w({},Ki,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Yi}),x=Yt(g),C=w({},li,{propertyName:0,elapsedTime:0,pseudoElement:0}),_=Yt(C),$=w({},Za,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Q=Yt($),de=w({},li,{newState:0,oldState:0}),je=Yt(de),Et=[9,13,27,32],et=Gn&&"CompositionEvent"in window,pt=null;Gn&&"documentMode"in document&&(pt=document.documentMode);var Bn=Gn&&"TextEvent"in window&&!pt,ci=Gn&&(!et||pt&&8<pt&&11>=pt),hr=" ",fr=!1;function ia(i,a){switch(i){case"keyup":return Et.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function to(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var no=!1;function Pk(i,a){switch(i){case"compositionend":return to(a);case"keypress":return a.which!==32?null:(fr=!0,hr);case"textInput":return i=a.data,i===hr&&fr?null:i;default:return null}}function Rk(i,a){if(no)return i==="compositionend"||!et&&ia(i,a)?(i=Ol(),ea=Al=qr=null,no=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return ci&&a.locale!=="ko"?null:a.data;default:return null}}var Dk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Qy(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a==="input"?!!Dk[i.type]:a==="textarea"}function Zy(i,a,l,c){$i?Fr?Fr.push(c):Fr=[c]:$i=c,a=Cd(a,"onChange"),0<a.length&&(l=new Hr("onChange","change",null,l,c),i.push({event:l,listeners:a}))}var jl=null,Ml=null;function jk(i){j0(i,0)}function Lc(i){var a=kn(i);if(Ys(a))return i}function ev(i,a){if(i==="change")return a}var tv=!1;if(Gn){var Tf;if(Gn){var Cf="oninput"in document;if(!Cf){var nv=document.createElement("div");nv.setAttribute("oninput","return;"),Cf=typeof nv.oninput=="function"}Tf=Cf}else Tf=!1;tv=Tf&&(!document.documentMode||9<document.documentMode)}function rv(){jl&&(jl.detachEvent("onpropertychange",iv),Ml=jl=null)}function iv(i){if(i.propertyName==="value"&&Lc(Ml)){var a=[];Zy(a,Ml,i,zn(i)),Wi(jk,a)}}function Mk(i,a,l){i==="focusin"?(rv(),jl=a,Ml=l,jl.attachEvent("onpropertychange",iv)):i==="focusout"&&rv()}function Lk(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Lc(Ml)}function Uk(i,a){if(i==="click")return Lc(a)}function Vk(i,a){if(i==="input"||i==="change")return Lc(a)}function Fk(i,a){return i===a&&(i!==0||1/i===1/a)||i!==i&&a!==a}var An=typeof Object.is=="function"?Object.is:Fk;function Ll(i,a){if(An(i,a))return!0;if(typeof i!="object"||i===null||typeof a!="object"||a===null)return!1;var l=Object.keys(i),c=Object.keys(a);if(l.length!==c.length)return!1;for(c=0;c<l.length;c++){var y=l[c];if(!It.call(a,y)||!An(i[y],a[y]))return!1}return!0}function sv(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function av(i,a){var l=sv(i);i=0;for(var c;l;){if(l.nodeType===3){if(c=i+l.textContent.length,i<=a&&c>=a)return{node:l,offset:a-i};i=c}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=sv(l)}}function ov(i,a){return i&&a?i===a?!0:i&&i.nodeType===3?!1:a&&a.nodeType===3?ov(i,a.parentNode):"contains"in i?i.contains(a):i.compareDocumentPosition?!!(i.compareDocumentPosition(a)&16):!1:!1}function lv(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var a=Vr(i.document);a instanceof i.HTMLIFrameElement;){try{var l=typeof a.contentWindow.location.href=="string"}catch{l=!1}if(l)i=a.contentWindow;else break;a=Vr(i.document)}return a}function If(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a&&(a==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||a==="textarea"||i.contentEditable==="true")}var qk=Gn&&"documentMode"in document&&11>=document.documentMode,ro=null,kf=null,Ul=null,_f=!1;function uv(i,a,l){var c=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;_f||ro==null||ro!==Vr(c)||(c=ro,"selectionStart"in c&&If(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Ul&&Ll(Ul,c)||(Ul=c,c=Cd(kf,"onSelect"),0<c.length&&(a=new Hr("onSelect","select",null,a,l),i.push({event:a,listeners:c}),a.target=ro)))}function sa(i,a){var l={};return l[i.toLowerCase()]=a.toLowerCase(),l["Webkit"+i]="webkit"+a,l["Moz"+i]="moz"+a,l}var io={animationend:sa("Animation","AnimationEnd"),animationiteration:sa("Animation","AnimationIteration"),animationstart:sa("Animation","AnimationStart"),transitionrun:sa("Transition","TransitionRun"),transitionstart:sa("Transition","TransitionStart"),transitioncancel:sa("Transition","TransitionCancel"),transitionend:sa("Transition","TransitionEnd")},Nf={},cv={};Gn&&(cv=document.createElement("div").style,"AnimationEvent"in window||(delete io.animationend.animation,delete io.animationiteration.animation,delete io.animationstart.animation),"TransitionEvent"in window||delete io.transitionend.transition);function aa(i){if(Nf[i])return Nf[i];if(!io[i])return i;var a=io[i],l;for(l in a)if(a.hasOwnProperty(l)&&l in cv)return Nf[i]=a[l];return i}var dv=aa("animationend"),hv=aa("animationiteration"),fv=aa("animationstart"),Hk=aa("transitionrun"),zk=aa("transitionstart"),Gk=aa("transitioncancel"),pv=aa("transitionend"),mv=new Map,Af="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Af.push("scrollEnd");function pr(i,a){mv.set(i,a),Lr(a,[i])}var Uc=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},$n=[],so=0,Of=0;function Vc(){for(var i=so,a=Of=so=0;a<i;){var l=$n[a];$n[a++]=null;var c=$n[a];$n[a++]=null;var y=$n[a];$n[a++]=null;var b=$n[a];if($n[a++]=null,c!==null&&y!==null){var T=c.pending;T===null?y.next=y:(y.next=T.next,T.next=y),c.pending=y}b!==0&&gv(l,y,b)}}function Fc(i,a,l,c){$n[so++]=i,$n[so++]=a,$n[so++]=l,$n[so++]=c,Of|=c,i.lanes|=c,i=i.alternate,i!==null&&(i.lanes|=c)}function Pf(i,a,l,c){return Fc(i,a,l,c),qc(i)}function oa(i,a){return Fc(i,null,null,a),qc(i)}function gv(i,a,l){i.lanes|=l;var c=i.alternate;c!==null&&(c.lanes|=l);for(var y=!1,b=i.return;b!==null;)b.childLanes|=l,c=b.alternate,c!==null&&(c.childLanes|=l),b.tag===22&&(i=b.stateNode,i===null||i._visibility&1||(y=!0)),i=b,b=b.return;return i.tag===3?(b=i.stateNode,y&&a!==null&&(y=31-wt(l),i=b.hiddenUpdates,c=i[y],c===null?i[y]=[a]:c.push(a),a.lane=l|536870912),b):null}function qc(i){if(50<au)throw au=0,qp=null,Error(r(185));for(var a=i.return;a!==null;)i=a,a=i.return;return i.tag===3?i.stateNode:null}var ao={};function Bk(i,a,l,c){this.tag=i,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function On(i,a,l,c){return new Bk(i,a,l,c)}function Rf(i){return i=i.prototype,!(!i||!i.isReactComponent)}function di(i,a){var l=i.alternate;return l===null?(l=On(i.tag,a,i.key,i.mode),l.elementType=i.elementType,l.type=i.type,l.stateNode=i.stateNode,l.alternate=i,i.alternate=l):(l.pendingProps=a,l.type=i.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=i.flags&65011712,l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,a=i.dependencies,l.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},l.sibling=i.sibling,l.index=i.index,l.ref=i.ref,l.refCleanup=i.refCleanup,l}function yv(i,a){i.flags&=65011714;var l=i.alternate;return l===null?(i.childLanes=0,i.lanes=a,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,a=l.dependencies,i.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),i}function Hc(i,a,l,c,y,b){var T=0;if(c=i,typeof i=="function")Rf(i)&&(T=1);else if(typeof i=="string")T=Y_(i,l,ge.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case O:return i=On(31,l,a,y),i.elementType=O,i.lanes=b,i;case j:return la(l.children,y,b,a);case D:T=8,y|=24;break;case q:return i=On(12,l,a,y|2),i.elementType=q,i.lanes=b,i;case ce:return i=On(13,l,a,y),i.elementType=ce,i.lanes=b,i;case ue:return i=On(19,l,a,y),i.elementType=ue,i.lanes=b,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case B:T=10;break e;case X:T=9;break e;case re:T=11;break e;case A:T=14;break e;case N:T=16,c=null;break e}T=29,l=Error(r(130,i===null?"null":typeof i,"")),c=null}return a=On(T,l,a,y),a.elementType=i,a.type=c,a.lanes=b,a}function la(i,a,l,c){return i=On(7,i,c,a),i.lanes=l,i}function Df(i,a,l){return i=On(6,i,null,a),i.lanes=l,i}function vv(i){var a=On(18,null,null,0);return a.stateNode=i,a}function jf(i,a,l){return a=On(4,i.children!==null?i.children:[],i.key,a),a.lanes=l,a.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},a}var bv=new WeakMap;function Wn(i,a){if(typeof i=="object"&&i!==null){var l=bv.get(i);return l!==void 0?l:(a={value:i,source:a,stack:ml(a)},bv.set(i,a),a)}return{value:i,source:a,stack:ml(a)}}var oo=[],lo=0,zc=null,Vl=0,Kn=[],Jn=0,Xi=null,Br=1,$r="";function hi(i,a){oo[lo++]=Vl,oo[lo++]=zc,zc=i,Vl=a}function wv(i,a,l){Kn[Jn++]=Br,Kn[Jn++]=$r,Kn[Jn++]=Xi,Xi=i;var c=Br;i=$r;var y=32-wt(c)-1;c&=~(1<<y),l+=1;var b=32-wt(a)+y;if(30<b){var T=y-y%5;b=(c&(1<<T)-1).toString(32),c>>=T,y-=T,Br=1<<32-wt(a)+y|l<<y|c,$r=b+i}else Br=1<<b|l<<y|c,$r=i}function Mf(i){i.return!==null&&(hi(i,1),wv(i,1,0))}function Lf(i){for(;i===zc;)zc=oo[--lo],oo[lo]=null,Vl=oo[--lo],oo[lo]=null;for(;i===Xi;)Xi=Kn[--Jn],Kn[Jn]=null,$r=Kn[--Jn],Kn[Jn]=null,Br=Kn[--Jn],Kn[Jn]=null}function Ev(i,a){Kn[Jn++]=Br,Kn[Jn++]=$r,Kn[Jn++]=Xi,Br=a.id,$r=a.overflow,Xi=i}var Xt=null,ct=null,Be=!1,Qi=null,Yn=!1,Uf=Error(r(519));function Zi(i){var a=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Fl(Wn(a,i)),Uf}function Sv(i){var a=i.stateNode,l=i.type,c=i.memoizedProps;switch(a[_t]=i,a[Gt]=c,l){case"dialog":Ve("cancel",a),Ve("close",a);break;case"iframe":case"object":case"embed":Ve("load",a);break;case"video":case"audio":for(l=0;l<lu.length;l++)Ve(lu[l],a);break;case"source":Ve("error",a);break;case"img":case"image":case"link":Ve("error",a),Ve("load",a);break;case"details":Ve("toggle",a);break;case"input":Ve("invalid",a),Sc(a,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":Ve("invalid",a);break;case"textarea":Ve("invalid",a),Gi(a,c.value,c.defaultValue,c.children)}l=c.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||a.textContent===""+l||c.suppressHydrationWarning===!0||V0(a.textContent,l)?(c.popover!=null&&(Ve("beforetoggle",a),Ve("toggle",a)),c.onScroll!=null&&Ve("scroll",a),c.onScrollEnd!=null&&Ve("scrollend",a),c.onClick!=null&&(a.onclick=ur),a=!0):a=!1,a||Zi(i,!0)}function xv(i){for(Xt=i.return;Xt;)switch(Xt.tag){case 5:case 31:case 13:Yn=!1;return;case 27:case 3:Yn=!0;return;default:Xt=Xt.return}}function uo(i){if(i!==Xt)return!1;if(!Be)return xv(i),Be=!0,!1;var a=i.tag,l;if((l=a!==3&&a!==27)&&((l=a===5)&&(l=i.type,l=!(l!=="form"&&l!=="button")||nm(i.type,i.memoizedProps)),l=!l),l&&ct&&Zi(i),xv(i),a===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));ct=K0(i)}else if(a===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));ct=K0(i)}else a===27?(a=ct,fs(i.type)?(i=om,om=null,ct=i):ct=a):ct=Xt?Xn(i.stateNode.nextSibling):null;return!0}function ua(){ct=Xt=null,Be=!1}function Vf(){var i=Qi;return i!==null&&(xn===null?xn=i:xn.push.apply(xn,i),Qi=null),i}function Fl(i){Qi===null?Qi=[i]:Qi.push(i)}var Ff=F(null),ca=null,fi=null;function es(i,a,l){he(Ff,a._currentValue),a._currentValue=l}function pi(i){i._currentValue=Ff.current,ie(Ff)}function qf(i,a,l){for(;i!==null;){var c=i.alternate;if((i.childLanes&a)!==a?(i.childLanes|=a,c!==null&&(c.childLanes|=a)):c!==null&&(c.childLanes&a)!==a&&(c.childLanes|=a),i===l)break;i=i.return}}function Hf(i,a,l,c){var y=i.child;for(y!==null&&(y.return=i);y!==null;){var b=y.dependencies;if(b!==null){var T=y.child;b=b.firstContext;e:for(;b!==null;){var k=b;b=y;for(var L=0;L<a.length;L++)if(k.context===a[L]){b.lanes|=l,k=b.alternate,k!==null&&(k.lanes|=l),qf(b.return,l,i),c||(T=null);break e}b=k.next}}else if(y.tag===18){if(T=y.return,T===null)throw Error(r(341));T.lanes|=l,b=T.alternate,b!==null&&(b.lanes|=l),qf(T,l,i),T=null}else T=y.child;if(T!==null)T.return=y;else for(T=y;T!==null;){if(T===i){T=null;break}if(y=T.sibling,y!==null){y.return=T.return,T=y;break}T=T.return}y=T}}function co(i,a,l,c){i=null;for(var y=a,b=!1;y!==null;){if(!b){if((y.flags&524288)!==0)b=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var T=y.alternate;if(T===null)throw Error(r(387));if(T=T.memoizedProps,T!==null){var k=y.type;An(y.pendingProps.value,T.value)||(i!==null?i.push(k):i=[k])}}else if(y===$e.current){if(T=y.alternate,T===null)throw Error(r(387));T.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(i!==null?i.push(fu):i=[fu])}y=y.return}i!==null&&Hf(a,i,l,c),a.flags|=262144}function Gc(i){for(i=i.firstContext;i!==null;){if(!An(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function da(i){ca=i,fi=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function Qt(i){return Tv(ca,i)}function Bc(i,a){return ca===null&&da(i),Tv(i,a)}function Tv(i,a){var l=a._currentValue;if(a={context:a,memoizedValue:l,next:null},fi===null){if(i===null)throw Error(r(308));fi=a,i.dependencies={lanes:0,firstContext:a},i.flags|=524288}else fi=fi.next=a;return l}var $k=typeof AbortController<"u"?AbortController:function(){var i=[],a=this.signal={aborted:!1,addEventListener:function(l,c){i.push(c)}};this.abort=function(){a.aborted=!0,i.forEach(function(l){return l()})}},Wk=t.unstable_scheduleCallback,Kk=t.unstable_NormalPriority,Ot={$$typeof:B,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function zf(){return{controller:new $k,data:new Map,refCount:0}}function ql(i){i.refCount--,i.refCount===0&&Wk(Kk,function(){i.controller.abort()})}var Hl=null,Gf=0,ho=0,fo=null;function Jk(i,a){if(Hl===null){var l=Hl=[];Gf=0,ho=Wp(),fo={status:"pending",value:void 0,then:function(c){l.push(c)}}}return Gf++,a.then(Cv,Cv),a}function Cv(){if(--Gf===0&&Hl!==null){fo!==null&&(fo.status="fulfilled");var i=Hl;Hl=null,ho=0,fo=null;for(var a=0;a<i.length;a++)(0,i[a])()}}function Yk(i,a){var l=[],c={status:"pending",value:null,reason:null,then:function(y){l.push(y)}};return i.then(function(){c.status="fulfilled",c.value=a;for(var y=0;y<l.length;y++)(0,l[y])(a)},function(y){for(c.status="rejected",c.reason=y,y=0;y<l.length;y++)(0,l[y])(void 0)}),c}var Iv=J.S;J.S=function(i,a){u0=hn(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&Jk(i,a),Iv!==null&&Iv(i,a)};var ha=F(null);function Bf(){var i=ha.current;return i!==null?i:lt.pooledCache}function $c(i,a){a===null?he(ha,ha.current):he(ha,a.pool)}function kv(){var i=Bf();return i===null?null:{parent:Ot._currentValue,pool:i}}var po=Error(r(460)),$f=Error(r(474)),Wc=Error(r(542)),Kc={then:function(){}};function _v(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Nv(i,a,l){switch(l=i[l],l===void 0?i.push(a):l!==a&&(a.then(ur,ur),a=l),a.status){case"fulfilled":return a.value;case"rejected":throw i=a.reason,Ov(i),i;default:if(typeof a.status=="string")a.then(ur,ur);else{if(i=lt,i!==null&&100<i.shellSuspendCounter)throw Error(r(482));i=a,i.status="pending",i.then(function(c){if(a.status==="pending"){var y=a;y.status="fulfilled",y.value=c}},function(c){if(a.status==="pending"){var y=a;y.status="rejected",y.reason=c}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw i=a.reason,Ov(i),i}throw pa=a,po}}function fa(i){try{var a=i._init;return a(i._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(pa=l,po):l}}var pa=null;function Av(){if(pa===null)throw Error(r(459));var i=pa;return pa=null,i}function Ov(i){if(i===po||i===Wc)throw Error(r(483))}var mo=null,zl=0;function Jc(i){var a=zl;return zl+=1,mo===null&&(mo=[]),Nv(mo,i,a)}function Gl(i,a){a=a.props.ref,i.ref=a!==void 0?a:null}function Yc(i,a){throw a.$$typeof===S?Error(r(525)):(i=Object.prototype.toString.call(a),Error(r(31,i==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":i)))}function Pv(i){function a(G,V){if(i){var W=G.deletions;W===null?(G.deletions=[V],G.flags|=16):W.push(V)}}function l(G,V){if(!i)return null;for(;V!==null;)a(G,V),V=V.sibling;return null}function c(G){for(var V=new Map;G!==null;)G.key!==null?V.set(G.key,G):V.set(G.index,G),G=G.sibling;return V}function y(G,V){return G=di(G,V),G.index=0,G.sibling=null,G}function b(G,V,W){return G.index=W,i?(W=G.alternate,W!==null?(W=W.index,W<V?(G.flags|=67108866,V):W):(G.flags|=67108866,V)):(G.flags|=1048576,V)}function T(G){return i&&G.alternate===null&&(G.flags|=67108866),G}function k(G,V,W,te){return V===null||V.tag!==6?(V=Df(W,G.mode,te),V.return=G,V):(V=y(V,W),V.return=G,V)}function L(G,V,W,te){var we=W.type;return we===j?ee(G,V,W.props.children,te,W.key):V!==null&&(V.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===N&&fa(we)===V.type)?(V=y(V,W.props),Gl(V,W),V.return=G,V):(V=Hc(W.type,W.key,W.props,null,G.mode,te),Gl(V,W),V.return=G,V)}function K(G,V,W,te){return V===null||V.tag!==4||V.stateNode.containerInfo!==W.containerInfo||V.stateNode.implementation!==W.implementation?(V=jf(W,G.mode,te),V.return=G,V):(V=y(V,W.children||[]),V.return=G,V)}function ee(G,V,W,te,we){return V===null||V.tag!==7?(V=la(W,G.mode,te,we),V.return=G,V):(V=y(V,W),V.return=G,V)}function se(G,V,W){if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return V=Df(""+V,G.mode,W),V.return=G,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case I:return W=Hc(V.type,V.key,V.props,null,G.mode,W),Gl(W,V),W.return=G,W;case P:return V=jf(V,G.mode,W),V.return=G,V;case N:return V=fa(V),se(G,V,W)}if(Oe(V)||H(V))return V=la(V,G.mode,W,null),V.return=G,V;if(typeof V.then=="function")return se(G,Jc(V),W);if(V.$$typeof===B)return se(G,Bc(G,V),W);Yc(G,V)}return null}function Y(G,V,W,te){var we=V!==null?V.key:null;if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return we!==null?null:k(G,V,""+W,te);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case I:return W.key===we?L(G,V,W,te):null;case P:return W.key===we?K(G,V,W,te):null;case N:return W=fa(W),Y(G,V,W,te)}if(Oe(W)||H(W))return we!==null?null:ee(G,V,W,te,null);if(typeof W.then=="function")return Y(G,V,Jc(W),te);if(W.$$typeof===B)return Y(G,V,Bc(G,W),te);Yc(G,W)}return null}function Z(G,V,W,te,we){if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return G=G.get(W)||null,k(V,G,""+te,we);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case I:return G=G.get(te.key===null?W:te.key)||null,L(V,G,te,we);case P:return G=G.get(te.key===null?W:te.key)||null,K(V,G,te,we);case N:return te=fa(te),Z(G,V,W,te,we)}if(Oe(te)||H(te))return G=G.get(W)||null,ee(V,G,te,we,null);if(typeof te.then=="function")return Z(G,V,W,Jc(te),we);if(te.$$typeof===B)return Z(G,V,W,Bc(V,te),we);Yc(V,te)}return null}function ye(G,V,W,te){for(var we=null,Ke=null,ve=V,Me=V=0,qe=null;ve!==null&&Me<W.length;Me++){ve.index>Me?(qe=ve,ve=null):qe=ve.sibling;var Je=Y(G,ve,W[Me],te);if(Je===null){ve===null&&(ve=qe);break}i&&ve&&Je.alternate===null&&a(G,ve),V=b(Je,V,Me),Ke===null?we=Je:Ke.sibling=Je,Ke=Je,ve=qe}if(Me===W.length)return l(G,ve),Be&&hi(G,Me),we;if(ve===null){for(;Me<W.length;Me++)ve=se(G,W[Me],te),ve!==null&&(V=b(ve,V,Me),Ke===null?we=ve:Ke.sibling=ve,Ke=ve);return Be&&hi(G,Me),we}for(ve=c(ve);Me<W.length;Me++)qe=Z(ve,G,Me,W[Me],te),qe!==null&&(i&&qe.alternate!==null&&ve.delete(qe.key===null?Me:qe.key),V=b(qe,V,Me),Ke===null?we=qe:Ke.sibling=qe,Ke=qe);return i&&ve.forEach(function(vs){return a(G,vs)}),Be&&hi(G,Me),we}function Se(G,V,W,te){if(W==null)throw Error(r(151));for(var we=null,Ke=null,ve=V,Me=V=0,qe=null,Je=W.next();ve!==null&&!Je.done;Me++,Je=W.next()){ve.index>Me?(qe=ve,ve=null):qe=ve.sibling;var vs=Y(G,ve,Je.value,te);if(vs===null){ve===null&&(ve=qe);break}i&&ve&&vs.alternate===null&&a(G,ve),V=b(vs,V,Me),Ke===null?we=vs:Ke.sibling=vs,Ke=vs,ve=qe}if(Je.done)return l(G,ve),Be&&hi(G,Me),we;if(ve===null){for(;!Je.done;Me++,Je=W.next())Je=se(G,Je.value,te),Je!==null&&(V=b(Je,V,Me),Ke===null?we=Je:Ke.sibling=Je,Ke=Je);return Be&&hi(G,Me),we}for(ve=c(ve);!Je.done;Me++,Je=W.next())Je=Z(ve,G,Me,Je.value,te),Je!==null&&(i&&Je.alternate!==null&&ve.delete(Je.key===null?Me:Je.key),V=b(Je,V,Me),Ke===null?we=Je:Ke.sibling=Je,Ke=Je);return i&&ve.forEach(function(oN){return a(G,oN)}),Be&&hi(G,Me),we}function ot(G,V,W,te){if(typeof W=="object"&&W!==null&&W.type===j&&W.key===null&&(W=W.props.children),typeof W=="object"&&W!==null){switch(W.$$typeof){case I:e:{for(var we=W.key;V!==null;){if(V.key===we){if(we=W.type,we===j){if(V.tag===7){l(G,V.sibling),te=y(V,W.props.children),te.return=G,G=te;break e}}else if(V.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===N&&fa(we)===V.type){l(G,V.sibling),te=y(V,W.props),Gl(te,W),te.return=G,G=te;break e}l(G,V);break}else a(G,V);V=V.sibling}W.type===j?(te=la(W.props.children,G.mode,te,W.key),te.return=G,G=te):(te=Hc(W.type,W.key,W.props,null,G.mode,te),Gl(te,W),te.return=G,G=te)}return T(G);case P:e:{for(we=W.key;V!==null;){if(V.key===we)if(V.tag===4&&V.stateNode.containerInfo===W.containerInfo&&V.stateNode.implementation===W.implementation){l(G,V.sibling),te=y(V,W.children||[]),te.return=G,G=te;break e}else{l(G,V);break}else a(G,V);V=V.sibling}te=jf(W,G.mode,te),te.return=G,G=te}return T(G);case N:return W=fa(W),ot(G,V,W,te)}if(Oe(W))return ye(G,V,W,te);if(H(W)){if(we=H(W),typeof we!="function")throw Error(r(150));return W=we.call(W),Se(G,V,W,te)}if(typeof W.then=="function")return ot(G,V,Jc(W),te);if(W.$$typeof===B)return ot(G,V,Bc(G,W),te);Yc(G,W)}return typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint"?(W=""+W,V!==null&&V.tag===6?(l(G,V.sibling),te=y(V,W),te.return=G,G=te):(l(G,V),te=Df(W,G.mode,te),te.return=G,G=te),T(G)):l(G,V)}return function(G,V,W,te){try{zl=0;var we=ot(G,V,W,te);return mo=null,we}catch(ve){if(ve===po||ve===Wc)throw ve;var Ke=On(29,ve,null,G.mode);return Ke.lanes=te,Ke.return=G,Ke}finally{}}}var ma=Pv(!0),Rv=Pv(!1),ts=!1;function Wf(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Kf(i,a){i=i.updateQueue,a.updateQueue===i&&(a.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function ns(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function rs(i,a,l){var c=i.updateQueue;if(c===null)return null;if(c=c.shared,(Xe&2)!==0){var y=c.pending;return y===null?a.next=a:(a.next=y.next,y.next=a),c.pending=a,a=qc(i),gv(i,null,l),a}return Fc(i,c,a,l),qc(i)}function Bl(i,a,l){if(a=a.updateQueue,a!==null&&(a=a.shared,(l&4194048)!==0)){var c=a.lanes;c&=i.pendingLanes,l|=c,a.lanes=l,vl(i,l)}}function Jf(i,a){var l=i.updateQueue,c=i.alternate;if(c!==null&&(c=c.updateQueue,l===c)){var y=null,b=null;if(l=l.firstBaseUpdate,l!==null){do{var T={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};b===null?y=b=T:b=b.next=T,l=l.next}while(l!==null);b===null?y=b=a:b=b.next=a}else y=b=a;l={baseState:c.baseState,firstBaseUpdate:y,lastBaseUpdate:b,shared:c.shared,callbacks:c.callbacks},i.updateQueue=l;return}i=l.lastBaseUpdate,i===null?l.firstBaseUpdate=a:i.next=a,l.lastBaseUpdate=a}var Yf=!1;function $l(){if(Yf){var i=fo;if(i!==null)throw i}}function Wl(i,a,l,c){Yf=!1;var y=i.updateQueue;ts=!1;var b=y.firstBaseUpdate,T=y.lastBaseUpdate,k=y.shared.pending;if(k!==null){y.shared.pending=null;var L=k,K=L.next;L.next=null,T===null?b=K:T.next=K,T=L;var ee=i.alternate;ee!==null&&(ee=ee.updateQueue,k=ee.lastBaseUpdate,k!==T&&(k===null?ee.firstBaseUpdate=K:k.next=K,ee.lastBaseUpdate=L))}if(b!==null){var se=y.baseState;T=0,ee=K=L=null,k=b;do{var Y=k.lane&-536870913,Z=Y!==k.lane;if(Z?(Fe&Y)===Y:(c&Y)===Y){Y!==0&&Y===ho&&(Yf=!0),ee!==null&&(ee=ee.next={lane:0,tag:k.tag,payload:k.payload,callback:null,next:null});e:{var ye=i,Se=k;Y=a;var ot=l;switch(Se.tag){case 1:if(ye=Se.payload,typeof ye=="function"){se=ye.call(ot,se,Y);break e}se=ye;break e;case 3:ye.flags=ye.flags&-65537|128;case 0:if(ye=Se.payload,Y=typeof ye=="function"?ye.call(ot,se,Y):ye,Y==null)break e;se=w({},se,Y);break e;case 2:ts=!0}}Y=k.callback,Y!==null&&(i.flags|=64,Z&&(i.flags|=8192),Z=y.callbacks,Z===null?y.callbacks=[Y]:Z.push(Y))}else Z={lane:Y,tag:k.tag,payload:k.payload,callback:k.callback,next:null},ee===null?(K=ee=Z,L=se):ee=ee.next=Z,T|=Y;if(k=k.next,k===null){if(k=y.shared.pending,k===null)break;Z=k,k=Z.next,Z.next=null,y.lastBaseUpdate=Z,y.shared.pending=null}}while(!0);ee===null&&(L=se),y.baseState=L,y.firstBaseUpdate=K,y.lastBaseUpdate=ee,b===null&&(y.shared.lanes=0),ls|=T,i.lanes=T,i.memoizedState=se}}function Dv(i,a){if(typeof i!="function")throw Error(r(191,i));i.call(a)}function jv(i,a){var l=i.callbacks;if(l!==null)for(i.callbacks=null,i=0;i<l.length;i++)Dv(l[i],a)}var go=F(null),Xc=F(0);function Mv(i,a){i=xi,he(Xc,i),he(go,a),xi=i|a.baseLanes}function Xf(){he(Xc,xi),he(go,go.current)}function Qf(){xi=Xc.current,ie(go),ie(Xc)}var Pn=F(null),mr=null;function is(i){var a=i.alternate;he(St,St.current&1),he(Pn,i),mr===null&&(a===null||go.current!==null||a.memoizedState!==null)&&(mr=i)}function Zf(i){he(St,St.current),he(Pn,i),mr===null&&(mr=i)}function Lv(i){i.tag===22?(he(St,St.current),he(Pn,i),mr===null&&(mr=i)):ss()}function ss(){he(St,St.current),he(Pn,Pn.current)}function Rn(i){ie(Pn),mr===i&&(mr=null),ie(St)}var St=F(0);function Qc(i){for(var a=i;a!==null;){if(a.tag===13){var l=a.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||sm(l)||am(l)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var mi=0,Pe=null,st=null,Pt=null,Zc=!1,yo=!1,ga=!1,ed=0,Kl=0,vo=null,Xk=0;function vt(){throw Error(r(321))}function ep(i,a){if(a===null)return!1;for(var l=0;l<a.length&&l<i.length;l++)if(!An(i[l],a[l]))return!1;return!0}function tp(i,a,l,c,y,b){return mi=b,Pe=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,J.H=i===null||i.memoizedState===null?wb:gp,ga=!1,b=l(c,y),ga=!1,yo&&(b=Vv(a,l,c,y)),Uv(i),b}function Uv(i){J.H=Xl;var a=st!==null&&st.next!==null;if(mi=0,Pt=st=Pe=null,Zc=!1,Kl=0,vo=null,a)throw Error(r(300));i===null||Rt||(i=i.dependencies,i!==null&&Gc(i)&&(Rt=!0))}function Vv(i,a,l,c){Pe=i;var y=0;do{if(yo&&(vo=null),Kl=0,yo=!1,25<=y)throw Error(r(301));if(y+=1,Pt=st=null,i.updateQueue!=null){var b=i.updateQueue;b.lastEffect=null,b.events=null,b.stores=null,b.memoCache!=null&&(b.memoCache.index=0)}J.H=Eb,b=a(l,c)}while(yo);return b}function Qk(){var i=J.H,a=i.useState()[0];return a=typeof a.then=="function"?Jl(a):a,i=i.useState()[0],(st!==null?st.memoizedState:null)!==i&&(Pe.flags|=1024),a}function np(){var i=ed!==0;return ed=0,i}function rp(i,a,l){a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~l}function ip(i){if(Zc){for(i=i.memoizedState;i!==null;){var a=i.queue;a!==null&&(a.pending=null),i=i.next}Zc=!1}mi=0,Pt=st=Pe=null,yo=!1,Kl=ed=0,vo=null}function pn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pt===null?Pe.memoizedState=Pt=i:Pt=Pt.next=i,Pt}function xt(){if(st===null){var i=Pe.alternate;i=i!==null?i.memoizedState:null}else i=st.next;var a=Pt===null?Pe.memoizedState:Pt.next;if(a!==null)Pt=a,st=i;else{if(i===null)throw Pe.alternate===null?Error(r(467)):Error(r(310));st=i,i={memoizedState:st.memoizedState,baseState:st.baseState,baseQueue:st.baseQueue,queue:st.queue,next:null},Pt===null?Pe.memoizedState=Pt=i:Pt=Pt.next=i}return Pt}function td(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Jl(i){var a=Kl;return Kl+=1,vo===null&&(vo=[]),i=Nv(vo,i,a),a=Pe,(Pt===null?a.memoizedState:Pt.next)===null&&(a=a.alternate,J.H=a===null||a.memoizedState===null?wb:gp),i}function nd(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Jl(i);if(i.$$typeof===B)return Qt(i)}throw Error(r(438,String(i)))}function sp(i){var a=null,l=Pe.updateQueue;if(l!==null&&(a=l.memoCache),a==null){var c=Pe.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(a={data:c.data.map(function(y){return y.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),l===null&&(l=td(),Pe.updateQueue=l),l.memoCache=a,l=a.data[a.index],l===void 0)for(l=a.data[a.index]=Array(i),c=0;c<i;c++)l[c]=U;return a.index++,l}function gi(i,a){return typeof a=="function"?a(i):a}function rd(i){var a=xt();return ap(a,st,i)}function ap(i,a,l){var c=i.queue;if(c===null)throw Error(r(311));c.lastRenderedReducer=l;var y=i.baseQueue,b=c.pending;if(b!==null){if(y!==null){var T=y.next;y.next=b.next,b.next=T}a.baseQueue=y=b,c.pending=null}if(b=i.baseState,y===null)i.memoizedState=b;else{a=y.next;var k=T=null,L=null,K=a,ee=!1;do{var se=K.lane&-536870913;if(se!==K.lane?(Fe&se)===se:(mi&se)===se){var Y=K.revertLane;if(Y===0)L!==null&&(L=L.next={lane:0,revertLane:0,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null}),se===ho&&(ee=!0);else if((mi&Y)===Y){K=K.next,Y===ho&&(ee=!0);continue}else se={lane:0,revertLane:K.revertLane,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},L===null?(k=L=se,T=b):L=L.next=se,Pe.lanes|=Y,ls|=Y;se=K.action,ga&&l(b,se),b=K.hasEagerState?K.eagerState:l(b,se)}else Y={lane:se,revertLane:K.revertLane,gesture:K.gesture,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},L===null?(k=L=Y,T=b):L=L.next=Y,Pe.lanes|=se,ls|=se;K=K.next}while(K!==null&&K!==a);if(L===null?T=b:L.next=k,!An(b,i.memoizedState)&&(Rt=!0,ee&&(l=fo,l!==null)))throw l;i.memoizedState=b,i.baseState=T,i.baseQueue=L,c.lastRenderedState=b}return y===null&&(c.lanes=0),[i.memoizedState,c.dispatch]}function op(i){var a=xt(),l=a.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=i;var c=l.dispatch,y=l.pending,b=a.memoizedState;if(y!==null){l.pending=null;var T=y=y.next;do b=i(b,T.action),T=T.next;while(T!==y);An(b,a.memoizedState)||(Rt=!0),a.memoizedState=b,a.baseQueue===null&&(a.baseState=b),l.lastRenderedState=b}return[b,c]}function Fv(i,a,l){var c=Pe,y=xt(),b=Be;if(b){if(l===void 0)throw Error(r(407));l=l()}else l=a();var T=!An((st||y).memoizedState,l);if(T&&(y.memoizedState=l,Rt=!0),y=y.queue,cp(zv.bind(null,c,y,i),[i]),y.getSnapshot!==a||T||Pt!==null&&Pt.memoizedState.tag&1){if(c.flags|=2048,bo(9,{destroy:void 0},Hv.bind(null,c,y,l,a),null),lt===null)throw Error(r(349));b||(mi&127)!==0||qv(c,a,l)}return l}function qv(i,a,l){i.flags|=16384,i={getSnapshot:a,value:l},a=Pe.updateQueue,a===null?(a=td(),Pe.updateQueue=a,a.stores=[i]):(l=a.stores,l===null?a.stores=[i]:l.push(i))}function Hv(i,a,l,c){a.value=l,a.getSnapshot=c,Gv(a)&&Bv(i)}function zv(i,a,l){return l(function(){Gv(a)&&Bv(i)})}function Gv(i){var a=i.getSnapshot;i=i.value;try{var l=a();return!An(i,l)}catch{return!0}}function Bv(i){var a=oa(i,2);a!==null&&Tn(a,i,2)}function lp(i){var a=pn();if(typeof i=="function"){var l=i;if(i=l(),ga){qn(!0);try{l()}finally{qn(!1)}}}return a.memoizedState=a.baseState=i,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:gi,lastRenderedState:i},a}function $v(i,a,l,c){return i.baseState=l,ap(i,st,typeof c=="function"?c:gi)}function Zk(i,a,l,c,y){if(ad(i))throw Error(r(485));if(i=a.action,i!==null){var b={payload:y,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){b.listeners.push(T)}};J.T!==null?l(!0):b.isTransition=!1,c(b),l=a.pending,l===null?(b.next=a.pending=b,Wv(a,b)):(b.next=l.next,a.pending=l.next=b)}}function Wv(i,a){var l=a.action,c=a.payload,y=i.state;if(a.isTransition){var b=J.T,T={};J.T=T;try{var k=l(y,c),L=J.S;L!==null&&L(T,k),Kv(i,a,k)}catch(K){up(i,a,K)}finally{b!==null&&T.types!==null&&(b.types=T.types),J.T=b}}else try{b=l(y,c),Kv(i,a,b)}catch(K){up(i,a,K)}}function Kv(i,a,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(c){Jv(i,a,c)},function(c){return up(i,a,c)}):Jv(i,a,l)}function Jv(i,a,l){a.status="fulfilled",a.value=l,Yv(a),i.state=l,a=i.pending,a!==null&&(l=a.next,l===a?i.pending=null:(l=l.next,a.next=l,Wv(i,l)))}function up(i,a,l){var c=i.pending;if(i.pending=null,c!==null){c=c.next;do a.status="rejected",a.reason=l,Yv(a),a=a.next;while(a!==c)}i.action=null}function Yv(i){i=i.listeners;for(var a=0;a<i.length;a++)(0,i[a])()}function Xv(i,a){return a}function Qv(i,a){if(Be){var l=lt.formState;if(l!==null){e:{var c=Pe;if(Be){if(ct){t:{for(var y=ct,b=Yn;y.nodeType!==8;){if(!b){y=null;break t}if(y=Xn(y.nextSibling),y===null){y=null;break t}}b=y.data,y=b==="F!"||b==="F"?y:null}if(y){ct=Xn(y.nextSibling),c=y.data==="F!";break e}}Zi(c)}c=!1}c&&(a=l[0])}}return l=pn(),l.memoizedState=l.baseState=a,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xv,lastRenderedState:a},l.queue=c,l=yb.bind(null,Pe,c),c.dispatch=l,c=lp(!1),b=mp.bind(null,Pe,!1,c.queue),c=pn(),y={state:a,dispatch:null,action:i,pending:null},c.queue=y,l=Zk.bind(null,Pe,y,b,l),y.dispatch=l,c.memoizedState=i,[a,l,!1]}function Zv(i){var a=xt();return eb(a,st,i)}function eb(i,a,l){if(a=ap(i,a,Xv)[0],i=rd(gi)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var c=Jl(a)}catch(T){throw T===po?Wc:T}else c=a;a=xt();var y=a.queue,b=y.dispatch;return l!==a.memoizedState&&(Pe.flags|=2048,bo(9,{destroy:void 0},e_.bind(null,y,l),null)),[c,b,i]}function e_(i,a){i.action=a}function tb(i){var a=xt(),l=st;if(l!==null)return eb(a,l,i);xt(),a=a.memoizedState,l=xt();var c=l.queue.dispatch;return l.memoizedState=i,[a,c,!1]}function bo(i,a,l,c){return i={tag:i,create:l,deps:c,inst:a,next:null},a=Pe.updateQueue,a===null&&(a=td(),Pe.updateQueue=a),l=a.lastEffect,l===null?a.lastEffect=i.next=i:(c=l.next,l.next=i,i.next=c,a.lastEffect=i),i}function nb(){return xt().memoizedState}function id(i,a,l,c){var y=pn();Pe.flags|=i,y.memoizedState=bo(1|a,{destroy:void 0},l,c===void 0?null:c)}function sd(i,a,l,c){var y=xt();c=c===void 0?null:c;var b=y.memoizedState.inst;st!==null&&c!==null&&ep(c,st.memoizedState.deps)?y.memoizedState=bo(a,b,l,c):(Pe.flags|=i,y.memoizedState=bo(1|a,b,l,c))}function rb(i,a){id(8390656,8,i,a)}function cp(i,a){sd(2048,8,i,a)}function t_(i){Pe.flags|=4;var a=Pe.updateQueue;if(a===null)a=td(),Pe.updateQueue=a,a.events=[i];else{var l=a.events;l===null?a.events=[i]:l.push(i)}}function ib(i){var a=xt().memoizedState;return t_({ref:a,nextImpl:i}),function(){if((Xe&2)!==0)throw Error(r(440));return a.impl.apply(void 0,arguments)}}function sb(i,a){return sd(4,2,i,a)}function ab(i,a){return sd(4,4,i,a)}function ob(i,a){if(typeof a=="function"){i=i();var l=a(i);return function(){typeof l=="function"?l():a(null)}}if(a!=null)return i=i(),a.current=i,function(){a.current=null}}function lb(i,a,l){l=l!=null?l.concat([i]):null,sd(4,4,ob.bind(null,a,i),l)}function dp(){}function ub(i,a){var l=xt();a=a===void 0?null:a;var c=l.memoizedState;return a!==null&&ep(a,c[1])?c[0]:(l.memoizedState=[i,a],i)}function cb(i,a){var l=xt();a=a===void 0?null:a;var c=l.memoizedState;if(a!==null&&ep(a,c[1]))return c[0];if(c=i(),ga){qn(!0);try{i()}finally{qn(!1)}}return l.memoizedState=[c,a],c}function hp(i,a,l){return l===void 0||(mi&1073741824)!==0&&(Fe&261930)===0?i.memoizedState=a:(i.memoizedState=l,i=d0(),Pe.lanes|=i,ls|=i,l)}function db(i,a,l,c){return An(l,a)?l:go.current!==null?(i=hp(i,l,c),An(i,a)||(Rt=!0),i):(mi&42)===0||(mi&1073741824)!==0&&(Fe&261930)===0?(Rt=!0,i.memoizedState=l):(i=d0(),Pe.lanes|=i,ls|=i,a)}function hb(i,a,l,c,y){var b=le.p;le.p=b!==0&&8>b?b:8;var T=J.T,k={};J.T=k,mp(i,!1,a,l);try{var L=y(),K=J.S;if(K!==null&&K(k,L),L!==null&&typeof L=="object"&&typeof L.then=="function"){var ee=Yk(L,c);Yl(i,a,ee,Mn(i))}else Yl(i,a,c,Mn(i))}catch(se){Yl(i,a,{then:function(){},status:"rejected",reason:se},Mn())}finally{le.p=b,T!==null&&k.types!==null&&(T.types=k.types),J.T=T}}function n_(){}function fp(i,a,l,c){if(i.tag!==5)throw Error(r(476));var y=fb(i).queue;hb(i,y,a,be,l===null?n_:function(){return pb(i),l(c)})}function fb(i){var a=i.memoizedState;if(a!==null)return a;a={memoizedState:be,baseState:be,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:gi,lastRenderedState:be},next:null};var l={};return a.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:gi,lastRenderedState:l},next:null},i.memoizedState=a,i=i.alternate,i!==null&&(i.memoizedState=a),a}function pb(i){var a=fb(i);a.next===null&&(a=i.alternate.memoizedState),Yl(i,a.next.queue,{},Mn())}function pp(){return Qt(fu)}function mb(){return xt().memoizedState}function gb(){return xt().memoizedState}function r_(i){for(var a=i.return;a!==null;){switch(a.tag){case 24:case 3:var l=Mn();i=ns(l);var c=rs(a,i,l);c!==null&&(Tn(c,a,l),Bl(c,a,l)),a={cache:zf()},i.payload=a;return}a=a.return}}function i_(i,a,l){var c=Mn();l={lane:c,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},ad(i)?vb(a,l):(l=Pf(i,a,l,c),l!==null&&(Tn(l,i,c),bb(l,a,c)))}function yb(i,a,l){var c=Mn();Yl(i,a,l,c)}function Yl(i,a,l,c){var y={lane:c,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(ad(i))vb(a,y);else{var b=i.alternate;if(i.lanes===0&&(b===null||b.lanes===0)&&(b=a.lastRenderedReducer,b!==null))try{var T=a.lastRenderedState,k=b(T,l);if(y.hasEagerState=!0,y.eagerState=k,An(k,T))return Fc(i,a,y,0),lt===null&&Vc(),!1}catch{}finally{}if(l=Pf(i,a,y,c),l!==null)return Tn(l,i,c),bb(l,a,c),!0}return!1}function mp(i,a,l,c){if(c={lane:2,revertLane:Wp(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},ad(i)){if(a)throw Error(r(479))}else a=Pf(i,l,c,2),a!==null&&Tn(a,i,2)}function ad(i){var a=i.alternate;return i===Pe||a!==null&&a===Pe}function vb(i,a){yo=Zc=!0;var l=i.pending;l===null?a.next=a:(a.next=l.next,l.next=a),i.pending=a}function bb(i,a,l){if((l&4194048)!==0){var c=a.lanes;c&=i.pendingLanes,l|=c,a.lanes=l,vl(i,l)}}var Xl={readContext:Qt,use:nd,useCallback:vt,useContext:vt,useEffect:vt,useImperativeHandle:vt,useLayoutEffect:vt,useInsertionEffect:vt,useMemo:vt,useReducer:vt,useRef:vt,useState:vt,useDebugValue:vt,useDeferredValue:vt,useTransition:vt,useSyncExternalStore:vt,useId:vt,useHostTransitionStatus:vt,useFormState:vt,useActionState:vt,useOptimistic:vt,useMemoCache:vt,useCacheRefresh:vt};Xl.useEffectEvent=vt;var wb={readContext:Qt,use:nd,useCallback:function(i,a){return pn().memoizedState=[i,a===void 0?null:a],i},useContext:Qt,useEffect:rb,useImperativeHandle:function(i,a,l){l=l!=null?l.concat([i]):null,id(4194308,4,ob.bind(null,a,i),l)},useLayoutEffect:function(i,a){return id(4194308,4,i,a)},useInsertionEffect:function(i,a){id(4,2,i,a)},useMemo:function(i,a){var l=pn();a=a===void 0?null:a;var c=i();if(ga){qn(!0);try{i()}finally{qn(!1)}}return l.memoizedState=[c,a],c},useReducer:function(i,a,l){var c=pn();if(l!==void 0){var y=l(a);if(ga){qn(!0);try{l(a)}finally{qn(!1)}}}else y=a;return c.memoizedState=c.baseState=y,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:y},c.queue=i,i=i.dispatch=i_.bind(null,Pe,i),[c.memoizedState,i]},useRef:function(i){var a=pn();return i={current:i},a.memoizedState=i},useState:function(i){i=lp(i);var a=i.queue,l=yb.bind(null,Pe,a);return a.dispatch=l,[i.memoizedState,l]},useDebugValue:dp,useDeferredValue:function(i,a){var l=pn();return hp(l,i,a)},useTransition:function(){var i=lp(!1);return i=hb.bind(null,Pe,i.queue,!0,!1),pn().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,a,l){var c=Pe,y=pn();if(Be){if(l===void 0)throw Error(r(407));l=l()}else{if(l=a(),lt===null)throw Error(r(349));(Fe&127)!==0||qv(c,a,l)}y.memoizedState=l;var b={value:l,getSnapshot:a};return y.queue=b,rb(zv.bind(null,c,b,i),[i]),c.flags|=2048,bo(9,{destroy:void 0},Hv.bind(null,c,b,l,a),null),l},useId:function(){var i=pn(),a=lt.identifierPrefix;if(Be){var l=$r,c=Br;l=(c&~(1<<32-wt(c)-1)).toString(32)+l,a="_"+a+"R_"+l,l=ed++,0<l&&(a+="H"+l.toString(32)),a+="_"}else l=Xk++,a="_"+a+"r_"+l.toString(32)+"_";return i.memoizedState=a},useHostTransitionStatus:pp,useFormState:Qv,useActionState:Qv,useOptimistic:function(i){var a=pn();a.memoizedState=a.baseState=i;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=l,a=mp.bind(null,Pe,!0,l),l.dispatch=a,[i,a]},useMemoCache:sp,useCacheRefresh:function(){return pn().memoizedState=r_.bind(null,Pe)},useEffectEvent:function(i){var a=pn(),l={impl:i};return a.memoizedState=l,function(){if((Xe&2)!==0)throw Error(r(440));return l.impl.apply(void 0,arguments)}}},gp={readContext:Qt,use:nd,useCallback:ub,useContext:Qt,useEffect:cp,useImperativeHandle:lb,useInsertionEffect:sb,useLayoutEffect:ab,useMemo:cb,useReducer:rd,useRef:nb,useState:function(){return rd(gi)},useDebugValue:dp,useDeferredValue:function(i,a){var l=xt();return db(l,st.memoizedState,i,a)},useTransition:function(){var i=rd(gi)[0],a=xt().memoizedState;return[typeof i=="boolean"?i:Jl(i),a]},useSyncExternalStore:Fv,useId:mb,useHostTransitionStatus:pp,useFormState:Zv,useActionState:Zv,useOptimistic:function(i,a){var l=xt();return $v(l,st,i,a)},useMemoCache:sp,useCacheRefresh:gb};gp.useEffectEvent=ib;var Eb={readContext:Qt,use:nd,useCallback:ub,useContext:Qt,useEffect:cp,useImperativeHandle:lb,useInsertionEffect:sb,useLayoutEffect:ab,useMemo:cb,useReducer:op,useRef:nb,useState:function(){return op(gi)},useDebugValue:dp,useDeferredValue:function(i,a){var l=xt();return st===null?hp(l,i,a):db(l,st.memoizedState,i,a)},useTransition:function(){var i=op(gi)[0],a=xt().memoizedState;return[typeof i=="boolean"?i:Jl(i),a]},useSyncExternalStore:Fv,useId:mb,useHostTransitionStatus:pp,useFormState:tb,useActionState:tb,useOptimistic:function(i,a){var l=xt();return st!==null?$v(l,st,i,a):(l.baseState=i,[i,l.queue.dispatch])},useMemoCache:sp,useCacheRefresh:gb};Eb.useEffectEvent=ib;function yp(i,a,l,c){a=i.memoizedState,l=l(c,a),l=l==null?a:w({},a,l),i.memoizedState=l,i.lanes===0&&(i.updateQueue.baseState=l)}var vp={enqueueSetState:function(i,a,l){i=i._reactInternals;var c=Mn(),y=ns(c);y.payload=a,l!=null&&(y.callback=l),a=rs(i,y,c),a!==null&&(Tn(a,i,c),Bl(a,i,c))},enqueueReplaceState:function(i,a,l){i=i._reactInternals;var c=Mn(),y=ns(c);y.tag=1,y.payload=a,l!=null&&(y.callback=l),a=rs(i,y,c),a!==null&&(Tn(a,i,c),Bl(a,i,c))},enqueueForceUpdate:function(i,a){i=i._reactInternals;var l=Mn(),c=ns(l);c.tag=2,a!=null&&(c.callback=a),a=rs(i,c,l),a!==null&&(Tn(a,i,l),Bl(a,i,l))}};function Sb(i,a,l,c,y,b,T){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(c,b,T):a.prototype&&a.prototype.isPureReactComponent?!Ll(l,c)||!Ll(y,b):!0}function xb(i,a,l,c){i=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(l,c),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(l,c),a.state!==i&&vp.enqueueReplaceState(a,a.state,null)}function ya(i,a){var l=a;if("ref"in a){l={};for(var c in a)c!=="ref"&&(l[c]=a[c])}if(i=i.defaultProps){l===a&&(l=w({},l));for(var y in i)l[y]===void 0&&(l[y]=i[y])}return l}function Tb(i){Uc(i)}function Cb(i){console.error(i)}function Ib(i){Uc(i)}function od(i,a){try{var l=i.onUncaughtError;l(a.value,{componentStack:a.stack})}catch(c){setTimeout(function(){throw c})}}function kb(i,a,l){try{var c=i.onCaughtError;c(l.value,{componentStack:l.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function bp(i,a,l){return l=ns(l),l.tag=3,l.payload={element:null},l.callback=function(){od(i,a)},l}function _b(i){return i=ns(i),i.tag=3,i}function Nb(i,a,l,c){var y=l.type.getDerivedStateFromError;if(typeof y=="function"){var b=c.value;i.payload=function(){return y(b)},i.callback=function(){kb(a,l,c)}}var T=l.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(i.callback=function(){kb(a,l,c),typeof y!="function"&&(us===null?us=new Set([this]):us.add(this));var k=c.stack;this.componentDidCatch(c.value,{componentStack:k!==null?k:""})})}function s_(i,a,l,c,y){if(l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(a=l.alternate,a!==null&&co(a,l,y,!0),l=Pn.current,l!==null){switch(l.tag){case 31:case 13:return mr===null?bd():l.alternate===null&&bt===0&&(bt=3),l.flags&=-257,l.flags|=65536,l.lanes=y,c===Kc?l.flags|=16384:(a=l.updateQueue,a===null?l.updateQueue=new Set([c]):a.add(c),Gp(i,c,y)),!1;case 22:return l.flags|=65536,c===Kc?l.flags|=16384:(a=l.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([c])},l.updateQueue=a):(l=a.retryQueue,l===null?a.retryQueue=new Set([c]):l.add(c)),Gp(i,c,y)),!1}throw Error(r(435,l.tag))}return Gp(i,c,y),bd(),!1}if(Be)return a=Pn.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=y,c!==Uf&&(i=Error(r(422),{cause:c}),Fl(Wn(i,l)))):(c!==Uf&&(a=Error(r(423),{cause:c}),Fl(Wn(a,l))),i=i.current.alternate,i.flags|=65536,y&=-y,i.lanes|=y,c=Wn(c,l),y=bp(i.stateNode,c,y),Jf(i,y),bt!==4&&(bt=2)),!1;var b=Error(r(520),{cause:c});if(b=Wn(b,l),su===null?su=[b]:su.push(b),bt!==4&&(bt=2),a===null)return!0;c=Wn(c,l),l=a;do{switch(l.tag){case 3:return l.flags|=65536,i=y&-y,l.lanes|=i,i=bp(l.stateNode,c,i),Jf(l,i),!1;case 1:if(a=l.type,b=l.stateNode,(l.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(us===null||!us.has(b))))return l.flags|=65536,y&=-y,l.lanes|=y,y=_b(y),Nb(y,i,l,c),Jf(l,y),!1}l=l.return}while(l!==null);return!1}var wp=Error(r(461)),Rt=!1;function Zt(i,a,l,c){a.child=i===null?Rv(a,null,l,c):ma(a,i.child,l,c)}function Ab(i,a,l,c,y){l=l.render;var b=a.ref;if("ref"in c){var T={};for(var k in c)k!=="ref"&&(T[k]=c[k])}else T=c;return da(a),c=tp(i,a,l,T,b,y),k=np(),i!==null&&!Rt?(rp(i,a,y),yi(i,a,y)):(Be&&k&&Mf(a),a.flags|=1,Zt(i,a,c,y),a.child)}function Ob(i,a,l,c,y){if(i===null){var b=l.type;return typeof b=="function"&&!Rf(b)&&b.defaultProps===void 0&&l.compare===null?(a.tag=15,a.type=b,Pb(i,a,b,c,y)):(i=Hc(l.type,null,c,a,a.mode,y),i.ref=a.ref,i.return=a,a.child=i)}if(b=i.child,!_p(i,y)){var T=b.memoizedProps;if(l=l.compare,l=l!==null?l:Ll,l(T,c)&&i.ref===a.ref)return yi(i,a,y)}return a.flags|=1,i=di(b,c),i.ref=a.ref,i.return=a,a.child=i}function Pb(i,a,l,c,y){if(i!==null){var b=i.memoizedProps;if(Ll(b,c)&&i.ref===a.ref)if(Rt=!1,a.pendingProps=c=b,_p(i,y))(i.flags&131072)!==0&&(Rt=!0);else return a.lanes=i.lanes,yi(i,a,y)}return Ep(i,a,l,c,y)}function Rb(i,a,l,c){var y=c.children,b=i!==null?i.memoizedState:null;if(i===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((a.flags&128)!==0){if(b=b!==null?b.baseLanes|l:l,i!==null){for(c=a.child=i.child,y=0;c!==null;)y=y|c.lanes|c.childLanes,c=c.sibling;c=y&~b}else c=0,a.child=null;return Db(i,a,b,l,c)}if((l&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},i!==null&&$c(a,b!==null?b.cachePool:null),b!==null?Mv(a,b):Xf(),Lv(a);else return c=a.lanes=536870912,Db(i,a,b!==null?b.baseLanes|l:l,l,c)}else b!==null?($c(a,b.cachePool),Mv(a,b),ss(),a.memoizedState=null):(i!==null&&$c(a,null),Xf(),ss());return Zt(i,a,y,l),a.child}function Ql(i,a){return i!==null&&i.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function Db(i,a,l,c,y){var b=Bf();return b=b===null?null:{parent:Ot._currentValue,pool:b},a.memoizedState={baseLanes:l,cachePool:b},i!==null&&$c(a,null),Xf(),Lv(a),i!==null&&co(i,a,c,!0),a.childLanes=y,null}function ld(i,a){return a=cd({mode:a.mode,children:a.children},i.mode),a.ref=i.ref,i.child=a,a.return=i,a}function jb(i,a,l){return ma(a,i.child,null,l),i=ld(a,a.pendingProps),i.flags|=2,Rn(a),a.memoizedState=null,i}function a_(i,a,l){var c=a.pendingProps,y=(a.flags&128)!==0;if(a.flags&=-129,i===null){if(Be){if(c.mode==="hidden")return i=ld(a,c),a.lanes=536870912,Ql(null,i);if(Zf(a),(i=ct)?(i=W0(i,Yn),i=i!==null&&i.data==="&"?i:null,i!==null&&(a.memoizedState={dehydrated:i,treeContext:Xi!==null?{id:Br,overflow:$r}:null,retryLane:536870912,hydrationErrors:null},l=vv(i),l.return=a,a.child=l,Xt=a,ct=null)):i=null,i===null)throw Zi(a);return a.lanes=536870912,null}return ld(a,c)}var b=i.memoizedState;if(b!==null){var T=b.dehydrated;if(Zf(a),y)if(a.flags&256)a.flags&=-257,a=jb(i,a,l);else if(a.memoizedState!==null)a.child=i.child,a.flags|=128,a=null;else throw Error(r(558));else if(Rt||co(i,a,l,!1),y=(l&i.childLanes)!==0,Rt||y){if(c=lt,c!==null&&(T=bl(c,l),T!==0&&T!==b.retryLane))throw b.retryLane=T,oa(i,T),Tn(c,i,T),wp;bd(),a=jb(i,a,l)}else i=b.treeContext,ct=Xn(T.nextSibling),Xt=a,Be=!0,Qi=null,Yn=!1,i!==null&&Ev(a,i),a=ld(a,c),a.flags|=4096;return a}return i=di(i.child,{mode:c.mode,children:c.children}),i.ref=a.ref,a.child=i,i.return=a,i}function ud(i,a){var l=a.ref;if(l===null)i!==null&&i.ref!==null&&(a.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(r(284));(i===null||i.ref!==l)&&(a.flags|=4194816)}}function Ep(i,a,l,c,y){return da(a),l=tp(i,a,l,c,void 0,y),c=np(),i!==null&&!Rt?(rp(i,a,y),yi(i,a,y)):(Be&&c&&Mf(a),a.flags|=1,Zt(i,a,l,y),a.child)}function Mb(i,a,l,c,y,b){return da(a),a.updateQueue=null,l=Vv(a,c,l,y),Uv(i),c=np(),i!==null&&!Rt?(rp(i,a,b),yi(i,a,b)):(Be&&c&&Mf(a),a.flags|=1,Zt(i,a,l,b),a.child)}function Lb(i,a,l,c,y){if(da(a),a.stateNode===null){var b=ao,T=l.contextType;typeof T=="object"&&T!==null&&(b=Qt(T)),b=new l(c,b),a.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,b.updater=vp,a.stateNode=b,b._reactInternals=a,b=a.stateNode,b.props=c,b.state=a.memoizedState,b.refs={},Wf(a),T=l.contextType,b.context=typeof T=="object"&&T!==null?Qt(T):ao,b.state=a.memoizedState,T=l.getDerivedStateFromProps,typeof T=="function"&&(yp(a,l,T,c),b.state=a.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(T=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),T!==b.state&&vp.enqueueReplaceState(b,b.state,null),Wl(a,c,b,y),$l(),b.state=a.memoizedState),typeof b.componentDidMount=="function"&&(a.flags|=4194308),c=!0}else if(i===null){b=a.stateNode;var k=a.memoizedProps,L=ya(l,k);b.props=L;var K=b.context,ee=l.contextType;T=ao,typeof ee=="object"&&ee!==null&&(T=Qt(ee));var se=l.getDerivedStateFromProps;ee=typeof se=="function"||typeof b.getSnapshotBeforeUpdate=="function",k=a.pendingProps!==k,ee||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(k||K!==T)&&xb(a,b,c,T),ts=!1;var Y=a.memoizedState;b.state=Y,Wl(a,c,b,y),$l(),K=a.memoizedState,k||Y!==K||ts?(typeof se=="function"&&(yp(a,l,se,c),K=a.memoizedState),(L=ts||Sb(a,l,L,c,Y,K,T))?(ee||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(a.flags|=4194308)):(typeof b.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=c,a.memoizedState=K),b.props=c,b.state=K,b.context=T,c=L):(typeof b.componentDidMount=="function"&&(a.flags|=4194308),c=!1)}else{b=a.stateNode,Kf(i,a),T=a.memoizedProps,ee=ya(l,T),b.props=ee,se=a.pendingProps,Y=b.context,K=l.contextType,L=ao,typeof K=="object"&&K!==null&&(L=Qt(K)),k=l.getDerivedStateFromProps,(K=typeof k=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(T!==se||Y!==L)&&xb(a,b,c,L),ts=!1,Y=a.memoizedState,b.state=Y,Wl(a,c,b,y),$l();var Z=a.memoizedState;T!==se||Y!==Z||ts||i!==null&&i.dependencies!==null&&Gc(i.dependencies)?(typeof k=="function"&&(yp(a,l,k,c),Z=a.memoizedState),(ee=ts||Sb(a,l,ee,c,Y,Z,L)||i!==null&&i.dependencies!==null&&Gc(i.dependencies))?(K||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(c,Z,L),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(c,Z,L)),typeof b.componentDidUpdate=="function"&&(a.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof b.componentDidUpdate!="function"||T===i.memoizedProps&&Y===i.memoizedState||(a.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||T===i.memoizedProps&&Y===i.memoizedState||(a.flags|=1024),a.memoizedProps=c,a.memoizedState=Z),b.props=c,b.state=Z,b.context=L,c=ee):(typeof b.componentDidUpdate!="function"||T===i.memoizedProps&&Y===i.memoizedState||(a.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||T===i.memoizedProps&&Y===i.memoizedState||(a.flags|=1024),c=!1)}return b=c,ud(i,a),c=(a.flags&128)!==0,b||c?(b=a.stateNode,l=c&&typeof l.getDerivedStateFromError!="function"?null:b.render(),a.flags|=1,i!==null&&c?(a.child=ma(a,i.child,null,y),a.child=ma(a,null,l,y)):Zt(i,a,l,y),a.memoizedState=b.state,i=a.child):i=yi(i,a,y),i}function Ub(i,a,l,c){return ua(),a.flags|=256,Zt(i,a,l,c),a.child}var Sp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function xp(i){return{baseLanes:i,cachePool:kv()}}function Tp(i,a,l){return i=i!==null?i.childLanes&~l:0,a&&(i|=jn),i}function Vb(i,a,l){var c=a.pendingProps,y=!1,b=(a.flags&128)!==0,T;if((T=b)||(T=i!==null&&i.memoizedState===null?!1:(St.current&2)!==0),T&&(y=!0,a.flags&=-129),T=(a.flags&32)!==0,a.flags&=-33,i===null){if(Be){if(y?is(a):ss(),(i=ct)?(i=W0(i,Yn),i=i!==null&&i.data!=="&"?i:null,i!==null&&(a.memoizedState={dehydrated:i,treeContext:Xi!==null?{id:Br,overflow:$r}:null,retryLane:536870912,hydrationErrors:null},l=vv(i),l.return=a,a.child=l,Xt=a,ct=null)):i=null,i===null)throw Zi(a);return am(i)?a.lanes=32:a.lanes=536870912,null}var k=c.children;return c=c.fallback,y?(ss(),y=a.mode,k=cd({mode:"hidden",children:k},y),c=la(c,y,l,null),k.return=a,c.return=a,k.sibling=c,a.child=k,c=a.child,c.memoizedState=xp(l),c.childLanes=Tp(i,T,l),a.memoizedState=Sp,Ql(null,c)):(is(a),Cp(a,k))}var L=i.memoizedState;if(L!==null&&(k=L.dehydrated,k!==null)){if(b)a.flags&256?(is(a),a.flags&=-257,a=Ip(i,a,l)):a.memoizedState!==null?(ss(),a.child=i.child,a.flags|=128,a=null):(ss(),k=c.fallback,y=a.mode,c=cd({mode:"visible",children:c.children},y),k=la(k,y,l,null),k.flags|=2,c.return=a,k.return=a,c.sibling=k,a.child=c,ma(a,i.child,null,l),c=a.child,c.memoizedState=xp(l),c.childLanes=Tp(i,T,l),a.memoizedState=Sp,a=Ql(null,c));else if(is(a),am(k)){if(T=k.nextSibling&&k.nextSibling.dataset,T)var K=T.dgst;T=K,c=Error(r(419)),c.stack="",c.digest=T,Fl({value:c,source:null,stack:null}),a=Ip(i,a,l)}else if(Rt||co(i,a,l,!1),T=(l&i.childLanes)!==0,Rt||T){if(T=lt,T!==null&&(c=bl(T,l),c!==0&&c!==L.retryLane))throw L.retryLane=c,oa(i,c),Tn(T,i,c),wp;sm(k)||bd(),a=Ip(i,a,l)}else sm(k)?(a.flags|=192,a.child=i.child,a=null):(i=L.treeContext,ct=Xn(k.nextSibling),Xt=a,Be=!0,Qi=null,Yn=!1,i!==null&&Ev(a,i),a=Cp(a,c.children),a.flags|=4096);return a}return y?(ss(),k=c.fallback,y=a.mode,L=i.child,K=L.sibling,c=di(L,{mode:"hidden",children:c.children}),c.subtreeFlags=L.subtreeFlags&65011712,K!==null?k=di(K,k):(k=la(k,y,l,null),k.flags|=2),k.return=a,c.return=a,c.sibling=k,a.child=c,Ql(null,c),c=a.child,k=i.child.memoizedState,k===null?k=xp(l):(y=k.cachePool,y!==null?(L=Ot._currentValue,y=y.parent!==L?{parent:L,pool:L}:y):y=kv(),k={baseLanes:k.baseLanes|l,cachePool:y}),c.memoizedState=k,c.childLanes=Tp(i,T,l),a.memoizedState=Sp,Ql(i.child,c)):(is(a),l=i.child,i=l.sibling,l=di(l,{mode:"visible",children:c.children}),l.return=a,l.sibling=null,i!==null&&(T=a.deletions,T===null?(a.deletions=[i],a.flags|=16):T.push(i)),a.child=l,a.memoizedState=null,l)}function Cp(i,a){return a=cd({mode:"visible",children:a},i.mode),a.return=i,i.child=a}function cd(i,a){return i=On(22,i,null,a),i.lanes=0,i}function Ip(i,a,l){return ma(a,i.child,null,l),i=Cp(a,a.pendingProps.children),i.flags|=2,a.memoizedState=null,i}function Fb(i,a,l){i.lanes|=a;var c=i.alternate;c!==null&&(c.lanes|=a),qf(i.return,a,l)}function kp(i,a,l,c,y,b){var T=i.memoizedState;T===null?i.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:c,tail:l,tailMode:y,treeForkCount:b}:(T.isBackwards=a,T.rendering=null,T.renderingStartTime=0,T.last=c,T.tail=l,T.tailMode=y,T.treeForkCount=b)}function qb(i,a,l){var c=a.pendingProps,y=c.revealOrder,b=c.tail;c=c.children;var T=St.current,k=(T&2)!==0;if(k?(T=T&1|2,a.flags|=128):T&=1,he(St,T),Zt(i,a,c,l),c=Be?Vl:0,!k&&i!==null&&(i.flags&128)!==0)e:for(i=a.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Fb(i,l,a);else if(i.tag===19)Fb(i,l,a);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break e;for(;i.sibling===null;){if(i.return===null||i.return===a)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(y){case"forwards":for(l=a.child,y=null;l!==null;)i=l.alternate,i!==null&&Qc(i)===null&&(y=l),l=l.sibling;l=y,l===null?(y=a.child,a.child=null):(y=l.sibling,l.sibling=null),kp(a,!1,y,l,b,c);break;case"backwards":case"unstable_legacy-backwards":for(l=null,y=a.child,a.child=null;y!==null;){if(i=y.alternate,i!==null&&Qc(i)===null){a.child=y;break}i=y.sibling,y.sibling=l,l=y,y=i}kp(a,!0,l,null,b,c);break;case"together":kp(a,!1,null,null,void 0,c);break;default:a.memoizedState=null}return a.child}function yi(i,a,l){if(i!==null&&(a.dependencies=i.dependencies),ls|=a.lanes,(l&a.childLanes)===0)if(i!==null){if(co(i,a,l,!1),(l&a.childLanes)===0)return null}else return null;if(i!==null&&a.child!==i.child)throw Error(r(153));if(a.child!==null){for(i=a.child,l=di(i,i.pendingProps),a.child=l,l.return=a;i.sibling!==null;)i=i.sibling,l=l.sibling=di(i,i.pendingProps),l.return=a;l.sibling=null}return a.child}function _p(i,a){return(i.lanes&a)!==0?!0:(i=i.dependencies,!!(i!==null&&Gc(i)))}function o_(i,a,l){switch(a.tag){case 3:Vt(a,a.stateNode.containerInfo),es(a,Ot,i.memoizedState.cache),ua();break;case 27:case 5:zs(a);break;case 4:Vt(a,a.stateNode.containerInfo);break;case 10:es(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,Zf(a),null;break;case 13:var c=a.memoizedState;if(c!==null)return c.dehydrated!==null?(is(a),a.flags|=128,null):(l&a.child.childLanes)!==0?Vb(i,a,l):(is(a),i=yi(i,a,l),i!==null?i.sibling:null);is(a);break;case 19:var y=(i.flags&128)!==0;if(c=(l&a.childLanes)!==0,c||(co(i,a,l,!1),c=(l&a.childLanes)!==0),y){if(c)return qb(i,a,l);a.flags|=128}if(y=a.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),he(St,St.current),c)break;return null;case 22:return a.lanes=0,Rb(i,a,l,a.pendingProps);case 24:es(a,Ot,i.memoizedState.cache)}return yi(i,a,l)}function Hb(i,a,l){if(i!==null)if(i.memoizedProps!==a.pendingProps)Rt=!0;else{if(!_p(i,l)&&(a.flags&128)===0)return Rt=!1,o_(i,a,l);Rt=(i.flags&131072)!==0}else Rt=!1,Be&&(a.flags&1048576)!==0&&wv(a,Vl,a.index);switch(a.lanes=0,a.tag){case 16:e:{var c=a.pendingProps;if(i=fa(a.elementType),a.type=i,typeof i=="function")Rf(i)?(c=ya(i,c),a.tag=1,a=Lb(null,a,i,c,l)):(a.tag=0,a=Ep(null,a,i,c,l));else{if(i!=null){var y=i.$$typeof;if(y===re){a.tag=11,a=Ab(null,a,i,c,l);break e}else if(y===A){a.tag=14,a=Ob(null,a,i,c,l);break e}}throw a=ae(i)||i,Error(r(306,a,""))}}return a;case 0:return Ep(i,a,a.type,a.pendingProps,l);case 1:return c=a.type,y=ya(c,a.pendingProps),Lb(i,a,c,y,l);case 3:e:{if(Vt(a,a.stateNode.containerInfo),i===null)throw Error(r(387));c=a.pendingProps;var b=a.memoizedState;y=b.element,Kf(i,a),Wl(a,c,null,l);var T=a.memoizedState;if(c=T.cache,es(a,Ot,c),c!==b.cache&&Hf(a,[Ot],l,!0),$l(),c=T.element,b.isDehydrated)if(b={element:c,isDehydrated:!1,cache:T.cache},a.updateQueue.baseState=b,a.memoizedState=b,a.flags&256){a=Ub(i,a,c,l);break e}else if(c!==y){y=Wn(Error(r(424)),a),Fl(y),a=Ub(i,a,c,l);break e}else{switch(i=a.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(ct=Xn(i.firstChild),Xt=a,Be=!0,Qi=null,Yn=!0,l=Rv(a,null,c,l),a.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(ua(),c===y){a=yi(i,a,l);break e}Zt(i,a,c,l)}a=a.child}return a;case 26:return ud(i,a),i===null?(l=Z0(a.type,null,a.pendingProps,null))?a.memoizedState=l:Be||(l=a.type,i=a.pendingProps,c=Id(De.current).createElement(l),c[_t]=a,c[Gt]=i,en(c,l,i),Nt(c),a.stateNode=c):a.memoizedState=Z0(a.type,i.memoizedProps,a.pendingProps,i.memoizedState),null;case 27:return zs(a),i===null&&Be&&(c=a.stateNode=Y0(a.type,a.pendingProps,De.current),Xt=a,Yn=!0,y=ct,fs(a.type)?(om=y,ct=Xn(c.firstChild)):ct=y),Zt(i,a,a.pendingProps.children,l),ud(i,a),i===null&&(a.flags|=4194304),a.child;case 5:return i===null&&Be&&((y=c=ct)&&(c=L_(c,a.type,a.pendingProps,Yn),c!==null?(a.stateNode=c,Xt=a,ct=Xn(c.firstChild),Yn=!1,y=!0):y=!1),y||Zi(a)),zs(a),y=a.type,b=a.pendingProps,T=i!==null?i.memoizedProps:null,c=b.children,nm(y,b)?c=null:T!==null&&nm(y,T)&&(a.flags|=32),a.memoizedState!==null&&(y=tp(i,a,Qk,null,null,l),fu._currentValue=y),ud(i,a),Zt(i,a,c,l),a.child;case 6:return i===null&&Be&&((i=l=ct)&&(l=U_(l,a.pendingProps,Yn),l!==null?(a.stateNode=l,Xt=a,ct=null,i=!0):i=!1),i||Zi(a)),null;case 13:return Vb(i,a,l);case 4:return Vt(a,a.stateNode.containerInfo),c=a.pendingProps,i===null?a.child=ma(a,null,c,l):Zt(i,a,c,l),a.child;case 11:return Ab(i,a,a.type,a.pendingProps,l);case 7:return Zt(i,a,a.pendingProps,l),a.child;case 8:return Zt(i,a,a.pendingProps.children,l),a.child;case 12:return Zt(i,a,a.pendingProps.children,l),a.child;case 10:return c=a.pendingProps,es(a,a.type,c.value),Zt(i,a,c.children,l),a.child;case 9:return y=a.type._context,c=a.pendingProps.children,da(a),y=Qt(y),c=c(y),a.flags|=1,Zt(i,a,c,l),a.child;case 14:return Ob(i,a,a.type,a.pendingProps,l);case 15:return Pb(i,a,a.type,a.pendingProps,l);case 19:return qb(i,a,l);case 31:return a_(i,a,l);case 22:return Rb(i,a,l,a.pendingProps);case 24:return da(a),c=Qt(Ot),i===null?(y=Bf(),y===null&&(y=lt,b=zf(),y.pooledCache=b,b.refCount++,b!==null&&(y.pooledCacheLanes|=l),y=b),a.memoizedState={parent:c,cache:y},Wf(a),es(a,Ot,y)):((i.lanes&l)!==0&&(Kf(i,a),Wl(a,null,null,l),$l()),y=i.memoizedState,b=a.memoizedState,y.parent!==c?(y={parent:c,cache:c},a.memoizedState=y,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=y),es(a,Ot,c)):(c=b.cache,es(a,Ot,c),c!==y.cache&&Hf(a,[Ot],l,!0))),Zt(i,a,a.pendingProps.children,l),a.child;case 29:throw a.pendingProps}throw Error(r(156,a.tag))}function vi(i){i.flags|=4}function Np(i,a,l,c,y){if((a=(i.mode&32)!==0)&&(a=!1),a){if(i.flags|=16777216,(y&335544128)===y)if(i.stateNode.complete)i.flags|=8192;else if(m0())i.flags|=8192;else throw pa=Kc,$f}else i.flags&=-16777217}function zb(i,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!iw(a))if(m0())i.flags|=8192;else throw pa=Kc,$f}function dd(i,a){a!==null&&(i.flags|=4),i.flags&16384&&(a=i.tag!==22?yc():536870912,i.lanes|=a,xo|=a)}function Zl(i,a){if(!Be)switch(i.tailMode){case"hidden":a=i.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i.tail=null:l.sibling=null;break;case"collapsed":l=i.tail;for(var c=null;l!==null;)l.alternate!==null&&(c=l),l=l.sibling;c===null?a||i.tail===null?i.tail=null:i.tail.sibling=null:c.sibling=null}}function dt(i){var a=i.alternate!==null&&i.alternate.child===i.child,l=0,c=0;if(a)for(var y=i.child;y!==null;)l|=y.lanes|y.childLanes,c|=y.subtreeFlags&65011712,c|=y.flags&65011712,y.return=i,y=y.sibling;else for(y=i.child;y!==null;)l|=y.lanes|y.childLanes,c|=y.subtreeFlags,c|=y.flags,y.return=i,y=y.sibling;return i.subtreeFlags|=c,i.childLanes=l,a}function l_(i,a,l){var c=a.pendingProps;switch(Lf(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return dt(a),null;case 1:return dt(a),null;case 3:return l=a.stateNode,c=null,i!==null&&(c=i.memoizedState.cache),a.memoizedState.cache!==c&&(a.flags|=2048),pi(Ot),ft(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(i===null||i.child===null)&&(uo(a)?vi(a):i===null||i.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Vf())),dt(a),null;case 26:var y=a.type,b=a.memoizedState;return i===null?(vi(a),b!==null?(dt(a),zb(a,b)):(dt(a),Np(a,y,null,c,l))):b?b!==i.memoizedState?(vi(a),dt(a),zb(a,b)):(dt(a),a.flags&=-16777217):(i=i.memoizedProps,i!==c&&vi(a),dt(a),Np(a,y,i,c,l)),null;case 27:if(qa(a),l=De.current,y=a.type,i!==null&&a.stateNode!=null)i.memoizedProps!==c&&vi(a);else{if(!c){if(a.stateNode===null)throw Error(r(166));return dt(a),null}i=ge.current,uo(a)?Sv(a):(i=Y0(y,c,l),a.stateNode=i,vi(a))}return dt(a),null;case 5:if(qa(a),y=a.type,i!==null&&a.stateNode!=null)i.memoizedProps!==c&&vi(a);else{if(!c){if(a.stateNode===null)throw Error(r(166));return dt(a),null}if(b=ge.current,uo(a))Sv(a);else{var T=Id(De.current);switch(b){case 1:b=T.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:b=T.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":b=T.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":b=T.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":b=T.createElement("div"),b.innerHTML="<script><\/script>",b=b.removeChild(b.firstChild);break;case"select":b=typeof c.is=="string"?T.createElement("select",{is:c.is}):T.createElement("select"),c.multiple?b.multiple=!0:c.size&&(b.size=c.size);break;default:b=typeof c.is=="string"?T.createElement(y,{is:c.is}):T.createElement(y)}}b[_t]=a,b[Gt]=c;e:for(T=a.child;T!==null;){if(T.tag===5||T.tag===6)b.appendChild(T.stateNode);else if(T.tag!==4&&T.tag!==27&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===a)break e;for(;T.sibling===null;){if(T.return===null||T.return===a)break e;T=T.return}T.sibling.return=T.return,T=T.sibling}a.stateNode=b;e:switch(en(b,y,c),y){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&vi(a)}}return dt(a),Np(a,a.type,i===null?null:i.memoizedProps,a.pendingProps,l),null;case 6:if(i&&a.stateNode!=null)i.memoizedProps!==c&&vi(a);else{if(typeof c!="string"&&a.stateNode===null)throw Error(r(166));if(i=De.current,uo(a)){if(i=a.stateNode,l=a.memoizedProps,c=null,y=Xt,y!==null)switch(y.tag){case 27:case 5:c=y.memoizedProps}i[_t]=a,i=!!(i.nodeValue===l||c!==null&&c.suppressHydrationWarning===!0||V0(i.nodeValue,l)),i||Zi(a,!0)}else i=Id(i).createTextNode(c),i[_t]=a,a.stateNode=i}return dt(a),null;case 31:if(l=a.memoizedState,i===null||i.memoizedState!==null){if(c=uo(a),l!==null){if(i===null){if(!c)throw Error(r(318));if(i=a.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(557));i[_t]=a}else ua(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;dt(a),i=!1}else l=Vf(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=l),i=!0;if(!i)return a.flags&256?(Rn(a),a):(Rn(a),null);if((a.flags&128)!==0)throw Error(r(558))}return dt(a),null;case 13:if(c=a.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(y=uo(a),c!==null&&c.dehydrated!==null){if(i===null){if(!y)throw Error(r(318));if(y=a.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(r(317));y[_t]=a}else ua(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;dt(a),y=!1}else y=Vf(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=y),y=!0;if(!y)return a.flags&256?(Rn(a),a):(Rn(a),null)}return Rn(a),(a.flags&128)!==0?(a.lanes=l,a):(l=c!==null,i=i!==null&&i.memoizedState!==null,l&&(c=a.child,y=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(y=c.alternate.memoizedState.cachePool.pool),b=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(b=c.memoizedState.cachePool.pool),b!==y&&(c.flags|=2048)),l!==i&&l&&(a.child.flags|=8192),dd(a,a.updateQueue),dt(a),null);case 4:return ft(),i===null&&Xp(a.stateNode.containerInfo),dt(a),null;case 10:return pi(a.type),dt(a),null;case 19:if(ie(St),c=a.memoizedState,c===null)return dt(a),null;if(y=(a.flags&128)!==0,b=c.rendering,b===null)if(y)Zl(c,!1);else{if(bt!==0||i!==null&&(i.flags&128)!==0)for(i=a.child;i!==null;){if(b=Qc(i),b!==null){for(a.flags|=128,Zl(c,!1),i=b.updateQueue,a.updateQueue=i,dd(a,i),a.subtreeFlags=0,i=l,l=a.child;l!==null;)yv(l,i),l=l.sibling;return he(St,St.current&1|2),Be&&hi(a,c.treeForkCount),a.child}i=i.sibling}c.tail!==null&&hn()>gd&&(a.flags|=128,y=!0,Zl(c,!1),a.lanes=4194304)}else{if(!y)if(i=Qc(b),i!==null){if(a.flags|=128,y=!0,i=i.updateQueue,a.updateQueue=i,dd(a,i),Zl(c,!0),c.tail===null&&c.tailMode==="hidden"&&!b.alternate&&!Be)return dt(a),null}else 2*hn()-c.renderingStartTime>gd&&l!==536870912&&(a.flags|=128,y=!0,Zl(c,!1),a.lanes=4194304);c.isBackwards?(b.sibling=a.child,a.child=b):(i=c.last,i!==null?i.sibling=b:a.child=b,c.last=b)}return c.tail!==null?(i=c.tail,c.rendering=i,c.tail=i.sibling,c.renderingStartTime=hn(),i.sibling=null,l=St.current,he(St,y?l&1|2:l&1),Be&&hi(a,c.treeForkCount),i):(dt(a),null);case 22:case 23:return Rn(a),Qf(),c=a.memoizedState!==null,i!==null?i.memoizedState!==null!==c&&(a.flags|=8192):c&&(a.flags|=8192),c?(l&536870912)!==0&&(a.flags&128)===0&&(dt(a),a.subtreeFlags&6&&(a.flags|=8192)):dt(a),l=a.updateQueue,l!==null&&dd(a,l.retryQueue),l=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),c=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(c=a.memoizedState.cachePool.pool),c!==l&&(a.flags|=2048),i!==null&&ie(ha),null;case 24:return l=null,i!==null&&(l=i.memoizedState.cache),a.memoizedState.cache!==l&&(a.flags|=2048),pi(Ot),dt(a),null;case 25:return null;case 30:return null}throw Error(r(156,a.tag))}function u_(i,a){switch(Lf(a),a.tag){case 1:return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 3:return pi(Ot),ft(),i=a.flags,(i&65536)!==0&&(i&128)===0?(a.flags=i&-65537|128,a):null;case 26:case 27:case 5:return qa(a),null;case 31:if(a.memoizedState!==null){if(Rn(a),a.alternate===null)throw Error(r(340));ua()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 13:if(Rn(a),i=a.memoizedState,i!==null&&i.dehydrated!==null){if(a.alternate===null)throw Error(r(340));ua()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 19:return ie(St),null;case 4:return ft(),null;case 10:return pi(a.type),null;case 22:case 23:return Rn(a),Qf(),i!==null&&ie(ha),i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 24:return pi(Ot),null;case 25:return null;default:return null}}function Gb(i,a){switch(Lf(a),a.tag){case 3:pi(Ot),ft();break;case 26:case 27:case 5:qa(a);break;case 4:ft();break;case 31:a.memoizedState!==null&&Rn(a);break;case 13:Rn(a);break;case 19:ie(St);break;case 10:pi(a.type);break;case 22:case 23:Rn(a),Qf(),i!==null&&ie(ha);break;case 24:pi(Ot)}}function eu(i,a){try{var l=a.updateQueue,c=l!==null?l.lastEffect:null;if(c!==null){var y=c.next;l=y;do{if((l.tag&i)===i){c=void 0;var b=l.create,T=l.inst;c=b(),T.destroy=c}l=l.next}while(l!==y)}}catch(k){nt(a,a.return,k)}}function as(i,a,l){try{var c=a.updateQueue,y=c!==null?c.lastEffect:null;if(y!==null){var b=y.next;c=b;do{if((c.tag&i)===i){var T=c.inst,k=T.destroy;if(k!==void 0){T.destroy=void 0,y=a;var L=l,K=k;try{K()}catch(ee){nt(y,L,ee)}}}c=c.next}while(c!==b)}}catch(ee){nt(a,a.return,ee)}}function Bb(i){var a=i.updateQueue;if(a!==null){var l=i.stateNode;try{jv(a,l)}catch(c){nt(i,i.return,c)}}}function $b(i,a,l){l.props=ya(i.type,i.memoizedProps),l.state=i.memoizedState;try{l.componentWillUnmount()}catch(c){nt(i,a,c)}}function tu(i,a){try{var l=i.ref;if(l!==null){switch(i.tag){case 26:case 27:case 5:var c=i.stateNode;break;case 30:c=i.stateNode;break;default:c=i.stateNode}typeof l=="function"?i.refCleanup=l(c):l.current=c}}catch(y){nt(i,a,y)}}function Wr(i,a){var l=i.ref,c=i.refCleanup;if(l!==null)if(typeof c=="function")try{c()}catch(y){nt(i,a,y)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(y){nt(i,a,y)}else l.current=null}function Wb(i){var a=i.type,l=i.memoizedProps,c=i.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":l.autoFocus&&c.focus();break e;case"img":l.src?c.src=l.src:l.srcSet&&(c.srcset=l.srcSet)}}catch(y){nt(i,i.return,y)}}function Ap(i,a,l){try{var c=i.stateNode;O_(c,i.type,l,a),c[Gt]=a}catch(y){nt(i,i.return,y)}}function Kb(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&fs(i.type)||i.tag===4}function Op(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Kb(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&fs(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Pp(i,a,l){var c=i.tag;if(c===5||c===6)i=i.stateNode,a?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(i,a):(a=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,a.appendChild(i),l=l._reactRootContainer,l!=null||a.onclick!==null||(a.onclick=ur));else if(c!==4&&(c===27&&fs(i.type)&&(l=i.stateNode,a=null),i=i.child,i!==null))for(Pp(i,a,l),i=i.sibling;i!==null;)Pp(i,a,l),i=i.sibling}function hd(i,a,l){var c=i.tag;if(c===5||c===6)i=i.stateNode,a?l.insertBefore(i,a):l.appendChild(i);else if(c!==4&&(c===27&&fs(i.type)&&(l=i.stateNode),i=i.child,i!==null))for(hd(i,a,l),i=i.sibling;i!==null;)hd(i,a,l),i=i.sibling}function Jb(i){var a=i.stateNode,l=i.memoizedProps;try{for(var c=i.type,y=a.attributes;y.length;)a.removeAttributeNode(y[0]);en(a,c,l),a[_t]=i,a[Gt]=l}catch(b){nt(i,i.return,b)}}var bi=!1,Dt=!1,Rp=!1,Yb=typeof WeakSet=="function"?WeakSet:Set,$t=null;function c_(i,a){if(i=i.containerInfo,em=Rd,i=lv(i),If(i)){if("selectionStart"in i)var l={start:i.selectionStart,end:i.selectionEnd};else e:{l=(l=i.ownerDocument)&&l.defaultView||window;var c=l.getSelection&&l.getSelection();if(c&&c.rangeCount!==0){l=c.anchorNode;var y=c.anchorOffset,b=c.focusNode;c=c.focusOffset;try{l.nodeType,b.nodeType}catch{l=null;break e}var T=0,k=-1,L=-1,K=0,ee=0,se=i,Y=null;t:for(;;){for(var Z;se!==l||y!==0&&se.nodeType!==3||(k=T+y),se!==b||c!==0&&se.nodeType!==3||(L=T+c),se.nodeType===3&&(T+=se.nodeValue.length),(Z=se.firstChild)!==null;)Y=se,se=Z;for(;;){if(se===i)break t;if(Y===l&&++K===y&&(k=T),Y===b&&++ee===c&&(L=T),(Z=se.nextSibling)!==null)break;se=Y,Y=se.parentNode}se=Z}l=k===-1||L===-1?null:{start:k,end:L}}else l=null}l=l||{start:0,end:0}}else l=null;for(tm={focusedElem:i,selectionRange:l},Rd=!1,$t=a;$t!==null;)if(a=$t,i=a.child,(a.subtreeFlags&1028)!==0&&i!==null)i.return=a,$t=i;else for(;$t!==null;){switch(a=$t,b=a.alternate,i=a.flags,a.tag){case 0:if((i&4)!==0&&(i=a.updateQueue,i=i!==null?i.events:null,i!==null))for(l=0;l<i.length;l++)y=i[l],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&b!==null){i=void 0,l=a,y=b.memoizedProps,b=b.memoizedState,c=l.stateNode;try{var ye=ya(l.type,y);i=c.getSnapshotBeforeUpdate(ye,b),c.__reactInternalSnapshotBeforeUpdate=i}catch(Se){nt(l,l.return,Se)}}break;case 3:if((i&1024)!==0){if(i=a.stateNode.containerInfo,l=i.nodeType,l===9)im(i);else if(l===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":im(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(r(163))}if(i=a.sibling,i!==null){i.return=a.return,$t=i;break}$t=a.return}}function Xb(i,a,l){var c=l.flags;switch(l.tag){case 0:case 11:case 15:Ei(i,l),c&4&&eu(5,l);break;case 1:if(Ei(i,l),c&4)if(i=l.stateNode,a===null)try{i.componentDidMount()}catch(T){nt(l,l.return,T)}else{var y=ya(l.type,a.memoizedProps);a=a.memoizedState;try{i.componentDidUpdate(y,a,i.__reactInternalSnapshotBeforeUpdate)}catch(T){nt(l,l.return,T)}}c&64&&Bb(l),c&512&&tu(l,l.return);break;case 3:if(Ei(i,l),c&64&&(i=l.updateQueue,i!==null)){if(a=null,l.child!==null)switch(l.child.tag){case 27:case 5:a=l.child.stateNode;break;case 1:a=l.child.stateNode}try{jv(i,a)}catch(T){nt(l,l.return,T)}}break;case 27:a===null&&c&4&&Jb(l);case 26:case 5:Ei(i,l),a===null&&c&4&&Wb(l),c&512&&tu(l,l.return);break;case 12:Ei(i,l);break;case 31:Ei(i,l),c&4&&e0(i,l);break;case 13:Ei(i,l),c&4&&t0(i,l),c&64&&(i=l.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(l=b_.bind(null,l),V_(i,l))));break;case 22:if(c=l.memoizedState!==null||bi,!c){a=a!==null&&a.memoizedState!==null||Dt,y=bi;var b=Dt;bi=c,(Dt=a)&&!b?Si(i,l,(l.subtreeFlags&8772)!==0):Ei(i,l),bi=y,Dt=b}break;case 30:break;default:Ei(i,l)}}function Qb(i){var a=i.alternate;a!==null&&(i.alternate=null,Qb(a)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(a=i.stateNode,a!==null&&$a(a)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var mt=null,wn=!1;function wi(i,a,l){for(l=l.child;l!==null;)Zb(i,a,l),l=l.sibling}function Zb(i,a,l){if(Jt&&typeof Jt.onCommitFiberUnmount=="function")try{Jt.onCommitFiberUnmount(sr,l)}catch{}switch(l.tag){case 26:Dt||Wr(l,a),wi(i,a,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:Dt||Wr(l,a);var c=mt,y=wn;fs(l.type)&&(mt=l.stateNode,wn=!1),wi(i,a,l),cu(l.stateNode),mt=c,wn=y;break;case 5:Dt||Wr(l,a);case 6:if(c=mt,y=wn,mt=null,wi(i,a,l),mt=c,wn=y,mt!==null)if(wn)try{(mt.nodeType===9?mt.body:mt.nodeName==="HTML"?mt.ownerDocument.body:mt).removeChild(l.stateNode)}catch(b){nt(l,a,b)}else try{mt.removeChild(l.stateNode)}catch(b){nt(l,a,b)}break;case 18:mt!==null&&(wn?(i=mt,B0(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,l.stateNode),Oo(i)):B0(mt,l.stateNode));break;case 4:c=mt,y=wn,mt=l.stateNode.containerInfo,wn=!0,wi(i,a,l),mt=c,wn=y;break;case 0:case 11:case 14:case 15:as(2,l,a),Dt||as(4,l,a),wi(i,a,l);break;case 1:Dt||(Wr(l,a),c=l.stateNode,typeof c.componentWillUnmount=="function"&&$b(l,a,c)),wi(i,a,l);break;case 21:wi(i,a,l);break;case 22:Dt=(c=Dt)||l.memoizedState!==null,wi(i,a,l),Dt=c;break;default:wi(i,a,l)}}function e0(i,a){if(a.memoizedState===null&&(i=a.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{Oo(i)}catch(l){nt(a,a.return,l)}}}function t0(i,a){if(a.memoizedState===null&&(i=a.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Oo(i)}catch(l){nt(a,a.return,l)}}function d_(i){switch(i.tag){case 31:case 13:case 19:var a=i.stateNode;return a===null&&(a=i.stateNode=new Yb),a;case 22:return i=i.stateNode,a=i._retryCache,a===null&&(a=i._retryCache=new Yb),a;default:throw Error(r(435,i.tag))}}function fd(i,a){var l=d_(i);a.forEach(function(c){if(!l.has(c)){l.add(c);var y=w_.bind(null,i,c);c.then(y,y)}})}function En(i,a){var l=a.deletions;if(l!==null)for(var c=0;c<l.length;c++){var y=l[c],b=i,T=a,k=T;e:for(;k!==null;){switch(k.tag){case 27:if(fs(k.type)){mt=k.stateNode,wn=!1;break e}break;case 5:mt=k.stateNode,wn=!1;break e;case 3:case 4:mt=k.stateNode.containerInfo,wn=!0;break e}k=k.return}if(mt===null)throw Error(r(160));Zb(b,T,y),mt=null,wn=!1,b=y.alternate,b!==null&&(b.return=null),y.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)n0(a,i),a=a.sibling}var gr=null;function n0(i,a){var l=i.alternate,c=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:En(a,i),Sn(i),c&4&&(as(3,i,i.return),eu(3,i),as(5,i,i.return));break;case 1:En(a,i),Sn(i),c&512&&(Dt||l===null||Wr(l,l.return)),c&64&&bi&&(i=i.updateQueue,i!==null&&(c=i.callbacks,c!==null&&(l=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=l===null?c:l.concat(c))));break;case 26:var y=gr;if(En(a,i),Sn(i),c&512&&(Dt||l===null||Wr(l,l.return)),c&4){var b=l!==null?l.memoizedState:null;if(c=i.memoizedState,l===null)if(c===null)if(i.stateNode===null){e:{c=i.type,l=i.memoizedProps,y=y.ownerDocument||y;t:switch(c){case"title":b=y.getElementsByTagName("title")[0],(!b||b[Dr]||b[_t]||b.namespaceURI==="http://www.w3.org/2000/svg"||b.hasAttribute("itemprop"))&&(b=y.createElement(c),y.head.insertBefore(b,y.querySelector("head > title"))),en(b,c,l),b[_t]=i,Nt(b),c=b;break e;case"link":var T=nw("link","href",y).get(c+(l.href||""));if(T){for(var k=0;k<T.length;k++)if(b=T[k],b.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&b.getAttribute("rel")===(l.rel==null?null:l.rel)&&b.getAttribute("title")===(l.title==null?null:l.title)&&b.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){T.splice(k,1);break t}}b=y.createElement(c),en(b,c,l),y.head.appendChild(b);break;case"meta":if(T=nw("meta","content",y).get(c+(l.content||""))){for(k=0;k<T.length;k++)if(b=T[k],b.getAttribute("content")===(l.content==null?null:""+l.content)&&b.getAttribute("name")===(l.name==null?null:l.name)&&b.getAttribute("property")===(l.property==null?null:l.property)&&b.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&b.getAttribute("charset")===(l.charSet==null?null:l.charSet)){T.splice(k,1);break t}}b=y.createElement(c),en(b,c,l),y.head.appendChild(b);break;default:throw Error(r(468,c))}b[_t]=i,Nt(b),c=b}i.stateNode=c}else rw(y,i.type,i.stateNode);else i.stateNode=tw(y,c,i.memoizedProps);else b!==c?(b===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):b.count--,c===null?rw(y,i.type,i.stateNode):tw(y,c,i.memoizedProps)):c===null&&i.stateNode!==null&&Ap(i,i.memoizedProps,l.memoizedProps)}break;case 27:En(a,i),Sn(i),c&512&&(Dt||l===null||Wr(l,l.return)),l!==null&&c&4&&Ap(i,i.memoizedProps,l.memoizedProps);break;case 5:if(En(a,i),Sn(i),c&512&&(Dt||l===null||Wr(l,l.return)),i.flags&32){y=i.stateNode;try{bn(y,"")}catch(ye){nt(i,i.return,ye)}}c&4&&i.stateNode!=null&&(y=i.memoizedProps,Ap(i,y,l!==null?l.memoizedProps:y)),c&1024&&(Rp=!0);break;case 6:if(En(a,i),Sn(i),c&4){if(i.stateNode===null)throw Error(r(162));c=i.memoizedProps,l=i.stateNode;try{l.nodeValue=c}catch(ye){nt(i,i.return,ye)}}break;case 3:if(Nd=null,y=gr,gr=kd(a.containerInfo),En(a,i),gr=y,Sn(i),c&4&&l!==null&&l.memoizedState.isDehydrated)try{Oo(a.containerInfo)}catch(ye){nt(i,i.return,ye)}Rp&&(Rp=!1,r0(i));break;case 4:c=gr,gr=kd(i.stateNode.containerInfo),En(a,i),Sn(i),gr=c;break;case 12:En(a,i),Sn(i);break;case 31:En(a,i),Sn(i),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,fd(i,c)));break;case 13:En(a,i),Sn(i),i.child.flags&8192&&i.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(md=hn()),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,fd(i,c)));break;case 22:y=i.memoizedState!==null;var L=l!==null&&l.memoizedState!==null,K=bi,ee=Dt;if(bi=K||y,Dt=ee||L,En(a,i),Dt=ee,bi=K,Sn(i),c&8192)e:for(a=i.stateNode,a._visibility=y?a._visibility&-2:a._visibility|1,y&&(l===null||L||bi||Dt||va(i)),l=null,a=i;;){if(a.tag===5||a.tag===26){if(l===null){L=l=a;try{if(b=L.stateNode,y)T=b.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{k=L.stateNode;var se=L.memoizedProps.style,Y=se!=null&&se.hasOwnProperty("display")?se.display:null;k.style.display=Y==null||typeof Y=="boolean"?"":(""+Y).trim()}}catch(ye){nt(L,L.return,ye)}}}else if(a.tag===6){if(l===null){L=a;try{L.stateNode.nodeValue=y?"":L.memoizedProps}catch(ye){nt(L,L.return,ye)}}}else if(a.tag===18){if(l===null){L=a;try{var Z=L.stateNode;y?$0(Z,!0):$0(L.stateNode,!1)}catch(ye){nt(L,L.return,ye)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===i)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break e;for(;a.sibling===null;){if(a.return===null||a.return===i)break e;l===a&&(l=null),a=a.return}l===a&&(l=null),a.sibling.return=a.return,a=a.sibling}c&4&&(c=i.updateQueue,c!==null&&(l=c.retryQueue,l!==null&&(c.retryQueue=null,fd(i,l))));break;case 19:En(a,i),Sn(i),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,fd(i,c)));break;case 30:break;case 21:break;default:En(a,i),Sn(i)}}function Sn(i){var a=i.flags;if(a&2){try{for(var l,c=i.return;c!==null;){if(Kb(c)){l=c;break}c=c.return}if(l==null)throw Error(r(160));switch(l.tag){case 27:var y=l.stateNode,b=Op(i);hd(i,b,y);break;case 5:var T=l.stateNode;l.flags&32&&(bn(T,""),l.flags&=-33);var k=Op(i);hd(i,k,T);break;case 3:case 4:var L=l.stateNode.containerInfo,K=Op(i);Pp(i,K,L);break;default:throw Error(r(161))}}catch(ee){nt(i,i.return,ee)}i.flags&=-3}a&4096&&(i.flags&=-4097)}function r0(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var a=i;r0(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),i=i.sibling}}function Ei(i,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)Xb(i,a.alternate,a),a=a.sibling}function va(i){for(i=i.child;i!==null;){var a=i;switch(a.tag){case 0:case 11:case 14:case 15:as(4,a,a.return),va(a);break;case 1:Wr(a,a.return);var l=a.stateNode;typeof l.componentWillUnmount=="function"&&$b(a,a.return,l),va(a);break;case 27:cu(a.stateNode);case 26:case 5:Wr(a,a.return),va(a);break;case 22:a.memoizedState===null&&va(a);break;case 30:va(a);break;default:va(a)}i=i.sibling}}function Si(i,a,l){for(l=l&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var c=a.alternate,y=i,b=a,T=b.flags;switch(b.tag){case 0:case 11:case 15:Si(y,b,l),eu(4,b);break;case 1:if(Si(y,b,l),c=b,y=c.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(K){nt(c,c.return,K)}if(c=b,y=c.updateQueue,y!==null){var k=c.stateNode;try{var L=y.shared.hiddenCallbacks;if(L!==null)for(y.shared.hiddenCallbacks=null,y=0;y<L.length;y++)Dv(L[y],k)}catch(K){nt(c,c.return,K)}}l&&T&64&&Bb(b),tu(b,b.return);break;case 27:Jb(b);case 26:case 5:Si(y,b,l),l&&c===null&&T&4&&Wb(b),tu(b,b.return);break;case 12:Si(y,b,l);break;case 31:Si(y,b,l),l&&T&4&&e0(y,b);break;case 13:Si(y,b,l),l&&T&4&&t0(y,b);break;case 22:b.memoizedState===null&&Si(y,b,l),tu(b,b.return);break;case 30:break;default:Si(y,b,l)}a=a.sibling}}function Dp(i,a){var l=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),i=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(i=a.memoizedState.cachePool.pool),i!==l&&(i!=null&&i.refCount++,l!=null&&ql(l))}function jp(i,a){i=null,a.alternate!==null&&(i=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==i&&(a.refCount++,i!=null&&ql(i))}function yr(i,a,l,c){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)i0(i,a,l,c),a=a.sibling}function i0(i,a,l,c){var y=a.flags;switch(a.tag){case 0:case 11:case 15:yr(i,a,l,c),y&2048&&eu(9,a);break;case 1:yr(i,a,l,c);break;case 3:yr(i,a,l,c),y&2048&&(i=null,a.alternate!==null&&(i=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==i&&(a.refCount++,i!=null&&ql(i)));break;case 12:if(y&2048){yr(i,a,l,c),i=a.stateNode;try{var b=a.memoizedProps,T=b.id,k=b.onPostCommit;typeof k=="function"&&k(T,a.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(L){nt(a,a.return,L)}}else yr(i,a,l,c);break;case 31:yr(i,a,l,c);break;case 13:yr(i,a,l,c);break;case 23:break;case 22:b=a.stateNode,T=a.alternate,a.memoizedState!==null?b._visibility&2?yr(i,a,l,c):nu(i,a):b._visibility&2?yr(i,a,l,c):(b._visibility|=2,wo(i,a,l,c,(a.subtreeFlags&10256)!==0||!1)),y&2048&&Dp(T,a);break;case 24:yr(i,a,l,c),y&2048&&jp(a.alternate,a);break;default:yr(i,a,l,c)}}function wo(i,a,l,c,y){for(y=y&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var b=i,T=a,k=l,L=c,K=T.flags;switch(T.tag){case 0:case 11:case 15:wo(b,T,k,L,y),eu(8,T);break;case 23:break;case 22:var ee=T.stateNode;T.memoizedState!==null?ee._visibility&2?wo(b,T,k,L,y):nu(b,T):(ee._visibility|=2,wo(b,T,k,L,y)),y&&K&2048&&Dp(T.alternate,T);break;case 24:wo(b,T,k,L,y),y&&K&2048&&jp(T.alternate,T);break;default:wo(b,T,k,L,y)}a=a.sibling}}function nu(i,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var l=i,c=a,y=c.flags;switch(c.tag){case 22:nu(l,c),y&2048&&Dp(c.alternate,c);break;case 24:nu(l,c),y&2048&&jp(c.alternate,c);break;default:nu(l,c)}a=a.sibling}}var ru=8192;function Eo(i,a,l){if(i.subtreeFlags&ru)for(i=i.child;i!==null;)s0(i,a,l),i=i.sibling}function s0(i,a,l){switch(i.tag){case 26:Eo(i,a,l),i.flags&ru&&i.memoizedState!==null&&X_(l,gr,i.memoizedState,i.memoizedProps);break;case 5:Eo(i,a,l);break;case 3:case 4:var c=gr;gr=kd(i.stateNode.containerInfo),Eo(i,a,l),gr=c;break;case 22:i.memoizedState===null&&(c=i.alternate,c!==null&&c.memoizedState!==null?(c=ru,ru=16777216,Eo(i,a,l),ru=c):Eo(i,a,l));break;default:Eo(i,a,l)}}function a0(i){var a=i.alternate;if(a!==null&&(i=a.child,i!==null)){a.child=null;do a=i.sibling,i.sibling=null,i=a;while(i!==null)}}function iu(i){var a=i.deletions;if((i.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var c=a[l];$t=c,l0(c,i)}a0(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)o0(i),i=i.sibling}function o0(i){switch(i.tag){case 0:case 11:case 15:iu(i),i.flags&2048&&as(9,i,i.return);break;case 3:iu(i);break;case 12:iu(i);break;case 22:var a=i.stateNode;i.memoizedState!==null&&a._visibility&2&&(i.return===null||i.return.tag!==13)?(a._visibility&=-3,pd(i)):iu(i);break;default:iu(i)}}function pd(i){var a=i.deletions;if((i.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var c=a[l];$t=c,l0(c,i)}a0(i)}for(i=i.child;i!==null;){switch(a=i,a.tag){case 0:case 11:case 15:as(8,a,a.return),pd(a);break;case 22:l=a.stateNode,l._visibility&2&&(l._visibility&=-3,pd(a));break;default:pd(a)}i=i.sibling}}function l0(i,a){for(;$t!==null;){var l=$t;switch(l.tag){case 0:case 11:case 15:as(8,l,a);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var c=l.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:ql(l.memoizedState.cache)}if(c=l.child,c!==null)c.return=l,$t=c;else e:for(l=i;$t!==null;){c=$t;var y=c.sibling,b=c.return;if(Qb(c),c===l){$t=null;break e}if(y!==null){y.return=b,$t=y;break e}$t=b}}}var h_={getCacheForType:function(i){var a=Qt(Ot),l=a.data.get(i);return l===void 0&&(l=i(),a.data.set(i,l)),l},cacheSignal:function(){return Qt(Ot).controller.signal}},f_=typeof WeakMap=="function"?WeakMap:Map,Xe=0,lt=null,Ue=null,Fe=0,tt=0,Dn=null,os=!1,So=!1,Mp=!1,xi=0,bt=0,ls=0,ba=0,Lp=0,jn=0,xo=0,su=null,xn=null,Up=!1,md=0,u0=0,gd=1/0,yd=null,us=null,qt=0,cs=null,To=null,Ti=0,Vp=0,Fp=null,c0=null,au=0,qp=null;function Mn(){return(Xe&2)!==0&&Fe!==0?Fe&-Fe:J.T!==null?Wp():vc()}function d0(){if(jn===0)if((Fe&536870912)===0||Be){var i=$s;$s<<=1,($s&3932160)===0&&($s=262144),jn=i}else jn=536870912;return i=Pn.current,i!==null&&(i.flags|=32),jn}function Tn(i,a,l){(i===lt&&(tt===2||tt===9)||i.cancelPendingCommit!==null)&&(Co(i,0),ds(i,Fe,jn,!1)),Ws(i,l),((Xe&2)===0||i!==lt)&&(i===lt&&((Xe&2)===0&&(ba|=l),bt===4&&ds(i,Fe,jn,!1)),Kr(i))}function h0(i,a,l){if((Xe&6)!==0)throw Error(r(327));var c=!l&&(a&127)===0&&(a&i.expiredLanes)===0||ar(i,a),y=c?g_(i,a):zp(i,a,!0),b=c;do{if(y===0){So&&!c&&ds(i,a,0,!1);break}else{if(l=i.current.alternate,b&&!p_(l)){y=zp(i,a,!1),b=!1;continue}if(y===2){if(b=a,i.errorRecoveryDisabledLanes&b)var T=0;else T=i.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){a=T;e:{var k=i;y=su;var L=k.current.memoizedState.isDehydrated;if(L&&(Co(k,T).flags|=256),T=zp(k,T,!1),T!==2){if(Mp&&!L){k.errorRecoveryDisabledLanes|=b,ba|=b,y=4;break e}b=xn,xn=y,b!==null&&(xn===null?xn=b:xn.push.apply(xn,b))}y=T}if(b=!1,y!==2)continue}}if(y===1){Co(i,0),ds(i,a,0,!0);break}e:{switch(c=i,b=y,b){case 0:case 1:throw Error(r(345));case 4:if((a&4194048)!==a)break;case 6:ds(c,a,jn,!os);break e;case 2:xn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((a&62914560)===a&&(y=md+300-hn(),10<y)){if(ds(c,a,jn,!os),Or(c,0,!0)!==0)break e;Ti=a,c.timeoutHandle=z0(f0.bind(null,c,l,xn,yd,Up,a,jn,ba,xo,os,b,"Throttled",-0,0),y);break e}f0(c,l,xn,yd,Up,a,jn,ba,xo,os,b,null,-0,0)}}break}while(!0);Kr(i)}function f0(i,a,l,c,y,b,T,k,L,K,ee,se,Y,Z){if(i.timeoutHandle=-1,se=a.subtreeFlags,se&8192||(se&16785408)===16785408){se={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ur},s0(a,b,se);var ye=(b&62914560)===b?md-hn():(b&4194048)===b?u0-hn():0;if(ye=Q_(se,ye),ye!==null){Ti=b,i.cancelPendingCommit=ye(E0.bind(null,i,a,b,l,c,y,T,k,L,ee,se,null,Y,Z)),ds(i,b,T,!K);return}}E0(i,a,b,l,c,y,T,k,L)}function p_(i){for(var a=i;;){var l=a.tag;if((l===0||l===11||l===15)&&a.flags&16384&&(l=a.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var c=0;c<l.length;c++){var y=l[c],b=y.getSnapshot;y=y.value;try{if(!An(b(),y))return!1}catch{return!1}}if(l=a.child,a.subtreeFlags&16384&&l!==null)l.return=a,a=l;else{if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function ds(i,a,l,c){a&=~Lp,a&=~ba,i.suspendedLanes|=a,i.pingedLanes&=~a,c&&(i.warmLanes|=a),c=i.expirationTimes;for(var y=a;0<y;){var b=31-wt(y),T=1<<b;c[b]=-1,y&=~T}l!==0&&Ks(i,l,a)}function vd(){return(Xe&6)===0?(ou(0),!1):!0}function Hp(){if(Ue!==null){if(tt===0)var i=Ue.return;else i=Ue,fi=ca=null,ip(i),mo=null,zl=0,i=Ue;for(;i!==null;)Gb(i.alternate,i),i=i.return;Ue=null}}function Co(i,a){var l=i.timeoutHandle;l!==-1&&(i.timeoutHandle=-1,D_(l)),l=i.cancelPendingCommit,l!==null&&(i.cancelPendingCommit=null,l()),Ti=0,Hp(),lt=i,Ue=l=di(i.current,null),Fe=a,tt=0,Dn=null,os=!1,So=ar(i,a),Mp=!1,xo=jn=Lp=ba=ls=bt=0,xn=su=null,Up=!1,(a&8)!==0&&(a|=a&32);var c=i.entangledLanes;if(c!==0)for(i=i.entanglements,c&=a;0<c;){var y=31-wt(c),b=1<<y;a|=i[y],c&=~b}return xi=a,Vc(),l}function p0(i,a){Pe=null,J.H=Xl,a===po||a===Wc?(a=Av(),tt=3):a===$f?(a=Av(),tt=4):tt=a===wp?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,Dn=a,Ue===null&&(bt=1,od(i,Wn(a,i.current)))}function m0(){var i=Pn.current;return i===null?!0:(Fe&4194048)===Fe?mr===null:(Fe&62914560)===Fe||(Fe&536870912)!==0?i===mr:!1}function g0(){var i=J.H;return J.H=Xl,i===null?Xl:i}function y0(){var i=J.A;return J.A=h_,i}function bd(){bt=4,os||(Fe&4194048)!==Fe&&Pn.current!==null||(So=!0),(ls&134217727)===0&&(ba&134217727)===0||lt===null||ds(lt,Fe,jn,!1)}function zp(i,a,l){var c=Xe;Xe|=2;var y=g0(),b=y0();(lt!==i||Fe!==a)&&(yd=null,Co(i,a)),a=!1;var T=bt;e:do try{if(tt!==0&&Ue!==null){var k=Ue,L=Dn;switch(tt){case 8:Hp(),T=6;break e;case 3:case 2:case 9:case 6:Pn.current===null&&(a=!0);var K=tt;if(tt=0,Dn=null,Io(i,k,L,K),l&&So){T=0;break e}break;default:K=tt,tt=0,Dn=null,Io(i,k,L,K)}}m_(),T=bt;break}catch(ee){p0(i,ee)}while(!0);return a&&i.shellSuspendCounter++,fi=ca=null,Xe=c,J.H=y,J.A=b,Ue===null&&(lt=null,Fe=0,Vc()),T}function m_(){for(;Ue!==null;)v0(Ue)}function g_(i,a){var l=Xe;Xe|=2;var c=g0(),y=y0();lt!==i||Fe!==a?(yd=null,gd=hn()+500,Co(i,a)):So=ar(i,a);e:do try{if(tt!==0&&Ue!==null){a=Ue;var b=Dn;t:switch(tt){case 1:tt=0,Dn=null,Io(i,a,b,1);break;case 2:case 9:if(_v(b)){tt=0,Dn=null,b0(a);break}a=function(){tt!==2&&tt!==9||lt!==i||(tt=7),Kr(i)},b.then(a,a);break e;case 3:tt=7;break e;case 4:tt=5;break e;case 7:_v(b)?(tt=0,Dn=null,b0(a)):(tt=0,Dn=null,Io(i,a,b,7));break;case 5:var T=null;switch(Ue.tag){case 26:T=Ue.memoizedState;case 5:case 27:var k=Ue;if(T?iw(T):k.stateNode.complete){tt=0,Dn=null;var L=k.sibling;if(L!==null)Ue=L;else{var K=k.return;K!==null?(Ue=K,wd(K)):Ue=null}break t}}tt=0,Dn=null,Io(i,a,b,5);break;case 6:tt=0,Dn=null,Io(i,a,b,6);break;case 8:Hp(),bt=6;break e;default:throw Error(r(462))}}y_();break}catch(ee){p0(i,ee)}while(!0);return fi=ca=null,J.H=c,J.A=y,Xe=l,Ue!==null?0:(lt=null,Fe=0,Vc(),bt)}function y_(){for(;Ue!==null&&!bf();)v0(Ue)}function v0(i){var a=Hb(i.alternate,i,xi);i.memoizedProps=i.pendingProps,a===null?wd(i):Ue=a}function b0(i){var a=i,l=a.alternate;switch(a.tag){case 15:case 0:a=Mb(l,a,a.pendingProps,a.type,void 0,Fe);break;case 11:a=Mb(l,a,a.pendingProps,a.type.render,a.ref,Fe);break;case 5:ip(a);default:Gb(l,a),a=Ue=yv(a,xi),a=Hb(l,a,xi)}i.memoizedProps=i.pendingProps,a===null?wd(i):Ue=a}function Io(i,a,l,c){fi=ca=null,ip(a),mo=null,zl=0;var y=a.return;try{if(s_(i,y,a,l,Fe)){bt=1,od(i,Wn(l,i.current)),Ue=null;return}}catch(b){if(y!==null)throw Ue=y,b;bt=1,od(i,Wn(l,i.current)),Ue=null;return}a.flags&32768?(Be||c===1?i=!0:So||(Fe&536870912)!==0?i=!1:(os=i=!0,(c===2||c===9||c===3||c===6)&&(c=Pn.current,c!==null&&c.tag===13&&(c.flags|=16384))),w0(a,i)):wd(a)}function wd(i){var a=i;do{if((a.flags&32768)!==0){w0(a,os);return}i=a.return;var l=l_(a.alternate,a,xi);if(l!==null){Ue=l;return}if(a=a.sibling,a!==null){Ue=a;return}Ue=a=i}while(a!==null);bt===0&&(bt=5)}function w0(i,a){do{var l=u_(i.alternate,i);if(l!==null){l.flags&=32767,Ue=l;return}if(l=i.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!a&&(i=i.sibling,i!==null)){Ue=i;return}Ue=i=l}while(i!==null);bt=6,Ue=null}function E0(i,a,l,c,y,b,T,k,L){i.cancelPendingCommit=null;do Ed();while(qt!==0);if((Xe&6)!==0)throw Error(r(327));if(a!==null){if(a===i.current)throw Error(r(177));if(b=a.lanes|a.childLanes,b|=Of,Sf(i,l,b,T,k,L),i===lt&&(Ue=lt=null,Fe=0),To=a,cs=i,Ti=l,Vp=b,Fp=y,c0=c,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,E_(qi,function(){return I0(),null})):(i.callbackNode=null,i.callbackPriority=0),c=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||c){c=J.T,J.T=null,y=le.p,le.p=2,T=Xe,Xe|=4;try{c_(i,a,l)}finally{Xe=T,le.p=y,J.T=c}}qt=1,S0(),x0(),T0()}}function S0(){if(qt===1){qt=0;var i=cs,a=To,l=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||l){l=J.T,J.T=null;var c=le.p;le.p=2;var y=Xe;Xe|=4;try{n0(a,i);var b=tm,T=lv(i.containerInfo),k=b.focusedElem,L=b.selectionRange;if(T!==k&&k&&k.ownerDocument&&ov(k.ownerDocument.documentElement,k)){if(L!==null&&If(k)){var K=L.start,ee=L.end;if(ee===void 0&&(ee=K),"selectionStart"in k)k.selectionStart=K,k.selectionEnd=Math.min(ee,k.value.length);else{var se=k.ownerDocument||document,Y=se&&se.defaultView||window;if(Y.getSelection){var Z=Y.getSelection(),ye=k.textContent.length,Se=Math.min(L.start,ye),ot=L.end===void 0?Se:Math.min(L.end,ye);!Z.extend&&Se>ot&&(T=ot,ot=Se,Se=T);var G=av(k,Se),V=av(k,ot);if(G&&V&&(Z.rangeCount!==1||Z.anchorNode!==G.node||Z.anchorOffset!==G.offset||Z.focusNode!==V.node||Z.focusOffset!==V.offset)){var W=se.createRange();W.setStart(G.node,G.offset),Z.removeAllRanges(),Se>ot?(Z.addRange(W),Z.extend(V.node,V.offset)):(W.setEnd(V.node,V.offset),Z.addRange(W))}}}}for(se=[],Z=k;Z=Z.parentNode;)Z.nodeType===1&&se.push({element:Z,left:Z.scrollLeft,top:Z.scrollTop});for(typeof k.focus=="function"&&k.focus(),k=0;k<se.length;k++){var te=se[k];te.element.scrollLeft=te.left,te.element.scrollTop=te.top}}Rd=!!em,tm=em=null}finally{Xe=y,le.p=c,J.T=l}}i.current=a,qt=2}}function x0(){if(qt===2){qt=0;var i=cs,a=To,l=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||l){l=J.T,J.T=null;var c=le.p;le.p=2;var y=Xe;Xe|=4;try{Xb(i,a.alternate,a)}finally{Xe=y,le.p=c,J.T=l}}qt=3}}function T0(){if(qt===4||qt===3){qt=0,dc();var i=cs,a=To,l=Ti,c=c0;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?qt=5:(qt=0,To=cs=null,C0(i,i.pendingLanes));var y=i.pendingLanes;if(y===0&&(us=null),ai(l),a=a.stateNode,Jt&&typeof Jt.onCommitFiberRoot=="function")try{Jt.onCommitFiberRoot(sr,a,void 0,(a.current.flags&128)===128)}catch{}if(c!==null){a=J.T,y=le.p,le.p=2,J.T=null;try{for(var b=i.onRecoverableError,T=0;T<c.length;T++){var k=c[T];b(k.value,{componentStack:k.stack})}}finally{J.T=a,le.p=y}}(Ti&3)!==0&&Ed(),Kr(i),y=i.pendingLanes,(l&261930)!==0&&(y&42)!==0?i===qp?au++:(au=0,qp=i):au=0,ou(0)}}function C0(i,a){(i.pooledCacheLanes&=a)===0&&(a=i.pooledCache,a!=null&&(i.pooledCache=null,ql(a)))}function Ed(){return S0(),x0(),T0(),I0()}function I0(){if(qt!==5)return!1;var i=cs,a=Vp;Vp=0;var l=ai(Ti),c=J.T,y=le.p;try{le.p=32>l?32:l,J.T=null,l=Fp,Fp=null;var b=cs,T=Ti;if(qt=0,To=cs=null,Ti=0,(Xe&6)!==0)throw Error(r(331));var k=Xe;if(Xe|=4,o0(b.current),i0(b,b.current,T,l),Xe=k,ou(0,!1),Jt&&typeof Jt.onPostCommitFiberRoot=="function")try{Jt.onPostCommitFiberRoot(sr,b)}catch{}return!0}finally{le.p=y,J.T=c,C0(i,a)}}function k0(i,a,l){a=Wn(l,a),a=bp(i.stateNode,a,2),i=rs(i,a,2),i!==null&&(Ws(i,2),Kr(i))}function nt(i,a,l){if(i.tag===3)k0(i,i,l);else for(;a!==null;){if(a.tag===3){k0(a,i,l);break}else if(a.tag===1){var c=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(us===null||!us.has(c))){i=Wn(l,i),l=_b(2),c=rs(a,l,2),c!==null&&(Nb(l,c,a,i),Ws(c,2),Kr(c));break}}a=a.return}}function Gp(i,a,l){var c=i.pingCache;if(c===null){c=i.pingCache=new f_;var y=new Set;c.set(a,y)}else y=c.get(a),y===void 0&&(y=new Set,c.set(a,y));y.has(l)||(Mp=!0,y.add(l),i=v_.bind(null,i,a,l),a.then(i,i))}function v_(i,a,l){var c=i.pingCache;c!==null&&c.delete(a),i.pingedLanes|=i.suspendedLanes&l,i.warmLanes&=~l,lt===i&&(Fe&l)===l&&(bt===4||bt===3&&(Fe&62914560)===Fe&&300>hn()-md?(Xe&2)===0&&Co(i,0):Lp|=l,xo===Fe&&(xo=0)),Kr(i)}function _0(i,a){a===0&&(a=yc()),i=oa(i,a),i!==null&&(Ws(i,a),Kr(i))}function b_(i){var a=i.memoizedState,l=0;a!==null&&(l=a.retryLane),_0(i,l)}function w_(i,a){var l=0;switch(i.tag){case 31:case 13:var c=i.stateNode,y=i.memoizedState;y!==null&&(l=y.retryLane);break;case 19:c=i.stateNode;break;case 22:c=i.stateNode._retryCache;break;default:throw Error(r(314))}c!==null&&c.delete(a),_0(i,l)}function E_(i,a){return Ft(i,a)}var Sd=null,ko=null,Bp=!1,xd=!1,$p=!1,hs=0;function Kr(i){i!==ko&&i.next===null&&(ko===null?Sd=ko=i:ko=ko.next=i),xd=!0,Bp||(Bp=!0,x_())}function ou(i,a){if(!$p&&xd){$p=!0;do for(var l=!1,c=Sd;c!==null;){if(i!==0){var y=c.pendingLanes;if(y===0)var b=0;else{var T=c.suspendedLanes,k=c.pingedLanes;b=(1<<31-wt(42|i)+1)-1,b&=y&~(T&~k),b=b&201326741?b&201326741|1:b?b|2:0}b!==0&&(l=!0,P0(c,b))}else b=Fe,b=Or(c,c===lt?b:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(b&3)===0||ar(c,b)||(l=!0,P0(c,b));c=c.next}while(l);$p=!1}}function S_(){N0()}function N0(){xd=Bp=!1;var i=0;hs!==0&&R_()&&(i=hs);for(var a=hn(),l=null,c=Sd;c!==null;){var y=c.next,b=A0(c,a);b===0?(c.next=null,l===null?Sd=y:l.next=y,y===null&&(ko=l)):(l=c,(i!==0||(b&3)!==0)&&(xd=!0)),c=y}qt!==0&&qt!==5||ou(i),hs!==0&&(hs=0)}function A0(i,a){for(var l=i.suspendedLanes,c=i.pingedLanes,y=i.expirationTimes,b=i.pendingLanes&-62914561;0<b;){var T=31-wt(b),k=1<<T,L=y[T];L===-1?((k&l)===0||(k&c)!==0)&&(y[T]=Ef(k,a)):L<=a&&(i.expiredLanes|=k),b&=~k}if(a=lt,l=Fe,l=Or(i,i===a?l:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),c=i.callbackNode,l===0||i===a&&(tt===2||tt===9)||i.cancelPendingCommit!==null)return c!==null&&c!==null&&Fi(c),i.callbackNode=null,i.callbackPriority=0;if((l&3)===0||ar(i,l)){if(a=l&-l,a===i.callbackPriority)return a;switch(c!==null&&Fi(c),ai(l)){case 2:case 8:l=yl;break;case 32:l=qi;break;case 268435456:l=hc;break;default:l=qi}return c=O0.bind(null,i),l=Ft(l,c),i.callbackPriority=a,i.callbackNode=l,a}return c!==null&&c!==null&&Fi(c),i.callbackPriority=2,i.callbackNode=null,2}function O0(i,a){if(qt!==0&&qt!==5)return i.callbackNode=null,i.callbackPriority=0,null;var l=i.callbackNode;if(Ed()&&i.callbackNode!==l)return null;var c=Fe;return c=Or(i,i===lt?c:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),c===0?null:(h0(i,c,a),A0(i,hn()),i.callbackNode!=null&&i.callbackNode===l?O0.bind(null,i):null)}function P0(i,a){if(Ed())return null;h0(i,a,!0)}function x_(){j_(function(){(Xe&6)!==0?Ft(gl,S_):N0()})}function Wp(){if(hs===0){var i=ho;i===0&&(i=Nr,Nr<<=1,(Nr&261888)===0&&(Nr=256)),hs=i}return hs}function R0(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Ya(""+i)}function D0(i,a){var l=a.ownerDocument.createElement("input");return l.name=a.name,l.value=a.value,i.id&&l.setAttribute("form",i.id),a.parentNode.insertBefore(l,a),i=new FormData(i),l.parentNode.removeChild(l),i}function T_(i,a,l,c,y){if(a==="submit"&&l&&l.stateNode===y){var b=R0((y[Gt]||null).action),T=c.submitter;T&&(a=(a=T[Gt]||null)?R0(a.formAction):T.getAttribute("formAction"),a!==null&&(b=a,T=null));var k=new Hr("action","action",null,c,y);i.push({event:k,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(hs!==0){var L=T?D0(y,T):new FormData(y);fp(l,{pending:!0,data:L,method:y.method,action:b},null,L)}}else typeof b=="function"&&(k.preventDefault(),L=T?D0(y,T):new FormData(y),fp(l,{pending:!0,data:L,method:y.method,action:b},b,L))},currentTarget:y}]})}}for(var Kp=0;Kp<Af.length;Kp++){var Jp=Af[Kp],C_=Jp.toLowerCase(),I_=Jp[0].toUpperCase()+Jp.slice(1);pr(C_,"on"+I_)}pr(dv,"onAnimationEnd"),pr(hv,"onAnimationIteration"),pr(fv,"onAnimationStart"),pr("dblclick","onDoubleClick"),pr("focusin","onFocus"),pr("focusout","onBlur"),pr(Hk,"onTransitionRun"),pr(zk,"onTransitionStart"),pr(Gk,"onTransitionCancel"),pr(pv,"onTransitionEnd"),Ur("onMouseEnter",["mouseout","mouseover"]),Ur("onMouseLeave",["mouseout","mouseover"]),Ur("onPointerEnter",["pointerout","pointerover"]),Ur("onPointerLeave",["pointerout","pointerover"]),Lr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Lr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Lr("onBeforeInput",["compositionend","keypress","textInput","paste"]),Lr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Lr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Lr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),k_=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(lu));function j0(i,a){a=(a&4)!==0;for(var l=0;l<i.length;l++){var c=i[l],y=c.event;c=c.listeners;e:{var b=void 0;if(a)for(var T=c.length-1;0<=T;T--){var k=c[T],L=k.instance,K=k.currentTarget;if(k=k.listener,L!==b&&y.isPropagationStopped())break e;b=k,y.currentTarget=K;try{b(y)}catch(ee){Uc(ee)}y.currentTarget=null,b=L}else for(T=0;T<c.length;T++){if(k=c[T],L=k.instance,K=k.currentTarget,k=k.listener,L!==b&&y.isPropagationStopped())break e;b=k,y.currentTarget=K;try{b(y)}catch(ee){Uc(ee)}y.currentTarget=null,b=L}}}}function Ve(i,a){var l=a[Ba];l===void 0&&(l=a[Ba]=new Set);var c=i+"__bubble";l.has(c)||(M0(a,i,2,!1),l.add(c))}function Yp(i,a,l){var c=0;a&&(c|=4),M0(l,i,c,a)}var Td="_reactListening"+Math.random().toString(36).slice(2);function Xp(i){if(!i[Td]){i[Td]=!0,wl.forEach(function(l){l!=="selectionchange"&&(k_.has(l)||Yp(l,!1,i),Yp(l,!0,i))});var a=i.nodeType===9?i:i.ownerDocument;a===null||a[Td]||(a[Td]=!0,Yp("selectionchange",!1,a))}}function M0(i,a,l,c){switch(dw(a)){case 2:var y=tN;break;case 8:y=nN;break;default:y=hm}l=y.bind(null,a,l,i),y=void 0,!Zs||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(y=!0),c?y!==void 0?i.addEventListener(a,l,{capture:!0,passive:y}):i.addEventListener(a,l,!0):y!==void 0?i.addEventListener(a,l,{passive:y}):i.addEventListener(a,l,!1)}function Qp(i,a,l,c,y){var b=c;if((a&1)===0&&(a&2)===0&&c!==null)e:for(;;){if(c===null)return;var T=c.tag;if(T===3||T===4){var k=c.stateNode.containerInfo;if(k===y)break;if(T===4)for(T=c.return;T!==null;){var L=T.tag;if((L===3||L===4)&&T.stateNode.containerInfo===y)return;T=T.return}for(;k!==null;){if(T=jr(k),T===null)return;if(L=T.tag,L===5||L===6||L===26||L===27){c=b=T;continue e}k=k.parentNode}}c=c.return}Wi(function(){var K=b,ee=zn(l),se=[];e:{var Y=mv.get(i);if(Y!==void 0){var Z=Hr,ye=i;switch(i){case"keypress":if(ta(l)===0)break e;case"keydown":case"keyup":Z=jc;break;case"focusin":ye="focus",Z=ra;break;case"focusout":ye="blur",Z=ra;break;case"beforeblur":case"afterblur":Z=ra;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Z=Rl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Z=Ic;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Z=x;break;case dv:case hv:case fv:Z=_c;break;case pv:Z=_;break;case"scroll":case"scrollend":Z=Pl;break;case"wheel":Z=Q;break;case"copy":case"cut":case"paste":Z=Nc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Z=ui;break;case"toggle":case"beforetoggle":Z=je}var Se=(a&4)!==0,ot=!Se&&(i==="scroll"||i==="scrollend"),G=Se?Y!==null?Y+"Capture":null:Y;Se=[];for(var V=K,W;V!==null;){var te=V;if(W=te.stateNode,te=te.tag,te!==5&&te!==26&&te!==27||W===null||G===null||(te=cr(V,G),te!=null&&Se.push(uu(V,te,W))),ot)break;V=V.return}0<Se.length&&(Y=new Z(Y,ye,null,l,ee),se.push({event:Y,listeners:Se}))}}if((a&7)===0){e:{if(Y=i==="mouseover"||i==="pointerover",Z=i==="mouseout"||i==="pointerout",Y&&l!==Nl&&(ye=l.relatedTarget||l.fromElement)&&(jr(ye)||ye[Rr]))break e;if((Z||Y)&&(Y=ee.window===ee?ee:(Y=ee.ownerDocument)?Y.defaultView||Y.parentWindow:window,Z?(ye=l.relatedTarget||l.toElement,Z=K,ye=ye?jr(ye):null,ye!==null&&(ot=o(ye),Se=ye.tag,ye!==ot||Se!==5&&Se!==27&&Se!==6)&&(ye=null)):(Z=null,ye=K),Z!==ye)){if(Se=Rl,te="onMouseLeave",G="onMouseEnter",V="mouse",(i==="pointerout"||i==="pointerover")&&(Se=ui,te="onPointerLeave",G="onPointerEnter",V="pointer"),ot=Z==null?Y:kn(Z),W=ye==null?Y:kn(ye),Y=new Se(te,V+"leave",Z,l,ee),Y.target=ot,Y.relatedTarget=W,te=null,jr(ee)===K&&(Se=new Se(G,V+"enter",ye,l,ee),Se.target=W,Se.relatedTarget=ot,te=Se),ot=te,Z&&ye)t:{for(Se=__,G=Z,V=ye,W=0,te=G;te;te=Se(te))W++;te=0;for(var we=V;we;we=Se(we))te++;for(;0<W-te;)G=Se(G),W--;for(;0<te-W;)V=Se(V),te--;for(;W--;){if(G===V||V!==null&&G===V.alternate){Se=G;break t}G=Se(G),V=Se(V)}Se=null}else Se=null;Z!==null&&L0(se,Y,Z,Se,!1),ye!==null&&ot!==null&&L0(se,ot,ye,Se,!0)}}e:{if(Y=K?kn(K):window,Z=Y.nodeName&&Y.nodeName.toLowerCase(),Z==="select"||Z==="input"&&Y.type==="file")var Ke=ev;else if(Qy(Y))if(tv)Ke=Vk;else{Ke=Lk;var ve=Mk}else Z=Y.nodeName,!Z||Z.toLowerCase()!=="input"||Y.type!=="checkbox"&&Y.type!=="radio"?K&&Ja(K.elementType)&&(Ke=ev):Ke=Uk;if(Ke&&(Ke=Ke(i,K))){Zy(se,Ke,l,ee);break e}ve&&ve(i,Y,K),i==="focusout"&&K&&Y.type==="number"&&K.memoizedProps.value!=null&&Il(Y,"number",Y.value)}switch(ve=K?kn(K):window,i){case"focusin":(Qy(ve)||ve.contentEditable==="true")&&(ro=ve,kf=K,Ul=null);break;case"focusout":Ul=kf=ro=null;break;case"mousedown":_f=!0;break;case"contextmenu":case"mouseup":case"dragend":_f=!1,uv(se,l,ee);break;case"selectionchange":if(qk)break;case"keydown":case"keyup":uv(se,l,ee)}var Me;if(et)e:{switch(i){case"compositionstart":var qe="onCompositionStart";break e;case"compositionend":qe="onCompositionEnd";break e;case"compositionupdate":qe="onCompositionUpdate";break e}qe=void 0}else no?ia(i,l)&&(qe="onCompositionEnd"):i==="keydown"&&l.keyCode===229&&(qe="onCompositionStart");qe&&(ci&&l.locale!=="ko"&&(no||qe!=="onCompositionStart"?qe==="onCompositionEnd"&&no&&(Me=Ol()):(qr=ee,Al="value"in qr?qr.value:qr.textContent,no=!0)),ve=Cd(K,qe),0<ve.length&&(qe=new Gr(qe,i,null,l,ee),se.push({event:qe,listeners:ve}),Me?qe.data=Me:(Me=to(l),Me!==null&&(qe.data=Me)))),(Me=Bn?Pk(i,l):Rk(i,l))&&(qe=Cd(K,"onBeforeInput"),0<qe.length&&(ve=new Gr("onBeforeInput","beforeinput",null,l,ee),se.push({event:ve,listeners:qe}),ve.data=Me)),T_(se,i,K,l,ee)}j0(se,a)})}function uu(i,a,l){return{instance:i,listener:a,currentTarget:l}}function Cd(i,a){for(var l=a+"Capture",c=[];i!==null;){var y=i,b=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||b===null||(y=cr(i,l),y!=null&&c.unshift(uu(i,y,b)),y=cr(i,a),y!=null&&c.push(uu(i,y,b))),i.tag===3)return c;i=i.return}return[]}function __(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function L0(i,a,l,c,y){for(var b=a._reactName,T=[];l!==null&&l!==c;){var k=l,L=k.alternate,K=k.stateNode;if(k=k.tag,L!==null&&L===c)break;k!==5&&k!==26&&k!==27||K===null||(L=K,y?(K=cr(l,b),K!=null&&T.unshift(uu(l,K,L))):y||(K=cr(l,b),K!=null&&T.push(uu(l,K,L)))),l=l.return}T.length!==0&&i.push({event:a,listeners:T})}var N_=/\r\n?/g,A_=/\u0000|\uFFFD/g;function U0(i){return(typeof i=="string"?i:""+i).replace(N_,`
`).replace(A_,"")}function V0(i,a){return a=U0(a),U0(i)===a}function at(i,a,l,c,y,b){switch(l){case"children":typeof c=="string"?a==="body"||a==="textarea"&&c===""||bn(i,c):(typeof c=="number"||typeof c=="bigint")&&a!=="body"&&bn(i,""+c);break;case"className":_n(i,"class",c);break;case"tabIndex":_n(i,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":_n(i,l,c);break;case"style":_l(i,c,b);break;case"data":if(a!=="object"){_n(i,"data",c);break}case"src":case"href":if(c===""&&(a!=="a"||l!=="href")){i.removeAttribute(l);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){i.removeAttribute(l);break}c=Ya(""+c),i.setAttribute(l,c);break;case"action":case"formAction":if(typeof c=="function"){i.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof b=="function"&&(l==="formAction"?(a!=="input"&&at(i,a,"name",y.name,y,null),at(i,a,"formEncType",y.formEncType,y,null),at(i,a,"formMethod",y.formMethod,y,null),at(i,a,"formTarget",y.formTarget,y,null)):(at(i,a,"encType",y.encType,y,null),at(i,a,"method",y.method,y,null),at(i,a,"target",y.target,y,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){i.removeAttribute(l);break}c=Ya(""+c),i.setAttribute(l,c);break;case"onClick":c!=null&&(i.onclick=ur);break;case"onScroll":c!=null&&Ve("scroll",i);break;case"onScrollEnd":c!=null&&Ve("scrollend",i);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(r(61));if(l=c.__html,l!=null){if(y.children!=null)throw Error(r(60));i.innerHTML=l}}break;case"multiple":i.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":i.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){i.removeAttribute("xlink:href");break}l=Ya(""+c),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(l,""+c):i.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(l,""):i.removeAttribute(l);break;case"capture":case"download":c===!0?i.setAttribute(l,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(l,c):i.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?i.setAttribute(l,c):i.removeAttribute(l);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?i.removeAttribute(l):i.setAttribute(l,c);break;case"popover":Ve("beforetoggle",i),Ve("toggle",i),Wa(i,"popover",c);break;case"xlinkActuate":At(i,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":At(i,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":At(i,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":At(i,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":At(i,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":At(i,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":At(i,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":At(i,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":At(i,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Wa(i,"is",c);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=Cc.get(l)||l,Wa(i,l,c))}}function Zp(i,a,l,c,y,b){switch(l){case"style":_l(i,c,b);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(r(61));if(l=c.__html,l!=null){if(y.children!=null)throw Error(r(60));i.innerHTML=l}}break;case"children":typeof c=="string"?bn(i,c):(typeof c=="number"||typeof c=="bigint")&&bn(i,""+c);break;case"onScroll":c!=null&&Ve("scroll",i);break;case"onScrollEnd":c!=null&&Ve("scrollend",i);break;case"onClick":c!=null&&(i.onclick=ur);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!El.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(y=l.endsWith("Capture"),a=l.slice(2,y?l.length-7:void 0),b=i[Gt]||null,b=b!=null?b[l]:null,typeof b=="function"&&i.removeEventListener(a,b,y),typeof c=="function")){typeof b!="function"&&b!==null&&(l in i?i[l]=null:i.hasAttribute(l)&&i.removeAttribute(l)),i.addEventListener(a,c,y);break e}l in i?i[l]=c:c===!0?i.setAttribute(l,""):Wa(i,l,c)}}}function en(i,a,l){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ve("error",i),Ve("load",i);var c=!1,y=!1,b;for(b in l)if(l.hasOwnProperty(b)){var T=l[b];if(T!=null)switch(b){case"src":c=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:at(i,a,b,T,l,null)}}y&&at(i,a,"srcSet",l.srcSet,l,null),c&&at(i,a,"src",l.src,l,null);return;case"input":Ve("invalid",i);var k=b=T=y=null,L=null,K=null;for(c in l)if(l.hasOwnProperty(c)){var ee=l[c];if(ee!=null)switch(c){case"name":y=ee;break;case"type":T=ee;break;case"checked":L=ee;break;case"defaultChecked":K=ee;break;case"value":b=ee;break;case"defaultValue":k=ee;break;case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(r(137,a));break;default:at(i,a,c,ee,l,null)}}Sc(i,b,k,L,K,T,y,!1);return;case"select":Ve("invalid",i),c=T=b=null;for(y in l)if(l.hasOwnProperty(y)&&(k=l[y],k!=null))switch(y){case"value":b=k;break;case"defaultValue":T=k;break;case"multiple":c=k;default:at(i,a,y,k,l,null)}a=b,l=T,i.multiple=!!c,a!=null?zi(i,!!c,a,!1):l!=null&&zi(i,!!c,l,!0);return;case"textarea":Ve("invalid",i),b=y=c=null;for(T in l)if(l.hasOwnProperty(T)&&(k=l[T],k!=null))switch(T){case"value":c=k;break;case"defaultValue":y=k;break;case"children":b=k;break;case"dangerouslySetInnerHTML":if(k!=null)throw Error(r(91));break;default:at(i,a,T,k,l,null)}Gi(i,c,y,b);return;case"option":for(L in l)if(l.hasOwnProperty(L)&&(c=l[L],c!=null))switch(L){case"selected":i.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:at(i,a,L,c,l,null)}return;case"dialog":Ve("beforetoggle",i),Ve("toggle",i),Ve("cancel",i),Ve("close",i);break;case"iframe":case"object":Ve("load",i);break;case"video":case"audio":for(c=0;c<lu.length;c++)Ve(lu[c],i);break;case"image":Ve("error",i),Ve("load",i);break;case"details":Ve("toggle",i);break;case"embed":case"source":case"link":Ve("error",i),Ve("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(K in l)if(l.hasOwnProperty(K)&&(c=l[K],c!=null))switch(K){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:at(i,a,K,c,l,null)}return;default:if(Ja(a)){for(ee in l)l.hasOwnProperty(ee)&&(c=l[ee],c!==void 0&&Zp(i,a,ee,c,l,void 0));return}}for(k in l)l.hasOwnProperty(k)&&(c=l[k],c!=null&&at(i,a,k,c,l,null))}function O_(i,a,l,c){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,b=null,T=null,k=null,L=null,K=null,ee=null;for(Z in l){var se=l[Z];if(l.hasOwnProperty(Z)&&se!=null)switch(Z){case"checked":break;case"value":break;case"defaultValue":L=se;default:c.hasOwnProperty(Z)||at(i,a,Z,null,c,se)}}for(var Y in c){var Z=c[Y];if(se=l[Y],c.hasOwnProperty(Y)&&(Z!=null||se!=null))switch(Y){case"type":b=Z;break;case"name":y=Z;break;case"checked":K=Z;break;case"defaultChecked":ee=Z;break;case"value":T=Z;break;case"defaultValue":k=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(r(137,a));break;default:Z!==se&&at(i,a,Y,Z,c,se)}}Ka(i,T,k,L,K,ee,b,y);return;case"select":Z=T=k=Y=null;for(b in l)if(L=l[b],l.hasOwnProperty(b)&&L!=null)switch(b){case"value":break;case"multiple":Z=L;default:c.hasOwnProperty(b)||at(i,a,b,null,c,L)}for(y in c)if(b=c[y],L=l[y],c.hasOwnProperty(y)&&(b!=null||L!=null))switch(y){case"value":Y=b;break;case"defaultValue":k=b;break;case"multiple":T=b;default:b!==L&&at(i,a,y,b,c,L)}a=k,l=T,c=Z,Y!=null?zi(i,!!l,Y,!1):!!c!=!!l&&(a!=null?zi(i,!!l,a,!0):zi(i,!!l,l?[]:"",!1));return;case"textarea":Z=Y=null;for(k in l)if(y=l[k],l.hasOwnProperty(k)&&y!=null&&!c.hasOwnProperty(k))switch(k){case"value":break;case"children":break;default:at(i,a,k,null,c,y)}for(T in c)if(y=c[T],b=l[T],c.hasOwnProperty(T)&&(y!=null||b!=null))switch(T){case"value":Y=y;break;case"defaultValue":Z=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(r(91));break;default:y!==b&&at(i,a,T,y,c,b)}xc(i,Y,Z);return;case"option":for(var ye in l)if(Y=l[ye],l.hasOwnProperty(ye)&&Y!=null&&!c.hasOwnProperty(ye))switch(ye){case"selected":i.selected=!1;break;default:at(i,a,ye,null,c,Y)}for(L in c)if(Y=c[L],Z=l[L],c.hasOwnProperty(L)&&Y!==Z&&(Y!=null||Z!=null))switch(L){case"selected":i.selected=Y&&typeof Y!="function"&&typeof Y!="symbol";break;default:at(i,a,L,Y,c,Z)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Se in l)Y=l[Se],l.hasOwnProperty(Se)&&Y!=null&&!c.hasOwnProperty(Se)&&at(i,a,Se,null,c,Y);for(K in c)if(Y=c[K],Z=l[K],c.hasOwnProperty(K)&&Y!==Z&&(Y!=null||Z!=null))switch(K){case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(r(137,a));break;default:at(i,a,K,Y,c,Z)}return;default:if(Ja(a)){for(var ot in l)Y=l[ot],l.hasOwnProperty(ot)&&Y!==void 0&&!c.hasOwnProperty(ot)&&Zp(i,a,ot,void 0,c,Y);for(ee in c)Y=c[ee],Z=l[ee],!c.hasOwnProperty(ee)||Y===Z||Y===void 0&&Z===void 0||Zp(i,a,ee,Y,c,Z);return}}for(var G in l)Y=l[G],l.hasOwnProperty(G)&&Y!=null&&!c.hasOwnProperty(G)&&at(i,a,G,null,c,Y);for(se in c)Y=c[se],Z=l[se],!c.hasOwnProperty(se)||Y===Z||Y==null&&Z==null||at(i,a,se,Y,c,Z)}function F0(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function P_(){if(typeof performance.getEntriesByType=="function"){for(var i=0,a=0,l=performance.getEntriesByType("resource"),c=0;c<l.length;c++){var y=l[c],b=y.transferSize,T=y.initiatorType,k=y.duration;if(b&&k&&F0(T)){for(T=0,k=y.responseEnd,c+=1;c<l.length;c++){var L=l[c],K=L.startTime;if(K>k)break;var ee=L.transferSize,se=L.initiatorType;ee&&F0(se)&&(L=L.responseEnd,T+=ee*(L<k?1:(k-K)/(L-K)))}if(--c,a+=8*(b+T)/(y.duration/1e3),i++,10<i)break}}if(0<i)return a/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var em=null,tm=null;function Id(i){return i.nodeType===9?i:i.ownerDocument}function q0(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function H0(i,a){if(i===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&a==="foreignObject"?0:i}function nm(i,a){return i==="textarea"||i==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var rm=null;function R_(){var i=window.event;return i&&i.type==="popstate"?i===rm?!1:(rm=i,!0):(rm=null,!1)}var z0=typeof setTimeout=="function"?setTimeout:void 0,D_=typeof clearTimeout=="function"?clearTimeout:void 0,G0=typeof Promise=="function"?Promise:void 0,j_=typeof queueMicrotask=="function"?queueMicrotask:typeof G0<"u"?function(i){return G0.resolve(null).then(i).catch(M_)}:z0;function M_(i){setTimeout(function(){throw i})}function fs(i){return i==="head"}function B0(i,a){var l=a,c=0;do{var y=l.nextSibling;if(i.removeChild(l),y&&y.nodeType===8)if(l=y.data,l==="/$"||l==="/&"){if(c===0){i.removeChild(y),Oo(a);return}c--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")c++;else if(l==="html")cu(i.ownerDocument.documentElement);else if(l==="head"){l=i.ownerDocument.head,cu(l);for(var b=l.firstChild;b;){var T=b.nextSibling,k=b.nodeName;b[Dr]||k==="SCRIPT"||k==="STYLE"||k==="LINK"&&b.rel.toLowerCase()==="stylesheet"||l.removeChild(b),b=T}}else l==="body"&&cu(i.ownerDocument.body);l=y}while(l);Oo(a)}function $0(i,a){var l=i;i=0;do{var c=l.nextSibling;if(l.nodeType===1?a?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(a?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),c&&c.nodeType===8)if(l=c.data,l==="/$"){if(i===0)break;i--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||i++;l=c}while(l)}function im(i){var a=i.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var l=a;switch(a=a.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":im(l),$a(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}i.removeChild(l)}}function L_(i,a,l,c){for(;i.nodeType===1;){var y=l;if(i.nodeName.toLowerCase()!==a.toLowerCase()){if(!c&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(c){if(!i[Dr])switch(a){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(b=i.getAttribute("rel"),b==="stylesheet"&&i.hasAttribute("data-precedence")||b!==y.rel||i.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||i.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||i.getAttribute("title")!==(y.title==null?null:y.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(b=i.getAttribute("src"),(b!==(y.src==null?null:y.src)||i.getAttribute("type")!==(y.type==null?null:y.type)||i.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&b&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(a==="input"&&i.type==="hidden"){var b=y.name==null?null:""+y.name;if(y.type==="hidden"&&i.getAttribute("name")===b)return i}else return i;if(i=Xn(i.nextSibling),i===null)break}return null}function U_(i,a,l){if(a==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!l||(i=Xn(i.nextSibling),i===null))return null;return i}function W0(i,a){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!a||(i=Xn(i.nextSibling),i===null))return null;return i}function sm(i){return i.data==="$?"||i.data==="$~"}function am(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function V_(i,a){var l=i.ownerDocument;if(i.data==="$~")i._reactRetry=a;else if(i.data!=="$?"||l.readyState!=="loading")a();else{var c=function(){a(),l.removeEventListener("DOMContentLoaded",c)};l.addEventListener("DOMContentLoaded",c),i._reactRetry=c}}function Xn(i){for(;i!=null;i=i.nextSibling){var a=i.nodeType;if(a===1||a===3)break;if(a===8){if(a=i.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return i}var om=null;function K0(i){i=i.nextSibling;for(var a=0;i;){if(i.nodeType===8){var l=i.data;if(l==="/$"||l==="/&"){if(a===0)return Xn(i.nextSibling);a--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||a++}i=i.nextSibling}return null}function J0(i){i=i.previousSibling;for(var a=0;i;){if(i.nodeType===8){var l=i.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(a===0)return i;a--}else l!=="/$"&&l!=="/&"||a++}i=i.previousSibling}return null}function Y0(i,a,l){switch(a=Id(l),i){case"html":if(i=a.documentElement,!i)throw Error(r(452));return i;case"head":if(i=a.head,!i)throw Error(r(453));return i;case"body":if(i=a.body,!i)throw Error(r(454));return i;default:throw Error(r(451))}}function cu(i){for(var a=i.attributes;a.length;)i.removeAttributeNode(a[0]);$a(i)}var Qn=new Map,X0=new Set;function kd(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var Ci=le.d;le.d={f:F_,r:q_,D:H_,C:z_,L:G_,m:B_,X:W_,S:$_,M:K_};function F_(){var i=Ci.f(),a=vd();return i||a}function q_(i){var a=Hn(i);a!==null&&a.tag===5&&a.type==="form"?pb(a):Ci.r(i)}var _o=typeof document>"u"?null:document;function Q0(i,a,l){var c=_o;if(c&&typeof a=="string"&&a){var y=Nn(a);y='link[rel="'+i+'"][href="'+y+'"]',typeof l=="string"&&(y+='[crossorigin="'+l+'"]'),X0.has(y)||(X0.add(y),i={rel:i,crossOrigin:l,href:a},c.querySelector(y)===null&&(a=c.createElement("link"),en(a,"link",i),Nt(a),c.head.appendChild(a)))}}function H_(i){Ci.D(i),Q0("dns-prefetch",i,null)}function z_(i,a){Ci.C(i,a),Q0("preconnect",i,a)}function G_(i,a,l){Ci.L(i,a,l);var c=_o;if(c&&i&&a){var y='link[rel="preload"][as="'+Nn(a)+'"]';a==="image"&&l&&l.imageSrcSet?(y+='[imagesrcset="'+Nn(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(y+='[imagesizes="'+Nn(l.imageSizes)+'"]')):y+='[href="'+Nn(i)+'"]';var b=y;switch(a){case"style":b=No(i);break;case"script":b=Ao(i)}Qn.has(b)||(i=w({rel:"preload",href:a==="image"&&l&&l.imageSrcSet?void 0:i,as:a},l),Qn.set(b,i),c.querySelector(y)!==null||a==="style"&&c.querySelector(du(b))||a==="script"&&c.querySelector(hu(b))||(a=c.createElement("link"),en(a,"link",i),Nt(a),c.head.appendChild(a)))}}function B_(i,a){Ci.m(i,a);var l=_o;if(l&&i){var c=a&&typeof a.as=="string"?a.as:"script",y='link[rel="modulepreload"][as="'+Nn(c)+'"][href="'+Nn(i)+'"]',b=y;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":b=Ao(i)}if(!Qn.has(b)&&(i=w({rel:"modulepreload",href:i},a),Qn.set(b,i),l.querySelector(y)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(hu(b)))return}c=l.createElement("link"),en(c,"link",i),Nt(c),l.head.appendChild(c)}}}function $_(i,a,l){Ci.S(i,a,l);var c=_o;if(c&&i){var y=Mr(c).hoistableStyles,b=No(i);a=a||"default";var T=y.get(b);if(!T){var k={loading:0,preload:null};if(T=c.querySelector(du(b)))k.loading=5;else{i=w({rel:"stylesheet",href:i,"data-precedence":a},l),(l=Qn.get(b))&&lm(i,l);var L=T=c.createElement("link");Nt(L),en(L,"link",i),L._p=new Promise(function(K,ee){L.onload=K,L.onerror=ee}),L.addEventListener("load",function(){k.loading|=1}),L.addEventListener("error",function(){k.loading|=2}),k.loading|=4,_d(T,a,c)}T={type:"stylesheet",instance:T,count:1,state:k},y.set(b,T)}}}function W_(i,a){Ci.X(i,a);var l=_o;if(l&&i){var c=Mr(l).hoistableScripts,y=Ao(i),b=c.get(y);b||(b=l.querySelector(hu(y)),b||(i=w({src:i,async:!0},a),(a=Qn.get(y))&&um(i,a),b=l.createElement("script"),Nt(b),en(b,"link",i),l.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},c.set(y,b))}}function K_(i,a){Ci.M(i,a);var l=_o;if(l&&i){var c=Mr(l).hoistableScripts,y=Ao(i),b=c.get(y);b||(b=l.querySelector(hu(y)),b||(i=w({src:i,async:!0,type:"module"},a),(a=Qn.get(y))&&um(i,a),b=l.createElement("script"),Nt(b),en(b,"link",i),l.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},c.set(y,b))}}function Z0(i,a,l,c){var y=(y=De.current)?kd(y):null;if(!y)throw Error(r(446));switch(i){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(a=No(l.href),l=Mr(y).hoistableStyles,c=l.get(a),c||(c={type:"style",instance:null,count:0,state:null},l.set(a,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){i=No(l.href);var b=Mr(y).hoistableStyles,T=b.get(i);if(T||(y=y.ownerDocument||y,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},b.set(i,T),(b=y.querySelector(du(i)))&&!b._p&&(T.instance=b,T.state.loading=5),Qn.has(i)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Qn.set(i,l),b||J_(y,i,l,T.state))),a&&c===null)throw Error(r(528,""));return T}if(a&&c!==null)throw Error(r(529,""));return null;case"script":return a=l.async,l=l.src,typeof l=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Ao(l),l=Mr(y).hoistableScripts,c=l.get(a),c||(c={type:"script",instance:null,count:0,state:null},l.set(a,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,i))}}function No(i){return'href="'+Nn(i)+'"'}function du(i){return'link[rel="stylesheet"]['+i+"]"}function ew(i){return w({},i,{"data-precedence":i.precedence,precedence:null})}function J_(i,a,l,c){i.querySelector('link[rel="preload"][as="style"]['+a+"]")?c.loading=1:(a=i.createElement("link"),c.preload=a,a.addEventListener("load",function(){return c.loading|=1}),a.addEventListener("error",function(){return c.loading|=2}),en(a,"link",l),Nt(a),i.head.appendChild(a))}function Ao(i){return'[src="'+Nn(i)+'"]'}function hu(i){return"script[async]"+i}function tw(i,a,l){if(a.count++,a.instance===null)switch(a.type){case"style":var c=i.querySelector('style[data-href~="'+Nn(l.href)+'"]');if(c)return a.instance=c,Nt(c),c;var y=w({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return c=(i.ownerDocument||i).createElement("style"),Nt(c),en(c,"style",y),_d(c,l.precedence,i),a.instance=c;case"stylesheet":y=No(l.href);var b=i.querySelector(du(y));if(b)return a.state.loading|=4,a.instance=b,Nt(b),b;c=ew(l),(y=Qn.get(y))&&lm(c,y),b=(i.ownerDocument||i).createElement("link"),Nt(b);var T=b;return T._p=new Promise(function(k,L){T.onload=k,T.onerror=L}),en(b,"link",c),a.state.loading|=4,_d(b,l.precedence,i),a.instance=b;case"script":return b=Ao(l.src),(y=i.querySelector(hu(b)))?(a.instance=y,Nt(y),y):(c=l,(y=Qn.get(b))&&(c=w({},l),um(c,y)),i=i.ownerDocument||i,y=i.createElement("script"),Nt(y),en(y,"link",c),i.head.appendChild(y),a.instance=y);case"void":return null;default:throw Error(r(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(c=a.instance,a.state.loading|=4,_d(c,l.precedence,i));return a.instance}function _d(i,a,l){for(var c=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=c.length?c[c.length-1]:null,b=y,T=0;T<c.length;T++){var k=c[T];if(k.dataset.precedence===a)b=k;else if(b!==y)break}b?b.parentNode.insertBefore(i,b.nextSibling):(a=l.nodeType===9?l.head:l,a.insertBefore(i,a.firstChild))}function lm(i,a){i.crossOrigin==null&&(i.crossOrigin=a.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=a.referrerPolicy),i.title==null&&(i.title=a.title)}function um(i,a){i.crossOrigin==null&&(i.crossOrigin=a.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=a.referrerPolicy),i.integrity==null&&(i.integrity=a.integrity)}var Nd=null;function nw(i,a,l){if(Nd===null){var c=new Map,y=Nd=new Map;y.set(l,c)}else y=Nd,c=y.get(l),c||(c=new Map,y.set(l,c));if(c.has(i))return c;for(c.set(i,null),l=l.getElementsByTagName(i),y=0;y<l.length;y++){var b=l[y];if(!(b[Dr]||b[_t]||i==="link"&&b.getAttribute("rel")==="stylesheet")&&b.namespaceURI!=="http://www.w3.org/2000/svg"){var T=b.getAttribute(a)||"";T=i+T;var k=c.get(T);k?k.push(b):c.set(T,[b])}}return c}function rw(i,a,l){i=i.ownerDocument||i,i.head.insertBefore(l,a==="title"?i.querySelector("head > title"):null)}function Y_(i,a,l){if(l===1||a.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return i=a.disabled,typeof a.precedence=="string"&&i==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function iw(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function X_(i,a,l,c){if(l.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var y=No(c.href),b=a.querySelector(du(y));if(b){a=b._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(i.count++,i=Ad.bind(i),a.then(i,i)),l.state.loading|=4,l.instance=b,Nt(b);return}b=a.ownerDocument||a,c=ew(c),(y=Qn.get(y))&&lm(c,y),b=b.createElement("link"),Nt(b);var T=b;T._p=new Promise(function(k,L){T.onload=k,T.onerror=L}),en(b,"link",c),l.instance=b}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(l,a),(a=l.state.preload)&&(l.state.loading&3)===0&&(i.count++,l=Ad.bind(i),a.addEventListener("load",l),a.addEventListener("error",l))}}var cm=0;function Q_(i,a){return i.stylesheets&&i.count===0&&Pd(i,i.stylesheets),0<i.count||0<i.imgCount?function(l){var c=setTimeout(function(){if(i.stylesheets&&Pd(i,i.stylesheets),i.unsuspend){var b=i.unsuspend;i.unsuspend=null,b()}},6e4+a);0<i.imgBytes&&cm===0&&(cm=62500*P_());var y=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&Pd(i,i.stylesheets),i.unsuspend)){var b=i.unsuspend;i.unsuspend=null,b()}},(i.imgBytes>cm?50:800)+a);return i.unsuspend=l,function(){i.unsuspend=null,clearTimeout(c),clearTimeout(y)}}:null}function Ad(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Pd(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Od=null;function Pd(i,a){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Od=new Map,a.forEach(Z_,i),Od=null,Ad.call(i))}function Z_(i,a){if(!(a.state.loading&4)){var l=Od.get(i);if(l)var c=l.get(null);else{l=new Map,Od.set(i,l);for(var y=i.querySelectorAll("link[data-precedence],style[data-precedence]"),b=0;b<y.length;b++){var T=y[b];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(l.set(T.dataset.precedence,T),c=T)}c&&l.set(null,c)}y=a.instance,T=y.getAttribute("data-precedence"),b=l.get(T)||c,b===c&&l.set(null,y),l.set(T,y),this.count++,c=Ad.bind(this),y.addEventListener("load",c),y.addEventListener("error",c),b?b.parentNode.insertBefore(y,b.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(y,i.firstChild)),a.state.loading|=4}}var fu={$$typeof:B,Provider:null,Consumer:null,_currentValue:be,_currentValue2:be,_threadCount:0};function eN(i,a,l,c,y,b,T,k,L){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Pr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Pr(0),this.hiddenUpdates=Pr(null),this.identifierPrefix=c,this.onUncaughtError=y,this.onCaughtError=b,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=L,this.incompleteTransitions=new Map}function sw(i,a,l,c,y,b,T,k,L,K,ee,se){return i=new eN(i,a,l,T,L,K,ee,se,k),a=1,b===!0&&(a|=24),b=On(3,null,null,a),i.current=b,b.stateNode=i,a=zf(),a.refCount++,i.pooledCache=a,a.refCount++,b.memoizedState={element:c,isDehydrated:l,cache:a},Wf(b),i}function aw(i){return i?(i=ao,i):ao}function ow(i,a,l,c,y,b){y=aw(y),c.context===null?c.context=y:c.pendingContext=y,c=ns(a),c.payload={element:l},b=b===void 0?null:b,b!==null&&(c.callback=b),l=rs(i,c,a),l!==null&&(Tn(l,i,a),Bl(l,i,a))}function lw(i,a){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var l=i.retryLane;i.retryLane=l!==0&&l<a?l:a}}function dm(i,a){lw(i,a),(i=i.alternate)&&lw(i,a)}function uw(i){if(i.tag===13||i.tag===31){var a=oa(i,67108864);a!==null&&Tn(a,i,67108864),dm(i,67108864)}}function cw(i){if(i.tag===13||i.tag===31){var a=Mn();a=Js(a);var l=oa(i,a);l!==null&&Tn(l,i,a),dm(i,a)}}var Rd=!0;function tN(i,a,l,c){var y=J.T;J.T=null;var b=le.p;try{le.p=2,hm(i,a,l,c)}finally{le.p=b,J.T=y}}function nN(i,a,l,c){var y=J.T;J.T=null;var b=le.p;try{le.p=8,hm(i,a,l,c)}finally{le.p=b,J.T=y}}function hm(i,a,l,c){if(Rd){var y=fm(c);if(y===null)Qp(i,a,c,Dd,l),hw(i,c);else if(iN(y,i,a,l,c))c.stopPropagation();else if(hw(i,c),a&4&&-1<rN.indexOf(i)){for(;y!==null;){var b=Hn(y);if(b!==null)switch(b.tag){case 3:if(b=b.stateNode,b.current.memoizedState.isDehydrated){var T=Ar(b.pendingLanes);if(T!==0){var k=b;for(k.pendingLanes|=2,k.entangledLanes|=2;T;){var L=1<<31-wt(T);k.entanglements[1]|=L,T&=~L}Kr(b),(Xe&6)===0&&(gd=hn()+500,ou(0))}}break;case 31:case 13:k=oa(b,2),k!==null&&Tn(k,b,2),vd(),dm(b,2)}if(b=fm(c),b===null&&Qp(i,a,c,Dd,l),b===y)break;y=b}y!==null&&c.stopPropagation()}else Qp(i,a,c,null,l)}}function fm(i){return i=zn(i),pm(i)}var Dd=null;function pm(i){if(Dd=null,i=jr(i),i!==null){var a=o(i);if(a===null)i=null;else{var l=a.tag;if(l===13){if(i=u(a),i!==null)return i;i=null}else if(l===31){if(i=d(a),i!==null)return i;i=null}else if(l===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null)}}return Dd=i,null}function dw(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Bs()){case gl:return 2;case yl:return 8;case qi:case wf:return 32;case hc:return 268435456;default:return 32}default:return 32}}var mm=!1,ps=null,ms=null,gs=null,pu=new Map,mu=new Map,ys=[],rN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function hw(i,a){switch(i){case"focusin":case"focusout":ps=null;break;case"dragenter":case"dragleave":ms=null;break;case"mouseover":case"mouseout":gs=null;break;case"pointerover":case"pointerout":pu.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":mu.delete(a.pointerId)}}function gu(i,a,l,c,y,b){return i===null||i.nativeEvent!==b?(i={blockedOn:a,domEventName:l,eventSystemFlags:c,nativeEvent:b,targetContainers:[y]},a!==null&&(a=Hn(a),a!==null&&uw(a)),i):(i.eventSystemFlags|=c,a=i.targetContainers,y!==null&&a.indexOf(y)===-1&&a.push(y),i)}function iN(i,a,l,c,y){switch(a){case"focusin":return ps=gu(ps,i,a,l,c,y),!0;case"dragenter":return ms=gu(ms,i,a,l,c,y),!0;case"mouseover":return gs=gu(gs,i,a,l,c,y),!0;case"pointerover":var b=y.pointerId;return pu.set(b,gu(pu.get(b)||null,i,a,l,c,y)),!0;case"gotpointercapture":return b=y.pointerId,mu.set(b,gu(mu.get(b)||null,i,a,l,c,y)),!0}return!1}function fw(i){var a=jr(i.target);if(a!==null){var l=o(a);if(l!==null){if(a=l.tag,a===13){if(a=u(l),a!==null){i.blockedOn=a,or(i.priority,function(){cw(l)});return}}else if(a===31){if(a=d(l),a!==null){i.blockedOn=a,or(i.priority,function(){cw(l)});return}}else if(a===3&&l.stateNode.current.memoizedState.isDehydrated){i.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}i.blockedOn=null}function jd(i){if(i.blockedOn!==null)return!1;for(var a=i.targetContainers;0<a.length;){var l=fm(i.nativeEvent);if(l===null){l=i.nativeEvent;var c=new l.constructor(l.type,l);Nl=c,l.target.dispatchEvent(c),Nl=null}else return a=Hn(l),a!==null&&uw(a),i.blockedOn=l,!1;a.shift()}return!0}function pw(i,a,l){jd(i)&&l.delete(a)}function sN(){mm=!1,ps!==null&&jd(ps)&&(ps=null),ms!==null&&jd(ms)&&(ms=null),gs!==null&&jd(gs)&&(gs=null),pu.forEach(pw),mu.forEach(pw)}function Md(i,a){i.blockedOn===a&&(i.blockedOn=null,mm||(mm=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,sN)))}var Ld=null;function mw(i){Ld!==i&&(Ld=i,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Ld===i&&(Ld=null);for(var a=0;a<i.length;a+=3){var l=i[a],c=i[a+1],y=i[a+2];if(typeof c!="function"){if(pm(c||l)===null)continue;break}var b=Hn(l);b!==null&&(i.splice(a,3),a-=3,fp(b,{pending:!0,data:y,method:l.method,action:c},c,y))}}))}function Oo(i){function a(L){return Md(L,i)}ps!==null&&Md(ps,i),ms!==null&&Md(ms,i),gs!==null&&Md(gs,i),pu.forEach(a),mu.forEach(a);for(var l=0;l<ys.length;l++){var c=ys[l];c.blockedOn===i&&(c.blockedOn=null)}for(;0<ys.length&&(l=ys[0],l.blockedOn===null);)fw(l),l.blockedOn===null&&ys.shift();if(l=(i.ownerDocument||i).$$reactFormReplay,l!=null)for(c=0;c<l.length;c+=3){var y=l[c],b=l[c+1],T=y[Gt]||null;if(typeof b=="function")T||mw(l);else if(T){var k=null;if(b&&b.hasAttribute("formAction")){if(y=b,T=b[Gt]||null)k=T.formAction;else if(pm(y)!==null)continue}else k=T.action;typeof k=="function"?l[c+1]=k:(l.splice(c,3),c-=3),mw(l)}}}function gw(){function i(b){b.canIntercept&&b.info==="react-transition"&&b.intercept({handler:function(){return new Promise(function(T){return y=T})},focusReset:"manual",scroll:"manual"})}function a(){y!==null&&(y(),y=null),c||setTimeout(l,20)}function l(){if(!c&&!navigation.transition){var b=navigation.currentEntry;b&&b.url!=null&&navigation.navigate(b.url,{state:b.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,y=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(l,100),function(){c=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),y!==null&&(y(),y=null)}}}function gm(i){this._internalRoot=i}Ud.prototype.render=gm.prototype.render=function(i){var a=this._internalRoot;if(a===null)throw Error(r(409));var l=a.current,c=Mn();ow(l,c,i,a,null,null)},Ud.prototype.unmount=gm.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var a=i.containerInfo;ow(i.current,2,null,i,null,null),vd(),a[Rr]=null}};function Ud(i){this._internalRoot=i}Ud.prototype.unstable_scheduleHydration=function(i){if(i){var a=vc();i={blockedOn:null,target:i,priority:a};for(var l=0;l<ys.length&&a!==0&&a<ys[l].priority;l++);ys.splice(l,0,i),l===0&&fw(i)}};var yw=e.version;if(yw!=="19.2.3")throw Error(r(527,yw,"19.2.3"));le.findDOMNode=function(i){var a=i._reactInternals;if(a===void 0)throw typeof i.render=="function"?Error(r(188)):(i=Object.keys(i).join(","),Error(r(268,i)));return i=p(a),i=i!==null?v(i):null,i=i===null?null:i.stateNode,i};var aN={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:J,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Vd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Vd.isDisabled&&Vd.supportsFiber)try{sr=Vd.inject(aN),Jt=Vd}catch{}}return vu.createRoot=function(i,a){if(!s(i))throw Error(r(299));var l=!1,c="",y=Tb,b=Cb,T=Ib;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(c=a.identifierPrefix),a.onUncaughtError!==void 0&&(y=a.onUncaughtError),a.onCaughtError!==void 0&&(b=a.onCaughtError),a.onRecoverableError!==void 0&&(T=a.onRecoverableError)),a=sw(i,1,!1,null,null,l,c,null,y,b,T,gw),i[Rr]=a.current,Xp(i),new gm(a)},vu.hydrateRoot=function(i,a,l){if(!s(i))throw Error(r(299));var c=!1,y="",b=Tb,T=Cb,k=Ib,L=null;return l!=null&&(l.unstable_strictMode===!0&&(c=!0),l.identifierPrefix!==void 0&&(y=l.identifierPrefix),l.onUncaughtError!==void 0&&(b=l.onUncaughtError),l.onCaughtError!==void 0&&(T=l.onCaughtError),l.onRecoverableError!==void 0&&(k=l.onRecoverableError),l.formState!==void 0&&(L=l.formState)),a=sw(i,1,!0,a,l??null,c,y,L,b,T,k,gw),a.context=aw(null),l=a.current,c=Mn(),c=Js(c),y=ns(c),y.callback=null,rs(l,y,c),l=c,a.current.lanes=l,Ws(a,l),Kr(a),i[Rr]=a.current,Xp(i),new Ud(a)},vu.version="19.2.3",vu}var Ow;function gN(){if(Ow)return ym.exports;Ow=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),ym.exports=mN(),ym.exports}var yN=gN();const vN=cT(yN);/**
* react-router v7.11.0
*
* Copyright (c) Remix Software Inc.
*
* This source code is licensed under the MIT license found in the
* LICENSE.md file in the root directory of this source tree.
*
* @license MIT
*/var Pw="popstate";function bN(t={}){function e(s,o){let{pathname:u="/",search:d="",hash:f=""}=Pa(s.location.hash.substring(1));return!u.startsWith("/")&&!u.startsWith(".")&&(u="/"+u),Hm("",{pathname:u,search:d,hash:f},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(s,o){let u=s.document.querySelector("base"),d="";if(u&&u.getAttribute("href")){let f=s.location.href,p=f.indexOf("#");d=p===-1?f:f.slice(0,p)}return d+"#"+(typeof o=="string"?o:Mu(o))}function r(s,o){Fn(s.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(o)})`)}return EN(e,n,r,t)}function gt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Fn(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function wN(){return Math.random().toString(36).substring(2,10)}function Rw(t,e){return{usr:t.state,key:t.key,idx:e}}function Hm(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Pa(e):e,state:n,key:e&&e.key||r||wN()}}function Mu({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Pa(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function EN(t,e,n,r={}){let{window:s=document.defaultView,v5Compat:o=!1}=r,u=s.history,d="POP",f=null,p=v();p==null&&(p=0,u.replaceState({...u.state,idx:p},""));function v(){return(u.state||{idx:null}).idx}function w(){d="POP";let D=v(),q=D==null?null:D-p;p=D,f&&f({action:d,location:j.location,delta:q})}function S(D,q){d="PUSH";let X=Hm(j.location,D,q);n&&n(X,D),p=v()+1;let B=Rw(X,p),re=j.createHref(X);try{u.pushState(B,"",re)}catch(ce){if(ce instanceof DOMException&&ce.name==="DataCloneError")throw ce;s.location.assign(re)}o&&f&&f({action:d,location:j.location,delta:1})}function I(D,q){d="REPLACE";let X=Hm(j.location,D,q);n&&n(X,D),p=v();let B=Rw(X,p),re=j.createHref(X);u.replaceState(B,"",re),o&&f&&f({action:d,location:j.location,delta:0})}function P(D){return SN(D)}let j={get action(){return d},get location(){return t(s,u)},listen(D){if(f)throw new Error("A history only accepts one active listener");return s.addEventListener(Pw,w),f=D,()=>{s.removeEventListener(Pw,w),f=null}},createHref(D){return e(s,D)},createURL:P,encodeLocation(D){let q=P(D);return{pathname:q.pathname,search:q.search,hash:q.hash}},push:S,replace:I,go(D){return u.go(D)}};return j}function SN(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),gt(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:Mu(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function hT(t,e,n="/"){return xN(t,e,n,!1)}function xN(t,e,n,r){let s=typeof e=="string"?Pa(e):e,o=Oi(s.pathname||"/",n);if(o==null)return null;let u=fT(t);TN(u);let d=null;for(let f=0;d==null&&f<u.length;++f){let p=jN(o);d=RN(u[f],p,r)}return d}function fT(t,e=[],n=[],r="",s=!1){let o=(u,d,f=s,p)=>{let v={relativePath:p===void 0?u.path||"":p,caseSensitive:u.caseSensitive===!0,childrenIndex:d,route:u};if(v.relativePath.startsWith("/")){if(!v.relativePath.startsWith(r)&&f)return;gt(v.relativePath.startsWith(r),`Absolute route path "${v.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),v.relativePath=v.relativePath.slice(r.length)}let w=Ni([r,v.relativePath]),S=n.concat(v);u.children&&u.children.length>0&&(gt(u.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${w}".`),fT(u.children,e,S,w,f)),!(u.path==null&&!u.index)&&e.push({path:w,score:ON(w,u.index),routesMeta:S})};return t.forEach((u,d)=>{var f;if(u.path===""||!((f=u.path)!=null&&f.includes("?")))o(u,d);else for(let p of pT(u.path))o(u,d,!0,p)}),e}function pT(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return s?[o,""]:[o];let u=pT(r.join("/")),d=[];return d.push(...u.map(f=>f===""?o:[o,f].join("/"))),s&&d.push(...u),d.map(f=>t.startsWith("/")&&f===""?"/":f)}function TN(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:PN(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var CN=/^:[\w-]+$/,IN=3,kN=2,_N=1,NN=10,AN=-2,Dw=t=>t==="*";function ON(t,e){let n=t.split("/"),r=n.length;return n.some(Dw)&&(r+=AN),e&&(r+=kN),n.filter(s=>!Dw(s)).reduce((s,o)=>s+(CN.test(o)?IN:o===""?_N:NN),r)}function PN(t,e){return t.length===e.length&&t.slice(0,-1).every((n,r)=>n===e[r])?t[t.length-1]-e[e.length-1]:0}function RN(t,e,n=!1){let{routesMeta:r}=t,s={},o="/",u=[];for(let d=0;d<r.length;++d){let f=r[d],p=d===r.length-1,v=o==="/"?e:e.slice(o.length)||"/",w=hh({path:f.relativePath,caseSensitive:f.caseSensitive,end:p},v),S=f.route;if(!w&&p&&n&&!r[r.length-1].route.index&&(w=hh({path:f.relativePath,caseSensitive:f.caseSensitive,end:!1},v)),!w)return null;Object.assign(s,w.params),u.push({params:s,pathname:Ni([o,w.pathname]),pathnameBase:VN(Ni([o,w.pathnameBase])),route:S}),w.pathnameBase!=="/"&&(o=Ni([o,w.pathnameBase]))}return u}function hh(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=DN(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let o=s[0],u=o.replace(/(.)\/+$/,"$1"),d=s.slice(1);return{params:r.reduce((f,{paramName:p,isOptional:v},w)=>{if(p==="*"){let I=d[w]||"";u=o.slice(0,o.length-I.length).replace(/(.)\/+$/,"$1")}const S=d[w];return v&&!S?f[p]=void 0:f[p]=(S||"").replace(/%2F/g,"/"),f},{}),pathname:o,pathnameBase:u,pattern:t}}function DN(t,e=!1,n=!0){Fn(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,u,d)=>(r.push({paramName:u,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function jN(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Fn(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Oi(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}var mT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,MN=t=>mT.test(t);function LN(t,e="/"){let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Pa(t):t,o;if(n)if(MN(n))o=n;else{if(n.includes("//")){let u=n;n=n.replace(/\/\/+/g,"/"),Fn(!1,`Pathnames cannot have embedded double slashes - normalizing ${u} -> ${n}`)}n.startsWith("/")?o=jw(n.substring(1),"/"):o=jw(n,e)}else o=e;return{pathname:o,search:FN(r),hash:qN(s)}}function jw(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function bm(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function UN(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function gT(t){let e=UN(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function yT(t,e,n,r=!1){let s;typeof t=="string"?s=Pa(t):(s={...t},gt(!s.pathname||!s.pathname.includes("?"),bm("?","pathname","search",s)),gt(!s.pathname||!s.pathname.includes("#"),bm("#","pathname","hash",s)),gt(!s.search||!s.search.includes("#"),bm("#","search","hash",s)));let o=t===""||s.pathname==="",u=o?"/":s.pathname,d;if(u==null)d=n;else{let w=e.length-1;if(!r&&u.startsWith("..")){let S=u.split("/");for(;S[0]==="..";)S.shift(),w-=1;s.pathname=S.join("/")}d=w>=0?e[w]:"/"}let f=LN(s,d),p=u&&u!=="/"&&u.endsWith("/"),v=(o||u===".")&&n.endsWith("/");return!f.pathname.endsWith("/")&&(p||v)&&(f.pathname+="/"),f}var Ni=t=>t.join("/").replace(/\/\/+/g,"/"),VN=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),FN=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,qN=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,HN=class{constructor(t,e,n,r=!1){this.status=t,this.statusText=e||"",this.internal=r,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function zN(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}function GN(t){return t.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var vT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function bT(t,e){let n=t;if(typeof n!="string"||!mT.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let r=n,s=!1;if(vT)try{let o=new URL(window.location.href),u=n.startsWith("//")?new URL(o.protocol+n):new URL(n),d=Oi(u.pathname,e);u.origin===o.origin&&d!=null?n=d+u.search+u.hash:s=!0}catch{Fn(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:r,isExternal:s,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var wT=["POST","PUT","PATCH","DELETE"];new Set(wT);var BN=["GET",...wT];new Set(BN);var tl=z.createContext(null);tl.displayName="DataRouter";var Vh=z.createContext(null);Vh.displayName="DataRouterState";var $N=z.createContext(!1),ET=z.createContext({isTransitioning:!1});ET.displayName="ViewTransition";var WN=z.createContext(new Map);WN.displayName="Fetchers";var KN=z.createContext(null);KN.displayName="Await";var ir=z.createContext(null);ir.displayName="Navigation";var Yu=z.createContext(null);Yu.displayName="Location";var si=z.createContext({outlet:null,matches:[],isDataRoute:!1});si.displayName="Route";var jg=z.createContext(null);jg.displayName="RouteError";var ST="REACT_ROUTER_ERROR",JN="REDIRECT",YN="ROUTE_ERROR_RESPONSE";function XN(t){if(t.startsWith(`${ST}:${JN}:{`))try{let e=JSON.parse(t.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function QN(t){if(t.startsWith(`${ST}:${YN}:{`))try{let e=JSON.parse(t.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new HN(e.status,e.statusText,e.data)}catch{}}function ZN(t,{relative:e}={}){gt(Xu(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=z.useContext(ir),{hash:s,pathname:o,search:u}=Qu(t,{relative:e}),d=o;return n!=="/"&&(d=o==="/"?n:Ni([n,o])),r.createHref({pathname:d,search:u,hash:s})}function Xu(){return z.useContext(Yu)!=null}function Li(){return gt(Xu(),"useLocation() may be used only in the context of a <Router> component."),z.useContext(Yu).location}var xT="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function TT(t){z.useContext(ir).static||z.useLayoutEffect(t)}function Ls(){let{isDataRoute:t}=z.useContext(si);return t?fA():eA()}function eA(){gt(Xu(),"useNavigate() may be used only in the context of a <Router> component.");let t=z.useContext(tl),{basename:e,navigator:n}=z.useContext(ir),{matches:r}=z.useContext(si),{pathname:s}=Li(),o=JSON.stringify(gT(r)),u=z.useRef(!1);return TT(()=>{u.current=!0}),z.useCallback((d,f={})=>{if(Fn(u.current,xT),!u.current)return;if(typeof d=="number"){n.go(d);return}let p=yT(d,JSON.parse(o),s,f.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:Ni([e,p.pathname])),(f.replace?n.replace:n.push)(p,f.state,f)},[e,n,o,s,t])}z.createContext(null);function tA(){let{matches:t}=z.useContext(si),e=t[t.length-1];return e?e.params:{}}function Qu(t,{relative:e}={}){let{matches:n}=z.useContext(si),{pathname:r}=Li(),s=JSON.stringify(gT(n));return z.useMemo(()=>yT(t,JSON.parse(s),r,e==="path"),[t,s,r,e])}function nA(t,e){return CT(t,e)}function CT(t,e,n,r,s){var o;gt(Xu(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:u}=z.useContext(ir),{matches:d}=z.useContext(si),f=d[d.length-1],p=f?f.params:{},v=f?f.pathname:"/",w=f?f.pathnameBase:"/",S=f&&f.route;{let B=S&&S.path||"";kT(v,!S||B.endsWith("*")||B.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${v}" (under <Route path="${B}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${B}"> to <Route path="${B==="/"?"*":`${B}/*`}">.`)}let I=Li(),P;if(e){let B=typeof e=="string"?Pa(e):e;gt(w==="/"||((o=B.pathname)==null?void 0:o.startsWith(w)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${w}" but pathname "${B.pathname}" was given in the \`location\` prop.`),P=B}else P=I;let j=P.pathname||"/",D=j;if(w!=="/"){let B=w.replace(/^\//,"").split("/");D="/"+j.replace(/^\//,"").split("/").slice(B.length).join("/")}let q=hT(t,{pathname:D});Fn(S||q!=null,`No routes matched location "${P.pathname}${P.search}${P.hash}" `),Fn(q==null||q[q.length-1].route.element!==void 0||q[q.length-1].route.Component!==void 0||q[q.length-1].route.lazy!==void 0,`Matched leaf route at location "${P.pathname}${P.search}${P.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let X=oA(q&&q.map(B=>Object.assign({},B,{params:Object.assign({},p,B.params),pathname:Ni([w,u.encodeLocation?u.encodeLocation(B.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:B.pathname]),pathnameBase:B.pathnameBase==="/"?w:Ni([w,u.encodeLocation?u.encodeLocation(B.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:B.pathnameBase])})),d,n,r,s);return e&&X?z.createElement(Yu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...P},navigationType:"POP"}},X):X}function rA(){let t=hA(),e=zN(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r},u=null;return console.error("Error handled by React Router default ErrorBoundary:",t),u=z.createElement(z.Fragment,null,z.createElement("p",null," Hey developer "),z.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",z.createElement("code",{style:o},"ErrorBoundary")," or"," ",z.createElement("code",{style:o},"errorElement")," prop on your route.")),z.createElement(z.Fragment,null,z.createElement("h2",null,"Unexpected Application Error!"),z.createElement("h3",{style:{fontStyle:"italic"}},e),n?z.createElement("pre",{style:s},n):null,u)}var iA=z.createElement(rA,null),IT=class extends z.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){let t=this.state.error;if(this.context&&typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){const n=QN(t.digest);n&&(t=n)}let e=t!==void 0?z.createElement(si.Provider,{value:this.props.routeContext},z.createElement(jg.Provider,{value:t,children:this.props.component})):this.props.children;return this.context?z.createElement(sA,{error:t},e):e}};IT.contextType=$N;var wm=new WeakMap;function sA({children:t,error:e}){let{basename:n}=z.useContext(ir);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let r=XN(e.digest);if(r){let s=wm.get(e);if(s)throw s;let o=bT(r.location,n);if(vT&&!wm.get(e))if(o.isExternal||r.reloadDocument)window.location.href=o.absoluteURL||o.to;else{const u=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(o.to,{replace:r.replace}));throw wm.set(e,u),u}return z.createElement("meta",{httpEquiv:"refresh",content:`0;url=${o.absoluteURL||o.to}`})}}return t}function aA({routeContext:t,match:e,children:n}){let r=z.useContext(tl);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),z.createElement(si.Provider,{value:t},n)}function oA(t,e=[],n=null,r=null,s=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,u=n==null?void 0:n.errors;if(u!=null){let v=o.findIndex(w=>w.route.id&&(u==null?void 0:u[w.route.id])!==void 0);gt(v>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),o=o.slice(0,Math.min(o.length,v+1))}let d=!1,f=-1;if(n)for(let v=0;v<o.length;v++){let w=o[v];if((w.route.HydrateFallback||w.route.hydrateFallbackElement)&&(f=v),w.route.id){let{loaderData:S,errors:I}=n,P=w.route.loader&&!S.hasOwnProperty(w.route.id)&&(!I||I[w.route.id]===void 0);if(w.route.lazy||P){d=!0,f>=0?o=o.slice(0,f+1):o=[o[0]];break}}}let p=n&&r?(v,w)=>{var S,I;r(v,{location:n.location,params:((I=(S=n.matches)==null?void 0:S[0])==null?void 0:I.params)??{},unstable_pattern:GN(n.matches),errorInfo:w})}:void 0;return o.reduceRight((v,w,S)=>{let I,P=!1,j=null,D=null;n&&(I=u&&w.route.id?u[w.route.id]:void 0,j=w.route.errorElement||iA,d&&(f<0&&S===0?(kT("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),P=!0,D=null):f===S&&(P=!0,D=w.route.hydrateFallbackElement||null)));let q=e.concat(o.slice(0,S+1)),X=()=>{let B;return I?B=j:P?B=D:w.route.Component?B=z.createElement(w.route.Component,null):w.route.element?B=w.route.element:B=v,z.createElement(aA,{match:w,routeContext:{outlet:v,matches:q,isDataRoute:n!=null},children:B})};return n&&(w.route.ErrorBoundary||w.route.errorElement||S===0)?z.createElement(IT,{location:n.location,revalidation:n.revalidation,component:j,error:I,children:X(),routeContext:{outlet:null,matches:q,isDataRoute:!0},onError:p}):X()},null)}function Mg(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function lA(t){let e=z.useContext(tl);return gt(e,Mg(t)),e}function uA(t){let e=z.useContext(Vh);return gt(e,Mg(t)),e}function cA(t){let e=z.useContext(si);return gt(e,Mg(t)),e}function Lg(t){let e=cA(t),n=e.matches[e.matches.length-1];return gt(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function dA(){return Lg("useRouteId")}function hA(){var t;let e=z.useContext(jg),n=uA("useRouteError"),r=Lg("useRouteError");return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function fA(){let{router:t}=lA("useNavigate"),e=Lg("useNavigate"),n=z.useRef(!1);return TT(()=>{n.current=!0}),z.useCallback(async(r,s={})=>{Fn(n.current,xT),n.current&&(typeof r=="number"?await t.navigate(r):await t.navigate(r,{fromRouteId:e,...s}))},[t,e])}var Mw={};function kT(t,e,n){!e&&!Mw[t]&&(Mw[t]=!0,Fn(!1,n))}z.memo(pA);function pA({routes:t,future:e,state:n,onError:r}){return CT(t,void 0,n,r,e)}function Ln(t){gt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function mA({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:s,static:o=!1,unstable_useTransitions:u}){gt(!Xu(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let d=t.replace(/^\/*/,"/"),f=z.useMemo(()=>({basename:d,navigator:s,static:o,unstable_useTransitions:u,future:{}}),[d,s,o,u]);typeof n=="string"&&(n=Pa(n));let{pathname:p="/",search:v="",hash:w="",state:S=null,key:I="default"}=n,P=z.useMemo(()=>{let j=Oi(p,d);return j==null?null:{location:{pathname:j,search:v,hash:w,state:S,key:I},navigationType:r}},[d,p,v,w,S,I,r]);return Fn(P!=null,`<Router basename="${d}"> is not able to match the URL "${p}${v}${w}" because it does not start with the basename, so the <Router> won't render anything.`),P==null?null:z.createElement(ir.Provider,{value:f},z.createElement(Yu.Provider,{children:e,value:P}))}function gA({children:t,location:e}){return nA(zm(t),e)}function zm(t,e=[]){let n=[];return z.Children.forEach(t,(r,s)=>{if(!z.isValidElement(r))return;let o=[...e,s];if(r.type===z.Fragment){n.push.apply(n,zm(r.props.children,o));return}gt(r.type===Ln,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),gt(!r.props.index||!r.props.children,"An index route cannot have child routes.");let u={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(u.children=zm(r.props.children,o)),n.push(u)}),n}var Qd="get",Zd="application/x-www-form-urlencoded";function Fh(t){return typeof HTMLElement<"u"&&t instanceof HTMLElement}function yA(t){return Fh(t)&&t.tagName.toLowerCase()==="button"}function vA(t){return Fh(t)&&t.tagName.toLowerCase()==="form"}function bA(t){return Fh(t)&&t.tagName.toLowerCase()==="input"}function wA(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function EA(t,e){return t.button===0&&(!e||e==="_self")&&!wA(t)}function Gm(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function SA(t,e){let n=Gm(t);return e&&e.forEach((r,s)=>{n.has(s)||e.getAll(s).forEach(o=>{n.append(s,o)})}),n}var Fd=null;function xA(){if(Fd===null)try{new FormData(document.createElement("form"),0),Fd=!1}catch{Fd=!0}return Fd}var TA=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Em(t){return t!=null&&!TA.has(t)?(Fn(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Zd}"`),null):t}function CA(t,e){let n,r,s,o,u;if(vA(t)){let d=t.getAttribute("action");r=d?Oi(d,e):null,n=t.getAttribute("method")||Qd,s=Em(t.getAttribute("enctype"))||Zd,o=new FormData(t)}else if(yA(t)||bA(t)&&(t.type==="submit"||t.type==="image")){let d=t.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let f=t.getAttribute("formaction")||d.getAttribute("action");if(r=f?Oi(f,e):null,n=t.getAttribute("formmethod")||d.getAttribute("method")||Qd,s=Em(t.getAttribute("formenctype"))||Em(d.getAttribute("enctype"))||Zd,o=new FormData(d,t),!xA()){let{name:p,type:v,value:w}=t;if(v==="image"){let S=p?`${p}.`:"";o.append(`${S}x`,"0"),o.append(`${S}y`,"0")}else p&&o.append(p,w)}}else{if(Fh(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Qd,r=null,s=Zd,u=t}return o&&s==="text/plain"&&(u=o,o=void 0),{action:r,method:n.toLowerCase(),encType:s,formData:o,body:u}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Ug(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function IA(t,e,n){let r=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return r.pathname==="/"?r.pathname=`_root.${n}`:e&&Oi(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function kA(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function _A(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function NA(t,e,n){let r=await Promise.all(t.map(async s=>{let o=e.routes[s.route.id];if(o){let u=await kA(o,n);return u.links?u.links():[]}return[]}));return RA(r.flat(1).filter(_A).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function Lw(t,e,n,r,s,o){let u=(f,p)=>n[p]?f.route.id!==n[p].route.id:!0,d=(f,p)=>{var v;return n[p].pathname!==f.pathname||((v=n[p].route.path)==null?void 0:v.endsWith("*"))&&n[p].params["*"]!==f.params["*"]};return o==="assets"?e.filter((f,p)=>u(f,p)||d(f,p)):o==="data"?e.filter((f,p)=>{var v;let w=r.routes[f.route.id];if(!w||!w.hasLoader)return!1;if(u(f,p)||d(f,p))return!0;if(f.route.shouldRevalidate){let S=f.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((v=n[0])==null?void 0:v.params)||{},nextUrl:new URL(t,window.origin),nextParams:f.params,defaultShouldRevalidate:!0});if(typeof S=="boolean")return S}return!0}):[]}function AA(t,e,{includeHydrateFallback:n}={}){return OA(t.map(r=>{let s=e.routes[r.route.id];if(!s)return[];let o=[s.module];return s.clientActionModule&&(o=o.concat(s.clientActionModule)),s.clientLoaderModule&&(o=o.concat(s.clientLoaderModule)),n&&s.hydrateFallbackModule&&(o=o.concat(s.hydrateFallbackModule)),s.imports&&(o=o.concat(s.imports)),o}).flat(1))}function OA(t){return[...new Set(t)]}function PA(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function RA(t,e){let n=new Set;return new Set(e),t.reduce((r,s)=>{let o=JSON.stringify(PA(s));return n.has(o)||(n.add(o),r.push({key:o,link:s})),r},[])}function _T(){let t=z.useContext(tl);return Ug(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function DA(){let t=z.useContext(Vh);return Ug(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Vg=z.createContext(void 0);Vg.displayName="FrameworkContext";function NT(){let t=z.useContext(Vg);return Ug(t,"You must render this element inside a <HydratedRouter> element"),t}function jA(t,e){let n=z.useContext(Vg),[r,s]=z.useState(!1),[o,u]=z.useState(!1),{onFocus:d,onBlur:f,onMouseEnter:p,onMouseLeave:v,onTouchStart:w}=e,S=z.useRef(null);z.useEffect(()=>{if(t==="render"&&u(!0),t==="viewport"){let j=q=>{q.forEach(X=>{u(X.isIntersecting)})},D=new IntersectionObserver(j,{threshold:.5});return S.current&&D.observe(S.current),()=>{D.disconnect()}}},[t]),z.useEffect(()=>{if(r){let j=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(j)}}},[r]);let I=()=>{s(!0)},P=()=>{s(!1),u(!1)};return n?t!=="intent"?[o,S,{}]:[o,S,{onFocus:bu(d,I),onBlur:bu(f,P),onMouseEnter:bu(p,I),onMouseLeave:bu(v,P),onTouchStart:bu(w,I)}]:[!1,S,{}]}function bu(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function MA({page:t,...e}){let{router:n}=_T(),r=z.useMemo(()=>hT(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?z.createElement(UA,{page:t,matches:r,...e}):null}function LA(t){let{manifest:e,routeModules:n}=NT(),[r,s]=z.useState([]);return z.useEffect(()=>{let o=!1;return NA(t,e,n).then(u=>{o||s(u)}),()=>{o=!0}},[t,e,n]),r}function UA({page:t,matches:e,...n}){let r=Li(),{manifest:s,routeModules:o}=NT(),{basename:u}=_T(),{loaderData:d,matches:f}=DA(),p=z.useMemo(()=>Lw(t,e,f,s,r,"data"),[t,e,f,s,r]),v=z.useMemo(()=>Lw(t,e,f,s,r,"assets"),[t,e,f,s,r]),w=z.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let P=new Set,j=!1;if(e.forEach(q=>{var X;let B=s.routes[q.route.id];!B||!B.hasLoader||(!p.some(re=>re.route.id===q.route.id)&&q.route.id in d&&(X=o[q.route.id])!=null&&X.shouldRevalidate||B.hasClientLoader?j=!0:P.add(q.route.id))}),P.size===0)return[];let D=IA(t,u,"data");return j&&P.size>0&&D.searchParams.set("_routes",e.filter(q=>P.has(q.route.id)).map(q=>q.route.id).join(",")),[D.pathname+D.search]},[u,d,r,s,p,e,t,o]),S=z.useMemo(()=>AA(v,s),[v,s]),I=LA(v);return z.createElement(z.Fragment,null,w.map(P=>z.createElement("link",{key:P,rel:"prefetch",as:"fetch",href:P,...n})),S.map(P=>z.createElement("link",{key:P,rel:"modulepreload",href:P,...n})),I.map(({key:P,link:j})=>z.createElement("link",{key:P,nonce:n.nonce,...j})))}function VA(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var FA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{FA&&(window.__reactRouterVersion="7.11.0")}catch{}function qA({basename:t,children:e,unstable_useTransitions:n,window:r}){let s=z.useRef();s.current==null&&(s.current=bN({window:r,v5Compat:!0}));let o=s.current,[u,d]=z.useState({action:o.action,location:o.location}),f=z.useCallback(p=>{n===!1?d(p):z.startTransition(()=>d(p))},[n]);return z.useLayoutEffect(()=>o.listen(f),[o,f]),z.createElement(mA,{basename:t,children:e,location:u.location,navigationType:u.action,navigator:o,unstable_useTransitions:n})}var AT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,rt=z.forwardRef(function({onClick:t,discover:e="render",prefetch:n="none",relative:r,reloadDocument:s,replace:o,state:u,target:d,to:f,preventScrollReset:p,viewTransition:v,unstable_defaultShouldRevalidate:w,...S},I){let{basename:P,unstable_useTransitions:j}=z.useContext(ir),D=typeof f=="string"&&AT.test(f),q=bT(f,P);f=q.to;let X=ZN(f,{relative:r}),[B,re,ce]=jA(n,S),ue=BA(f,{replace:o,state:u,target:d,preventScrollReset:p,relative:r,viewTransition:v,unstable_defaultShouldRevalidate:w,unstable_useTransitions:j});function A(O){t&&t(O),O.defaultPrevented||ue(O)}let N=z.createElement("a",{...S,...ce,href:q.absoluteURL||X,onClick:q.isExternal||s?t:A,ref:VA(I,re),target:d,"data-discover":!D&&e==="render"?"true":void 0});return B&&!D?z.createElement(z.Fragment,null,N,z.createElement(MA,{page:X})):N});rt.displayName="Link";var HA=z.forwardRef(function({"aria-current":t="page",caseSensitive:e=!1,className:n="",end:r=!1,style:s,to:o,viewTransition:u,children:d,...f},p){let v=Qu(o,{relative:f.relative}),w=Li(),S=z.useContext(Vh),{navigator:I,basename:P}=z.useContext(ir),j=S!=null&&XA(v)&&u===!0,D=I.encodeLocation?I.encodeLocation(v).pathname:v.pathname,q=w.pathname,X=S&&S.navigation&&S.navigation.location?S.navigation.location.pathname:null;e||(q=q.toLowerCase(),X=X?X.toLowerCase():null,D=D.toLowerCase()),X&&P&&(X=Oi(X,P)||X);const B=D!=="/"&&D.endsWith("/")?D.length-1:D.length;let re=q===D||!r&&q.startsWith(D)&&q.charAt(B)==="/",ce=X!=null&&(X===D||!r&&X.startsWith(D)&&X.charAt(D.length)==="/"),ue={isActive:re,isPending:ce,isTransitioning:j},A=re?t:void 0,N;typeof n=="function"?N=n(ue):N=[n,re?"active":null,ce?"pending":null,j?"transitioning":null].filter(Boolean).join(" ");let O=typeof s=="function"?s(ue):s;return z.createElement(rt,{...f,"aria-current":A,className:N,ref:p,style:O,to:o,viewTransition:u},typeof d=="function"?d(ue):d)});HA.displayName="NavLink";var zA=z.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:s,state:o,method:u=Qd,action:d,onSubmit:f,relative:p,preventScrollReset:v,viewTransition:w,unstable_defaultShouldRevalidate:S,...I},P)=>{let{unstable_useTransitions:j}=z.useContext(ir),D=JA(),q=YA(d,{relative:p}),X=u.toLowerCase()==="get"?"get":"post",B=typeof d=="string"&&AT.test(d),re=ce=>{if(f&&f(ce),ce.defaultPrevented)return;ce.preventDefault();let ue=ce.nativeEvent.submitter,A=(ue==null?void 0:ue.getAttribute("formmethod"))||u,N=()=>D(ue||ce.currentTarget,{fetcherKey:e,method:A,navigate:n,replace:s,state:o,relative:p,preventScrollReset:v,viewTransition:w,unstable_defaultShouldRevalidate:S});j&&n!==!1?z.startTransition(()=>N()):N()};return z.createElement("form",{ref:P,method:X,action:q,onSubmit:r?f:re,...I,"data-discover":!B&&t==="render"?"true":void 0})});zA.displayName="Form";function GA(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function OT(t){let e=z.useContext(tl);return gt(e,GA(t)),e}function BA(t,{target:e,replace:n,state:r,preventScrollReset:s,relative:o,viewTransition:u,unstable_defaultShouldRevalidate:d,unstable_useTransitions:f}={}){let p=Ls(),v=Li(),w=Qu(t,{relative:o});return z.useCallback(S=>{if(EA(S,e)){S.preventDefault();let I=n!==void 0?n:Mu(v)===Mu(w),P=()=>p(t,{replace:I,state:r,preventScrollReset:s,relative:o,viewTransition:u,unstable_defaultShouldRevalidate:d});f?z.startTransition(()=>P()):P()}},[v,p,w,n,r,e,t,s,o,u,d,f])}function $A(t){Fn(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=z.useRef(Gm(t)),n=z.useRef(!1),r=Li(),s=z.useMemo(()=>SA(r.search,n.current?null:e.current),[r.search]),o=Ls(),u=z.useCallback((d,f)=>{const p=Gm(typeof d=="function"?d(new URLSearchParams(s)):d);n.current=!0,o("?"+p,f)},[o,s]);return[s,u]}var WA=0,KA=()=>`__${String(++WA)}__`;function JA(){let{router:t}=OT("useSubmit"),{basename:e}=z.useContext(ir),n=dA(),r=t.fetch,s=t.navigate;return z.useCallback(async(o,u={})=>{let{action:d,method:f,encType:p,formData:v,body:w}=CA(o,e);if(u.navigate===!1){let S=u.fetcherKey||KA();await r(S,n,u.action||d,{unstable_defaultShouldRevalidate:u.unstable_defaultShouldRevalidate,preventScrollReset:u.preventScrollReset,formData:v,body:w,formMethod:u.method||f,formEncType:u.encType||p,flushSync:u.flushSync})}else await s(u.action||d,{unstable_defaultShouldRevalidate:u.unstable_defaultShouldRevalidate,preventScrollReset:u.preventScrollReset,formData:v,body:w,formMethod:u.method||f,formEncType:u.encType||p,replace:u.replace,state:u.state,fromRouteId:n,flushSync:u.flushSync,viewTransition:u.viewTransition})},[r,s,e,n])}function YA(t,{relative:e}={}){let{basename:n}=z.useContext(ir),r=z.useContext(si);gt(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),o={...Qu(t||".",{relative:e})},u=Li();if(t==null){o.search=u.search;let d=new URLSearchParams(o.search),f=d.getAll("index");if(f.some(p=>p==="")){d.delete("index"),f.filter(v=>v).forEach(v=>d.append("index",v));let p=d.toString();o.search=p?`?${p}`:""}}return(!t||t===".")&&s.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(o.pathname=o.pathname==="/"?n:Ni([n,o.pathname])),Mu(o)}function XA(t,{relative:e}={}){let n=z.useContext(ET);gt(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=OT("useViewTransitionState"),s=Qu(t,{relative:e});if(!n.isTransitioning)return!1;let o=Oi(n.currentLocation.pathname,r)||n.currentLocation.pathname,u=Oi(n.nextLocation.pathname,r)||n.nextLocation.pathname;return hh(s.pathname,u)!=null||hh(s.pathname,o)!=null}/**
* @license lucide-react v0.562.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const QA=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),ZA=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),Uw=t=>{const e=ZA(t);return e.charAt(0).toUpperCase()+e.slice(1)},PT=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),e2=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
* @license lucide-react v0.562.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/var t2={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
* @license lucide-react v0.562.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const n2=z.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:o,iconNode:u,...d},f)=>z.createElement("svg",{ref:f,...t2,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:PT("lucide",s),...!o&&!e2(d)&&{"aria-hidden":"true"},...d},[...u.map(([p,v])=>z.createElement(p,v)),...Array.isArray(o)?o:[o]]));/**
* @license lucide-react v0.562.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Ce=(t,e)=>{const n=z.forwardRef(({className:r,...s},o)=>z.createElement(n2,{ref:o,iconNode:e,className:PT(`lucide-${QA(Uw(t))}`,`lucide-${t}`,r),...s}));return n.displayName=Uw(t),n};/**
* @license lucide-react v0.562.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const r2=[["path",{d:"M12 6.528V3a1 1 0 0 1 1-1h0",key:"11qiee"}],["path",{d:"M18.237 21A15 15 0 0 0 22 11a6 6 0 0 0-10-4.472A6 6 0 0 0 2 11a15.1 15.1 0 0 0 3.763 10 3 3 0 0 0 3.648.648 5.5 5.5 0 0 1 5.178 0A3 3 0 0 0 18.237 21",key:"110c12"}]],i2=Ce("apple",r2);/**
* @license lucide-react v0.562.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const s2=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],RT=Ce("arrow-left",s2);/**
* @license lucide-react v0.562.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const a2=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],DT=Ce("arrow-right",a2);/**
* @license lucide-react v0.562.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const o2=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Vw=Ce("check",o2);/**
* @license lucide-react v0.562.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const l2=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],u2=Ce("chevron-left",l2);/**
* @license lucide-react v0.562.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const c2=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],d2=Ce("chevron-right",c2);/**
* @license lucide-react v0.562.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const h2=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],f2=Ce("circle-alert",h2);/**
* @license lucide-react v0.562.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const p2=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],jT=Ce("circle-check",p2);/**
* @license lucide-react v0.562.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const m2=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Fg=Ce("eye-off",m2);/**
* @license lucide-react v0.562.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const g2=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],qg=Ce("eye",g2);/**
* @license lucide-react v0.562.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const y2=[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]],v2=Ce("facebook",y2);/**
* @license lucide-react v0.562.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const b2=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],w2=Ce("funnel",b2);/**
* @license lucide-react v0.562.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const E2=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],S2=Ce("heart",E2);/**
* @license lucide-react v0.562.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const x2=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],qd=Ce("image",x2);/**
* @license lucide-react v0.562.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const T2=[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]],C2=Ce("instagram",T2);/**
* @license lucide-react v0.562.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const I2=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],k2=Ce("layout-dashboard",I2);/**
* @license lucide-react v0.562.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const _2=[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]],Lu=Ce("leaf",_2);/**
* @license lucide-react v0.562.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const N2=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Nu=Ce("loader-circle",N2);/**
* @license lucide-react v0.562.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const A2=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Uu=Ce("lock",A2);/**
* @license lucide-react v0.562.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const O2=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],P2=Ce("log-in",O2);/**
* @license lucide-react v0.562.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const R2=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],MT=Ce("log-out",R2);/**
* @license lucide-react v0.562.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const D2=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Hg=Ce("mail",D2);/**
* @license lucide-react v0.562.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const j2=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],M2=Ce("map-pin",j2);/**
* @license lucide-react v0.562.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const L2=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],U2=Ce("menu",L2);/**
* @license lucide-react v0.562.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const V2=[["path",{d:"M14 14a2 2 0 0 0 2-2V8h-2",key:"1r06pg"}],["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}],["path",{d:"M8 14a2 2 0 0 0 2-2V8H8",key:"1jzu5j"}]],F2=Ce("message-square-quote",V2);/**
* @license lucide-react v0.562.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const q2=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M16.95 16.95A7 7 0 0 1 5 12v-2",key:"cqa7eg"}],["path",{d:"M18.89 13.23A7 7 0 0 0 19 12v-2",key:"16hl24"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}]],H2=Ce("mic-off",q2);/**
* @license lucide-react v0.562.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const z2=[["path",{d:"M5 12h14",key:"1ays0h"}]],G2=Ce("minus",z2);/**
* @license lucide-react v0.562.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const B2=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],LT=Ce("monitor",B2);/**
* @license lucide-react v0.562.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const $2=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],UT=Ce("package",$2);/**
* @license lucide-react v0.562.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const W2=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],VT=Ce("pen",W2);/**
* @license lucide-react v0.562.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const K2=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],FT=Ce("phone",K2);/**
* @license lucide-react v0.562.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const J2=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],qT=Ce("plus",J2);/**
* @license lucide-react v0.562.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Y2=[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]],X2=Ce("quote",Y2);/**
* @license lucide-react v0.562.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Q2=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Z2=Ce("search",Q2);/**
* @license lucide-react v0.562.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const eO=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],tO=Ce("send",eO);/**
* @license lucide-react v0.562.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const nO=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],rO=Ce("shield-check",nO);/**
* @license lucide-react v0.562.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const iO=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],HT=Ce("shield",iO);/**
* @license lucide-react v0.562.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const sO=[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]],zT=Ce("shopping-bag",sO);/**
* @license lucide-react v0.562.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const aO=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],Fw=Ce("shopping-cart",aO);/**
* @license lucide-react v0.562.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const oO=[["path",{d:"M14 9.536V7a4 4 0 0 1 4-4h1.5a.5.5 0 0 1 .5.5V5a4 4 0 0 1-4 4 4 4 0 0 0-4 4c0 2 1 3 1 5a5 5 0 0 1-1 3",key:"139s4v"}],["path",{d:"M4 9a5 5 0 0 1 8 4 5 5 0 0 1-8-4",key:"1dlkgp"}],["path",{d:"M5 21h14",key:"11awu3"}]],lO=Ce("sprout",oO);/**
* @license lucide-react v0.562.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const uO=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],GT=Ce("star",uO);/**
* @license lucide-react v0.562.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const cO=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],zg=Ce("trash-2",cO);/**
* @license lucide-react v0.562.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const dO=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],hO=Ce("truck",dO);/**
* @license lucide-react v0.562.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const fO=[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]],pO=Ce("twitter",fO);/**
* @license lucide-react v0.562.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const mO=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],gO=Ce("user-plus",mO);/**
* @license lucide-react v0.562.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const yO=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],BT=Ce("user",yO);/**
* @license lucide-react v0.562.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const vO=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],qw=Ce("users",vO);/**
* @license lucide-react v0.562.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const bO=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Gg=Ce("x",bO),Ra=()=>{const[t,e]=z.useState(()=>{const f=localStorage.getItem("himalayan_cart");return f?JSON.parse(f):[]});z.useEffect(()=>{localStorage.setItem("himalayan_cart",JSON.stringify(t))},[t]);const n=(f,p)=>{e(v=>v.find(w=>w.product.id===f.id)?v.map(w=>w.product.id===f.id?{...w,quantity:w.quantity+p}:w):[...v,{product:f,quantity:p}])},r=f=>{e(p=>p.filter(v=>v.product.id!==f))},s=(f,p)=>{e(v=>v.map(w=>w.product.id===f?{...w,quantity:Math.max(1,p)}:w))},o=()=>e([]),u=t.reduce((f,p)=>f+p.quantity,0),d=t.reduce((f,p)=>f+p.product.price*p.quantity,0);return{cart:t,addToCart:n,removeFromCart:r,updateQuantity:s,clearCart:o,totalItems:u,totalPrice:d}};var wO={};/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/let EO,SO;function xO(){return{geminiUrl:EO,vertexUrl:SO}}function TO(t,e,n,r){var s,o;if(!(t!=null&&t.baseUrl)){const u=xO();return e?(s=u.vertexUrl)!==null&&s!==void 0?s:n:(o=u.geminiUrl)!==null&&o!==void 0?o:r}return t.baseUrl}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/class Ui{}function fe(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(r,s)=>{if(Object.prototype.hasOwnProperty.call(e,s)){const o=e[s];return o!=null?String(o):""}else throw new Error(`Key '${s}' not found in valueMap.`)})}function m(t,e,n){for(let o=0;o<e.length-1;o++){const u=e[o];if(u.endsWith("[]")){const d=u.slice(0,-2);if(!(d in t))if(Array.isArray(n))t[d]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${u}`);if(Array.isArray(t[d])){const f=t[d];if(Array.isArray(n))for(let p=0;p<f.length;p++){const v=f[p];m(v,e.slice(o+1),n[p])}else for(const p of f)m(p,e.slice(o+1),n)}return}else if(u.endsWith("[0]")){const d=u.slice(0,-3);d in t||(t[d]=[{}]);const f=t[d];m(f[0],e.slice(o+1),n);return}(!t[u]||typeof t[u]!="object")&&(t[u]={}),t=t[u]}const r=e[e.length-1],s=t[r];if(s!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===s)return;if(typeof s=="object"&&typeof n=="object"&&s!==null&&n!==null)Object.assign(s,n);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else r==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[r]=n}function h(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let r=0;r<e.length;r++){if(typeof t!="object"||t===null)return n;const s=e[r];if(s.endsWith("[]")){const o=s.slice(0,-2);if(o in t){const u=t[o];return Array.isArray(u)?u.map(d=>h(d,e.slice(r+1),n)):n}else return n}else t=t[s]}return t}catch(r){if(r instanceof TypeError)return n;throw r}}function CO(t,e){for(const[n,r]of Object.entries(e)){const s=n.split("."),o=r.split("."),u=new Set;let d=-1;for(let f=0;f<s.length;f++)if(s[f]==="*"){d=f;break}if(d!==-1&&o.length>d)for(let f=d;f<o.length;f++){const p=o[f];p!=="*"&&!p.endsWith("[]")&&!p.endsWith("[0]")&&u.add(p)}Bm(t,s,o,0,u)}}function Bm(t,e,n,r,s){if(r>=e.length||typeof t!="object"||t===null)return;const o=e[r];if(o.endsWith("[]")){const u=o.slice(0,-2),d=t;if(u in d&&Array.isArray(d[u]))for(const f of d[u])Bm(f,e,n,r+1,s)}else if(o==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const u=t,d=Object.keys(u).filter(p=>!p.startsWith("_")&&!s.has(p)),f={};for(const p of d)f[p]=u[p];for(const[p,v]of Object.entries(f)){const w=[];for(const S of n.slice(r))S==="*"?w.push(p):w.push(S);m(u,w,v)}for(const p of d)delete u[p]}}else{const u=t;o in u&&Bm(u[o],e,n,r+1,s)}}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/function Bg(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/function IO(t){const e={},n=h(t,["operationName"]);n!=null&&m(e,["operationName"],n);const r=h(t,["resourceName"]);return r!=null&&m(e,["_url","resourceName"],r),e}function kO(t){const e={},n=h(t,["name"]);n!=null&&m(e,["name"],n);const r=h(t,["metadata"]);r!=null&&m(e,["metadata"],r);const s=h(t,["done"]);s!=null&&m(e,["done"],s);const o=h(t,["error"]);o!=null&&m(e,["error"],o);const u=h(t,["response","generateVideoResponse"]);return u!=null&&m(e,["response"],NO(u)),e}function _O(t){const e={},n=h(t,["name"]);n!=null&&m(e,["name"],n);const r=h(t,["metadata"]);r!=null&&m(e,["metadata"],r);const s=h(t,["done"]);s!=null&&m(e,["done"],s);const o=h(t,["error"]);o!=null&&m(e,["error"],o);const u=h(t,["response"]);return u!=null&&m(e,["response"],AO(u)),e}function NO(t){const e={},n=h(t,["generatedSamples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(u=>OO(u))),m(e,["generatedVideos"],o)}const r=h(t,["raiMediaFilteredCount"]);r!=null&&m(e,["raiMediaFilteredCount"],r);const s=h(t,["raiMediaFilteredReasons"]);return s!=null&&m(e,["raiMediaFilteredReasons"],s),e}function AO(t){const e={},n=h(t,["videos"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(u=>PO(u))),m(e,["generatedVideos"],o)}const r=h(t,["raiMediaFilteredCount"]);r!=null&&m(e,["raiMediaFilteredCount"],r);const s=h(t,["raiMediaFilteredReasons"]);return s!=null&&m(e,["raiMediaFilteredReasons"],s),e}function OO(t){const e={},n=h(t,["video"]);return n!=null&&m(e,["video"],UO(n)),e}function PO(t){const e={},n=h(t,["_self"]);return n!=null&&m(e,["video"],VO(n)),e}function RO(t){const e={},n=h(t,["operationName"]);return n!=null&&m(e,["_url","operationName"],n),e}function DO(t){const e={},n=h(t,["operationName"]);return n!=null&&m(e,["_url","operationName"],n),e}function jO(t){const e={},n=h(t,["name"]);n!=null&&m(e,["name"],n);const r=h(t,["metadata"]);r!=null&&m(e,["metadata"],r);const s=h(t,["done"]);s!=null&&m(e,["done"],s);const o=h(t,["error"]);o!=null&&m(e,["error"],o);const u=h(t,["response"]);return u!=null&&m(e,["response"],MO(u)),e}function MO(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=h(t,["parent"]);r!=null&&m(e,["parent"],r);const s=h(t,["documentName"]);return s!=null&&m(e,["documentName"],s),e}function $T(t){const e={},n=h(t,["name"]);n!=null&&m(e,["name"],n);const r=h(t,["metadata"]);r!=null&&m(e,["metadata"],r);const s=h(t,["done"]);s!=null&&m(e,["done"],s);const o=h(t,["error"]);o!=null&&m(e,["error"],o);const u=h(t,["response"]);return u!=null&&m(e,["response"],LO(u)),e}function LO(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=h(t,["parent"]);r!=null&&m(e,["parent"],r);const s=h(t,["documentName"]);return s!=null&&m(e,["documentName"],s),e}function UO(t){const e={},n=h(t,["uri"]);n!=null&&m(e,["uri"],n);const r=h(t,["encodedVideo"]);r!=null&&m(e,["videoBytes"],Bg(r));const s=h(t,["encoding"]);return s!=null&&m(e,["mimeType"],s),e}function VO(t){const e={},n=h(t,["gcsUri"]);n!=null&&m(e,["uri"],n);const r=h(t,["bytesBase64Encoded"]);r!=null&&m(e,["videoBytes"],Bg(r));const s=h(t,["mimeType"]);return s!=null&&m(e,["mimeType"],s),e}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/var Hw;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Hw||(Hw={}));var zw;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(zw||(zw={}));var Gw;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(Gw||(Gw={}));var gn;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(gn||(gn={}));var Bw;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Bw||(Bw={}));var $w;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})($w||($w={}));var Ww;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(Ww||(Ww={}));var Kw;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(Kw||(Kw={}));var Jw;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(Jw||(Jw={}));var Yw;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH",t.MINIMAL="MINIMAL"})(Yw||(Yw={}));var Xw;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(Xw||(Xw={}));var Qw;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(Qw||(Qw={}));var Zw;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(Zw||(Zw={}));var eE;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})(eE||(eE={}));var tE;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(tE||(tE={}));var nE;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(nE||(nE={}));var rE;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(rE||(rE={}));var iE;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(iE||(iE={}));var sE;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(sE||(sE={}));var Vu;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Vu||(Vu={}));var aE;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(aE||(aE={}));var oE;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(oE||(oE={}));var lE;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(lE||(lE={}));var $m;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})($m||($m={}));var uE;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(uE||(uE={}));var cE;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",t.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(cE||(cE={}));var dE;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(dE||(dE={}));var hE;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(hE||(hE={}));var fE;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(fE||(fE={}));var pE;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(pE||(pE={}));var mE;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(mE||(mE={}));var gE;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(gE||(gE={}));var yE;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(yE||(yE={}));var vE;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(vE||(vE={}));var bE;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(bE||(bE={}));var wE;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(wE||(wE={}));var EE;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(EE||(EE={}));var SE;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(SE||(SE={}));var xE;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(xE||(xE={}));var TE;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(TE||(TE={}));var CE;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(CE||(CE={}));var IE;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(IE||(IE={}));var kE;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(kE||(kE={}));var _E;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(_E||(_E={}));var NE;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(NE||(NE={}));var AE;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(AE||(AE={}));var OE;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(OE||(OE={}));var PE;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(PE||(PE={}));var RE;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(RE||(RE={}));var DE;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(DE||(DE={}));var jE;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(jE||(jE={}));var ME;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(ME||(ME={}));var LE;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(LE||(LE={}));var UE;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(UE||(UE={}));var VE;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(VE||(VE={}));var Lo;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(Lo||(Lo={}));class Wm{constructor(e){const n={};for(const r of e.headers.entries())n[r[0]]=r[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class wu{get text(){var e,n,r,s,o,u,d,f;if(((s=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let p="",v=!1;const w=[];for(const S of(f=(d=(u=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)!==null&&f!==void 0?f:[]){for(const[I,P]of Object.entries(S))I!=="text"&&I!=="thought"&&I!=="thoughtSignature"&&(P!==null||P!==void 0)&&w.push(I);if(typeof S.text=="string"){if(typeof S.thought=="boolean"&&S.thought)continue;v=!0,p+=S.text}}return w.length>0&&console.warn(`there are non-text parts ${w} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),v?p:void 0}get data(){var e,n,r,s,o,u,d,f;if(((s=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let p="";const v=[];for(const w of(f=(d=(u=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)!==null&&f!==void 0?f:[]){for(const[S,I]of Object.entries(w))S!=="inlineData"&&(I!==null||I!==void 0)&&v.push(S);w.inlineData&&typeof w.inlineData.data=="string"&&(p+=atob(w.inlineData.data))}return v.length>0&&console.warn(`there are non-data parts ${v} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),p.length>0?btoa(p):void 0}get functionCalls(){var e,n,r,s,o,u,d,f;if(((s=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const p=(f=(d=(u=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||f===void 0?void 0:f.filter(v=>v.functionCall).map(v=>v.functionCall).filter(v=>v!==void 0);if((p==null?void 0:p.length)!==0)return p}get executableCode(){var e,n,r,s,o,u,d,f,p;if(((s=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const v=(f=(d=(u=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||f===void 0?void 0:f.filter(w=>w.executableCode).map(w=>w.executableCode).filter(w=>w!==void 0);if((v==null?void 0:v.length)!==0)return(p=v==null?void 0:v[0])===null||p===void 0?void 0:p.code}get codeExecutionResult(){var e,n,r,s,o,u,d,f,p;if(((s=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const v=(f=(d=(u=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||f===void 0?void 0:f.filter(w=>w.codeExecutionResult).map(w=>w.codeExecutionResult).filter(w=>w!==void 0);if((v==null?void 0:v.length)!==0)return(p=v==null?void 0:v[0])===null||p===void 0?void 0:p.output}}class FE{}class qE{}class FO{}class qO{}class HO{}class zO{}class HE{}class zE{}class GE{}class GO{}class fh{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new fh;let s;const o=e;return n?s=_O(o):s=kO(o),Object.assign(r,s),r}}class BE{}class $E{}class WE{}class KE{}class BO{}class $O{}class WO{}class $g{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new $g,s=jO(e);return Object.assign(r,s),r}}class KO{}class JO{}class YO{}class JE{}class XO{get text(){var e,n,r;let s="",o=!1;const u=[];for(const d of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[f,p]of Object.entries(d))f!=="text"&&f!=="thought"&&p!==null&&u.push(f);if(typeof d.text=="string"){if(typeof d.thought=="boolean"&&d.thought)continue;o=!0,s+=d.text}}return u.length>0&&console.warn(`there are non-text parts ${u} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),o?s:void 0}get data(){var e,n,r;let s="";const o=[];for(const u of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[d,f]of Object.entries(u))d!=="inlineData"&&f!==null&&o.push(d);u.inlineData&&typeof u.inlineData.data=="string"&&(s+=atob(u.inlineData.data))}return o.length>0&&console.warn(`there are non-data parts ${o} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),s.length>0?btoa(s):void 0}}class QO{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Wg{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new Wg,s=$T(e);return Object.assign(r,s),r}}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/function Ye(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function WT(t,e){const n=Ye(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function KT(t){return Array.isArray(t)?t.map(e=>ph(e)):[ph(t)]}function ph(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function JT(t){const e=ph(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function YT(t){const e=ph(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function YE(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function XT(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>YE(e)):[YE(t)]}function Km(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function XE(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function QE(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function cn(t){if(t==null)throw new Error("ContentUnion is required");return Km(t)?t:{role:"user",parts:XT(t)}}function Kg(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const r=cn(n);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(t.isVertexAI()){const n=cn(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>cn(n)):[cn(e)]}function tr(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(XE(t)||QE(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[cn(t)]}const e=[],n=[],r=Km(t[0]);for(const s of t){const o=Km(s);if(o!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(o)e.push(s);else{if(XE(s)||QE(s))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(s)}}return r||e.push({role:"user",parts:XT(n)}),e}function ZO(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(r=>r!=="null");if(n.length===1)e.type=Object.values(gn).includes(n[0].toUpperCase())?n[0].toUpperCase():gn.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const r of n)e.anyOf.push({type:Object.values(gn).includes(r.toUpperCase())?r.toUpperCase():gn.TYPE_UNSPECIFIED})}}function Fo(t){const e={},n=["items"],r=["anyOf"],s=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const o=t.anyOf;o!=null&&o.length==2&&(o[0].type==="null"?(e.nullable=!0,t=o[1]):o[1].type==="null"&&(e.nullable=!0,t=o[0])),t.type instanceof Array&&ZO(t.type,e);for(const[u,d]of Object.entries(t))if(d!=null)if(u=="type"){if(d==="null")throw new Error("type: null can not be the only possible type for the field.");if(d instanceof Array)continue;e.type=Object.values(gn).includes(d.toUpperCase())?d.toUpperCase():gn.TYPE_UNSPECIFIED}else if(n.includes(u))e[u]=Fo(d);else if(r.includes(u)){const f=[];for(const p of d){if(p.type=="null"){e.nullable=!0;continue}f.push(Fo(p))}e[u]=f}else if(s.includes(u)){const f={};for(const[p,v]of Object.entries(d))f[p]=Fo(v);e[u]=f}else{if(u==="additionalProperties")continue;e[u]=d}return e}function Jg(t){return Fo(t)}function Yg(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function Xg(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function nl(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Fo(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Fo(e.response));return t}function rl(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function eP(t,e,n,r=1){const s=!e.startsWith(`${n}/`)&&e.split("/").length===r;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:s?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:s?`${n}/${e}`:e}function Vi(t,e){if(typeof e!="string")throw new Error("name must be a string");return eP(t,e,"cachedContents")}function QT(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function Us(t){return Bg(t)}function tP(t){return t!=null&&typeof t=="object"&&"name"in t}function nP(t){return t!=null&&typeof t=="object"&&"video"in t}function rP(t){return t!=null&&typeof t=="object"&&"uri"in t}function ZT(t){var e;let n;if(tP(t)&&(n=t.name),!(rP(t)&&(n=t.uri,n===void 0))&&!(nP(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const r=n.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${n}`);n=r[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function eC(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function tC(t){for(const e of["models","tunedModels","publisherModels"])if(iP(t,e))return t[e];return[]}function iP(t,e){return t!==null&&typeof t=="object"&&e in t}function sP(t,e={}){const n=t,r={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(r.responseJsonSchema=n.outputSchema),e.behavior&&(r.behavior=e.behavior),{functionDeclarations:[r]}}function aP(t,e={}){const n=[],r=new Set;for(const s of t){const o=s.name;if(r.has(o))throw new Error(`Duplicate function name ${o} found in MCP tools. Please ensure function names are unique.`);r.add(o);const u=sP(s,e);u.functionDeclarations&&n.push(...u.functionDeclarations)}return{functionDeclarations:n}}function nC(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const r=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,s=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(s>0||r!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(r>0||s!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function oP(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function rC(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const r=n.inlinedResponses;if(!Array.isArray(r)||r.length===0)return t;let s=!1;for(const o of r){if(typeof o!="object"||o===null)continue;const u=o.response;if(!(typeof u!="object"||u===null)&&u.embedding!==void 0){s=!0;break}}return s&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function il(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function iC(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/function lP(t){const e={},n=h(t,["responsesFile"]);n!=null&&m(e,["fileName"],n);const r=h(t,["inlinedResponses","inlinedResponses"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(u=>HP(u))),m(e,["inlinedResponses"],o)}const s=h(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(u=>u)),m(e,["inlinedEmbedContentResponses"],o)}return e}function uP(t){const e={},n=h(t,["predictionsFormat"]);n!=null&&m(e,["format"],n);const r=h(t,["gcsDestination","outputUriPrefix"]);r!=null&&m(e,["gcsUri"],r);const s=h(t,["bigqueryDestination","outputUri"]);return s!=null&&m(e,["bigqueryUri"],s),e}function cP(t){const e={},n=h(t,["format"]);n!=null&&m(e,["predictionsFormat"],n);const r=h(t,["gcsUri"]);r!=null&&m(e,["gcsDestination","outputUriPrefix"],r);const s=h(t,["bigqueryUri"]);if(s!=null&&m(e,["bigqueryDestination","outputUri"],s),h(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(h(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(h(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function eh(t){const e={},n=h(t,["name"]);n!=null&&m(e,["name"],n);const r=h(t,["metadata","displayName"]);r!=null&&m(e,["displayName"],r);const s=h(t,["metadata","state"]);s!=null&&m(e,["state"],iC(s));const o=h(t,["metadata","createTime"]);o!=null&&m(e,["createTime"],o);const u=h(t,["metadata","endTime"]);u!=null&&m(e,["endTime"],u);const d=h(t,["metadata","updateTime"]);d!=null&&m(e,["updateTime"],d);const f=h(t,["metadata","model"]);f!=null&&m(e,["model"],f);const p=h(t,["metadata","output"]);return p!=null&&m(e,["dest"],lP(rC(p))),e}function Jm(t){const e={},n=h(t,["name"]);n!=null&&m(e,["name"],n);const r=h(t,["displayName"]);r!=null&&m(e,["displayName"],r);const s=h(t,["state"]);s!=null&&m(e,["state"],iC(s));const o=h(t,["error"]);o!=null&&m(e,["error"],o);const u=h(t,["createTime"]);u!=null&&m(e,["createTime"],u);const d=h(t,["startTime"]);d!=null&&m(e,["startTime"],d);const f=h(t,["endTime"]);f!=null&&m(e,["endTime"],f);const p=h(t,["updateTime"]);p!=null&&m(e,["updateTime"],p);const v=h(t,["model"]);v!=null&&m(e,["model"],v);const w=h(t,["inputConfig"]);w!=null&&m(e,["src"],dP(w));const S=h(t,["outputConfig"]);S!=null&&m(e,["dest"],uP(rC(S)));const I=h(t,["completionStats"]);return I!=null&&m(e,["completionStats"],I),e}function dP(t){const e={},n=h(t,["instancesFormat"]);n!=null&&m(e,["format"],n);const r=h(t,["gcsSource","uris"]);r!=null&&m(e,["gcsUri"],r);const s=h(t,["bigquerySource","inputUri"]);return s!=null&&m(e,["bigqueryUri"],s),e}function hP(t,e){const n={};if(h(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(h(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(h(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const r=h(e,["fileName"]);r!=null&&m(n,["fileName"],r);const s=h(e,["inlinedRequests"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(u=>qP(t,u))),m(n,["requests","requests"],o)}return n}function fP(t){const e={},n=h(t,["format"]);n!=null&&m(e,["instancesFormat"],n);const r=h(t,["gcsUri"]);r!=null&&m(e,["gcsSource","uris"],r);const s=h(t,["bigqueryUri"]);if(s!=null&&m(e,["bigquerySource","inputUri"],s),h(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(h(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function pP(t){const e={},n=h(t,["data"]);if(n!=null&&m(e,["data"],n),h(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=h(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function mP(t,e){const n={},r=h(e,["name"]);return r!=null&&m(n,["_url","name"],il(t,r)),n}function gP(t,e){const n={},r=h(e,["name"]);return r!=null&&m(n,["_url","name"],il(t,r)),n}function yP(t){const e={},n=h(t,["content"]);n!=null&&m(e,["content"],n);const r=h(t,["citationMetadata"]);r!=null&&m(e,["citationMetadata"],vP(r));const s=h(t,["tokenCount"]);s!=null&&m(e,["tokenCount"],s);const o=h(t,["finishReason"]);o!=null&&m(e,["finishReason"],o);const u=h(t,["avgLogprobs"]);u!=null&&m(e,["avgLogprobs"],u);const d=h(t,["groundingMetadata"]);d!=null&&m(e,["groundingMetadata"],d);const f=h(t,["index"]);f!=null&&m(e,["index"],f);const p=h(t,["logprobsResult"]);p!=null&&m(e,["logprobsResult"],p);const v=h(t,["safetyRatings"]);if(v!=null){let S=v;Array.isArray(S)&&(S=S.map(I=>I)),m(e,["safetyRatings"],S)}const w=h(t,["urlContextMetadata"]);return w!=null&&m(e,["urlContextMetadata"],w),e}function vP(t){const e={},n=h(t,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>s)),m(e,["citations"],r)}return e}function sC(t){const e={},n=h(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>JP(o))),m(e,["parts"],s)}const r=h(t,["role"]);return r!=null&&m(e,["role"],r),e}function bP(t,e){const n={},r=h(t,["displayName"]);if(e!==void 0&&r!=null&&m(e,["batch","displayName"],r),h(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function wP(t,e){const n={},r=h(t,["displayName"]);e!==void 0&&r!=null&&m(e,["displayName"],r);const s=h(t,["dest"]);return e!==void 0&&s!=null&&m(e,["outputConfig"],cP(oP(s))),n}function ZE(t,e){const n={},r=h(e,["model"]);r!=null&&m(n,["_url","model"],Ye(t,r));const s=h(e,["src"]);s!=null&&m(n,["batch","inputConfig"],hP(t,nC(t,s)));const o=h(e,["config"]);return o!=null&&bP(o,n),n}function EP(t,e){const n={},r=h(e,["model"]);r!=null&&m(n,["model"],Ye(t,r));const s=h(e,["src"]);s!=null&&m(n,["inputConfig"],fP(nC(t,s)));const o=h(e,["config"]);return o!=null&&wP(o,n),n}function SP(t,e){const n={},r=h(t,["displayName"]);return e!==void 0&&r!=null&&m(e,["batch","displayName"],r),n}function xP(t,e){const n={},r=h(e,["model"]);r!=null&&m(n,["_url","model"],Ye(t,r));const s=h(e,["src"]);s!=null&&m(n,["batch","inputConfig"],AP(t,s));const o=h(e,["config"]);return o!=null&&SP(o,n),n}function TP(t,e){const n={},r=h(e,["name"]);return r!=null&&m(n,["_url","name"],il(t,r)),n}function CP(t,e){const n={},r=h(e,["name"]);return r!=null&&m(n,["_url","name"],il(t,r)),n}function IP(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=h(t,["name"]);r!=null&&m(e,["name"],r);const s=h(t,["done"]);s!=null&&m(e,["done"],s);const o=h(t,["error"]);return o!=null&&m(e,["error"],o),e}function kP(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=h(t,["name"]);r!=null&&m(e,["name"],r);const s=h(t,["done"]);s!=null&&m(e,["done"],s);const o=h(t,["error"]);return o!=null&&m(e,["error"],o),e}function _P(t,e){const n={},r=h(e,["contents"]);if(r!=null){let o=Kg(t,r);Array.isArray(o)&&(o=o.map(u=>u)),m(n,["requests[]","request","content"],o)}const s=h(e,["config"]);return s!=null&&(m(n,["_self"],NP(s,n)),CO(n,{"requests[].*":"requests[].request.*"})),n}function NP(t,e){const n={},r=h(t,["taskType"]);e!==void 0&&r!=null&&m(e,["requests[]","taskType"],r);const s=h(t,["title"]);e!==void 0&&s!=null&&m(e,["requests[]","title"],s);const o=h(t,["outputDimensionality"]);if(e!==void 0&&o!=null&&m(e,["requests[]","outputDimensionality"],o),h(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(h(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function AP(t,e){const n={},r=h(e,["fileName"]);r!=null&&m(n,["file_name"],r);const s=h(e,["inlinedRequests"]);return s!=null&&m(n,["requests"],_P(t,s)),n}function OP(t){const e={};if(h(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=h(t,["fileUri"]);n!=null&&m(e,["fileUri"],n);const r=h(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function PP(t){const e={},n=h(t,["id"]);n!=null&&m(e,["id"],n);const r=h(t,["args"]);r!=null&&m(e,["args"],r);const s=h(t,["name"]);if(s!=null&&m(e,["name"],s),h(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(h(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function RP(t){const e={},n=h(t,["mode"]);n!=null&&m(e,["mode"],n);const r=h(t,["allowedFunctionNames"]);if(r!=null&&m(e,["allowedFunctionNames"],r),h(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function DP(t,e,n){const r={},s=h(e,["systemInstruction"]);n!==void 0&&s!=null&&m(n,["systemInstruction"],sC(cn(s)));const o=h(e,["temperature"]);o!=null&&m(r,["temperature"],o);const u=h(e,["topP"]);u!=null&&m(r,["topP"],u);const d=h(e,["topK"]);d!=null&&m(r,["topK"],d);const f=h(e,["candidateCount"]);f!=null&&m(r,["candidateCount"],f);const p=h(e,["maxOutputTokens"]);p!=null&&m(r,["maxOutputTokens"],p);const v=h(e,["stopSequences"]);v!=null&&m(r,["stopSequences"],v);const w=h(e,["responseLogprobs"]);w!=null&&m(r,["responseLogprobs"],w);const S=h(e,["logprobs"]);S!=null&&m(r,["logprobs"],S);const I=h(e,["presencePenalty"]);I!=null&&m(r,["presencePenalty"],I);const P=h(e,["frequencyPenalty"]);P!=null&&m(r,["frequencyPenalty"],P);const j=h(e,["seed"]);j!=null&&m(r,["seed"],j);const D=h(e,["responseMimeType"]);D!=null&&m(r,["responseMimeType"],D);const q=h(e,["responseSchema"]);q!=null&&m(r,["responseSchema"],Jg(q));const X=h(e,["responseJsonSchema"]);if(X!=null&&m(r,["responseJsonSchema"],X),h(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(h(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const B=h(e,["safetySettings"]);if(n!==void 0&&B!=null){let R=B;Array.isArray(R)&&(R=R.map(ae=>YP(ae))),m(n,["safetySettings"],R)}const re=h(e,["tools"]);if(n!==void 0&&re!=null){let R=rl(re);Array.isArray(R)&&(R=R.map(ae=>QP(nl(ae)))),m(n,["tools"],R)}const ce=h(e,["toolConfig"]);if(n!==void 0&&ce!=null&&m(n,["toolConfig"],XP(ce)),h(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const ue=h(e,["cachedContent"]);n!==void 0&&ue!=null&&m(n,["cachedContent"],Vi(t,ue));const A=h(e,["responseModalities"]);A!=null&&m(r,["responseModalities"],A);const N=h(e,["mediaResolution"]);N!=null&&m(r,["mediaResolution"],N);const O=h(e,["speechConfig"]);if(O!=null&&m(r,["speechConfig"],Yg(O)),h(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const U=h(e,["thinkingConfig"]);U!=null&&m(r,["thinkingConfig"],U);const M=h(e,["imageConfig"]);M!=null&&m(r,["imageConfig"],FP(M));const H=h(e,["enableEnhancedCivicAnswers"]);return H!=null&&m(r,["enableEnhancedCivicAnswers"],H),r}function jP(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=h(t,["candidates"]);if(r!=null){let f=r;Array.isArray(f)&&(f=f.map(p=>yP(p))),m(e,["candidates"],f)}const s=h(t,["modelVersion"]);s!=null&&m(e,["modelVersion"],s);const o=h(t,["promptFeedback"]);o!=null&&m(e,["promptFeedback"],o);const u=h(t,["responseId"]);u!=null&&m(e,["responseId"],u);const d=h(t,["usageMetadata"]);return d!=null&&m(e,["usageMetadata"],d),e}function MP(t,e){const n={},r=h(e,["name"]);return r!=null&&m(n,["_url","name"],il(t,r)),n}function LP(t,e){const n={},r=h(e,["name"]);return r!=null&&m(n,["_url","name"],il(t,r)),n}function UP(t){const e={};if(h(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=h(t,["enableWidget"]);return n!=null&&m(e,["enableWidget"],n),e}function VP(t){const e={};if(h(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(h(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=h(t,["timeRangeFilter"]);return n!=null&&m(e,["timeRangeFilter"],n),e}function FP(t){const e={},n=h(t,["aspectRatio"]);n!=null&&m(e,["aspectRatio"],n);const r=h(t,["imageSize"]);if(r!=null&&m(e,["imageSize"],r),h(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(h(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function qP(t,e){const n={},r=h(e,["model"]);r!=null&&m(n,["request","model"],Ye(t,r));const s=h(e,["contents"]);if(s!=null){let d=tr(s);Array.isArray(d)&&(d=d.map(f=>sC(f))),m(n,["request","contents"],d)}const o=h(e,["metadata"]);o!=null&&m(n,["metadata"],o);const u=h(e,["config"]);return u!=null&&m(n,["request","generationConfig"],DP(t,u,h(n,["request"],{}))),n}function HP(t){const e={},n=h(t,["response"]);n!=null&&m(e,["response"],jP(n));const r=h(t,["error"]);return r!=null&&m(e,["error"],r),e}function zP(t,e){const n={},r=h(t,["pageSize"]);e!==void 0&&r!=null&&m(e,["_query","pageSize"],r);const s=h(t,["pageToken"]);if(e!==void 0&&s!=null&&m(e,["_query","pageToken"],s),h(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function GP(t,e){const n={},r=h(t,["pageSize"]);e!==void 0&&r!=null&&m(e,["_query","pageSize"],r);const s=h(t,["pageToken"]);e!==void 0&&s!=null&&m(e,["_query","pageToken"],s);const o=h(t,["filter"]);return e!==void 0&&o!=null&&m(e,["_query","filter"],o),n}function BP(t){const e={},n=h(t,["config"]);return n!=null&&zP(n,e),e}function $P(t){const e={},n=h(t,["config"]);return n!=null&&GP(n,e),e}function WP(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=h(t,["nextPageToken"]);r!=null&&m(e,["nextPageToken"],r);const s=h(t,["operations"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(u=>eh(u))),m(e,["batchJobs"],o)}return e}function KP(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=h(t,["nextPageToken"]);r!=null&&m(e,["nextPageToken"],r);const s=h(t,["batchPredictionJobs"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(u=>Jm(u))),m(e,["batchJobs"],o)}return e}function JP(t){const e={},n=h(t,["mediaResolution"]);n!=null&&m(e,["mediaResolution"],n);const r=h(t,["codeExecutionResult"]);r!=null&&m(e,["codeExecutionResult"],r);const s=h(t,["executableCode"]);s!=null&&m(e,["executableCode"],s);const o=h(t,["fileData"]);o!=null&&m(e,["fileData"],OP(o));const u=h(t,["functionCall"]);u!=null&&m(e,["functionCall"],PP(u));const d=h(t,["functionResponse"]);d!=null&&m(e,["functionResponse"],d);const f=h(t,["inlineData"]);f!=null&&m(e,["inlineData"],pP(f));const p=h(t,["text"]);p!=null&&m(e,["text"],p);const v=h(t,["thought"]);v!=null&&m(e,["thought"],v);const w=h(t,["thoughtSignature"]);w!=null&&m(e,["thoughtSignature"],w);const S=h(t,["videoMetadata"]);return S!=null&&m(e,["videoMetadata"],S),e}function YP(t){const e={},n=h(t,["category"]);if(n!=null&&m(e,["category"],n),h(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=h(t,["threshold"]);return r!=null&&m(e,["threshold"],r),e}function XP(t){const e={},n=h(t,["functionCallingConfig"]);n!=null&&m(e,["functionCallingConfig"],RP(n));const r=h(t,["retrievalConfig"]);return r!=null&&m(e,["retrievalConfig"],r),e}function QP(t){const e={},n=h(t,["functionDeclarations"]);if(n!=null){let v=n;Array.isArray(v)&&(v=v.map(w=>w)),m(e,["functionDeclarations"],v)}if(h(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=h(t,["googleSearchRetrieval"]);r!=null&&m(e,["googleSearchRetrieval"],r);const s=h(t,["computerUse"]);s!=null&&m(e,["computerUse"],s);const o=h(t,["fileSearch"]);o!=null&&m(e,["fileSearch"],o);const u=h(t,["codeExecution"]);if(u!=null&&m(e,["codeExecution"],u),h(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=h(t,["googleMaps"]);d!=null&&m(e,["googleMaps"],UP(d));const f=h(t,["googleSearch"]);f!=null&&m(e,["googleSearch"],VP(f));const p=h(t,["urlContext"]);return p!=null&&m(e,["urlContext"],p),e}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/var Pi;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(Pi||(Pi={}));class Da{constructor(e,n,r,s){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,r,s)}init(e,n,r){var s,o;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let u={config:{}};!r||Object.keys(r).length===0?u={config:{}}:typeof r=="object"?u=Object.assign({},r):u=r,u.config&&(u.config.pageToken=n.nextPageToken),this.paramsInternal=u,this.pageInternalSize=(o=(s=u.config)===null||s===void 0?void 0:s.pageSize)!==null&&o!==void 0?o:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/class ZP extends Ui{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Da(Pi.PAGED_ITEM_BATCH_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(e){const n=ZE(this.apiClient,e),r=n._url,s=fe("{model}:batchGenerateContent",r),o=n.batch.inputConfig.requests,u=o.requests,d=[];for(const f of u){const p=Object.assign({},f);if(p.systemInstruction){const v=p.systemInstruction;delete p.systemInstruction;const w=p.request;w.systemInstruction=v,p.request=w}d.push(p)}return o.requests=d,delete n.config,delete n._url,delete n._query,{path:s,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const r=n?Object.assign({},n):{},s=Date.now().toString();if(r.displayName||(r.displayName=`genaiBatchJob_${s}`),r.dest===void 0){const o=this.getGcsUri(e),u=this.getBigqueryUri(e);if(o)o.endsWith(".jsonl")?r.dest=`${o.slice(0,-6)}/dest`:r.dest=`${o}_dest_${s}`;else if(u)r.dest=`${u}_dest_${s}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return r}async createInternal(e){var n,r,s,o;let u,d="",f={};if(this.apiClient.isVertexAI()){const p=EP(this.apiClient,e);return d=fe("batchPredictionJobs",p._url),f=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json()),u.then(v=>Jm(v))}else{const p=ZE(this.apiClient,e);return d=fe("{model}:batchGenerateContent",p._url),f=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),u.then(v=>eh(v))}}async createEmbeddingsInternal(e){var n,r;let s,o="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=xP(this.apiClient,e);return o=fe("{model}:asyncBatchEmbedContent",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:o,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>eh(f))}}async get(e){var n,r,s,o;let u,d="",f={};if(this.apiClient.isVertexAI()){const p=LP(this.apiClient,e);return d=fe("batchPredictionJobs/{name}",p._url),f=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json()),u.then(v=>Jm(v))}else{const p=MP(this.apiClient,e);return d=fe("batches/{name}",p._url),f=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),u.then(v=>eh(v))}}async cancel(e){var n,r,s,o;let u="",d={};if(this.apiClient.isVertexAI()){const f=gP(this.apiClient,e);u=fe("batchPredictionJobs/{name}:cancel",f._url),d=f._query,delete f._url,delete f._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const f=mP(this.apiClient,e);u=fe("batches/{name}:cancel",f._url),d=f._query,delete f._url,delete f._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var n,r,s,o;let u,d="",f={};if(this.apiClient.isVertexAI()){const p=$P(e);return d=fe("batchPredictionJobs",p._url),f=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json().then(w=>{const S=w;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const w=KP(v),S=new JE;return Object.assign(S,w),S})}else{const p=BP(e);return d=fe("batches",p._url),f=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(w=>{const S=w;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const w=WP(v),S=new JE;return Object.assign(S,w),S})}}async delete(e){var n,r,s,o;let u,d="",f={};if(this.apiClient.isVertexAI()){const p=CP(this.apiClient,e);return d=fe("batchPredictionJobs/{name}",p._url),f=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json().then(w=>{const S=w;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>kP(v))}else{const p=TP(this.apiClient,e);return d=fe("batches/{name}",p._url),f=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(w=>{const S=w;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>IP(v))}}}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/function eR(t){const e={},n=h(t,["data"]);if(n!=null&&m(e,["data"],n),h(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=h(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function eS(t){const e={},n=h(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>xR(o))),m(e,["parts"],s)}const r=h(t,["role"]);return r!=null&&m(e,["role"],r),e}function tR(t,e){const n={},r=h(t,["ttl"]);e!==void 0&&r!=null&&m(e,["ttl"],r);const s=h(t,["expireTime"]);e!==void 0&&s!=null&&m(e,["expireTime"],s);const o=h(t,["displayName"]);e!==void 0&&o!=null&&m(e,["displayName"],o);const u=h(t,["contents"]);if(e!==void 0&&u!=null){let v=tr(u);Array.isArray(v)&&(v=v.map(w=>eS(w))),m(e,["contents"],v)}const d=h(t,["systemInstruction"]);e!==void 0&&d!=null&&m(e,["systemInstruction"],eS(cn(d)));const f=h(t,["tools"]);if(e!==void 0&&f!=null){let v=f;Array.isArray(v)&&(v=v.map(w=>CR(w))),m(e,["tools"],v)}const p=h(t,["toolConfig"]);if(e!==void 0&&p!=null&&m(e,["toolConfig"],TR(p)),h(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function nR(t,e){const n={},r=h(t,["ttl"]);e!==void 0&&r!=null&&m(e,["ttl"],r);const s=h(t,["expireTime"]);e!==void 0&&s!=null&&m(e,["expireTime"],s);const o=h(t,["displayName"]);e!==void 0&&o!=null&&m(e,["displayName"],o);const u=h(t,["contents"]);if(e!==void 0&&u!=null){let w=tr(u);Array.isArray(w)&&(w=w.map(S=>S)),m(e,["contents"],w)}const d=h(t,["systemInstruction"]);e!==void 0&&d!=null&&m(e,["systemInstruction"],cn(d));const f=h(t,["tools"]);if(e!==void 0&&f!=null){let w=f;Array.isArray(w)&&(w=w.map(S=>IR(S))),m(e,["tools"],w)}const p=h(t,["toolConfig"]);e!==void 0&&p!=null&&m(e,["toolConfig"],p);const v=h(t,["kmsKeyName"]);return e!==void 0&&v!=null&&m(e,["encryption_spec","kmsKeyName"],v),n}function rR(t,e){const n={},r=h(e,["model"]);r!=null&&m(n,["model"],WT(t,r));const s=h(e,["config"]);return s!=null&&tR(s,n),n}function iR(t,e){const n={},r=h(e,["model"]);r!=null&&m(n,["model"],WT(t,r));const s=h(e,["config"]);return s!=null&&nR(s,n),n}function sR(t,e){const n={},r=h(e,["name"]);return r!=null&&m(n,["_url","name"],Vi(t,r)),n}function aR(t,e){const n={},r=h(e,["name"]);return r!=null&&m(n,["_url","name"],Vi(t,r)),n}function oR(t){const e={},n=h(t,["sdkHttpResponse"]);return n!=null&&m(e,["sdkHttpResponse"],n),e}function lR(t){const e={},n=h(t,["sdkHttpResponse"]);return n!=null&&m(e,["sdkHttpResponse"],n),e}function uR(t){const e={};if(h(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=h(t,["fileUri"]);n!=null&&m(e,["fileUri"],n);const r=h(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function cR(t){const e={},n=h(t,["id"]);n!=null&&m(e,["id"],n);const r=h(t,["args"]);r!=null&&m(e,["args"],r);const s=h(t,["name"]);if(s!=null&&m(e,["name"],s),h(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(h(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function dR(t){const e={},n=h(t,["mode"]);n!=null&&m(e,["mode"],n);const r=h(t,["allowedFunctionNames"]);if(r!=null&&m(e,["allowedFunctionNames"],r),h(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function hR(t){const e={};if(h(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=h(t,["description"]);n!=null&&m(e,["description"],n);const r=h(t,["name"]);r!=null&&m(e,["name"],r);const s=h(t,["parameters"]);s!=null&&m(e,["parameters"],s);const o=h(t,["parametersJsonSchema"]);o!=null&&m(e,["parametersJsonSchema"],o);const u=h(t,["response"]);u!=null&&m(e,["response"],u);const d=h(t,["responseJsonSchema"]);return d!=null&&m(e,["responseJsonSchema"],d),e}function fR(t,e){const n={},r=h(e,["name"]);return r!=null&&m(n,["_url","name"],Vi(t,r)),n}function pR(t,e){const n={},r=h(e,["name"]);return r!=null&&m(n,["_url","name"],Vi(t,r)),n}function mR(t){const e={};if(h(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=h(t,["enableWidget"]);return n!=null&&m(e,["enableWidget"],n),e}function gR(t){const e={};if(h(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(h(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=h(t,["timeRangeFilter"]);return n!=null&&m(e,["timeRangeFilter"],n),e}function yR(t,e){const n={},r=h(t,["pageSize"]);e!==void 0&&r!=null&&m(e,["_query","pageSize"],r);const s=h(t,["pageToken"]);return e!==void 0&&s!=null&&m(e,["_query","pageToken"],s),n}function vR(t,e){const n={},r=h(t,["pageSize"]);e!==void 0&&r!=null&&m(e,["_query","pageSize"],r);const s=h(t,["pageToken"]);return e!==void 0&&s!=null&&m(e,["_query","pageToken"],s),n}function bR(t){const e={},n=h(t,["config"]);return n!=null&&yR(n,e),e}function wR(t){const e={},n=h(t,["config"]);return n!=null&&vR(n,e),e}function ER(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=h(t,["nextPageToken"]);r!=null&&m(e,["nextPageToken"],r);const s=h(t,["cachedContents"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(u=>u)),m(e,["cachedContents"],o)}return e}function SR(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=h(t,["nextPageToken"]);r!=null&&m(e,["nextPageToken"],r);const s=h(t,["cachedContents"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(u=>u)),m(e,["cachedContents"],o)}return e}function xR(t){const e={},n=h(t,["mediaResolution"]);n!=null&&m(e,["mediaResolution"],n);const r=h(t,["codeExecutionResult"]);r!=null&&m(e,["codeExecutionResult"],r);const s=h(t,["executableCode"]);s!=null&&m(e,["executableCode"],s);const o=h(t,["fileData"]);o!=null&&m(e,["fileData"],uR(o));const u=h(t,["functionCall"]);u!=null&&m(e,["functionCall"],cR(u));const d=h(t,["functionResponse"]);d!=null&&m(e,["functionResponse"],d);const f=h(t,["inlineData"]);f!=null&&m(e,["inlineData"],eR(f));const p=h(t,["text"]);p!=null&&m(e,["text"],p);const v=h(t,["thought"]);v!=null&&m(e,["thought"],v);const w=h(t,["thoughtSignature"]);w!=null&&m(e,["thoughtSignature"],w);const S=h(t,["videoMetadata"]);return S!=null&&m(e,["videoMetadata"],S),e}function TR(t){const e={},n=h(t,["functionCallingConfig"]);n!=null&&m(e,["functionCallingConfig"],dR(n));const r=h(t,["retrievalConfig"]);return r!=null&&m(e,["retrievalConfig"],r),e}function CR(t){const e={},n=h(t,["functionDeclarations"]);if(n!=null){let v=n;Array.isArray(v)&&(v=v.map(w=>w)),m(e,["functionDeclarations"],v)}if(h(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=h(t,["googleSearchRetrieval"]);r!=null&&m(e,["googleSearchRetrieval"],r);const s=h(t,["computerUse"]);s!=null&&m(e,["computerUse"],s);const o=h(t,["fileSearch"]);o!=null&&m(e,["fileSearch"],o);const u=h(t,["codeExecution"]);if(u!=null&&m(e,["codeExecution"],u),h(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=h(t,["googleMaps"]);d!=null&&m(e,["googleMaps"],mR(d));const f=h(t,["googleSearch"]);f!=null&&m(e,["googleSearch"],gR(f));const p=h(t,["urlContext"]);return p!=null&&m(e,["urlContext"],p),e}function IR(t){const e={},n=h(t,["functionDeclarations"]);if(n!=null){let w=n;Array.isArray(w)&&(w=w.map(S=>hR(S))),m(e,["functionDeclarations"],w)}const r=h(t,["retrieval"]);r!=null&&m(e,["retrieval"],r);const s=h(t,["googleSearchRetrieval"]);s!=null&&m(e,["googleSearchRetrieval"],s);const o=h(t,["computerUse"]);if(o!=null&&m(e,["computerUse"],o),h(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=h(t,["codeExecution"]);u!=null&&m(e,["codeExecution"],u);const d=h(t,["enterpriseWebSearch"]);d!=null&&m(e,["enterpriseWebSearch"],d);const f=h(t,["googleMaps"]);f!=null&&m(e,["googleMaps"],f);const p=h(t,["googleSearch"]);p!=null&&m(e,["googleSearch"],p);const v=h(t,["urlContext"]);return v!=null&&m(e,["urlContext"],v),e}function kR(t,e){const n={},r=h(t,["ttl"]);e!==void 0&&r!=null&&m(e,["ttl"],r);const s=h(t,["expireTime"]);return e!==void 0&&s!=null&&m(e,["expireTime"],s),n}function _R(t,e){const n={},r=h(t,["ttl"]);e!==void 0&&r!=null&&m(e,["ttl"],r);const s=h(t,["expireTime"]);return e!==void 0&&s!=null&&m(e,["expireTime"],s),n}function NR(t,e){const n={},r=h(e,["name"]);r!=null&&m(n,["_url","name"],Vi(t,r));const s=h(e,["config"]);return s!=null&&kR(s,n),n}function AR(t,e){const n={},r=h(e,["name"]);r!=null&&m(n,["_url","name"],Vi(t,r));const s=h(e,["config"]);return s!=null&&_R(s,n),n}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/class OR extends Ui{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Da(Pi.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(n),n)}async create(e){var n,r,s,o;let u,d="",f={};if(this.apiClient.isVertexAI()){const p=iR(this.apiClient,e);return d=fe("cachedContents",p._url),f=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json()),u.then(v=>v)}else{const p=rR(this.apiClient,e);return d=fe("cachedContents",p._url),f=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),u.then(v=>v)}}async get(e){var n,r,s,o;let u,d="",f={};if(this.apiClient.isVertexAI()){const p=pR(this.apiClient,e);return d=fe("{name}",p._url),f=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json()),u.then(v=>v)}else{const p=fR(this.apiClient,e);return d=fe("{name}",p._url),f=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),u.then(v=>v)}}async delete(e){var n,r,s,o;let u,d="",f={};if(this.apiClient.isVertexAI()){const p=aR(this.apiClient,e);return d=fe("{name}",p._url),f=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json().then(w=>{const S=w;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const w=lR(v),S=new WE;return Object.assign(S,w),S})}else{const p=sR(this.apiClient,e);return d=fe("{name}",p._url),f=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(w=>{const S=w;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const w=oR(v),S=new WE;return Object.assign(S,w),S})}}async update(e){var n,r,s,o;let u,d="",f={};if(this.apiClient.isVertexAI()){const p=AR(this.apiClient,e);return d=fe("{name}",p._url),f=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json()),u.then(v=>v)}else{const p=NR(this.apiClient,e);return d=fe("{name}",p._url),f=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),u.then(v=>v)}}async listInternal(e){var n,r,s,o;let u,d="",f={};if(this.apiClient.isVertexAI()){const p=wR(e);return d=fe("cachedContents",p._url),f=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json().then(w=>{const S=w;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const w=SR(v),S=new KE;return Object.assign(S,w),S})}else{const p=bR(e);return d=fe("cachedContents",p._url),f=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(w=>{const S=w;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const w=ER(v),S=new KE;return Object.assign(S,w),S})}}}function mh(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function tS(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ke(t){return this instanceof ke?(this.v=t,this):new ke(t)}function wr(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,o=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),d("next"),d("throw"),d("return",u),s[Symbol.asyncIterator]=function(){return this},s;function u(I){return function(P){return Promise.resolve(P).then(I,w)}}function d(I,P){r[I]&&(s[I]=function(j){return new Promise(function(D,q){o.push([I,j,D,q])>1||f(I,j)})},P&&(s[I]=P(s[I])))}function f(I,P){try{p(r[I](P))}catch(j){S(o[0][3],j)}}function p(I){I.value instanceof ke?Promise.resolve(I.value.v).then(v,w):S(o[0][2],I)}function v(I){f("next",I)}function w(I){f("throw",I)}function S(I,P){I(P),o.shift(),o.length&&f(o[0][0],o[0][1])}}function Er(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof tS=="function"?tS(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(u){return new Promise(function(d,f){u=t[o](u),s(d,f,u.done,u.value)})}}function s(o,u,d,f){Promise.resolve(f).then(function(p){o({value:p,done:d})},u)}}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/function PR(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:aC(n)}function aC(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function RR(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function nS(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let r=0;for(;r<n;)if(t[r].role==="user")e.push(t[r]),r++;else{const s=[];let o=!0;for(;r<n&&t[r].role==="model";)s.push(t[r]),o&&!aC(t[r])&&(o=!1),r++;o?e.push(...s):e.pop()}return e}class DR{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new jR(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class jR{constructor(e,n,r,s={},o=[]){this.apiClient=e,this.modelsModule=n,this.model=r,this.config=s,this.history=o,this.sendPromise=Promise.resolve(),RR(o)}async sendMessage(e){var n;await this.sendPromise;const r=cn(e.message),s=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var o,u,d;const f=await s,p=(u=(o=f.candidates)===null||o===void 0?void 0:o[0])===null||u===void 0?void 0:u.content,v=f.automaticFunctionCallingHistory,w=this.getHistory(!0).length;let S=[];v!=null&&(S=(d=v.slice(w))!==null&&d!==void 0?d:[]);const I=p?[p]:[];this.recordHistory(r,I,S)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),s}async sendMessageStream(e){var n;await this.sendPromise;const r=cn(e.message),s=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=s.then(()=>{}).catch(()=>{});const o=await s;return this.processStreamResponse(o,r)}getHistory(e=!1){const n=e?nS(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){return wr(this,arguments,function*(){var r,s,o,u,d,f;const p=[];try{for(var v=!0,w=Er(e),S;S=yield ke(w.next()),r=S.done,!r;v=!0){u=S.value,v=!1;const I=u;if(PR(I)){const P=(f=(d=I.candidates)===null||d===void 0?void 0:d[0])===null||f===void 0?void 0:f.content;P!==void 0&&p.push(P)}yield yield ke(I)}}catch(I){s={error:I}}finally{try{!v&&!r&&(o=w.return)&&(yield ke(o.call(w)))}finally{if(s)throw s.error}}this.recordHistory(n,p)})}recordHistory(e,n,r){let s=[];n.length>0&&n.every(o=>o.role!==void 0)?s=n:s.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(...nS(r)):this.history.push(e),this.history.push(...s)}}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/class qh extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,qh.prototype)}}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/function MR(t){const e={},n=h(t,["file"]);return n!=null&&m(e,["file"],n),e}function LR(t){const e={},n=h(t,["sdkHttpResponse"]);return n!=null&&m(e,["sdkHttpResponse"],n),e}function UR(t){const e={},n=h(t,["name"]);return n!=null&&m(e,["_url","file"],ZT(n)),e}function VR(t){const e={},n=h(t,["sdkHttpResponse"]);return n!=null&&m(e,["sdkHttpResponse"],n),e}function FR(t){const e={},n=h(t,["name"]);return n!=null&&m(e,["_url","file"],ZT(n)),e}function qR(t,e){const n={},r=h(t,["pageSize"]);e!==void 0&&r!=null&&m(e,["_query","pageSize"],r);const s=h(t,["pageToken"]);return e!==void 0&&s!=null&&m(e,["_query","pageToken"],s),n}function HR(t){const e={},n=h(t,["config"]);return n!=null&&qR(n,e),e}function zR(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=h(t,["nextPageToken"]);r!=null&&m(e,["nextPageToken"],r);const s=h(t,["files"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(u=>u)),m(e,["files"],o)}return e}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/class GR extends Ui{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Da(Pi.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,r;let s,o="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=HR(e);return o=fe("files",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:o,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:f.headers},v})),s.then(f=>{const p=zR(f),v=new KO;return Object.assign(v,p),v})}}async createInternal(e){var n,r;let s,o="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=MR(e);return o=fe("upload/v1beta/files",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:o,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>{const p=LR(f),v=new JO;return Object.assign(v,p),v})}}async get(e){var n,r;let s,o="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=FR(e);return o=fe("files/{file}",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:o,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>f)}}async delete(e){var n,r;let s,o="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=UR(e);return o=fe("files/{file}",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:o,queryParams:u,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:f.headers},v})),s.then(f=>{const p=VR(f),v=new YO;return Object.assign(v,p),v})}}}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/function th(t){const e={},n=h(t,["data"]);if(n!=null&&m(e,["data"],n),h(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=h(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function BR(t){const e={},n=h(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>oD(o))),m(e,["parts"],s)}const r=h(t,["role"]);return r!=null&&m(e,["role"],r),e}function $R(t){const e={};if(h(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=h(t,["fileUri"]);n!=null&&m(e,["fileUri"],n);const r=h(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function WR(t){const e={},n=h(t,["id"]);n!=null&&m(e,["id"],n);const r=h(t,["args"]);r!=null&&m(e,["args"],r);const s=h(t,["name"]);if(s!=null&&m(e,["name"],s),h(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(h(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function KR(t){const e={};if(h(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=h(t,["description"]);n!=null&&m(e,["description"],n);const r=h(t,["name"]);r!=null&&m(e,["name"],r);const s=h(t,["parameters"]);s!=null&&m(e,["parameters"],s);const o=h(t,["parametersJsonSchema"]);o!=null&&m(e,["parametersJsonSchema"],o);const u=h(t,["response"]);u!=null&&m(e,["response"],u);const d=h(t,["responseJsonSchema"]);return d!=null&&m(e,["responseJsonSchema"],d),e}function JR(t){const e={},n=h(t,["modelSelectionConfig"]);n!=null&&m(e,["modelConfig"],n);const r=h(t,["responseJsonSchema"]);r!=null&&m(e,["responseJsonSchema"],r);const s=h(t,["audioTimestamp"]);s!=null&&m(e,["audioTimestamp"],s);const o=h(t,["candidateCount"]);o!=null&&m(e,["candidateCount"],o);const u=h(t,["enableAffectiveDialog"]);u!=null&&m(e,["enableAffectiveDialog"],u);const d=h(t,["frequencyPenalty"]);d!=null&&m(e,["frequencyPenalty"],d);const f=h(t,["logprobs"]);f!=null&&m(e,["logprobs"],f);const p=h(t,["maxOutputTokens"]);p!=null&&m(e,["maxOutputTokens"],p);const v=h(t,["mediaResolution"]);v!=null&&m(e,["mediaResolution"],v);const w=h(t,["presencePenalty"]);w!=null&&m(e,["presencePenalty"],w);const S=h(t,["responseLogprobs"]);S!=null&&m(e,["responseLogprobs"],S);const I=h(t,["responseMimeType"]);I!=null&&m(e,["responseMimeType"],I);const P=h(t,["responseModalities"]);P!=null&&m(e,["responseModalities"],P);const j=h(t,["responseSchema"]);j!=null&&m(e,["responseSchema"],j);const D=h(t,["routingConfig"]);D!=null&&m(e,["routingConfig"],D);const q=h(t,["seed"]);q!=null&&m(e,["seed"],q);const X=h(t,["speechConfig"]);X!=null&&m(e,["speechConfig"],X);const B=h(t,["stopSequences"]);B!=null&&m(e,["stopSequences"],B);const re=h(t,["temperature"]);re!=null&&m(e,["temperature"],re);const ce=h(t,["thinkingConfig"]);ce!=null&&m(e,["thinkingConfig"],ce);const ue=h(t,["topK"]);ue!=null&&m(e,["topK"],ue);const A=h(t,["topP"]);if(A!=null&&m(e,["topP"],A),h(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function YR(t){const e={};if(h(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=h(t,["enableWidget"]);return n!=null&&m(e,["enableWidget"],n),e}function XR(t){const e={};if(h(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(h(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=h(t,["timeRangeFilter"]);return n!=null&&m(e,["timeRangeFilter"],n),e}function QR(t,e){const n={},r=h(t,["generationConfig"]);e!==void 0&&r!=null&&m(e,["setup","generationConfig"],r);const s=h(t,["responseModalities"]);e!==void 0&&s!=null&&m(e,["setup","generationConfig","responseModalities"],s);const o=h(t,["temperature"]);e!==void 0&&o!=null&&m(e,["setup","generationConfig","temperature"],o);const u=h(t,["topP"]);e!==void 0&&u!=null&&m(e,["setup","generationConfig","topP"],u);const d=h(t,["topK"]);e!==void 0&&d!=null&&m(e,["setup","generationConfig","topK"],d);const f=h(t,["maxOutputTokens"]);e!==void 0&&f!=null&&m(e,["setup","generationConfig","maxOutputTokens"],f);const p=h(t,["mediaResolution"]);e!==void 0&&p!=null&&m(e,["setup","generationConfig","mediaResolution"],p);const v=h(t,["seed"]);e!==void 0&&v!=null&&m(e,["setup","generationConfig","seed"],v);const w=h(t,["speechConfig"]);e!==void 0&&w!=null&&m(e,["setup","generationConfig","speechConfig"],Xg(w));const S=h(t,["thinkingConfig"]);e!==void 0&&S!=null&&m(e,["setup","generationConfig","thinkingConfig"],S);const I=h(t,["enableAffectiveDialog"]);e!==void 0&&I!=null&&m(e,["setup","generationConfig","enableAffectiveDialog"],I);const P=h(t,["systemInstruction"]);e!==void 0&&P!=null&&m(e,["setup","systemInstruction"],BR(cn(P)));const j=h(t,["tools"]);if(e!==void 0&&j!=null){let ue=rl(j);Array.isArray(ue)&&(ue=ue.map(A=>uD(nl(A)))),m(e,["setup","tools"],ue)}const D=h(t,["sessionResumption"]);e!==void 0&&D!=null&&m(e,["setup","sessionResumption"],lD(D));const q=h(t,["inputAudioTranscription"]);e!==void 0&&q!=null&&m(e,["setup","inputAudioTranscription"],q);const X=h(t,["outputAudioTranscription"]);e!==void 0&&X!=null&&m(e,["setup","outputAudioTranscription"],X);const B=h(t,["realtimeInputConfig"]);e!==void 0&&B!=null&&m(e,["setup","realtimeInputConfig"],B);const re=h(t,["contextWindowCompression"]);e!==void 0&&re!=null&&m(e,["setup","contextWindowCompression"],re);const ce=h(t,["proactivity"]);if(e!==void 0&&ce!=null&&m(e,["setup","proactivity"],ce),h(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function ZR(t,e){const n={},r=h(t,["generationConfig"]);e!==void 0&&r!=null&&m(e,["setup","generationConfig"],JR(r));const s=h(t,["responseModalities"]);e!==void 0&&s!=null&&m(e,["setup","generationConfig","responseModalities"],s);const o=h(t,["temperature"]);e!==void 0&&o!=null&&m(e,["setup","generationConfig","temperature"],o);const u=h(t,["topP"]);e!==void 0&&u!=null&&m(e,["setup","generationConfig","topP"],u);const d=h(t,["topK"]);e!==void 0&&d!=null&&m(e,["setup","generationConfig","topK"],d);const f=h(t,["maxOutputTokens"]);e!==void 0&&f!=null&&m(e,["setup","generationConfig","maxOutputTokens"],f);const p=h(t,["mediaResolution"]);e!==void 0&&p!=null&&m(e,["setup","generationConfig","mediaResolution"],p);const v=h(t,["seed"]);e!==void 0&&v!=null&&m(e,["setup","generationConfig","seed"],v);const w=h(t,["speechConfig"]);e!==void 0&&w!=null&&m(e,["setup","generationConfig","speechConfig"],Xg(w));const S=h(t,["thinkingConfig"]);e!==void 0&&S!=null&&m(e,["setup","generationConfig","thinkingConfig"],S);const I=h(t,["enableAffectiveDialog"]);e!==void 0&&I!=null&&m(e,["setup","generationConfig","enableAffectiveDialog"],I);const P=h(t,["systemInstruction"]);e!==void 0&&P!=null&&m(e,["setup","systemInstruction"],cn(P));const j=h(t,["tools"]);if(e!==void 0&&j!=null){let A=rl(j);Array.isArray(A)&&(A=A.map(N=>cD(nl(N)))),m(e,["setup","tools"],A)}const D=h(t,["sessionResumption"]);e!==void 0&&D!=null&&m(e,["setup","sessionResumption"],D);const q=h(t,["inputAudioTranscription"]);e!==void 0&&q!=null&&m(e,["setup","inputAudioTranscription"],q);const X=h(t,["outputAudioTranscription"]);e!==void 0&&X!=null&&m(e,["setup","outputAudioTranscription"],X);const B=h(t,["realtimeInputConfig"]);e!==void 0&&B!=null&&m(e,["setup","realtimeInputConfig"],B);const re=h(t,["contextWindowCompression"]);e!==void 0&&re!=null&&m(e,["setup","contextWindowCompression"],re);const ce=h(t,["proactivity"]);e!==void 0&&ce!=null&&m(e,["setup","proactivity"],ce);const ue=h(t,["explicitVadSignal"]);return e!==void 0&&ue!=null&&m(e,["setup","explicitVadSignal"],ue),n}function eD(t,e){const n={},r=h(e,["model"]);r!=null&&m(n,["setup","model"],Ye(t,r));const s=h(e,["config"]);return s!=null&&m(n,["config"],QR(s,n)),n}function tD(t,e){const n={},r=h(e,["model"]);r!=null&&m(n,["setup","model"],Ye(t,r));const s=h(e,["config"]);return s!=null&&m(n,["config"],ZR(s,n)),n}function nD(t){const e={},n=h(t,["musicGenerationConfig"]);return n!=null&&m(e,["musicGenerationConfig"],n),e}function rD(t){const e={},n=h(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>s)),m(e,["weightedPrompts"],r)}return e}function iD(t){const e={},n=h(t,["media"]);if(n!=null){let p=KT(n);Array.isArray(p)&&(p=p.map(v=>th(v))),m(e,["mediaChunks"],p)}const r=h(t,["audio"]);r!=null&&m(e,["audio"],th(YT(r)));const s=h(t,["audioStreamEnd"]);s!=null&&m(e,["audioStreamEnd"],s);const o=h(t,["video"]);o!=null&&m(e,["video"],th(JT(o)));const u=h(t,["text"]);u!=null&&m(e,["text"],u);const d=h(t,["activityStart"]);d!=null&&m(e,["activityStart"],d);const f=h(t,["activityEnd"]);return f!=null&&m(e,["activityEnd"],f),e}function sD(t){const e={},n=h(t,["media"]);if(n!=null){let p=KT(n);Array.isArray(p)&&(p=p.map(v=>v)),m(e,["mediaChunks"],p)}const r=h(t,["audio"]);r!=null&&m(e,["audio"],YT(r));const s=h(t,["audioStreamEnd"]);s!=null&&m(e,["audioStreamEnd"],s);const o=h(t,["video"]);o!=null&&m(e,["video"],JT(o));const u=h(t,["text"]);u!=null&&m(e,["text"],u);const d=h(t,["activityStart"]);d!=null&&m(e,["activityStart"],d);const f=h(t,["activityEnd"]);return f!=null&&m(e,["activityEnd"],f),e}function aD(t){const e={},n=h(t,["setupComplete"]);n!=null&&m(e,["setupComplete"],n);const r=h(t,["serverContent"]);r!=null&&m(e,["serverContent"],r);const s=h(t,["toolCall"]);s!=null&&m(e,["toolCall"],s);const o=h(t,["toolCallCancellation"]);o!=null&&m(e,["toolCallCancellation"],o);const u=h(t,["usageMetadata"]);u!=null&&m(e,["usageMetadata"],dD(u));const d=h(t,["goAway"]);d!=null&&m(e,["goAway"],d);const f=h(t,["sessionResumptionUpdate"]);f!=null&&m(e,["sessionResumptionUpdate"],f);const p=h(t,["voiceActivityDetectionSignal"]);return p!=null&&m(e,["voiceActivityDetectionSignal"],p),e}function oD(t){const e={},n=h(t,["mediaResolution"]);n!=null&&m(e,["mediaResolution"],n);const r=h(t,["codeExecutionResult"]);r!=null&&m(e,["codeExecutionResult"],r);const s=h(t,["executableCode"]);s!=null&&m(e,["executableCode"],s);const o=h(t,["fileData"]);o!=null&&m(e,["fileData"],$R(o));const u=h(t,["functionCall"]);u!=null&&m(e,["functionCall"],WR(u));const d=h(t,["functionResponse"]);d!=null&&m(e,["functionResponse"],d);const f=h(t,["inlineData"]);f!=null&&m(e,["inlineData"],th(f));const p=h(t,["text"]);p!=null&&m(e,["text"],p);const v=h(t,["thought"]);v!=null&&m(e,["thought"],v);const w=h(t,["thoughtSignature"]);w!=null&&m(e,["thoughtSignature"],w);const S=h(t,["videoMetadata"]);return S!=null&&m(e,["videoMetadata"],S),e}function lD(t){const e={},n=h(t,["handle"]);if(n!=null&&m(e,["handle"],n),h(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function uD(t){const e={},n=h(t,["functionDeclarations"]);if(n!=null){let v=n;Array.isArray(v)&&(v=v.map(w=>w)),m(e,["functionDeclarations"],v)}if(h(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=h(t,["googleSearchRetrieval"]);r!=null&&m(e,["googleSearchRetrieval"],r);const s=h(t,["computerUse"]);s!=null&&m(e,["computerUse"],s);const o=h(t,["fileSearch"]);o!=null&&m(e,["fileSearch"],o);const u=h(t,["codeExecution"]);if(u!=null&&m(e,["codeExecution"],u),h(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=h(t,["googleMaps"]);d!=null&&m(e,["googleMaps"],YR(d));const f=h(t,["googleSearch"]);f!=null&&m(e,["googleSearch"],XR(f));const p=h(t,["urlContext"]);return p!=null&&m(e,["urlContext"],p),e}function cD(t){const e={},n=h(t,["functionDeclarations"]);if(n!=null){let w=n;Array.isArray(w)&&(w=w.map(S=>KR(S))),m(e,["functionDeclarations"],w)}const r=h(t,["retrieval"]);r!=null&&m(e,["retrieval"],r);const s=h(t,["googleSearchRetrieval"]);s!=null&&m(e,["googleSearchRetrieval"],s);const o=h(t,["computerUse"]);if(o!=null&&m(e,["computerUse"],o),h(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=h(t,["codeExecution"]);u!=null&&m(e,["codeExecution"],u);const d=h(t,["enterpriseWebSearch"]);d!=null&&m(e,["enterpriseWebSearch"],d);const f=h(t,["googleMaps"]);f!=null&&m(e,["googleMaps"],f);const p=h(t,["googleSearch"]);p!=null&&m(e,["googleSearch"],p);const v=h(t,["urlContext"]);return v!=null&&m(e,["urlContext"],v),e}function dD(t){const e={},n=h(t,["promptTokenCount"]);n!=null&&m(e,["promptTokenCount"],n);const r=h(t,["cachedContentTokenCount"]);r!=null&&m(e,["cachedContentTokenCount"],r);const s=h(t,["candidatesTokenCount"]);s!=null&&m(e,["responseTokenCount"],s);const o=h(t,["toolUsePromptTokenCount"]);o!=null&&m(e,["toolUsePromptTokenCount"],o);const u=h(t,["thoughtsTokenCount"]);u!=null&&m(e,["thoughtsTokenCount"],u);const d=h(t,["totalTokenCount"]);d!=null&&m(e,["totalTokenCount"],d);const f=h(t,["promptTokensDetails"]);if(f!=null){let I=f;Array.isArray(I)&&(I=I.map(P=>P)),m(e,["promptTokensDetails"],I)}const p=h(t,["cacheTokensDetails"]);if(p!=null){let I=p;Array.isArray(I)&&(I=I.map(P=>P)),m(e,["cacheTokensDetails"],I)}const v=h(t,["candidatesTokensDetails"]);if(v!=null){let I=v;Array.isArray(I)&&(I=I.map(P=>P)),m(e,["responseTokensDetails"],I)}const w=h(t,["toolUsePromptTokensDetails"]);if(w!=null){let I=w;Array.isArray(I)&&(I=I.map(P=>P)),m(e,["toolUsePromptTokensDetails"],I)}const S=h(t,["trafficType"]);return S!=null&&m(e,["trafficType"],S),e}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/function hD(t){const e={},n=h(t,["data"]);if(n!=null&&m(e,["data"],n),h(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=h(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function fD(t){const e={},n=h(t,["content"]);n!=null&&m(e,["content"],n);const r=h(t,["citationMetadata"]);r!=null&&m(e,["citationMetadata"],pD(r));const s=h(t,["tokenCount"]);s!=null&&m(e,["tokenCount"],s);const o=h(t,["finishReason"]);o!=null&&m(e,["finishReason"],o);const u=h(t,["avgLogprobs"]);u!=null&&m(e,["avgLogprobs"],u);const d=h(t,["groundingMetadata"]);d!=null&&m(e,["groundingMetadata"],d);const f=h(t,["index"]);f!=null&&m(e,["index"],f);const p=h(t,["logprobsResult"]);p!=null&&m(e,["logprobsResult"],p);const v=h(t,["safetyRatings"]);if(v!=null){let S=v;Array.isArray(S)&&(S=S.map(I=>I)),m(e,["safetyRatings"],S)}const w=h(t,["urlContextMetadata"]);return w!=null&&m(e,["urlContextMetadata"],w),e}function pD(t){const e={},n=h(t,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>s)),m(e,["citations"],r)}return e}function mD(t,e){const n={},r=h(e,["model"]);r!=null&&m(n,["_url","model"],Ye(t,r));const s=h(e,["contents"]);if(s!=null){let o=tr(s);Array.isArray(o)&&(o=o.map(u=>u)),m(n,["contents"],o)}return n}function gD(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=h(t,["tokensInfo"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>o)),m(e,["tokensInfo"],s)}return e}function yD(t){const e={},n=h(t,["values"]);n!=null&&m(e,["values"],n);const r=h(t,["statistics"]);return r!=null&&m(e,["statistics"],vD(r)),e}function vD(t){const e={},n=h(t,["truncated"]);n!=null&&m(e,["truncated"],n);const r=h(t,["token_count"]);return r!=null&&m(e,["tokenCount"],r),e}function Hh(t){const e={},n=h(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>kj(o))),m(e,["parts"],s)}const r=h(t,["role"]);return r!=null&&m(e,["role"],r),e}function bD(t){const e={},n=h(t,["controlType"]);n!=null&&m(e,["controlType"],n);const r=h(t,["enableControlImageComputation"]);return r!=null&&m(e,["computeControl"],r),e}function wD(t){const e={};if(h(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(h(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(h(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function ED(t,e){const n={},r=h(t,["systemInstruction"]);e!==void 0&&r!=null&&m(e,["systemInstruction"],cn(r));const s=h(t,["tools"]);if(e!==void 0&&s!=null){let u=s;Array.isArray(u)&&(u=u.map(d=>cC(d))),m(e,["tools"],u)}const o=h(t,["generationConfig"]);return e!==void 0&&o!=null&&m(e,["generationConfig"],hj(o)),n}function SD(t,e){const n={},r=h(e,["model"]);r!=null&&m(n,["_url","model"],Ye(t,r));const s=h(e,["contents"]);if(s!=null){let u=tr(s);Array.isArray(u)&&(u=u.map(d=>Hh(d))),m(n,["contents"],u)}const o=h(e,["config"]);return o!=null&&wD(o),n}function xD(t,e){const n={},r=h(e,["model"]);r!=null&&m(n,["_url","model"],Ye(t,r));const s=h(e,["contents"]);if(s!=null){let u=tr(s);Array.isArray(u)&&(u=u.map(d=>d)),m(n,["contents"],u)}const o=h(e,["config"]);return o!=null&&ED(o,n),n}function TD(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=h(t,["totalTokens"]);r!=null&&m(e,["totalTokens"],r);const s=h(t,["cachedContentTokenCount"]);return s!=null&&m(e,["cachedContentTokenCount"],s),e}function CD(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=h(t,["totalTokens"]);return r!=null&&m(e,["totalTokens"],r),e}function ID(t,e){const n={},r=h(e,["model"]);return r!=null&&m(n,["_url","name"],Ye(t,r)),n}function kD(t,e){const n={},r=h(e,["model"]);return r!=null&&m(n,["_url","name"],Ye(t,r)),n}function _D(t){const e={},n=h(t,["sdkHttpResponse"]);return n!=null&&m(e,["sdkHttpResponse"],n),e}function ND(t){const e={},n=h(t,["sdkHttpResponse"]);return n!=null&&m(e,["sdkHttpResponse"],n),e}function AD(t,e){const n={},r=h(t,["outputGcsUri"]);e!==void 0&&r!=null&&m(e,["parameters","storageUri"],r);const s=h(t,["negativePrompt"]);e!==void 0&&s!=null&&m(e,["parameters","negativePrompt"],s);const o=h(t,["numberOfImages"]);e!==void 0&&o!=null&&m(e,["parameters","sampleCount"],o);const u=h(t,["aspectRatio"]);e!==void 0&&u!=null&&m(e,["parameters","aspectRatio"],u);const d=h(t,["guidanceScale"]);e!==void 0&&d!=null&&m(e,["parameters","guidanceScale"],d);const f=h(t,["seed"]);e!==void 0&&f!=null&&m(e,["parameters","seed"],f);const p=h(t,["safetyFilterLevel"]);e!==void 0&&p!=null&&m(e,["parameters","safetySetting"],p);const v=h(t,["personGeneration"]);e!==void 0&&v!=null&&m(e,["parameters","personGeneration"],v);const w=h(t,["includeSafetyAttributes"]);e!==void 0&&w!=null&&m(e,["parameters","includeSafetyAttributes"],w);const S=h(t,["includeRaiReason"]);e!==void 0&&S!=null&&m(e,["parameters","includeRaiReason"],S);const I=h(t,["language"]);e!==void 0&&I!=null&&m(e,["parameters","language"],I);const P=h(t,["outputMimeType"]);e!==void 0&&P!=null&&m(e,["parameters","outputOptions","mimeType"],P);const j=h(t,["outputCompressionQuality"]);e!==void 0&&j!=null&&m(e,["parameters","outputOptions","compressionQuality"],j);const D=h(t,["addWatermark"]);e!==void 0&&D!=null&&m(e,["parameters","addWatermark"],D);const q=h(t,["labels"]);e!==void 0&&q!=null&&m(e,["labels"],q);const X=h(t,["editMode"]);e!==void 0&&X!=null&&m(e,["parameters","editMode"],X);const B=h(t,["baseSteps"]);return e!==void 0&&B!=null&&m(e,["parameters","editConfig","baseSteps"],B),n}function OD(t,e){const n={},r=h(e,["model"]);r!=null&&m(n,["_url","model"],Ye(t,r));const s=h(e,["prompt"]);s!=null&&m(n,["instances[0]","prompt"],s);const o=h(e,["referenceImages"]);if(o!=null){let d=o;Array.isArray(d)&&(d=d.map(f=>Rj(f))),m(n,["instances[0]","referenceImages"],d)}const u=h(e,["config"]);return u!=null&&AD(u,n),n}function PD(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=h(t,["predictions"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>zh(o))),m(e,["generatedImages"],s)}return e}function RD(t,e){const n={},r=h(t,["taskType"]);e!==void 0&&r!=null&&m(e,["requests[]","taskType"],r);const s=h(t,["title"]);e!==void 0&&s!=null&&m(e,["requests[]","title"],s);const o=h(t,["outputDimensionality"]);if(e!==void 0&&o!=null&&m(e,["requests[]","outputDimensionality"],o),h(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(h(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function DD(t,e){const n={},r=h(t,["taskType"]);e!==void 0&&r!=null&&m(e,["instances[]","task_type"],r);const s=h(t,["title"]);e!==void 0&&s!=null&&m(e,["instances[]","title"],s);const o=h(t,["outputDimensionality"]);e!==void 0&&o!=null&&m(e,["parameters","outputDimensionality"],o);const u=h(t,["mimeType"]);e!==void 0&&u!=null&&m(e,["instances[]","mimeType"],u);const d=h(t,["autoTruncate"]);return e!==void 0&&d!=null&&m(e,["parameters","autoTruncate"],d),n}function jD(t,e){const n={},r=h(e,["model"]);r!=null&&m(n,["_url","model"],Ye(t,r));const s=h(e,["contents"]);if(s!=null){let d=Kg(t,s);Array.isArray(d)&&(d=d.map(f=>f)),m(n,["requests[]","content"],d)}const o=h(e,["config"]);o!=null&&RD(o,n);const u=h(e,["model"]);return u!==void 0&&m(n,["requests[]","model"],Ye(t,u)),n}function MD(t,e){const n={},r=h(e,["model"]);r!=null&&m(n,["_url","model"],Ye(t,r));const s=h(e,["contents"]);if(s!=null){let u=Kg(t,s);Array.isArray(u)&&(u=u.map(d=>d)),m(n,["instances[]","content"],u)}const o=h(e,["config"]);return o!=null&&DD(o,n),n}function LD(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=h(t,["embeddings"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(u=>u)),m(e,["embeddings"],o)}const s=h(t,["metadata"]);return s!=null&&m(e,["metadata"],s),e}function UD(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=h(t,["predictions[]","embeddings"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(u=>yD(u))),m(e,["embeddings"],o)}const s=h(t,["metadata"]);return s!=null&&m(e,["metadata"],s),e}function VD(t){const e={},n=h(t,["endpoint"]);n!=null&&m(e,["name"],n);const r=h(t,["deployedModelId"]);return r!=null&&m(e,["deployedModelId"],r),e}function FD(t){const e={};if(h(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=h(t,["fileUri"]);n!=null&&m(e,["fileUri"],n);const r=h(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function qD(t){const e={},n=h(t,["id"]);n!=null&&m(e,["id"],n);const r=h(t,["args"]);r!=null&&m(e,["args"],r);const s=h(t,["name"]);if(s!=null&&m(e,["name"],s),h(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(h(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function HD(t){const e={},n=h(t,["mode"]);n!=null&&m(e,["mode"],n);const r=h(t,["allowedFunctionNames"]);if(r!=null&&m(e,["allowedFunctionNames"],r),h(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function zD(t){const e={};if(h(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=h(t,["description"]);n!=null&&m(e,["description"],n);const r=h(t,["name"]);r!=null&&m(e,["name"],r);const s=h(t,["parameters"]);s!=null&&m(e,["parameters"],s);const o=h(t,["parametersJsonSchema"]);o!=null&&m(e,["parametersJsonSchema"],o);const u=h(t,["response"]);u!=null&&m(e,["response"],u);const d=h(t,["responseJsonSchema"]);return d!=null&&m(e,["responseJsonSchema"],d),e}function GD(t,e,n){const r={},s=h(e,["systemInstruction"]);n!==void 0&&s!=null&&m(n,["systemInstruction"],Hh(cn(s)));const o=h(e,["temperature"]);o!=null&&m(r,["temperature"],o);const u=h(e,["topP"]);u!=null&&m(r,["topP"],u);const d=h(e,["topK"]);d!=null&&m(r,["topK"],d);const f=h(e,["candidateCount"]);f!=null&&m(r,["candidateCount"],f);const p=h(e,["maxOutputTokens"]);p!=null&&m(r,["maxOutputTokens"],p);const v=h(e,["stopSequences"]);v!=null&&m(r,["stopSequences"],v);const w=h(e,["responseLogprobs"]);w!=null&&m(r,["responseLogprobs"],w);const S=h(e,["logprobs"]);S!=null&&m(r,["logprobs"],S);const I=h(e,["presencePenalty"]);I!=null&&m(r,["presencePenalty"],I);const P=h(e,["frequencyPenalty"]);P!=null&&m(r,["frequencyPenalty"],P);const j=h(e,["seed"]);j!=null&&m(r,["seed"],j);const D=h(e,["responseMimeType"]);D!=null&&m(r,["responseMimeType"],D);const q=h(e,["responseSchema"]);q!=null&&m(r,["responseSchema"],Jg(q));const X=h(e,["responseJsonSchema"]);if(X!=null&&m(r,["responseJsonSchema"],X),h(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(h(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const B=h(e,["safetySettings"]);if(n!==void 0&&B!=null){let R=B;Array.isArray(R)&&(R=R.map(ae=>Dj(ae))),m(n,["safetySettings"],R)}const re=h(e,["tools"]);if(n!==void 0&&re!=null){let R=rl(re);Array.isArray(R)&&(R=R.map(ae=>qj(nl(ae)))),m(n,["tools"],R)}const ce=h(e,["toolConfig"]);if(n!==void 0&&ce!=null&&m(n,["toolConfig"],Fj(ce)),h(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const ue=h(e,["cachedContent"]);n!==void 0&&ue!=null&&m(n,["cachedContent"],Vi(t,ue));const A=h(e,["responseModalities"]);A!=null&&m(r,["responseModalities"],A);const N=h(e,["mediaResolution"]);N!=null&&m(r,["mediaResolution"],N);const O=h(e,["speechConfig"]);if(O!=null&&m(r,["speechConfig"],Yg(O)),h(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const U=h(e,["thinkingConfig"]);U!=null&&m(r,["thinkingConfig"],U);const M=h(e,["imageConfig"]);M!=null&&m(r,["imageConfig"],yj(M));const H=h(e,["enableEnhancedCivicAnswers"]);return H!=null&&m(r,["enableEnhancedCivicAnswers"],H),r}function BD(t,e,n){const r={},s=h(e,["systemInstruction"]);n!==void 0&&s!=null&&m(n,["systemInstruction"],cn(s));const o=h(e,["temperature"]);o!=null&&m(r,["temperature"],o);const u=h(e,["topP"]);u!=null&&m(r,["topP"],u);const d=h(e,["topK"]);d!=null&&m(r,["topK"],d);const f=h(e,["candidateCount"]);f!=null&&m(r,["candidateCount"],f);const p=h(e,["maxOutputTokens"]);p!=null&&m(r,["maxOutputTokens"],p);const v=h(e,["stopSequences"]);v!=null&&m(r,["stopSequences"],v);const w=h(e,["responseLogprobs"]);w!=null&&m(r,["responseLogprobs"],w);const S=h(e,["logprobs"]);S!=null&&m(r,["logprobs"],S);const I=h(e,["presencePenalty"]);I!=null&&m(r,["presencePenalty"],I);const P=h(e,["frequencyPenalty"]);P!=null&&m(r,["frequencyPenalty"],P);const j=h(e,["seed"]);j!=null&&m(r,["seed"],j);const D=h(e,["responseMimeType"]);D!=null&&m(r,["responseMimeType"],D);const q=h(e,["responseSchema"]);q!=null&&m(r,["responseSchema"],Jg(q));const X=h(e,["responseJsonSchema"]);X!=null&&m(r,["responseJsonSchema"],X);const B=h(e,["routingConfig"]);B!=null&&m(r,["routingConfig"],B);const re=h(e,["modelSelectionConfig"]);re!=null&&m(r,["modelConfig"],re);const ce=h(e,["safetySettings"]);if(n!==void 0&&ce!=null){let J=ce;Array.isArray(J)&&(J=J.map(le=>le)),m(n,["safetySettings"],J)}const ue=h(e,["tools"]);if(n!==void 0&&ue!=null){let J=rl(ue);Array.isArray(J)&&(J=J.map(le=>cC(nl(le)))),m(n,["tools"],J)}const A=h(e,["toolConfig"]);n!==void 0&&A!=null&&m(n,["toolConfig"],A);const N=h(e,["labels"]);n!==void 0&&N!=null&&m(n,["labels"],N);const O=h(e,["cachedContent"]);n!==void 0&&O!=null&&m(n,["cachedContent"],Vi(t,O));const U=h(e,["responseModalities"]);U!=null&&m(r,["responseModalities"],U);const M=h(e,["mediaResolution"]);M!=null&&m(r,["mediaResolution"],M);const H=h(e,["speechConfig"]);H!=null&&m(r,["speechConfig"],Yg(H));const R=h(e,["audioTimestamp"]);R!=null&&m(r,["audioTimestamp"],R);const ae=h(e,["thinkingConfig"]);ae!=null&&m(r,["thinkingConfig"],ae);const Oe=h(e,["imageConfig"]);if(Oe!=null&&m(r,["imageConfig"],vj(Oe)),h(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return r}function rS(t,e){const n={},r=h(e,["model"]);r!=null&&m(n,["_url","model"],Ye(t,r));const s=h(e,["contents"]);if(s!=null){let u=tr(s);Array.isArray(u)&&(u=u.map(d=>Hh(d))),m(n,["contents"],u)}const o=h(e,["config"]);return o!=null&&m(n,["generationConfig"],GD(t,o,n)),n}function iS(t,e){const n={},r=h(e,["model"]);r!=null&&m(n,["_url","model"],Ye(t,r));const s=h(e,["contents"]);if(s!=null){let u=tr(s);Array.isArray(u)&&(u=u.map(d=>d)),m(n,["contents"],u)}const o=h(e,["config"]);return o!=null&&m(n,["generationConfig"],BD(t,o,n)),n}function sS(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=h(t,["candidates"]);if(r!=null){let f=r;Array.isArray(f)&&(f=f.map(p=>fD(p))),m(e,["candidates"],f)}const s=h(t,["modelVersion"]);s!=null&&m(e,["modelVersion"],s);const o=h(t,["promptFeedback"]);o!=null&&m(e,["promptFeedback"],o);const u=h(t,["responseId"]);u!=null&&m(e,["responseId"],u);const d=h(t,["usageMetadata"]);return d!=null&&m(e,["usageMetadata"],d),e}function aS(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=h(t,["candidates"]);if(r!=null){let p=r;Array.isArray(p)&&(p=p.map(v=>v)),m(e,["candidates"],p)}const s=h(t,["createTime"]);s!=null&&m(e,["createTime"],s);const o=h(t,["modelVersion"]);o!=null&&m(e,["modelVersion"],o);const u=h(t,["promptFeedback"]);u!=null&&m(e,["promptFeedback"],u);const d=h(t,["responseId"]);d!=null&&m(e,["responseId"],d);const f=h(t,["usageMetadata"]);return f!=null&&m(e,["usageMetadata"],f),e}function $D(t,e){const n={};if(h(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(h(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=h(t,["numberOfImages"]);e!==void 0&&r!=null&&m(e,["parameters","sampleCount"],r);const s=h(t,["aspectRatio"]);e!==void 0&&s!=null&&m(e,["parameters","aspectRatio"],s);const o=h(t,["guidanceScale"]);if(e!==void 0&&o!=null&&m(e,["parameters","guidanceScale"],o),h(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=h(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&m(e,["parameters","safetySetting"],u);const d=h(t,["personGeneration"]);e!==void 0&&d!=null&&m(e,["parameters","personGeneration"],d);const f=h(t,["includeSafetyAttributes"]);e!==void 0&&f!=null&&m(e,["parameters","includeSafetyAttributes"],f);const p=h(t,["includeRaiReason"]);e!==void 0&&p!=null&&m(e,["parameters","includeRaiReason"],p);const v=h(t,["language"]);e!==void 0&&v!=null&&m(e,["parameters","language"],v);const w=h(t,["outputMimeType"]);e!==void 0&&w!=null&&m(e,["parameters","outputOptions","mimeType"],w);const S=h(t,["outputCompressionQuality"]);if(e!==void 0&&S!=null&&m(e,["parameters","outputOptions","compressionQuality"],S),h(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(h(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const I=h(t,["imageSize"]);if(e!==void 0&&I!=null&&m(e,["parameters","sampleImageSize"],I),h(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function WD(t,e){const n={},r=h(t,["outputGcsUri"]);e!==void 0&&r!=null&&m(e,["parameters","storageUri"],r);const s=h(t,["negativePrompt"]);e!==void 0&&s!=null&&m(e,["parameters","negativePrompt"],s);const o=h(t,["numberOfImages"]);e!==void 0&&o!=null&&m(e,["parameters","sampleCount"],o);const u=h(t,["aspectRatio"]);e!==void 0&&u!=null&&m(e,["parameters","aspectRatio"],u);const d=h(t,["guidanceScale"]);e!==void 0&&d!=null&&m(e,["parameters","guidanceScale"],d);const f=h(t,["seed"]);e!==void 0&&f!=null&&m(e,["parameters","seed"],f);const p=h(t,["safetyFilterLevel"]);e!==void 0&&p!=null&&m(e,["parameters","safetySetting"],p);const v=h(t,["personGeneration"]);e!==void 0&&v!=null&&m(e,["parameters","personGeneration"],v);const w=h(t,["includeSafetyAttributes"]);e!==void 0&&w!=null&&m(e,["parameters","includeSafetyAttributes"],w);const S=h(t,["includeRaiReason"]);e!==void 0&&S!=null&&m(e,["parameters","includeRaiReason"],S);const I=h(t,["language"]);e!==void 0&&I!=null&&m(e,["parameters","language"],I);const P=h(t,["outputMimeType"]);e!==void 0&&P!=null&&m(e,["parameters","outputOptions","mimeType"],P);const j=h(t,["outputCompressionQuality"]);e!==void 0&&j!=null&&m(e,["parameters","outputOptions","compressionQuality"],j);const D=h(t,["addWatermark"]);e!==void 0&&D!=null&&m(e,["parameters","addWatermark"],D);const q=h(t,["labels"]);e!==void 0&&q!=null&&m(e,["labels"],q);const X=h(t,["imageSize"]);e!==void 0&&X!=null&&m(e,["parameters","sampleImageSize"],X);const B=h(t,["enhancePrompt"]);return e!==void 0&&B!=null&&m(e,["parameters","enhancePrompt"],B),n}function KD(t,e){const n={},r=h(e,["model"]);r!=null&&m(n,["_url","model"],Ye(t,r));const s=h(e,["prompt"]);s!=null&&m(n,["instances[0]","prompt"],s);const o=h(e,["config"]);return o!=null&&$D(o,n),n}function JD(t,e){const n={},r=h(e,["model"]);r!=null&&m(n,["_url","model"],Ye(t,r));const s=h(e,["prompt"]);s!=null&&m(n,["instances[0]","prompt"],s);const o=h(e,["config"]);return o!=null&&WD(o,n),n}function YD(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=h(t,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(u=>lj(u))),m(e,["generatedImages"],o)}const s=h(t,["positivePromptSafetyAttributes"]);return s!=null&&m(e,["positivePromptSafetyAttributes"],lC(s)),e}function XD(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=h(t,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(u=>zh(u))),m(e,["generatedImages"],o)}const s=h(t,["positivePromptSafetyAttributes"]);return s!=null&&m(e,["positivePromptSafetyAttributes"],uC(s)),e}function QD(t,e){const n={},r=h(t,["numberOfVideos"]);if(e!==void 0&&r!=null&&m(e,["parameters","sampleCount"],r),h(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(h(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const s=h(t,["durationSeconds"]);if(e!==void 0&&s!=null&&m(e,["parameters","durationSeconds"],s),h(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=h(t,["aspectRatio"]);e!==void 0&&o!=null&&m(e,["parameters","aspectRatio"],o);const u=h(t,["resolution"]);e!==void 0&&u!=null&&m(e,["parameters","resolution"],u);const d=h(t,["personGeneration"]);if(e!==void 0&&d!=null&&m(e,["parameters","personGeneration"],d),h(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const f=h(t,["negativePrompt"]);e!==void 0&&f!=null&&m(e,["parameters","negativePrompt"],f);const p=h(t,["enhancePrompt"]);if(e!==void 0&&p!=null&&m(e,["parameters","enhancePrompt"],p),h(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const v=h(t,["lastFrame"]);e!==void 0&&v!=null&&m(e,["instances[0]","lastFrame"],Gh(v));const w=h(t,["referenceImages"]);if(e!==void 0&&w!=null){let S=w;Array.isArray(S)&&(S=S.map(I=>e4(I))),m(e,["instances[0]","referenceImages"],S)}if(h(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(h(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function ZD(t,e){const n={},r=h(t,["numberOfVideos"]);e!==void 0&&r!=null&&m(e,["parameters","sampleCount"],r);const s=h(t,["outputGcsUri"]);e!==void 0&&s!=null&&m(e,["parameters","storageUri"],s);const o=h(t,["fps"]);e!==void 0&&o!=null&&m(e,["parameters","fps"],o);const u=h(t,["durationSeconds"]);e!==void 0&&u!=null&&m(e,["parameters","durationSeconds"],u);const d=h(t,["seed"]);e!==void 0&&d!=null&&m(e,["parameters","seed"],d);const f=h(t,["aspectRatio"]);e!==void 0&&f!=null&&m(e,["parameters","aspectRatio"],f);const p=h(t,["resolution"]);e!==void 0&&p!=null&&m(e,["parameters","resolution"],p);const v=h(t,["personGeneration"]);e!==void 0&&v!=null&&m(e,["parameters","personGeneration"],v);const w=h(t,["pubsubTopic"]);e!==void 0&&w!=null&&m(e,["parameters","pubsubTopic"],w);const S=h(t,["negativePrompt"]);e!==void 0&&S!=null&&m(e,["parameters","negativePrompt"],S);const I=h(t,["enhancePrompt"]);e!==void 0&&I!=null&&m(e,["parameters","enhancePrompt"],I);const P=h(t,["generateAudio"]);e!==void 0&&P!=null&&m(e,["parameters","generateAudio"],P);const j=h(t,["lastFrame"]);e!==void 0&&j!=null&&m(e,["instances[0]","lastFrame"],Ir(j));const D=h(t,["referenceImages"]);if(e!==void 0&&D!=null){let B=D;Array.isArray(B)&&(B=B.map(re=>t4(re))),m(e,["instances[0]","referenceImages"],B)}const q=h(t,["mask"]);e!==void 0&&q!=null&&m(e,["instances[0]","mask"],Zj(q));const X=h(t,["compressionQuality"]);return e!==void 0&&X!=null&&m(e,["parameters","compressionQuality"],X),n}function ej(t){const e={},n=h(t,["name"]);n!=null&&m(e,["name"],n);const r=h(t,["metadata"]);r!=null&&m(e,["metadata"],r);const s=h(t,["done"]);s!=null&&m(e,["done"],s);const o=h(t,["error"]);o!=null&&m(e,["error"],o);const u=h(t,["response","generateVideoResponse"]);return u!=null&&m(e,["response"],ij(u)),e}function tj(t){const e={},n=h(t,["name"]);n!=null&&m(e,["name"],n);const r=h(t,["metadata"]);r!=null&&m(e,["metadata"],r);const s=h(t,["done"]);s!=null&&m(e,["done"],s);const o=h(t,["error"]);o!=null&&m(e,["error"],o);const u=h(t,["response"]);return u!=null&&m(e,["response"],sj(u)),e}function nj(t,e){const n={},r=h(e,["model"]);r!=null&&m(n,["_url","model"],Ye(t,r));const s=h(e,["prompt"]);s!=null&&m(n,["instances[0]","prompt"],s);const o=h(e,["image"]);o!=null&&m(n,["instances[0]","image"],Gh(o));const u=h(e,["video"]);u!=null&&m(n,["instances[0]","video"],dC(u));const d=h(e,["source"]);d!=null&&aj(d,n);const f=h(e,["config"]);return f!=null&&QD(f,n),n}function rj(t,e){const n={},r=h(e,["model"]);r!=null&&m(n,["_url","model"],Ye(t,r));const s=h(e,["prompt"]);s!=null&&m(n,["instances[0]","prompt"],s);const o=h(e,["image"]);o!=null&&m(n,["instances[0]","image"],Ir(o));const u=h(e,["video"]);u!=null&&m(n,["instances[0]","video"],hC(u));const d=h(e,["source"]);d!=null&&oj(d,n);const f=h(e,["config"]);return f!=null&&ZD(f,n),n}function ij(t){const e={},n=h(t,["generatedSamples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(u=>cj(u))),m(e,["generatedVideos"],o)}const r=h(t,["raiMediaFilteredCount"]);r!=null&&m(e,["raiMediaFilteredCount"],r);const s=h(t,["raiMediaFilteredReasons"]);return s!=null&&m(e,["raiMediaFilteredReasons"],s),e}function sj(t){const e={},n=h(t,["videos"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(u=>dj(u))),m(e,["generatedVideos"],o)}const r=h(t,["raiMediaFilteredCount"]);r!=null&&m(e,["raiMediaFilteredCount"],r);const s=h(t,["raiMediaFilteredReasons"]);return s!=null&&m(e,["raiMediaFilteredReasons"],s),e}function aj(t,e){const n={},r=h(t,["prompt"]);e!==void 0&&r!=null&&m(e,["instances[0]","prompt"],r);const s=h(t,["image"]);e!==void 0&&s!=null&&m(e,["instances[0]","image"],Gh(s));const o=h(t,["video"]);return e!==void 0&&o!=null&&m(e,["instances[0]","video"],dC(o)),n}function oj(t,e){const n={},r=h(t,["prompt"]);e!==void 0&&r!=null&&m(e,["instances[0]","prompt"],r);const s=h(t,["image"]);e!==void 0&&s!=null&&m(e,["instances[0]","image"],Ir(s));const o=h(t,["video"]);return e!==void 0&&o!=null&&m(e,["instances[0]","video"],hC(o)),n}function lj(t){const e={},n=h(t,["_self"]);n!=null&&m(e,["image"],bj(n));const r=h(t,["raiFilteredReason"]);r!=null&&m(e,["raiFilteredReason"],r);const s=h(t,["_self"]);return s!=null&&m(e,["safetyAttributes"],lC(s)),e}function zh(t){const e={},n=h(t,["_self"]);n!=null&&m(e,["image"],oC(n));const r=h(t,["raiFilteredReason"]);r!=null&&m(e,["raiFilteredReason"],r);const s=h(t,["_self"]);s!=null&&m(e,["safetyAttributes"],uC(s));const o=h(t,["prompt"]);return o!=null&&m(e,["enhancedPrompt"],o),e}function uj(t){const e={},n=h(t,["_self"]);n!=null&&m(e,["mask"],oC(n));const r=h(t,["labels"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>o)),m(e,["labels"],s)}return e}function cj(t){const e={},n=h(t,["video"]);return n!=null&&m(e,["video"],Xj(n)),e}function dj(t){const e={},n=h(t,["_self"]);return n!=null&&m(e,["video"],Qj(n)),e}function hj(t){const e={},n=h(t,["modelSelectionConfig"]);n!=null&&m(e,["modelConfig"],n);const r=h(t,["responseJsonSchema"]);r!=null&&m(e,["responseJsonSchema"],r);const s=h(t,["audioTimestamp"]);s!=null&&m(e,["audioTimestamp"],s);const o=h(t,["candidateCount"]);o!=null&&m(e,["candidateCount"],o);const u=h(t,["enableAffectiveDialog"]);u!=null&&m(e,["enableAffectiveDialog"],u);const d=h(t,["frequencyPenalty"]);d!=null&&m(e,["frequencyPenalty"],d);const f=h(t,["logprobs"]);f!=null&&m(e,["logprobs"],f);const p=h(t,["maxOutputTokens"]);p!=null&&m(e,["maxOutputTokens"],p);const v=h(t,["mediaResolution"]);v!=null&&m(e,["mediaResolution"],v);const w=h(t,["presencePenalty"]);w!=null&&m(e,["presencePenalty"],w);const S=h(t,["responseLogprobs"]);S!=null&&m(e,["responseLogprobs"],S);const I=h(t,["responseMimeType"]);I!=null&&m(e,["responseMimeType"],I);const P=h(t,["responseModalities"]);P!=null&&m(e,["responseModalities"],P);const j=h(t,["responseSchema"]);j!=null&&m(e,["responseSchema"],j);const D=h(t,["routingConfig"]);D!=null&&m(e,["routingConfig"],D);const q=h(t,["seed"]);q!=null&&m(e,["seed"],q);const X=h(t,["speechConfig"]);X!=null&&m(e,["speechConfig"],X);const B=h(t,["stopSequences"]);B!=null&&m(e,["stopSequences"],B);const re=h(t,["temperature"]);re!=null&&m(e,["temperature"],re);const ce=h(t,["thinkingConfig"]);ce!=null&&m(e,["thinkingConfig"],ce);const ue=h(t,["topK"]);ue!=null&&m(e,["topK"],ue);const A=h(t,["topP"]);if(A!=null&&m(e,["topP"],A),h(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function fj(t,e){const n={},r=h(e,["model"]);return r!=null&&m(n,["_url","name"],Ye(t,r)),n}function pj(t,e){const n={},r=h(e,["model"]);return r!=null&&m(n,["_url","name"],Ye(t,r)),n}function mj(t){const e={};if(h(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=h(t,["enableWidget"]);return n!=null&&m(e,["enableWidget"],n),e}function gj(t){const e={};if(h(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(h(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=h(t,["timeRangeFilter"]);return n!=null&&m(e,["timeRangeFilter"],n),e}function yj(t){const e={},n=h(t,["aspectRatio"]);n!=null&&m(e,["aspectRatio"],n);const r=h(t,["imageSize"]);if(r!=null&&m(e,["imageSize"],r),h(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(h(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function vj(t){const e={},n=h(t,["aspectRatio"]);n!=null&&m(e,["aspectRatio"],n);const r=h(t,["imageSize"]);r!=null&&m(e,["imageSize"],r);const s=h(t,["outputMimeType"]);s!=null&&m(e,["imageOutputOptions","mimeType"],s);const o=h(t,["outputCompressionQuality"]);return o!=null&&m(e,["imageOutputOptions","compressionQuality"],o),e}function bj(t){const e={},n=h(t,["bytesBase64Encoded"]);n!=null&&m(e,["imageBytes"],Us(n));const r=h(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function oC(t){const e={},n=h(t,["gcsUri"]);n!=null&&m(e,["gcsUri"],n);const r=h(t,["bytesBase64Encoded"]);r!=null&&m(e,["imageBytes"],Us(r));const s=h(t,["mimeType"]);return s!=null&&m(e,["mimeType"],s),e}function Gh(t){const e={};if(h(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=h(t,["imageBytes"]);n!=null&&m(e,["bytesBase64Encoded"],Us(n));const r=h(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function Ir(t){const e={},n=h(t,["gcsUri"]);n!=null&&m(e,["gcsUri"],n);const r=h(t,["imageBytes"]);r!=null&&m(e,["bytesBase64Encoded"],Us(r));const s=h(t,["mimeType"]);return s!=null&&m(e,["mimeType"],s),e}function wj(t,e,n){const r={},s=h(e,["pageSize"]);n!==void 0&&s!=null&&m(n,["_query","pageSize"],s);const o=h(e,["pageToken"]);n!==void 0&&o!=null&&m(n,["_query","pageToken"],o);const u=h(e,["filter"]);n!==void 0&&u!=null&&m(n,["_query","filter"],u);const d=h(e,["queryBase"]);return n!==void 0&&d!=null&&m(n,["_url","models_url"],eC(t,d)),r}function Ej(t,e,n){const r={},s=h(e,["pageSize"]);n!==void 0&&s!=null&&m(n,["_query","pageSize"],s);const o=h(e,["pageToken"]);n!==void 0&&o!=null&&m(n,["_query","pageToken"],o);const u=h(e,["filter"]);n!==void 0&&u!=null&&m(n,["_query","filter"],u);const d=h(e,["queryBase"]);return n!==void 0&&d!=null&&m(n,["_url","models_url"],eC(t,d)),r}function Sj(t,e){const n={},r=h(e,["config"]);return r!=null&&wj(t,r,n),n}function xj(t,e){const n={},r=h(e,["config"]);return r!=null&&Ej(t,r,n),n}function Tj(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=h(t,["nextPageToken"]);r!=null&&m(e,["nextPageToken"],r);const s=h(t,["_self"]);if(s!=null){let o=tC(s);Array.isArray(o)&&(o=o.map(u=>Ym(u))),m(e,["models"],o)}return e}function Cj(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=h(t,["nextPageToken"]);r!=null&&m(e,["nextPageToken"],r);const s=h(t,["_self"]);if(s!=null){let o=tC(s);Array.isArray(o)&&(o=o.map(u=>Xm(u))),m(e,["models"],o)}return e}function Ij(t){const e={},n=h(t,["maskMode"]);n!=null&&m(e,["maskMode"],n);const r=h(t,["segmentationClasses"]);r!=null&&m(e,["maskClasses"],r);const s=h(t,["maskDilation"]);return s!=null&&m(e,["dilation"],s),e}function Ym(t){const e={},n=h(t,["name"]);n!=null&&m(e,["name"],n);const r=h(t,["displayName"]);r!=null&&m(e,["displayName"],r);const s=h(t,["description"]);s!=null&&m(e,["description"],s);const o=h(t,["version"]);o!=null&&m(e,["version"],o);const u=h(t,["_self"]);u!=null&&m(e,["tunedModelInfo"],Hj(u));const d=h(t,["inputTokenLimit"]);d!=null&&m(e,["inputTokenLimit"],d);const f=h(t,["outputTokenLimit"]);f!=null&&m(e,["outputTokenLimit"],f);const p=h(t,["supportedGenerationMethods"]);p!=null&&m(e,["supportedActions"],p);const v=h(t,["temperature"]);v!=null&&m(e,["temperature"],v);const w=h(t,["maxTemperature"]);w!=null&&m(e,["maxTemperature"],w);const S=h(t,["topP"]);S!=null&&m(e,["topP"],S);const I=h(t,["topK"]);I!=null&&m(e,["topK"],I);const P=h(t,["thinking"]);return P!=null&&m(e,["thinking"],P),e}function Xm(t){const e={},n=h(t,["name"]);n!=null&&m(e,["name"],n);const r=h(t,["displayName"]);r!=null&&m(e,["displayName"],r);const s=h(t,["description"]);s!=null&&m(e,["description"],s);const o=h(t,["versionId"]);o!=null&&m(e,["version"],o);const u=h(t,["deployedModels"]);if(u!=null){let w=u;Array.isArray(w)&&(w=w.map(S=>VD(S))),m(e,["endpoints"],w)}const d=h(t,["labels"]);d!=null&&m(e,["labels"],d);const f=h(t,["_self"]);f!=null&&m(e,["tunedModelInfo"],zj(f));const p=h(t,["defaultCheckpointId"]);p!=null&&m(e,["defaultCheckpointId"],p);const v=h(t,["checkpoints"]);if(v!=null){let w=v;Array.isArray(w)&&(w=w.map(S=>S)),m(e,["checkpoints"],w)}return e}function kj(t){const e={},n=h(t,["mediaResolution"]);n!=null&&m(e,["mediaResolution"],n);const r=h(t,["codeExecutionResult"]);r!=null&&m(e,["codeExecutionResult"],r);const s=h(t,["executableCode"]);s!=null&&m(e,["executableCode"],s);const o=h(t,["fileData"]);o!=null&&m(e,["fileData"],FD(o));const u=h(t,["functionCall"]);u!=null&&m(e,["functionCall"],qD(u));const d=h(t,["functionResponse"]);d!=null&&m(e,["functionResponse"],d);const f=h(t,["inlineData"]);f!=null&&m(e,["inlineData"],hD(f));const p=h(t,["text"]);p!=null&&m(e,["text"],p);const v=h(t,["thought"]);v!=null&&m(e,["thought"],v);const w=h(t,["thoughtSignature"]);w!=null&&m(e,["thoughtSignature"],w);const S=h(t,["videoMetadata"]);return S!=null&&m(e,["videoMetadata"],S),e}function _j(t){const e={},n=h(t,["productImage"]);return n!=null&&m(e,["image"],Ir(n)),e}function Nj(t,e){const n={},r=h(t,["numberOfImages"]);e!==void 0&&r!=null&&m(e,["parameters","sampleCount"],r);const s=h(t,["baseSteps"]);e!==void 0&&s!=null&&m(e,["parameters","baseSteps"],s);const o=h(t,["outputGcsUri"]);e!==void 0&&o!=null&&m(e,["parameters","storageUri"],o);const u=h(t,["seed"]);e!==void 0&&u!=null&&m(e,["parameters","seed"],u);const d=h(t,["safetyFilterLevel"]);e!==void 0&&d!=null&&m(e,["parameters","safetySetting"],d);const f=h(t,["personGeneration"]);e!==void 0&&f!=null&&m(e,["parameters","personGeneration"],f);const p=h(t,["addWatermark"]);e!==void 0&&p!=null&&m(e,["parameters","addWatermark"],p);const v=h(t,["outputMimeType"]);e!==void 0&&v!=null&&m(e,["parameters","outputOptions","mimeType"],v);const w=h(t,["outputCompressionQuality"]);e!==void 0&&w!=null&&m(e,["parameters","outputOptions","compressionQuality"],w);const S=h(t,["enhancePrompt"]);e!==void 0&&S!=null&&m(e,["parameters","enhancePrompt"],S);const I=h(t,["labels"]);return e!==void 0&&I!=null&&m(e,["labels"],I),n}function Aj(t,e){const n={},r=h(e,["model"]);r!=null&&m(n,["_url","model"],Ye(t,r));const s=h(e,["source"]);s!=null&&Pj(s,n);const o=h(e,["config"]);return o!=null&&Nj(o,n),n}function Oj(t){const e={},n=h(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>zh(s))),m(e,["generatedImages"],r)}return e}function Pj(t,e){const n={},r=h(t,["prompt"]);e!==void 0&&r!=null&&m(e,["instances[0]","prompt"],r);const s=h(t,["personImage"]);e!==void 0&&s!=null&&m(e,["instances[0]","personImage","image"],Ir(s));const o=h(t,["productImages"]);if(e!==void 0&&o!=null){let u=o;Array.isArray(u)&&(u=u.map(d=>_j(d))),m(e,["instances[0]","productImages"],u)}return n}function Rj(t){const e={},n=h(t,["referenceImage"]);n!=null&&m(e,["referenceImage"],Ir(n));const r=h(t,["referenceId"]);r!=null&&m(e,["referenceId"],r);const s=h(t,["referenceType"]);s!=null&&m(e,["referenceType"],s);const o=h(t,["maskImageConfig"]);o!=null&&m(e,["maskImageConfig"],Ij(o));const u=h(t,["controlImageConfig"]);u!=null&&m(e,["controlImageConfig"],bD(u));const d=h(t,["styleImageConfig"]);d!=null&&m(e,["styleImageConfig"],d);const f=h(t,["subjectImageConfig"]);return f!=null&&m(e,["subjectImageConfig"],f),e}function lC(t){const e={},n=h(t,["safetyAttributes","categories"]);n!=null&&m(e,["categories"],n);const r=h(t,["safetyAttributes","scores"]);r!=null&&m(e,["scores"],r);const s=h(t,["contentType"]);return s!=null&&m(e,["contentType"],s),e}function uC(t){const e={},n=h(t,["safetyAttributes","categories"]);n!=null&&m(e,["categories"],n);const r=h(t,["safetyAttributes","scores"]);r!=null&&m(e,["scores"],r);const s=h(t,["contentType"]);return s!=null&&m(e,["contentType"],s),e}function Dj(t){const e={},n=h(t,["category"]);if(n!=null&&m(e,["category"],n),h(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=h(t,["threshold"]);return r!=null&&m(e,["threshold"],r),e}function jj(t){const e={},n=h(t,["image"]);return n!=null&&m(e,["image"],Ir(n)),e}function Mj(t,e){const n={},r=h(t,["mode"]);e!==void 0&&r!=null&&m(e,["parameters","mode"],r);const s=h(t,["maxPredictions"]);e!==void 0&&s!=null&&m(e,["parameters","maxPredictions"],s);const o=h(t,["confidenceThreshold"]);e!==void 0&&o!=null&&m(e,["parameters","confidenceThreshold"],o);const u=h(t,["maskDilation"]);e!==void 0&&u!=null&&m(e,["parameters","maskDilation"],u);const d=h(t,["binaryColorThreshold"]);e!==void 0&&d!=null&&m(e,["parameters","binaryColorThreshold"],d);const f=h(t,["labels"]);return e!==void 0&&f!=null&&m(e,["labels"],f),n}function Lj(t,e){const n={},r=h(e,["model"]);r!=null&&m(n,["_url","model"],Ye(t,r));const s=h(e,["source"]);s!=null&&Vj(s,n);const o=h(e,["config"]);return o!=null&&Mj(o,n),n}function Uj(t){const e={},n=h(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>uj(s))),m(e,["generatedMasks"],r)}return e}function Vj(t,e){const n={},r=h(t,["prompt"]);e!==void 0&&r!=null&&m(e,["instances[0]","prompt"],r);const s=h(t,["image"]);e!==void 0&&s!=null&&m(e,["instances[0]","image"],Ir(s));const o=h(t,["scribbleImage"]);return e!==void 0&&o!=null&&m(e,["instances[0]","scribble"],jj(o)),n}function Fj(t){const e={},n=h(t,["functionCallingConfig"]);n!=null&&m(e,["functionCallingConfig"],HD(n));const r=h(t,["retrievalConfig"]);return r!=null&&m(e,["retrievalConfig"],r),e}function qj(t){const e={},n=h(t,["functionDeclarations"]);if(n!=null){let v=n;Array.isArray(v)&&(v=v.map(w=>w)),m(e,["functionDeclarations"],v)}if(h(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=h(t,["googleSearchRetrieval"]);r!=null&&m(e,["googleSearchRetrieval"],r);const s=h(t,["computerUse"]);s!=null&&m(e,["computerUse"],s);const o=h(t,["fileSearch"]);o!=null&&m(e,["fileSearch"],o);const u=h(t,["codeExecution"]);if(u!=null&&m(e,["codeExecution"],u),h(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=h(t,["googleMaps"]);d!=null&&m(e,["googleMaps"],mj(d));const f=h(t,["googleSearch"]);f!=null&&m(e,["googleSearch"],gj(f));const p=h(t,["urlContext"]);return p!=null&&m(e,["urlContext"],p),e}function cC(t){const e={},n=h(t,["functionDeclarations"]);if(n!=null){let w=n;Array.isArray(w)&&(w=w.map(S=>zD(S))),m(e,["functionDeclarations"],w)}const r=h(t,["retrieval"]);r!=null&&m(e,["retrieval"],r);const s=h(t,["googleSearchRetrieval"]);s!=null&&m(e,["googleSearchRetrieval"],s);const o=h(t,["computerUse"]);if(o!=null&&m(e,["computerUse"],o),h(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=h(t,["codeExecution"]);u!=null&&m(e,["codeExecution"],u);const d=h(t,["enterpriseWebSearch"]);d!=null&&m(e,["enterpriseWebSearch"],d);const f=h(t,["googleMaps"]);f!=null&&m(e,["googleMaps"],f);const p=h(t,["googleSearch"]);p!=null&&m(e,["googleSearch"],p);const v=h(t,["urlContext"]);return v!=null&&m(e,["urlContext"],v),e}function Hj(t){const e={},n=h(t,["baseModel"]);n!=null&&m(e,["baseModel"],n);const r=h(t,["createTime"]);r!=null&&m(e,["createTime"],r);const s=h(t,["updateTime"]);return s!=null&&m(e,["updateTime"],s),e}function zj(t){const e={},n=h(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&m(e,["baseModel"],n);const r=h(t,["createTime"]);r!=null&&m(e,["createTime"],r);const s=h(t,["updateTime"]);return s!=null&&m(e,["updateTime"],s),e}function Gj(t,e){const n={},r=h(t,["displayName"]);e!==void 0&&r!=null&&m(e,["displayName"],r);const s=h(t,["description"]);e!==void 0&&s!=null&&m(e,["description"],s);const o=h(t,["defaultCheckpointId"]);return e!==void 0&&o!=null&&m(e,["defaultCheckpointId"],o),n}function Bj(t,e){const n={},r=h(t,["displayName"]);e!==void 0&&r!=null&&m(e,["displayName"],r);const s=h(t,["description"]);e!==void 0&&s!=null&&m(e,["description"],s);const o=h(t,["defaultCheckpointId"]);return e!==void 0&&o!=null&&m(e,["defaultCheckpointId"],o),n}function $j(t,e){const n={},r=h(e,["model"]);r!=null&&m(n,["_url","name"],Ye(t,r));const s=h(e,["config"]);return s!=null&&Gj(s,n),n}function Wj(t,e){const n={},r=h(e,["model"]);r!=null&&m(n,["_url","model"],Ye(t,r));const s=h(e,["config"]);return s!=null&&Bj(s,n),n}function Kj(t,e){const n={},r=h(t,["outputGcsUri"]);e!==void 0&&r!=null&&m(e,["parameters","storageUri"],r);const s=h(t,["safetyFilterLevel"]);e!==void 0&&s!=null&&m(e,["parameters","safetySetting"],s);const o=h(t,["personGeneration"]);e!==void 0&&o!=null&&m(e,["parameters","personGeneration"],o);const u=h(t,["includeRaiReason"]);e!==void 0&&u!=null&&m(e,["parameters","includeRaiReason"],u);const d=h(t,["outputMimeType"]);e!==void 0&&d!=null&&m(e,["parameters","outputOptions","mimeType"],d);const f=h(t,["outputCompressionQuality"]);e!==void 0&&f!=null&&m(e,["parameters","outputOptions","compressionQuality"],f);const p=h(t,["enhanceInputImage"]);e!==void 0&&p!=null&&m(e,["parameters","upscaleConfig","enhanceInputImage"],p);const v=h(t,["imagePreservationFactor"]);e!==void 0&&v!=null&&m(e,["parameters","upscaleConfig","imagePreservationFactor"],v);const w=h(t,["labels"]);e!==void 0&&w!=null&&m(e,["labels"],w);const S=h(t,["numberOfImages"]);e!==void 0&&S!=null&&m(e,["parameters","sampleCount"],S);const I=h(t,["mode"]);return e!==void 0&&I!=null&&m(e,["parameters","mode"],I),n}function Jj(t,e){const n={},r=h(e,["model"]);r!=null&&m(n,["_url","model"],Ye(t,r));const s=h(e,["image"]);s!=null&&m(n,["instances[0]","image"],Ir(s));const o=h(e,["upscaleFactor"]);o!=null&&m(n,["parameters","upscaleConfig","upscaleFactor"],o);const u=h(e,["config"]);return u!=null&&Kj(u,n),n}function Yj(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=h(t,["predictions"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>zh(o))),m(e,["generatedImages"],s)}return e}function Xj(t){const e={},n=h(t,["uri"]);n!=null&&m(e,["uri"],n);const r=h(t,["encodedVideo"]);r!=null&&m(e,["videoBytes"],Us(r));const s=h(t,["encoding"]);return s!=null&&m(e,["mimeType"],s),e}function Qj(t){const e={},n=h(t,["gcsUri"]);n!=null&&m(e,["uri"],n);const r=h(t,["bytesBase64Encoded"]);r!=null&&m(e,["videoBytes"],Us(r));const s=h(t,["mimeType"]);return s!=null&&m(e,["mimeType"],s),e}function Zj(t){const e={},n=h(t,["image"]);n!=null&&m(e,["_self"],Ir(n));const r=h(t,["maskMode"]);return r!=null&&m(e,["maskMode"],r),e}function e4(t){const e={},n=h(t,["image"]);n!=null&&m(e,["image"],Gh(n));const r=h(t,["referenceType"]);return r!=null&&m(e,["referenceType"],r),e}function t4(t){const e={},n=h(t,["image"]);n!=null&&m(e,["image"],Ir(n));const r=h(t,["referenceType"]);return r!=null&&m(e,["referenceType"],r),e}function dC(t){const e={},n=h(t,["uri"]);n!=null&&m(e,["uri"],n);const r=h(t,["videoBytes"]);r!=null&&m(e,["encodedVideo"],Us(r));const s=h(t,["mimeType"]);return s!=null&&m(e,["encoding"],s),e}function hC(t){const e={},n=h(t,["uri"]);n!=null&&m(e,["gcsUri"],n);const r=h(t,["videoBytes"]);r!=null&&m(e,["bytesBase64Encoded"],Us(r));const s=h(t,["mimeType"]);return s!=null&&m(e,["mimeType"],s),e}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/function n4(t,e){const n={},r=h(t,["displayName"]);return e!==void 0&&r!=null&&m(e,["displayName"],r),n}function r4(t){const e={},n=h(t,["config"]);return n!=null&&n4(n,e),e}function i4(t,e){const n={},r=h(t,["force"]);return e!==void 0&&r!=null&&m(e,["_query","force"],r),n}function s4(t){const e={},n=h(t,["name"]);n!=null&&m(e,["_url","name"],n);const r=h(t,["config"]);return r!=null&&i4(r,e),e}function a4(t){const e={},n=h(t,["name"]);return n!=null&&m(e,["_url","name"],n),e}function o4(t,e){const n={},r=h(t,["customMetadata"]);if(e!==void 0&&r!=null){let o=r;Array.isArray(o)&&(o=o.map(u=>u)),m(e,["customMetadata"],o)}const s=h(t,["chunkingConfig"]);return e!==void 0&&s!=null&&m(e,["chunkingConfig"],s),n}function l4(t){const e={},n=h(t,["name"]);n!=null&&m(e,["name"],n);const r=h(t,["metadata"]);r!=null&&m(e,["metadata"],r);const s=h(t,["done"]);s!=null&&m(e,["done"],s);const o=h(t,["error"]);o!=null&&m(e,["error"],o);const u=h(t,["response"]);return u!=null&&m(e,["response"],c4(u)),e}function u4(t){const e={},n=h(t,["fileSearchStoreName"]);n!=null&&m(e,["_url","file_search_store_name"],n);const r=h(t,["fileName"]);r!=null&&m(e,["fileName"],r);const s=h(t,["config"]);return s!=null&&o4(s,e),e}function c4(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=h(t,["parent"]);r!=null&&m(e,["parent"],r);const s=h(t,["documentName"]);return s!=null&&m(e,["documentName"],s),e}function d4(t,e){const n={},r=h(t,["pageSize"]);e!==void 0&&r!=null&&m(e,["_query","pageSize"],r);const s=h(t,["pageToken"]);return e!==void 0&&s!=null&&m(e,["_query","pageToken"],s),n}function h4(t){const e={},n=h(t,["config"]);return n!=null&&d4(n,e),e}function f4(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=h(t,["nextPageToken"]);r!=null&&m(e,["nextPageToken"],r);const s=h(t,["fileSearchStores"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(u=>u)),m(e,["fileSearchStores"],o)}return e}function fC(t,e){const n={},r=h(t,["mimeType"]);e!==void 0&&r!=null&&m(e,["mimeType"],r);const s=h(t,["displayName"]);e!==void 0&&s!=null&&m(e,["displayName"],s);const o=h(t,["customMetadata"]);if(e!==void 0&&o!=null){let d=o;Array.isArray(d)&&(d=d.map(f=>f)),m(e,["customMetadata"],d)}const u=h(t,["chunkingConfig"]);return e!==void 0&&u!=null&&m(e,["chunkingConfig"],u),n}function p4(t){const e={},n=h(t,["fileSearchStoreName"]);n!=null&&m(e,["_url","file_search_store_name"],n);const r=h(t,["config"]);return r!=null&&fC(r,e),e}function m4(t){const e={},n=h(t,["sdkHttpResponse"]);return n!=null&&m(e,["sdkHttpResponse"],n),e}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/const g4="Content-Type",y4="X-Server-Timeout",v4="User-Agent",Qm="x-goog-api-client",b4="1.34.0",w4=`google-genai-sdk/${b4}`,E4="v1beta1",S4="v1beta";class x4{constructor(e){var n,r;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const s={};this.clientOptions.vertexai?(s.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:E4,s.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(s.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:S4,s.baseUrl="https://generativelanguage.googleapis.com/"),s.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=s,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(s,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const n=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&n.push(e.apiVersion),n.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,r){const s=[this.getRequestUrlInternal(n)];return r&&s.push(this.getBaseResourcePath()),e!==""&&s.push(e),new URL(`${s.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,n,r);if(e.queryParams)for(const[u,d]of Object.entries(e.queryParams))s.searchParams.append(u,String(d));let o={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else o.body=e.body;return o=await this.includeExtraHttpOptionsToRequestInit(o,n,s.toString(),e.abortSignal),this.unaryApiCall(s,o,e.httpMethod)}patchHttpOptions(e,n){const r=JSON.parse(JSON.stringify(e));for(const[s,o]of Object.entries(n))typeof o=="object"?r[s]=Object.assign(Object.assign({},r[s]),o):o!==void 0&&(r[s]=o);return r}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,n,r);(!s.searchParams.has("alt")||s.searchParams.get("alt")!=="sse")&&s.searchParams.set("alt","sse");let o={};return o.body=e.body,o=await this.includeExtraHttpOptionsToRequestInit(o,n,s.toString(),e.abortSignal),this.streamApiCall(s,o,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,r,s){if(n&&n.timeout||s){const o=new AbortController,u=o.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const d=setTimeout(()=>o.abort(),n.timeout);d&&typeof d.unref=="function"&&d.unref()}s&&s.addEventListener("abort",()=>{o.abort()}),e.signal=u}return n&&n.extraBody!==null&&T4(e,n.extraBody),e.headers=await this.getHeadersInternal(n,r),e}async unaryApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async s=>(await oS(s),new Wm(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}async streamApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async s=>(await oS(s),this.processStreamResponse(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}processStreamResponse(e){return wr(this,arguments,function*(){var n;const r=(n=e==null?void 0:e.body)===null||n===void 0?void 0:n.getReader(),s=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let o="";const u="data:",d=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:f,value:p}=yield ke(r.read());if(f){if(o.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const v=s.decode(p,{stream:!0});try{const I=JSON.parse(v);if("error"in I){const P=JSON.parse(JSON.stringify(I.error)),j=P.status,D=P.code,q=`got status: ${j}. ${JSON.stringify(I)}`;if(D>=400&&D<600)throw new qh({message:q,status:D})}}catch(I){if(I.name==="ApiError")throw I}o+=v;let w=-1,S=0;for(;;){w=-1,S=0;for(const j of d){const D=o.indexOf(j);D!==-1&&(w===-1||D<w)&&(w=D,S=j.length)}if(w===-1)break;const I=o.substring(0,w);o=o.substring(w+S);const P=I.trim();if(P.startsWith(u)){const j=P.substring(u.length).trim();try{const D=new Response(j,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield ke(new Wm(D))}catch(D){throw new Error(`exception parsing stream chunk ${j}. ${D}`)}}}}}finally{r.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){const e={},n=w4+" "+this.clientOptions.userAgentExtra;return e[v4]=n,e[Qm]=n,e[g4]="application/json",e}async getHeadersInternal(e,n){const r=new Headers;if(e&&e.headers){for(const[s,o]of Object.entries(e.headers))r.append(s,o);e.timeout&&e.timeout>0&&r.append(y4,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(r,n),r}getFileName(e){var n;let r="";return typeof e=="string"&&(r=e.replace(/[/\\]+$/,""),r=(n=r.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),r}async uploadFile(e,n){var r;const s={};n!=null&&(s.mimeType=n.mimeType,s.name=n.name,s.displayName=n.displayName),s.name&&!s.name.startsWith("files/")&&(s.name=`files/${s.name}`);const o=this.clientOptions.uploader,u=await o.stat(e);s.sizeBytes=String(u.size);const d=(r=n==null?void 0:n.mimeType)!==null&&r!==void 0?r:u.type;if(d===void 0||d==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");s.mimeType=d;const f={file:s},p=this.getFileName(e),v=fe("upload/v1beta/files",f._url),w=await this.fetchUploadUrl(v,s.sizeBytes,s.mimeType,p,f,n==null?void 0:n.httpOptions);return o.upload(e,w,this)}async uploadFileToFileSearchStore(e,n,r){var s;const o=this.clientOptions.uploader,u=await o.stat(n),d=String(u.size),f=(s=r==null?void 0:r.mimeType)!==null&&s!==void 0?s:u.type;if(f===void 0||f==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const p=`upload/v1beta/${e}:uploadToFileSearchStore`,v=this.getFileName(n),w={};r!=null&&fC(r,w);const S=await this.fetchUploadUrl(p,d,f,v,w,r==null?void 0:r.httpOptions);return o.uploadToFileSearchStore(n,S,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,r,s,o,u){var d;let f={};u?f=u:f={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${r}`},s?{"X-Goog-Upload-File-Name":s}:{})};const p=await this.request({path:e,body:JSON.stringify(o),httpMethod:"POST",httpOptions:f});if(!p||!(p!=null&&p.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const v=(d=p==null?void 0:p.headers)===null||d===void 0?void 0:d["x-goog-upload-url"];if(v===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return v}}async function oS(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let r;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?r=await t.json():r={error:{message:await t.text(),code:t.status,status:t.statusText}};const s=JSON.stringify(r);throw n>=400&&n<600?new qh({message:s,status:n}):new Error(s)}}function T4(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const o=JSON.parse(t.body);if(typeof o=="object"&&o!==null&&!Array.isArray(o))n=o;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function r(o,u){const d=Object.assign({},o);for(const f in u)if(Object.prototype.hasOwnProperty.call(u,f)){const p=u[f],v=d[f];p&&typeof p=="object"&&!Array.isArray(p)&&v&&typeof v=="object"&&!Array.isArray(v)?d[f]=r(v,p):(v&&p&&typeof v!=typeof p&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${f}". Original type: ${typeof v}, New type: ${typeof p}. Overwriting.`),d[f]=p)}return d}const s=r(n,e);t.body=JSON.stringify(s)}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/const C4="mcp_used/unknown";let I4=!1;function pC(t){for(const e of t)if(k4(e)||typeof e=="object"&&"inputSchema"in e)return!0;return I4}function mC(t){var e;const n=(e=t[Qm])!==null&&e!==void 0?e:"";t[Qm]=(n+` ${C4}`).trimStart()}function k4(t){return t!==null&&typeof t=="object"&&t instanceof Qg}function _4(t){return wr(this,arguments,function*(e,n=100){let r,s=0;for(;s<n;){const o=yield ke(e.listTools({cursor:r}));for(const u of o.tools)yield yield ke(u),s++;if(!o.nextCursor)break;r=o.nextCursor}})}class Qg{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new Qg(e,n)}async initialize(){var e,n,r,s;if(this.mcpTools.length>0)return;const o={},u=[];for(const v of this.mcpClients)try{for(var d=!0,f=(n=void 0,Er(_4(v))),p;p=await f.next(),e=p.done,!e;d=!0){s=p.value,d=!1;const w=s;u.push(w);const S=w.name;if(o[S])throw new Error(`Duplicate function name ${S} found in MCP tools. Please ensure function names are unique.`);o[S]=v}}catch(w){n={error:w}}finally{try{!d&&!e&&(r=f.return)&&await r.call(f)}finally{if(n)throw n.error}}this.mcpTools=u,this.functionNameToMcpClient=o}async tool(){return await this.initialize(),aP(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const r of e)if(r.name in this.functionNameToMcpClient){const s=this.functionNameToMcpClient[r.name];let o;this.config.timeout&&(o={timeout:this.config.timeout});const u=await s.callTool({name:r.name,arguments:r.args},void 0,o);n.push({functionResponse:{name:r.name,response:u.isError?{error:u}:u}})}return n}}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/async function N4(t,e,n){const r=new QO;let s;n.data instanceof Blob?s=JSON.parse(await n.data.text()):s=JSON.parse(n.data),Object.assign(r,s),e(r)}class A4{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r}async connect(e){var n,r;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const s=this.apiClient.getWebsocketBaseUrl(),o=this.apiClient.getApiVersion(),u=R4(this.apiClient.getDefaultHeaders()),d=this.apiClient.getApiKey(),f=`${s}/ws/google.ai.generativelanguage.${o}.GenerativeService.BidiGenerateMusic?key=${d}`;let p=()=>{};const v=new Promise(q=>{p=q}),w=e.callbacks,S=function(){p({})},I=this.apiClient,P={onopen:S,onmessage:q=>{N4(I,w.onmessage,q)},onerror:(n=w==null?void 0:w.onerror)!==null&&n!==void 0?n:function(q){},onclose:(r=w==null?void 0:w.onclose)!==null&&r!==void 0?r:function(q){}},j=this.webSocketFactory.create(f,P4(u),P);j.connect(),await v;const D={setup:{model:Ye(this.apiClient,e.model)}};return j.send(JSON.stringify(D)),new O4(j,this.apiClient)}}class O4{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=rD(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=nD(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(Lo.PLAY)}pause(){this.sendPlaybackControl(Lo.PAUSE)}stop(){this.sendPlaybackControl(Lo.STOP)}resetContext(){this.sendPlaybackControl(Lo.RESET_CONTEXT)}close(){this.conn.close()}}function P4(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function R4(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/const D4="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function j4(t,e,n){const r=new XO;let s;n.data instanceof Blob?s=await n.data.text():n.data instanceof ArrayBuffer?s=new TextDecoder().decode(n.data):s=n.data;const o=JSON.parse(s);if(t.isVertexAI()){const u=aD(o);Object.assign(r,u)}else Object.assign(r,o);e(r)}class M4{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r,this.music=new A4(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,r,s,o,u,d;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const f=this.apiClient.getWebsocketBaseUrl(),p=this.apiClient.getApiVersion();let v;const w=this.apiClient.getHeaders();e.config&&e.config.tools&&pC(e.config.tools)&&mC(w);const S=F4(w);if(this.apiClient.isVertexAI())v=`${f}/ws/google.cloud.aiplatform.${p}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(S,v);else{const O=this.apiClient.getApiKey();let U="BidiGenerateContent",M="key";O!=null&&O.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),p!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),U="BidiGenerateContentConstrained",M="access_token"),v=`${f}/ws/google.ai.generativelanguage.${p}.GenerativeService.${U}?${M}=${O}`}let I=()=>{};const P=new Promise(O=>{I=O}),j=e.callbacks,D=function(){var O;(O=j==null?void 0:j.onopen)===null||O===void 0||O.call(j),I({})},q=this.apiClient,X={onopen:D,onmessage:O=>{j4(q,j.onmessage,O)},onerror:(n=j==null?void 0:j.onerror)!==null&&n!==void 0?n:function(O){},onclose:(r=j==null?void 0:j.onclose)!==null&&r!==void 0?r:function(O){}},B=this.webSocketFactory.create(v,V4(S),X);B.connect(),await P;let re=Ye(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&re.startsWith("publishers/")){const O=this.apiClient.getProject(),U=this.apiClient.getLocation();re=`projects/${O}/locations/${U}/`+re}let ce={};this.apiClient.isVertexAI()&&((s=e.config)===null||s===void 0?void 0:s.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Vu.AUDIO]}:e.config.responseModalities=[Vu.AUDIO]),!((o=e.config)===null||o===void 0)&&o.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const ue=(d=(u=e.config)===null||u===void 0?void 0:u.tools)!==null&&d!==void 0?d:[],A=[];for(const O of ue)if(this.isCallableTool(O)){const U=O;A.push(await U.tool())}else A.push(O);A.length>0&&(e.config.tools=A);const N={model:re,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?ce=tD(this.apiClient,N):ce=eD(this.apiClient,N),delete ce.config,B.send(JSON.stringify(ce)),new U4(B,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const L4={turnComplete:!0};class U4{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let r=[];try{r=tr(n.turns),e.isVertexAI()||(r=r.map(s=>Hh(s)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:r,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let r=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?r=n.functionResponses:r=[n.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const s of r){if(typeof s!="object"||s===null||!("name"in s)||!("response"in s))throw new Error(`Could not parse function response, type '${typeof s}'.`);if(!e.isVertexAI()&&!("id"in s))throw new Error(D4)}return{toolResponse:{functionResponses:r}}}sendClientContent(e){e=Object.assign(Object.assign({},L4),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:sD(e)}:n={realtimeInput:iD(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function V4(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function F4(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/const lS=10;function uS(t){var e,n,r;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let s=!1;for(const u of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(qo(u)){s=!0;break}if(!s)return!0;const o=(r=t==null?void 0:t.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls;return o&&(o<0||!Number.isInteger(o))||o==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",o),!0):!1}function qo(t){return"callTool"in t&&typeof t.callTool=="function"}function q4(t){var e,n,r;return(r=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(s=>qo(s)))!==null&&r!==void 0?r:!1}function cS(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((r,s)=>{if(qo(r))return;const o=r;o.functionDeclarations&&o.functionDeclarations.length>0&&n.push(s)}),n}function dS(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/class H4 extends Ui{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var r,s,o,u,d;const f=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!q4(n)||uS(n.config))return await this.generateContentInternal(f);const p=cS(n);if(p.length>0){const j=p.map(D=>`tools[${D}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${j}.`)}let v,w;const S=tr(f.contents),I=(o=(s=(r=f.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&o!==void 0?o:lS;let P=0;for(;P<I&&(v=await this.generateContentInternal(f),!(!v.functionCalls||v.functionCalls.length===0));){const j=v.candidates[0].content,D=[];for(const q of(d=(u=n.config)===null||u===void 0?void 0:u.tools)!==null&&d!==void 0?d:[])if(qo(q)){const X=await q.callTool(v.functionCalls);D.push(...X)}P++,w={role:"user",parts:D},f.contents=tr(f.contents),f.contents.push(j),f.contents.push(w),dS(f.config)&&(S.push(j),S.push(w))}return dS(f.config)&&(v.automaticFunctionCallingHistory=S),v},this.generateContentStream=async n=>{var r,s,o,u,d;if(this.maybeMoveToResponseJsonSchem(n),uS(n.config)){const w=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(w)}const f=cS(n);if(f.length>0){const w=f.map(S=>`tools[${S}]`).join(", ");throw new Error(`Incompatible tools found at ${w}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const p=(o=(s=(r=n==null?void 0:n.config)===null||r===void 0?void 0:r.toolConfig)===null||s===void 0?void 0:s.functionCallingConfig)===null||o===void 0?void 0:o.streamFunctionCallArguments,v=(d=(u=n==null?void 0:n.config)===null||u===void 0?void 0:u.automaticFunctionCalling)===null||d===void 0?void 0:d.disable;if(p&&!v)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(r=>{var s;let o;const u=[];if(r!=null&&r.generatedImages)for(const f of r.generatedImages)f&&f!=null&&f.safetyAttributes&&((s=f==null?void 0:f.safetyAttributes)===null||s===void 0?void 0:s.contentType)==="Positive Prompt"?o=f==null?void 0:f.safetyAttributes:u.push(f);let d;return o?d={generatedImages:u,positivePromptSafetyAttributes:o,sdkHttpResponse:r.sdkHttpResponse}:d={generatedImages:u,sdkHttpResponse:r.sdkHttpResponse},d}),this.list=async n=>{var r;const s={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!s.config.queryBase){if(!((r=s.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");s.config.filter="labels.tune-type:*"}return new Da(Pi.PAGED_ITEM_MODELS,o=>this.listInternal(o),await this.listInternal(s),s)},this.editImage=async n=>{const r={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(r.referenceImages=n.referenceImages.map(s=>s.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async n=>{let r={numberOfImages:1,mode:"upscale"};n.config&&(r=Object.assign(Object.assign({},r),n.config));const s={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:r};return await this.upscaleImageInternal(s)},this.generateVideos=async n=>{var r,s,o,u,d,f;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((r=n.video)===null||r===void 0)&&r.uri&&!((s=n.video)===null||s===void 0)&&s.videoBytes?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((u=(o=n.source)===null||o===void 0?void 0:o.video)===null||u===void 0)&&u.uri&&!((f=(d=n.source)===null||d===void 0?void 0:d.video)===null||f===void 0)&&f.videoBytes&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,r,s;const o=(n=e.config)===null||n===void 0?void 0:n.tools;if(!o)return e;const u=await Promise.all(o.map(async f=>qo(f)?await f.tool():f)),d={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:u})};if(d.config.tools=u,e.config&&e.config.tools&&pC(e.config.tools)){const f=(s=(r=e.config.httpOptions)===null||r===void 0?void 0:r.headers)!==null&&s!==void 0?s:{};let p=Object.assign({},f);Object.keys(p).length===0&&(p=this.apiClient.getDefaultHeaders()),mC(p),d.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:p})}return d}async initAfcToolsMap(e){var n,r,s;const o=new Map;for(const u of(r=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&r!==void 0?r:[])if(qo(u)){const d=u,f=await d.tool();for(const p of(s=f.functionDeclarations)!==null&&s!==void 0?s:[]){if(!p.name)throw new Error("Function declaration name is required.");if(o.has(p.name))throw new Error(`Duplicate tool declaration name: ${p.name}`);o.set(p.name,d)}}return o}async processAfcStream(e){var n,r,s;const o=(s=(r=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&s!==void 0?s:lS;let u=!1,d=0;const f=await this.initAfcToolsMap(e);return(function(p,v,w){return wr(this,arguments,function*(){for(var S,I,P,j,D,q;d<o;){u&&(d++,u=!1);const ce=yield ke(p.processParamsMaybeAddMcpUsage(w)),ue=yield ke(p.generateContentStreamInternal(ce)),A=[],N=[];try{for(var X=!0,B=(I=void 0,Er(ue)),re;re=yield ke(B.next()),S=re.done,!S;X=!0){j=re.value,X=!1;const O=j;if(yield yield ke(O),O.candidates&&!((D=O.candidates[0])===null||D===void 0)&&D.content){N.push(O.candidates[0].content);for(const U of(q=O.candidates[0].content.parts)!==null&&q!==void 0?q:[])if(d<o&&U.functionCall){if(!U.functionCall.name)throw new Error("Function call name was not returned by the model.");if(v.has(U.functionCall.name)){const M=yield ke(v.get(U.functionCall.name).callTool([U.functionCall]));A.push(...M)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${v.keys()}, mising tool: ${U.functionCall.name}`)}}}}catch(O){I={error:O}}finally{try{!X&&!S&&(P=B.return)&&(yield ke(P.call(B)))}finally{if(I)throw I.error}}if(A.length>0){u=!0;const O=new wu;O.candidates=[{content:{role:"user",parts:A}}],yield yield ke(O);const U=[];U.push(...N),U.push({role:"user",parts:A});const M=tr(w.contents).concat(U);w.contents=M}else break}})})(this,f,e)}async generateContentInternal(e){var n,r,s,o;let u,d="",f={};if(this.apiClient.isVertexAI()){const p=iS(this.apiClient,e);return d=fe("{model}:generateContent",p._url),f=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json().then(w=>{const S=w;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const w=aS(v),S=new wu;return Object.assign(S,w),S})}else{const p=rS(this.apiClient,e);return d=fe("{model}:generateContent",p._url),f=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(w=>{const S=w;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const w=sS(v),S=new wu;return Object.assign(S,w),S})}}async generateContentStreamInternal(e){var n,r,s,o;let u,d="",f={};if(this.apiClient.isVertexAI()){const p=iS(this.apiClient,e);return d=fe("{model}:streamGenerateContent?alt=sse",p._url),f=p._query,delete p._url,delete p._query,u=this.apiClient.requestStream({path:d,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),u.then(function(v){return wr(this,arguments,function*(){var w,S,I,P;try{for(var j=!0,D=Er(v),q;q=yield ke(D.next()),w=q.done,!w;j=!0){P=q.value,j=!1;const X=P,B=aS(yield ke(X.json()));B.sdkHttpResponse={headers:X.headers};const re=new wu;Object.assign(re,B),yield yield ke(re)}}catch(X){S={error:X}}finally{try{!j&&!w&&(I=D.return)&&(yield ke(I.call(D)))}finally{if(S)throw S.error}}})})}else{const p=rS(this.apiClient,e);return d=fe("{model}:streamGenerateContent?alt=sse",p._url),f=p._query,delete p._url,delete p._query,u=this.apiClient.requestStream({path:d,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),u.then(function(v){return wr(this,arguments,function*(){var w,S,I,P;try{for(var j=!0,D=Er(v),q;q=yield ke(D.next()),w=q.done,!w;j=!0){P=q.value,j=!1;const X=P,B=sS(yield ke(X.json()));B.sdkHttpResponse={headers:X.headers};const re=new wu;Object.assign(re,B),yield yield ke(re)}}catch(X){S={error:X}}finally{try{!j&&!w&&(I=D.return)&&(yield ke(I.call(D)))}finally{if(S)throw S.error}}})})}}async embedContent(e){var n,r,s,o;let u,d="",f={};if(this.apiClient.isVertexAI()){const p=MD(this.apiClient,e);return d=fe("{model}:predict",p._url),f=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json().then(w=>{const S=w;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const w=UD(v),S=new FE;return Object.assign(S,w),S})}else{const p=jD(this.apiClient,e);return d=fe("{model}:batchEmbedContents",p._url),f=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(w=>{const S=w;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const w=LD(v),S=new FE;return Object.assign(S,w),S})}}async generateImagesInternal(e){var n,r,s,o;let u,d="",f={};if(this.apiClient.isVertexAI()){const p=JD(this.apiClient,e);return d=fe("{model}:predict",p._url),f=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json().then(w=>{const S=w;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const w=XD(v),S=new qE;return Object.assign(S,w),S})}else{const p=KD(this.apiClient,e);return d=fe("{model}:predict",p._url),f=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(w=>{const S=w;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const w=YD(v),S=new qE;return Object.assign(S,w),S})}}async editImageInternal(e){var n,r;let s,o="",u={};if(this.apiClient.isVertexAI()){const d=OD(this.apiClient,e);return o=fe("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:o,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:f.headers},v})),s.then(f=>{const p=PD(f),v=new FO;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,r;let s,o="",u={};if(this.apiClient.isVertexAI()){const d=Jj(this.apiClient,e);return o=fe("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:o,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:f.headers},v})),s.then(f=>{const p=Yj(f),v=new qO;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,r;let s,o="",u={};if(this.apiClient.isVertexAI()){const d=Aj(this.apiClient,e);return o=fe("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:o,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>{const p=Oj(f),v=new HO;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,r;let s,o="",u={};if(this.apiClient.isVertexAI()){const d=Lj(this.apiClient,e);return o=fe("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:o,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>{const p=Uj(f),v=new zO;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,r,s,o;let u,d="",f={};if(this.apiClient.isVertexAI()){const p=pj(this.apiClient,e);return d=fe("{name}",p._url),f=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json()),u.then(v=>Xm(v))}else{const p=fj(this.apiClient,e);return d=fe("{name}",p._url),f=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),u.then(v=>Ym(v))}}async listInternal(e){var n,r,s,o;let u,d="",f={};if(this.apiClient.isVertexAI()){const p=xj(this.apiClient,e);return d=fe("{models_url}",p._url),f=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json().then(w=>{const S=w;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const w=Cj(v),S=new HE;return Object.assign(S,w),S})}else{const p=Sj(this.apiClient,e);return d=fe("{models_url}",p._url),f=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(w=>{const S=w;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const w=Tj(v),S=new HE;return Object.assign(S,w),S})}}async update(e){var n,r,s,o;let u,d="",f={};if(this.apiClient.isVertexAI()){const p=Wj(this.apiClient,e);return d=fe("{model}",p._url),f=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json()),u.then(v=>Xm(v))}else{const p=$j(this.apiClient,e);return d=fe("{name}",p._url),f=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),u.then(v=>Ym(v))}}async delete(e){var n,r,s,o;let u,d="",f={};if(this.apiClient.isVertexAI()){const p=kD(this.apiClient,e);return d=fe("{name}",p._url),f=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json().then(w=>{const S=w;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const w=ND(v),S=new zE;return Object.assign(S,w),S})}else{const p=ID(this.apiClient,e);return d=fe("{name}",p._url),f=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(w=>{const S=w;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const w=_D(v),S=new zE;return Object.assign(S,w),S})}}async countTokens(e){var n,r,s,o;let u,d="",f={};if(this.apiClient.isVertexAI()){const p=xD(this.apiClient,e);return d=fe("{model}:countTokens",p._url),f=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json().then(w=>{const S=w;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const w=CD(v),S=new GE;return Object.assign(S,w),S})}else{const p=SD(this.apiClient,e);return d=fe("{model}:countTokens",p._url),f=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(w=>{const S=w;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const w=TD(v),S=new GE;return Object.assign(S,w),S})}}async computeTokens(e){var n,r;let s,o="",u={};if(this.apiClient.isVertexAI()){const d=mD(this.apiClient,e);return o=fe("{model}:computeTokens",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:o,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:f.headers},v})),s.then(f=>{const p=gD(f),v=new GO;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,r,s,o;let u,d="",f={};if(this.apiClient.isVertexAI()){const p=rj(this.apiClient,e);return d=fe("{model}:predictLongRunning",p._url),f=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json()),u.then(v=>{const w=tj(v),S=new fh;return Object.assign(S,w),S})}else{const p=nj(this.apiClient,e);return d=fe("{model}:predictLongRunning",p._url),f=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),u.then(v=>{const w=ej(v),S=new fh;return Object.assign(S,w),S})}}}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/class z4 extends Ui{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=n.name.split("/operations/")[0];let o;r&&"httpOptions"in r&&(o=r.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:s,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!1})}}async get(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=n.name.split("/operations/")[0];let o;r&&"httpOptions"in r&&(o=r.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:s,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,r,s,o;let u,d="",f={};if(this.apiClient.isVertexAI()){const p=DO(e);return d=fe("{operationName}",p._url),f=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json()),u}else{const p=RO(e);return d=fe("{operationName}",p._url),f=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),u}}async fetchPredictVideosOperationInternal(e){var n,r;let s,o="",u={};if(this.apiClient.isVertexAI()){const d=IO(e);return o=fe("{resourceName}:fetchPredictOperation",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:o,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s}else throw new Error("This method is only supported by the Vertex AI.")}}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/function G4(t){const e={},n=h(t,["data"]);if(n!=null&&m(e,["data"],n),h(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=h(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function B4(t){const e={},n=h(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>eM(o))),m(e,["parts"],s)}const r=h(t,["role"]);return r!=null&&m(e,["role"],r),e}function $4(t,e,n){const r={},s=h(e,["expireTime"]);n!==void 0&&s!=null&&m(n,["expireTime"],s);const o=h(e,["newSessionExpireTime"]);n!==void 0&&o!=null&&m(n,["newSessionExpireTime"],o);const u=h(e,["uses"]);n!==void 0&&u!=null&&m(n,["uses"],u);const d=h(e,["liveConnectConstraints"]);n!==void 0&&d!=null&&m(n,["bidiGenerateContentSetup"],Z4(t,d));const f=h(e,["lockAdditionalFields"]);return n!==void 0&&f!=null&&m(n,["fieldMask"],f),r}function W4(t,e){const n={},r=h(e,["config"]);return r!=null&&m(n,["config"],$4(t,r,n)),n}function K4(t){const e={};if(h(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=h(t,["fileUri"]);n!=null&&m(e,["fileUri"],n);const r=h(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function J4(t){const e={},n=h(t,["id"]);n!=null&&m(e,["id"],n);const r=h(t,["args"]);r!=null&&m(e,["args"],r);const s=h(t,["name"]);if(s!=null&&m(e,["name"],s),h(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(h(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Y4(t){const e={};if(h(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=h(t,["enableWidget"]);return n!=null&&m(e,["enableWidget"],n),e}function X4(t){const e={};if(h(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(h(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=h(t,["timeRangeFilter"]);return n!=null&&m(e,["timeRangeFilter"],n),e}function Q4(t,e){const n={},r=h(t,["generationConfig"]);e!==void 0&&r!=null&&m(e,["setup","generationConfig"],r);const s=h(t,["responseModalities"]);e!==void 0&&s!=null&&m(e,["setup","generationConfig","responseModalities"],s);const o=h(t,["temperature"]);e!==void 0&&o!=null&&m(e,["setup","generationConfig","temperature"],o);const u=h(t,["topP"]);e!==void 0&&u!=null&&m(e,["setup","generationConfig","topP"],u);const d=h(t,["topK"]);e!==void 0&&d!=null&&m(e,["setup","generationConfig","topK"],d);const f=h(t,["maxOutputTokens"]);e!==void 0&&f!=null&&m(e,["setup","generationConfig","maxOutputTokens"],f);const p=h(t,["mediaResolution"]);e!==void 0&&p!=null&&m(e,["setup","generationConfig","mediaResolution"],p);const v=h(t,["seed"]);e!==void 0&&v!=null&&m(e,["setup","generationConfig","seed"],v);const w=h(t,["speechConfig"]);e!==void 0&&w!=null&&m(e,["setup","generationConfig","speechConfig"],Xg(w));const S=h(t,["thinkingConfig"]);e!==void 0&&S!=null&&m(e,["setup","generationConfig","thinkingConfig"],S);const I=h(t,["enableAffectiveDialog"]);e!==void 0&&I!=null&&m(e,["setup","generationConfig","enableAffectiveDialog"],I);const P=h(t,["systemInstruction"]);e!==void 0&&P!=null&&m(e,["setup","systemInstruction"],B4(cn(P)));const j=h(t,["tools"]);if(e!==void 0&&j!=null){let ue=rl(j);Array.isArray(ue)&&(ue=ue.map(A=>nM(nl(A)))),m(e,["setup","tools"],ue)}const D=h(t,["sessionResumption"]);e!==void 0&&D!=null&&m(e,["setup","sessionResumption"],tM(D));const q=h(t,["inputAudioTranscription"]);e!==void 0&&q!=null&&m(e,["setup","inputAudioTranscription"],q);const X=h(t,["outputAudioTranscription"]);e!==void 0&&X!=null&&m(e,["setup","outputAudioTranscription"],X);const B=h(t,["realtimeInputConfig"]);e!==void 0&&B!=null&&m(e,["setup","realtimeInputConfig"],B);const re=h(t,["contextWindowCompression"]);e!==void 0&&re!=null&&m(e,["setup","contextWindowCompression"],re);const ce=h(t,["proactivity"]);if(e!==void 0&&ce!=null&&m(e,["setup","proactivity"],ce),h(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function Z4(t,e){const n={},r=h(e,["model"]);r!=null&&m(n,["setup","model"],Ye(t,r));const s=h(e,["config"]);return s!=null&&m(n,["config"],Q4(s,n)),n}function eM(t){const e={},n=h(t,["mediaResolution"]);n!=null&&m(e,["mediaResolution"],n);const r=h(t,["codeExecutionResult"]);r!=null&&m(e,["codeExecutionResult"],r);const s=h(t,["executableCode"]);s!=null&&m(e,["executableCode"],s);const o=h(t,["fileData"]);o!=null&&m(e,["fileData"],K4(o));const u=h(t,["functionCall"]);u!=null&&m(e,["functionCall"],J4(u));const d=h(t,["functionResponse"]);d!=null&&m(e,["functionResponse"],d);const f=h(t,["inlineData"]);f!=null&&m(e,["inlineData"],G4(f));const p=h(t,["text"]);p!=null&&m(e,["text"],p);const v=h(t,["thought"]);v!=null&&m(e,["thought"],v);const w=h(t,["thoughtSignature"]);w!=null&&m(e,["thoughtSignature"],w);const S=h(t,["videoMetadata"]);return S!=null&&m(e,["videoMetadata"],S),e}function tM(t){const e={},n=h(t,["handle"]);if(n!=null&&m(e,["handle"],n),h(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function nM(t){const e={},n=h(t,["functionDeclarations"]);if(n!=null){let v=n;Array.isArray(v)&&(v=v.map(w=>w)),m(e,["functionDeclarations"],v)}if(h(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=h(t,["googleSearchRetrieval"]);r!=null&&m(e,["googleSearchRetrieval"],r);const s=h(t,["computerUse"]);s!=null&&m(e,["computerUse"],s);const o=h(t,["fileSearch"]);o!=null&&m(e,["fileSearch"],o);const u=h(t,["codeExecution"]);if(u!=null&&m(e,["codeExecution"],u),h(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=h(t,["googleMaps"]);d!=null&&m(e,["googleMaps"],Y4(d));const f=h(t,["googleSearch"]);f!=null&&m(e,["googleSearch"],X4(f));const p=h(t,["urlContext"]);return p!=null&&m(e,["urlContext"],p),e}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/function rM(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const r=t[n];if(typeof r=="object"&&r!=null&&Object.keys(r).length>0){const s=Object.keys(r).map(o=>`${n}.${o}`);e.push(...s)}else e.push(n)}return e.join(",")}function iM(t,e){let n=null;const r=t.bidiGenerateContentSetup;if(typeof r=="object"&&r!==null&&"setup"in r){const o=r.setup;typeof o=="object"&&o!==null?(t.bidiGenerateContentSetup=o,n=o):delete t.bidiGenerateContentSetup}else r!==void 0&&delete t.bidiGenerateContentSetup;const s=t.fieldMask;if(n){const o=rM(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)o?t.fieldMask=o:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&s!==null&&Array.isArray(s)&&s.length>0){const u=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let d=[];s.length>0&&(d=s.map(p=>u.includes(p)?`generationConfig.${p}`:p));const f=[];o&&f.push(o),d.length>0&&f.push(...d),f.length>0?t.fieldMask=f.join(","):delete t.fieldMask}else delete t.fieldMask}else s!==null&&Array.isArray(s)&&s.length>0?t.fieldMask=s.join(","):delete t.fieldMask;return t}class sM extends Ui{constructor(e){super(),this.apiClient=e}async create(e){var n,r;let s,o="",u={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const d=W4(this.apiClient,e);o=fe("auth_tokens",d._url),u=d._query,delete d.config,delete d._url,delete d._query;const f=iM(d,e.config);return s=this.apiClient.request({path:o,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),s.then(p=>p)}}}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/function aM(t,e){const n={},r=h(t,["force"]);return e!==void 0&&r!=null&&m(e,["_query","force"],r),n}function oM(t){const e={},n=h(t,["name"]);n!=null&&m(e,["_url","name"],n);const r=h(t,["config"]);return r!=null&&aM(r,e),e}function lM(t){const e={},n=h(t,["name"]);return n!=null&&m(e,["_url","name"],n),e}function uM(t,e){const n={},r=h(t,["pageSize"]);e!==void 0&&r!=null&&m(e,["_query","pageSize"],r);const s=h(t,["pageToken"]);return e!==void 0&&s!=null&&m(e,["_query","pageToken"],s),n}function cM(t){const e={},n=h(t,["parent"]);n!=null&&m(e,["_url","parent"],n);const r=h(t,["config"]);return r!=null&&uM(r,e),e}function dM(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=h(t,["nextPageToken"]);r!=null&&m(e,["nextPageToken"],r);const s=h(t,["documents"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(u=>u)),m(e,["documents"],o)}return e}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/class hM extends Ui{constructor(e){super(),this.apiClient=e,this.list=async n=>new Da(Pi.PAGED_ITEM_DOCUMENTS,r=>this.listInternal({parent:n.parent,config:r.config}),await this.listInternal(n),n)}async get(e){var n,r;let s,o="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=lM(e);return o=fe("{name}",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:o,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>f)}}async delete(e){var n,r;let s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=oM(e);s=fe("{name}",u._url),o=u._query,delete u._url,delete u._query,await this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,r;let s,o="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=cM(e);return o=fe("{parent}/documents",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:o,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>{const p=dM(f),v=new BO;return Object.assign(v,p),v})}}}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/class fM extends Ui{constructor(e,n=new hM(e)){super(),this.apiClient=e,this.documents=n,this.list=async(r={})=>new Da(Pi.PAGED_ITEM_FILE_SEARCH_STORES,s=>this.listInternal(s),await this.listInternal(r),r)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,r;let s,o="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=r4(e);return o=fe("fileSearchStores",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:o,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>f)}}async get(e){var n,r;let s,o="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=a4(e);return o=fe("{name}",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:o,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>f)}}async delete(e){var n,r;let s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=s4(e);s=fe("{name}",u._url),o=u._query,delete u._url,delete u._query,await this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,r;let s,o="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=h4(e);return o=fe("fileSearchStores",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:o,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>{const p=f4(f),v=new $O;return Object.assign(v,p),v})}}async uploadToFileSearchStoreInternal(e){var n,r;let s,o="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=p4(e);return o=fe("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:o,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>{const p=m4(f),v=new WO;return Object.assign(v,p),v})}}async importFile(e){var n,r;let s,o="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=u4(e);return o=fe("{file_search_store_name}:importFile",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:o,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>{const p=l4(f),v=new $g;return Object.assign(v,p),v})}}}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/let gC=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return gC=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,r=>(+r^n()&15>>+r/4).toString(16))};const pM=()=>gC();/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/function Zm(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const eg=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/class rr extends Error{}class vn extends rr{constructor(e,n,r,s){super(`${vn.makeMessage(e,n,r)}`),this.status=e,this.headers=s,this.error=n}static makeMessage(e,n,r){const s=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return e&&s?`${e} ${s}`:e?`${e} status code (no body)`:s||"(no status code or body)"}static generate(e,n,r,s){if(!e||!s)return new Bh({message:r,cause:eg(n)});const o=n;return e===400?new vC(e,o,r,s):e===401?new bC(e,o,r,s):e===403?new wC(e,o,r,s):e===404?new EC(e,o,r,s):e===409?new SC(e,o,r,s):e===422?new xC(e,o,r,s):e===429?new TC(e,o,r,s):e>=500?new CC(e,o,r,s):new vn(e,o,r,s)}}class tg extends vn{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Bh extends vn{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class yC extends Bh{constructor({message:e}={}){super({message:e??"Request timed out."})}}class vC extends vn{}class bC extends vn{}class wC extends vn{}class EC extends vn{}class SC extends vn{}class xC extends vn{}class TC extends vn{}class CC extends vn{}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/const mM=/^[a-z][a-z0-9+.-]*:/i,gM=t=>mM.test(t);let ng=t=>(ng=Array.isArray,ng(t));const yM=ng;let vM=yM;const hS=vM;function bM(t){if(!t)return!0;for(const e in t)return!1;return!0}function wM(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const EM=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new rr(`${t} must be an integer`);if(e<0)throw new rr(`${t} must be a positive integer`);return e},SM=t=>{try{return JSON.parse(t)}catch{return}};/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/const xM=t=>new Promise(e=>setTimeout(e,t));/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/const Po="0.0.1";/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/function TM(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const CM=()=>{var t,e,n,r,s;const o=TM();if(o==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Po,"X-Stainless-OS":pS(Deno.build.os),"X-Stainless-Arch":fS(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Po,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(o==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Po,"X-Stainless-OS":pS((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":fS((r=globalThis.process.arch)!==null&&r!==void 0?r:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(s=globalThis.process.version)!==null&&s!==void 0?s:"unknown"};const u=IM();return u?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Po,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${u.browser}`,"X-Stainless-Runtime-Version":u.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Po,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function IM(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const r=n.exec(navigator.userAgent);if(r){const s=r[1]||0,o=r[2]||0,u=r[3]||0;return{browser:e,version:`${s}.${o}.${u}`}}}return null}const fS=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",pS=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let mS;const kM=()=>mS??(mS=CM());/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/function _M(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function IC(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function NM(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return IC({start(){},async pull(n){const{done:r,value:s}=await e.next();r?n.close():n.enqueue(s)},async cancel(){var n;await((n=e.return)===null||n===void 0?void 0:n.call(e))}})}function kC(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function AM(t){var e,n;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((n=(e=t[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(e));return}const r=t.getReader(),s=r.cancel();r.releaseLock(),await s}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/const OM=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/const _C=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((t=e==null?void 0:e.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Sm(t,e,n){return _C(),new File(t,e??"unknown_file",n)}function PM(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const RM=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/const NC=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",DM=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&NC(t),jM=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function MM(t,e,n){if(_C(),t=await t,DM(t))return t instanceof File?t:Sm([await t.arrayBuffer()],t.name);if(jM(t)){const s=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),Sm(await rg(s),e,n)}const r=await rg(t);if(e||(e=PM(t)),!(n!=null&&n.type)){const s=r.find(o=>typeof o=="object"&&"type"in o&&o.type);typeof s=="string"&&(n=Object.assign(Object.assign({},n),{type:s}))}return Sm(r,e,n)}async function rg(t){var e,n,r,s,o;let u=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)u.push(t);else if(NC(t))u.push(t instanceof Blob?t:await t.arrayBuffer());else if(RM(t))try{for(var d=!0,f=Er(t),p;p=await f.next(),e=p.done,!e;d=!0){s=p.value,d=!1;const v=s;u.push(...await rg(v))}}catch(v){n={error:v}}finally{try{!d&&!e&&(r=f.return)&&await r.call(f)}finally{if(n)throw n.error}}else{const v=(o=t==null?void 0:t.constructor)===null||o===void 0?void 0:o.name;throw new Error(`Unexpected data type: ${typeof t}${v?`; constructor: ${v}`:""}${LM(t)}`)}return u}function LM(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(e=>`"${e}"`).join(", ")}]`}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/class AC{constructor(e){this._client=e}}AC._key=[];/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/function OC(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const gS=Object.freeze(Object.create(null)),UM=(t=OC)=>(function(e,...n){if(e.length===1)return e[0];let r=!1;const s=[],o=e.reduce((p,v,w)=>{var S,I,P;/[?#]/.test(v)&&(r=!0);const j=n[w];let D=(r?encodeURIComponent:t)(""+j);return w!==n.length&&(j==null||typeof j=="object"&&j.toString===((P=Object.getPrototypeOf((I=Object.getPrototypeOf((S=j.hasOwnProperty)!==null&&S!==void 0?S:gS))!==null&&I!==void 0?I:gS))===null||P===void 0?void 0:P.toString))&&(D=j+"",s.push({start:p.length+v.length,length:D.length,error:`Value of type ${Object.prototype.toString.call(j).slice(8,-1)} is not a valid path parameter`})),p+v+(w===n.length?"":D)},""),u=o.split(/[?#]/,1)[0],d=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let f;for(;(f=d.exec(u))!==null;)s.push({start:f.index,length:f[0].length,error:`Value "${f[0]}" can't be safely passed as a path parameter`});if(s.sort((p,v)=>p.start-v.start),s.length>0){let p=0;const v=s.reduce((w,S)=>{const I=" ".repeat(S.start-p),P="^".repeat(S.length);return p=S.start+S.length,w+I+P},"");throw new rr(`Path parameters result in path with invalid segments:
${s.map(w=>w.error).join(`
`)}
${o}
${v}`)}return o}),Hd=UM(OC);/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/class PC extends AC{create(e,n){var r;const{api_version:s=this._client.apiVersion}=e,o=mh(e,["api_version"]);if("model"in o&&"agent_config"in o)throw new rr("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in o&&"generation_config"in o)throw new rr("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(Hd`/${s}/interactions`,Object.assign(Object.assign({body:o},n),{stream:(r=e.stream)!==null&&r!==void 0?r:!1}))}delete(e,n={},r){const{api_version:s=this._client.apiVersion}=n??{};return this._client.delete(Hd`/${s}/interactions/${e}`,r)}cancel(e,n={},r){const{api_version:s=this._client.apiVersion}=n??{};return this._client.post(Hd`/${s}/interactions/${e}/cancel`,r)}get(e,n={},r){var s;const o=n??{},{api_version:u=this._client.apiVersion}=o,d=mh(o,["api_version"]);return this._client.get(Hd`/${u}/interactions/${e}`,Object.assign(Object.assign({query:d},r),{stream:(s=n==null?void 0:n.stream)!==null&&s!==void 0?s:!1}))}}PC._key=Object.freeze(["interactions"]);class RC extends PC{}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/function VM(t){let e=0;for(const s of t)e+=s.length;const n=new Uint8Array(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return n}let yS;function Zg(t){let e;return(yS??(e=new globalThis.TextEncoder,yS=e.encode.bind(e)))(t)}let vS;function bS(t){let e;return(vS??(e=new globalThis.TextDecoder,vS=e.decode.bind(e)))(t)}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/class $h{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?Zg(e):e;this.buffer=VM([this.buffer,n]);const r=[];let s;for(;(s=FM(this.buffer,this.carriageReturnIndex))!=null;){if(s.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=s.index;continue}if(this.carriageReturnIndex!=null&&(s.index!==this.carriageReturnIndex+1||s.carriage)){r.push(bS(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const o=this.carriageReturnIndex!==null?s.preceding-1:s.preceding,u=bS(this.buffer.subarray(0,o));r.push(u),this.buffer=this.buffer.subarray(s.index),this.carriageReturnIndex=null}return r}flush(){return this.buffer.length?this.decode(`
`):[]}}$h.NEWLINE_CHARS=new Set([`
`,"\r"]);$h.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function FM(t,e){for(let n=e??0;n<t.length;n++){if(t[n]===10)return{preceding:n,index:n+1,carriage:!1};if(t[n]===13)return{preceding:n,index:n+1,carriage:!0}}return null}function qM(t){for(let e=0;e<t.length-1;e++){if(t[e]===10&&t[e+1]===10||t[e]===13&&t[e+1]===13)return e+2;if(t[e]===13&&t[e+1]===10&&e+3<t.length&&t[e+2]===13&&t[e+3]===10)return e+4}return-1}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/const gh={off:0,error:200,warn:300,info:400,debug:500},wS=(t,e,n)=>{if(t){if(wM(gh,t))return t;mn(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(gh))}`)}};function Su(){}function zd(t,e,n){return!e||gh[t]>gh[n]?Su:e[t].bind(e)}const HM={error:Su,warn:Su,info:Su,debug:Su};let ES=new WeakMap;function mn(t){var e;const n=t.logger,r=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!n)return HM;const s=ES.get(n);if(s&&s[0]===r)return s[1];const o={error:zd("error",n,r),warn:zd("warn",n,r),info:zd("info",n,r),debug:zd("debug",n,r)};return ES.set(n,[r,o]),o}const Ea=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/class Uo{constructor(e,n,r){this.iterator=e,this.controller=n,this.client=r}static fromSSEResponse(e,n,r){let s=!1;const o=r?mn(r):console;function u(){return wr(this,arguments,function*(){var d,f,p,v;if(s)throw new rr("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let w=!1;try{try{for(var S=!0,I=Er(zM(e,n)),P;P=yield ke(I.next()),d=P.done,!d;S=!0){v=P.value,S=!1;const j=v;if(!w)if(j.data.startsWith("[DONE]")){w=!0;continue}else try{yield yield ke(JSON.parse(j.data))}catch(D){throw o.error("Could not parse message into JSON:",j.data),o.error("From chunk:",j.raw),D}}}catch(j){f={error:j}}finally{try{!S&&!d&&(p=I.return)&&(yield ke(p.call(I)))}finally{if(f)throw f.error}}w=!0}catch(j){if(Zm(j))return yield ke(void 0);throw j}finally{w||n.abort()}})}return new Uo(u,n,r)}static fromReadableStream(e,n,r){let s=!1;function o(){return wr(this,arguments,function*(){var d,f,p,v;const w=new $h,S=kC(e);try{for(var I=!0,P=Er(S),j;j=yield ke(P.next()),d=j.done,!d;I=!0){v=j.value,I=!1;const D=v;for(const q of w.decode(D))yield yield ke(q)}}catch(D){f={error:D}}finally{try{!I&&!d&&(p=P.return)&&(yield ke(p.call(P)))}finally{if(f)throw f.error}}for(const D of w.flush())yield yield ke(D)})}function u(){return wr(this,arguments,function*(){var d,f,p,v;if(s)throw new rr("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let w=!1;try{try{for(var S=!0,I=Er(o()),P;P=yield ke(I.next()),d=P.done,!d;S=!0){v=P.value,S=!1;const j=v;w||j&&(yield yield ke(JSON.parse(j)))}}catch(j){f={error:j}}finally{try{!S&&!d&&(p=I.return)&&(yield ke(p.call(I)))}finally{if(f)throw f.error}}w=!0}catch(j){if(Zm(j))return yield ke(void 0);throw j}finally{w||n.abort()}})}return new Uo(u,n,r)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],r=this.iterator(),s=o=>({next:()=>{if(o.length===0){const u=r.next();e.push(u),n.push(u)}return o.shift()}});return[new Uo(()=>s(e),this.controller,this.client),new Uo(()=>s(n),this.controller,this.client)]}toReadableStream(){const e=this;let n;return IC({async start(){n=e[Symbol.asyncIterator]()},async pull(r){try{const{value:s,done:o}=await n.next();if(o)return r.close();const u=Zg(JSON.stringify(s)+`
`);r.enqueue(u)}catch(s){r.error(s)}},async cancel(){var r;await((r=n.return)===null||r===void 0?void 0:r.call(n))}})}}function zM(t,e){return wr(this,arguments,function*(){var n,r,s,o;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new rr("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new rr("Attempted to iterate over a response with no body");const u=new BM,d=new $h,f=kC(t.body);try{for(var p=!0,v=Er(GM(f)),w;w=yield ke(v.next()),n=w.done,!n;p=!0){o=w.value,p=!1;const S=o;for(const I of d.decode(S)){const P=u.decode(I);P&&(yield yield ke(P))}}}catch(S){r={error:S}}finally{try{!p&&!n&&(s=v.return)&&(yield ke(s.call(v)))}finally{if(r)throw r.error}}for(const S of d.flush()){const I=u.decode(S);I&&(yield yield ke(I))}})}function GM(t){return wr(this,arguments,function*(){var e,n,r,s;let o=new Uint8Array;try{for(var u=!0,d=Er(t),f;f=yield ke(d.next()),e=f.done,!e;u=!0){s=f.value,u=!1;const p=s;if(p==null)continue;const v=p instanceof ArrayBuffer?new Uint8Array(p):typeof p=="string"?Zg(p):p;let w=new Uint8Array(o.length+v.length);w.set(o),w.set(v,o.length),o=w;let S;for(;(S=qM(o))!==-1;)yield yield ke(o.slice(0,S)),o=o.slice(S)}}catch(p){n={error:p}}finally{try{!u&&!e&&(r=d.return)&&(yield ke(r.call(d)))}finally{if(n)throw n.error}}o.length>0&&(yield yield ke(o))})}class BM{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const o={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],o}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,r,s]=$M(e,":");return s.startsWith(" ")&&(s=s.substring(1)),n==="event"?this.event=s:n==="data"&&this.data.push(s),null}}function $M(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/async function WM(t,e){const{response:n,requestLogID:r,retryOfRequestLogID:s,startTime:o}=e,u=await(async()=>{var d;if(e.options.stream)return mn(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):Uo.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const f=n.headers.get("content-type"),p=(d=f==null?void 0:f.split(";")[0])===null||d===void 0?void 0:d.trim();return p!=null&&p.includes("application/json")||p!=null&&p.endsWith("+json")?await n.json():await n.text()})();return mn(t).debug(`[${r}] response parsed`,Ea({retryOfRequestLogID:s,url:n.url,status:n.status,body:u,durationMs:Date.now()-o})),u}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/class ey extends Promise{constructor(e,n,r=WM){super(s=>{s(null)}),this.responsePromise=n,this.parseResponse=r,this.client=e}_thenUnwrap(e){return new ey(this.client,this.responsePromise,async(n,r)=>e(await this.parseResponse(n,r),r))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/const DC=Symbol("brand.privateNullableHeaders");function*KM(t){if(!t)return;if(DC in t){const{values:r,nulls:s}=t;yield*r.entries();for(const o of s)yield[o,null];return}let e=!1,n;t instanceof Headers?n=t.entries():hS(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let r of n){const s=r[0];if(typeof s!="string")throw new TypeError("expected header name to be a string");const o=hS(r[1])?r[1]:[r[1]];let u=!1;for(const d of o)d!==void 0&&(e&&!u&&(u=!0,yield[s,null]),yield[s,d])}}const Eu=t=>{const e=new Headers,n=new Set;for(const r of t){const s=new Set;for(const[o,u]of KM(r)){const d=o.toLowerCase();s.has(d)||(e.delete(o),s.add(d)),u===null?(e.delete(o),n.add(d)):(e.append(o,u),n.delete(d))}}return{[DC]:!0,values:e,nulls:n}};/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/const xm=t=>{var e,n,r,s,o,u;if(typeof globalThis.process<"u")return(r=(n=(e=wO)===null||e===void 0?void 0:e[t])===null||n===void 0?void 0:n.trim())!==null&&r!==void 0?r:void 0;if(typeof globalThis.Deno<"u")return(u=(o=(s=globalThis.Deno.env)===null||s===void 0?void 0:s.get)===null||o===void 0?void 0:o.call(s,t))===null||u===void 0?void 0:u.trim()};/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/var jC;class Wh{constructor(e){var n,r,s,o,u,d,f,{baseURL:p=xm("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:v=(n=xm("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:w="v1beta"}=e,S=mh(e,["baseURL","apiKey","apiVersion"]);const I=Object.assign(Object.assign({apiKey:v,apiVersion:w},S),{baseURL:p||"https://generativelanguage.googleapis.com"});this.baseURL=I.baseURL,this.timeout=(r=I.timeout)!==null&&r!==void 0?r:Wh.DEFAULT_TIMEOUT,this.logger=(s=I.logger)!==null&&s!==void 0?s:console;const P="warn";this.logLevel=P,this.logLevel=(u=(o=wS(I.logLevel,"ClientOptions.logLevel",this))!==null&&o!==void 0?o:wS(xm("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&u!==void 0?u:P,this.fetchOptions=I.fetchOptions,this.maxRetries=(d=I.maxRetries)!==null&&d!==void 0?d:2,this.fetch=(f=I.fetch)!==null&&f!==void 0?f:_M(),this.encoder=OM,this._options=I,this.apiKey=v,this.apiVersion=w,this.clientAdapter=I.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const n=Eu([e.headers]);if(!(n.values.has("authorization")||n.values.has("x-goog-api-key"))){if(this.apiKey)return Eu([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return Eu([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([n,r])=>typeof r<"u").map(([n,r])=>{if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(r)}`;if(r===null)return`${encodeURIComponent(n)}=`;throw new rr(`Cannot stringify type ${typeof r}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Po}`}defaultIdempotencyKey(){return`stainless-node-retry-${pM()}`}makeStatusError(e,n,r,s){return vn.generate(e,n,r,s)}buildURL(e,n,r){const s=!this.baseURLOverridden()&&r||this.baseURL,o=gM(e)?new URL(e):new URL(s+(s.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),u=this.defaultQuery();return bM(u)||(n=Object.assign(Object.assign({},u),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(o.search=this.stringifyQuery(n)),o.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const n=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${n}`}}async prepareRequest(e,{url:n,options:r}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,r){return this.request(Promise.resolve(r).then(s=>Object.assign({method:e,path:n},s)))}request(e,n=null){return new ey(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,r){var s,o,u;const d=await e,f=(s=d.maxRetries)!==null&&s!==void 0?s:this.maxRetries;n==null&&(n=f),await this.prepareOptions(d);const{req:p,url:v,timeout:w}=await this.buildRequest(d,{retryCount:f-n});await this.prepareRequest(p,{url:v,options:d});const S="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),I=r===void 0?"":`, retryOf: ${r}`,P=Date.now();if(mn(this).debug(`[${S}] sending request`,Ea({retryOfRequestLogID:r,method:d.method,url:v,options:d,headers:p.headers})),!((o=d.signal)===null||o===void 0)&&o.aborted)throw new tg;const j=new AbortController,D=await this.fetchWithTimeout(v,p,w,j).catch(eg),q=Date.now();if(D instanceof globalThis.Error){const B=`retrying, ${n} attempts remaining`;if(!((u=d.signal)===null||u===void 0)&&u.aborted)throw new tg;const re=Zm(D)||/timed? ?out/i.test(String(D)+("cause"in D?String(D.cause):""));if(n)return mn(this).info(`[${S}] connection ${re?"timed out":"failed"} - ${B}`),mn(this).debug(`[${S}] connection ${re?"timed out":"failed"} (${B})`,Ea({retryOfRequestLogID:r,url:v,durationMs:q-P,message:D.message})),this.retryRequest(d,n,r??S);throw mn(this).info(`[${S}] connection ${re?"timed out":"failed"} - error; no more retries left`),mn(this).debug(`[${S}] connection ${re?"timed out":"failed"} (error; no more retries left)`,Ea({retryOfRequestLogID:r,url:v,durationMs:q-P,message:D.message})),re?new yC:new Bh({cause:D})}const X=`[${S}${I}] ${p.method} ${v} ${D.ok?"succeeded":"failed"} with status ${D.status} in ${q-P}ms`;if(!D.ok){const B=await this.shouldRetry(D);if(n&&B){const N=`retrying, ${n} attempts remaining`;return await AM(D.body),mn(this).info(`${X} - ${N}`),mn(this).debug(`[${S}] response error (${N})`,Ea({retryOfRequestLogID:r,url:D.url,status:D.status,headers:D.headers,durationMs:q-P})),this.retryRequest(d,n,r??S,D.headers)}const re=B?"error; no more retries left":"error; not retryable";mn(this).info(`${X} - ${re}`);const ce=await D.text().catch(N=>eg(N).message),ue=SM(ce),A=ue?void 0:ce;throw mn(this).debug(`[${S}] response error (${re})`,Ea({retryOfRequestLogID:r,url:D.url,status:D.status,headers:D.headers,message:A,durationMs:Date.now()-P})),this.makeStatusError(D.status,ue,A,D.headers)}return mn(this).info(X),mn(this).debug(`[${S}] response start`,Ea({retryOfRequestLogID:r,url:D.url,status:D.status,headers:D.headers,durationMs:q-P})),{response:D,options:d,controller:j,requestLogID:S,retryOfRequestLogID:r,startTime:P}}async fetchWithTimeout(e,n,r,s){const o=n||{},{signal:u,method:d}=o,f=mh(o,["signal","method"]);u&&u.addEventListener("abort",()=>s.abort());const p=setTimeout(()=>s.abort(),r),v=globalThis.ReadableStream&&f.body instanceof globalThis.ReadableStream||typeof f.body=="object"&&f.body!==null&&Symbol.asyncIterator in f.body,w=Object.assign(Object.assign(Object.assign({signal:s.signal},v?{duplex:"half"}:{}),{method:"GET"}),f);d&&(w.method=d.toUpperCase());try{return await this.fetch.call(void 0,e,w)}finally{clearTimeout(p)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,r,s){var o;let u;const d=s==null?void 0:s.get("retry-after-ms");if(d){const p=parseFloat(d);Number.isNaN(p)||(u=p)}const f=s==null?void 0:s.get("retry-after");if(f&&!u){const p=parseFloat(f);Number.isNaN(p)?u=Date.parse(f)-Date.now():u=p*1e3}if(!(u&&0<=u&&u<60*1e3)){const p=(o=e.maxRetries)!==null&&o!==void 0?o:this.maxRetries;u=this.calculateDefaultRetryTimeoutMillis(n,p)}return await xM(u),this.makeRequest(e,n-1,r)}calculateDefaultRetryTimeoutMillis(e,n){const r=n-e,s=Math.min(.5*Math.pow(2,r),8),o=1-Math.random()*.25;return s*o*1e3}async buildRequest(e,{retryCount:n=0}={}){var r,s,o;const u=Object.assign({},e),{method:d,path:f,query:p,defaultBaseURL:v}=u,w=this.buildURL(f,p,v);"timeout"in u&&EM("timeout",u.timeout),u.timeout=(r=u.timeout)!==null&&r!==void 0?r:this.timeout;const{bodyHeaders:S,body:I}=this.buildBody({options:u}),P=await this.buildHeaders({options:e,method:d,bodyHeaders:S,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:d,headers:P},u.signal&&{signal:u.signal}),globalThis.ReadableStream&&I instanceof globalThis.ReadableStream&&{duplex:"half"}),I&&{body:I}),(s=this.fetchOptions)!==null&&s!==void 0?s:{}),(o=u.fetchOptions)!==null&&o!==void 0?o:{}),url:w,timeout:u.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:r,retryCount:s}){let o={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),o[this.idempotencyHeader]=e.idempotencyKey);const u=await this.authHeaders(e);let d=Eu([o,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(s)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),kM()),this._options.defaultHeaders,r,e.headers,u]);return this.validateHeaders(d),d.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const r=Eu([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&r.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:NM(e)}:this.encoder({body:e,headers:r})}}Wh.DEFAULT_TIMEOUT=6e4;class Kt extends Wh{constructor(){super(...arguments),this.interactions=new RC(this)}}jC=Kt;Kt.GeminiNextGenAPIClient=jC;Kt.GeminiNextGenAPIClientError=rr;Kt.APIError=vn;Kt.APIConnectionError=Bh;Kt.APIConnectionTimeoutError=yC;Kt.APIUserAbortError=tg;Kt.NotFoundError=EC;Kt.ConflictError=SC;Kt.RateLimitError=TC;Kt.BadRequestError=vC;Kt.AuthenticationError=bC;Kt.InternalServerError=CC;Kt.PermissionDeniedError=wC;Kt.UnprocessableEntityError=xC;Kt.toFile=MM;Kt.Interactions=RC;/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/function JM(t,e){const n={},r=h(t,["name"]);return r!=null&&m(n,["_url","name"],r),n}function YM(t,e){const n={},r=h(t,["name"]);return r!=null&&m(n,["_url","name"],r),n}function XM(t,e){const n={},r=h(t,["sdkHttpResponse"]);return r!=null&&m(n,["sdkHttpResponse"],r),n}function QM(t,e){const n={},r=h(t,["sdkHttpResponse"]);return r!=null&&m(n,["sdkHttpResponse"],r),n}function ZM(t,e,n){const r={};if(h(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const s=h(t,["tunedModelDisplayName"]);if(e!==void 0&&s!=null&&m(e,["displayName"],s),h(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const o=h(t,["epochCount"]);e!==void 0&&o!=null&&m(e,["tuningTask","hyperparameters","epochCount"],o);const u=h(t,["learningRateMultiplier"]);if(u!=null&&m(r,["tuningTask","hyperparameters","learningRateMultiplier"],u),h(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(h(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(h(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const d=h(t,["batchSize"]);e!==void 0&&d!=null&&m(e,["tuningTask","hyperparameters","batchSize"],d);const f=h(t,["learningRate"]);if(e!==void 0&&f!=null&&m(e,["tuningTask","hyperparameters","learningRate"],f),h(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(h(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return r}function eL(t,e,n){const r={};let s=h(n,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const I=h(t,["validationDataset"]);e!==void 0&&I!=null&&m(e,["supervisedTuningSpec"],SS(I))}else if(s==="PREFERENCE_TUNING"){const I=h(t,["validationDataset"]);e!==void 0&&I!=null&&m(e,["preferenceOptimizationSpec"],SS(I))}const o=h(t,["tunedModelDisplayName"]);e!==void 0&&o!=null&&m(e,["tunedModelDisplayName"],o);const u=h(t,["description"]);e!==void 0&&u!=null&&m(e,["description"],u);let d=h(n,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const I=h(t,["epochCount"]);e!==void 0&&I!=null&&m(e,["supervisedTuningSpec","hyperParameters","epochCount"],I)}else if(d==="PREFERENCE_TUNING"){const I=h(t,["epochCount"]);e!==void 0&&I!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],I)}let f=h(n,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const I=h(t,["learningRateMultiplier"]);e!==void 0&&I!=null&&m(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],I)}else if(f==="PREFERENCE_TUNING"){const I=h(t,["learningRateMultiplier"]);e!==void 0&&I!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],I)}let p=h(n,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const I=h(t,["exportLastCheckpointOnly"]);e!==void 0&&I!=null&&m(e,["supervisedTuningSpec","exportLastCheckpointOnly"],I)}else if(p==="PREFERENCE_TUNING"){const I=h(t,["exportLastCheckpointOnly"]);e!==void 0&&I!=null&&m(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],I)}let v=h(n,["config","method"]);if(v===void 0&&(v="SUPERVISED_FINE_TUNING"),v==="SUPERVISED_FINE_TUNING"){const I=h(t,["adapterSize"]);e!==void 0&&I!=null&&m(e,["supervisedTuningSpec","hyperParameters","adapterSize"],I)}else if(v==="PREFERENCE_TUNING"){const I=h(t,["adapterSize"]);e!==void 0&&I!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],I)}if(h(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(h(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const w=h(t,["labels"]);e!==void 0&&w!=null&&m(e,["labels"],w);const S=h(t,["beta"]);return e!==void 0&&S!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","beta"],S),r}function tL(t,e){const n={},r=h(t,["baseModel"]);r!=null&&m(n,["baseModel"],r);const s=h(t,["preTunedModel"]);s!=null&&m(n,["preTunedModel"],s);const o=h(t,["trainingDataset"]);o!=null&&hL(o);const u=h(t,["config"]);return u!=null&&ZM(u,n),n}function nL(t,e){const n={},r=h(t,["baseModel"]);r!=null&&m(n,["baseModel"],r);const s=h(t,["preTunedModel"]);s!=null&&m(n,["preTunedModel"],s);const o=h(t,["trainingDataset"]);o!=null&&fL(o,n,e);const u=h(t,["config"]);return u!=null&&eL(u,n,e),n}function rL(t,e){const n={},r=h(t,["name"]);return r!=null&&m(n,["_url","name"],r),n}function iL(t,e){const n={},r=h(t,["name"]);return r!=null&&m(n,["_url","name"],r),n}function sL(t,e,n){const r={},s=h(t,["pageSize"]);e!==void 0&&s!=null&&m(e,["_query","pageSize"],s);const o=h(t,["pageToken"]);e!==void 0&&o!=null&&m(e,["_query","pageToken"],o);const u=h(t,["filter"]);return e!==void 0&&u!=null&&m(e,["_query","filter"],u),r}function aL(t,e,n){const r={},s=h(t,["pageSize"]);e!==void 0&&s!=null&&m(e,["_query","pageSize"],s);const o=h(t,["pageToken"]);e!==void 0&&o!=null&&m(e,["_query","pageToken"],o);const u=h(t,["filter"]);return e!==void 0&&u!=null&&m(e,["_query","filter"],u),r}function oL(t,e){const n={},r=h(t,["config"]);return r!=null&&sL(r,n),n}function lL(t,e){const n={},r=h(t,["config"]);return r!=null&&aL(r,n),n}function uL(t,e){const n={},r=h(t,["sdkHttpResponse"]);r!=null&&m(n,["sdkHttpResponse"],r);const s=h(t,["nextPageToken"]);s!=null&&m(n,["nextPageToken"],s);const o=h(t,["tunedModels"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(d=>MC(d))),m(n,["tuningJobs"],u)}return n}function cL(t,e){const n={},r=h(t,["sdkHttpResponse"]);r!=null&&m(n,["sdkHttpResponse"],r);const s=h(t,["nextPageToken"]);s!=null&&m(n,["nextPageToken"],s);const o=h(t,["tuningJobs"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(d=>ig(d))),m(n,["tuningJobs"],u)}return n}function dL(t,e){const n={},r=h(t,["name"]);r!=null&&m(n,["model"],r);const s=h(t,["name"]);return s!=null&&m(n,["endpoint"],s),n}function hL(t,e){const n={};if(h(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(h(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const r=h(t,["examples"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>o)),m(n,["examples","examples"],s)}return n}function fL(t,e,n){const r={};let s=h(n,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const u=h(t,["gcsUri"]);e!==void 0&&u!=null&&m(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(s==="PREFERENCE_TUNING"){const u=h(t,["gcsUri"]);e!==void 0&&u!=null&&m(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}let o=h(n,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const u=h(t,["vertexDatasetResource"]);e!==void 0&&u!=null&&m(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(o==="PREFERENCE_TUNING"){const u=h(t,["vertexDatasetResource"]);e!==void 0&&u!=null&&m(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}if(h(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return r}function MC(t,e){const n={},r=h(t,["sdkHttpResponse"]);r!=null&&m(n,["sdkHttpResponse"],r);const s=h(t,["name"]);s!=null&&m(n,["name"],s);const o=h(t,["state"]);o!=null&&m(n,["state"],QT(o));const u=h(t,["createTime"]);u!=null&&m(n,["createTime"],u);const d=h(t,["tuningTask","startTime"]);d!=null&&m(n,["startTime"],d);const f=h(t,["tuningTask","completeTime"]);f!=null&&m(n,["endTime"],f);const p=h(t,["updateTime"]);p!=null&&m(n,["updateTime"],p);const v=h(t,["description"]);v!=null&&m(n,["description"],v);const w=h(t,["baseModel"]);w!=null&&m(n,["baseModel"],w);const S=h(t,["_self"]);return S!=null&&m(n,["tunedModel"],dL(S)),n}function ig(t,e){const n={},r=h(t,["sdkHttpResponse"]);r!=null&&m(n,["sdkHttpResponse"],r);const s=h(t,["name"]);s!=null&&m(n,["name"],s);const o=h(t,["state"]);o!=null&&m(n,["state"],QT(o));const u=h(t,["createTime"]);u!=null&&m(n,["createTime"],u);const d=h(t,["startTime"]);d!=null&&m(n,["startTime"],d);const f=h(t,["endTime"]);f!=null&&m(n,["endTime"],f);const p=h(t,["updateTime"]);p!=null&&m(n,["updateTime"],p);const v=h(t,["error"]);v!=null&&m(n,["error"],v);const w=h(t,["description"]);w!=null&&m(n,["description"],w);const S=h(t,["baseModel"]);S!=null&&m(n,["baseModel"],S);const I=h(t,["tunedModel"]);I!=null&&m(n,["tunedModel"],I);const P=h(t,["preTunedModel"]);P!=null&&m(n,["preTunedModel"],P);const j=h(t,["supervisedTuningSpec"]);j!=null&&m(n,["supervisedTuningSpec"],j);const D=h(t,["preferenceOptimizationSpec"]);D!=null&&m(n,["preferenceOptimizationSpec"],D);const q=h(t,["tuningDataStats"]);q!=null&&m(n,["tuningDataStats"],q);const X=h(t,["encryptionSpec"]);X!=null&&m(n,["encryptionSpec"],X);const B=h(t,["partnerModelTuningSpec"]);B!=null&&m(n,["partnerModelTuningSpec"],B);const re=h(t,["customBaseModel"]);re!=null&&m(n,["customBaseModel"],re);const ce=h(t,["experiment"]);ce!=null&&m(n,["experiment"],ce);const ue=h(t,["labels"]);ue!=null&&m(n,["labels"],ue);const A=h(t,["outputUri"]);A!=null&&m(n,["outputUri"],A);const N=h(t,["pipelineJob"]);N!=null&&m(n,["pipelineJob"],N);const O=h(t,["serviceAccount"]);O!=null&&m(n,["serviceAccount"],O);const U=h(t,["tunedModelDisplayName"]);U!=null&&m(n,["tunedModelDisplayName"],U);const M=h(t,["veoTuningSpec"]);return M!=null&&m(n,["veoTuningSpec"],M),n}function pL(t,e){const n={},r=h(t,["sdkHttpResponse"]);r!=null&&m(n,["sdkHttpResponse"],r);const s=h(t,["name"]);s!=null&&m(n,["name"],s);const o=h(t,["metadata"]);o!=null&&m(n,["metadata"],o);const u=h(t,["done"]);u!=null&&m(n,["done"],u);const d=h(t,["error"]);return d!=null&&m(n,["error"],d),n}function SS(t,e){const n={},r=h(t,["gcsUri"]);r!=null&&m(n,["validationDatasetUri"],r);const s=h(t,["vertexDatasetResource"]);return s!=null&&m(n,["validationDatasetUri"],s),n}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/class mL extends Ui{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Da(Pi.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var r;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const s={tunedModelName:n.baseModel};!((r=n.config)===null||r===void 0)&&r.preTunedModelCheckpointId&&(s.checkpointId=n.config.preTunedModelCheckpointId);const o=Object.assign(Object.assign({},n),{preTunedModel:s});return o.baseModel=void 0,await this.tuneInternal(o)}else{const s=Object.assign({},n);return await this.tuneInternal(s)}else{const s=Object.assign({},n),o=await this.tuneMldevInternal(s);let u="";return o.metadata!==void 0&&o.metadata.tunedModel!==void 0?u=o.metadata.tunedModel:o.name!==void 0&&o.name.includes("/operations/")&&(u=o.name.split("/operations/")[0]),{name:u,state:$m.JOB_STATE_QUEUED}}}}async getInternal(e){var n,r,s,o;let u,d="",f={};if(this.apiClient.isVertexAI()){const p=iL(e);return d=fe("{name}",p._url),f=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json().then(w=>{const S=w;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>ig(v))}else{const p=rL(e);return d=fe("{name}",p._url),f=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(w=>{const S=w;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>MC(v))}}async listInternal(e){var n,r,s,o;let u,d="",f={};if(this.apiClient.isVertexAI()){const p=lL(e);return d=fe("tuningJobs",p._url),f=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json().then(w=>{const S=w;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const w=cL(v),S=new BE;return Object.assign(S,w),S})}else{const p=oL(e);return d=fe("tunedModels",p._url),f=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(w=>{const S=w;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const w=uL(v),S=new BE;return Object.assign(S,w),S})}}async cancel(e){var n,r,s,o;let u,d="",f={};if(this.apiClient.isVertexAI()){const p=YM(e);return d=fe("{name}:cancel",p._url),f=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json().then(w=>{const S=w;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const w=QM(v),S=new $E;return Object.assign(S,w),S})}else{const p=JM(e);return d=fe("{name}:cancel",p._url),f=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(w=>{const S=w;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const w=XM(v),S=new $E;return Object.assign(S,w),S})}}async tuneInternal(e){var n,r;let s,o="",u={};if(this.apiClient.isVertexAI()){const d=nL(e,e);return o=fe("tuningJobs",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:o,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:f.headers},v})),s.then(f=>ig(f))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,r;let s,o="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=tL(e);return o=fe("tunedModels",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:o,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:f.headers},v})),s.then(f=>pL(f))}}}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/class gL{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const yL=1024*1024*8,vL=3,bL=1e3,wL=2,yh="x-goog-upload-status";async function EL(t,e,n){var r;const s=await LC(t,e,n),o=await(s==null?void 0:s.json());if(((r=s==null?void 0:s.headers)===null||r===void 0?void 0:r[yh])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return o.file}async function SL(t,e,n){var r;const s=await LC(t,e,n),o=await(s==null?void 0:s.json());if(((r=s==null?void 0:s.headers)===null||r===void 0?void 0:r[yh])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const u=$T(o),d=new Wg;return Object.assign(d,u),d}async function LC(t,e,n){var r,s;let o=0,u=0,d=new Wm(new Response),f="upload";for(o=t.size;u<o;){const p=Math.min(yL,o-u),v=t.slice(u,u+p);u+p>=o&&(f+=", finalize");let w=0,S=bL;for(;w<vL&&(d=await n.request({path:"",body:v,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":f,"X-Goog-Upload-Offset":String(u),"Content-Length":String(p)}}}),!(!((r=d==null?void 0:d.headers)===null||r===void 0)&&r[yh]));)w++,await TL(S),S=S*wL;if(u+=p,((s=d==null?void 0:d.headers)===null||s===void 0?void 0:s[yh])!=="active")break;if(o<=u)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return d}async function xL(t){return{size:t.size,type:t.type}}function TL(t){return new Promise(e=>setTimeout(e,t))}class CL{async upload(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await EL(e,n,r)}async uploadToFileSearchStore(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await SL(e,n,r)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await xL(e)}}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/class IL{create(e,n,r){return new kL(e,n,r)}}class kL{constructor(e,n,r){this.url=e,this.headers=n,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/const xS="x-goog-api-key";class _L{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(xS)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(xS,this.apiKey)}}}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/const NL="gl-node/";class AL{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const n=new Kt({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=n.interactions,this._interactions}constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const r=TO(e.httpOptions,e.vertexai,void 0,void 0);r&&(e.httpOptions?e.httpOptions.baseUrl=r:e.httpOptions={baseUrl:r}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const s=new _L(this.apiKey);this.apiClient=new x4({auth:s,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:NL+"web",uploader:new CL,downloader:new gL}),this.models=new H4(this.apiClient),this.live=new M4(this.apiClient,s,new IL),this.batches=new ZP(this.apiClient),this.chats=new DR(this.models,this.apiClient),this.caches=new OR(this.apiClient),this.files=new GR(this.apiClient),this.operations=new z4(this.apiClient),this.authTokens=new sM(this.apiClient),this.tunings=new mL(this.apiClient),this.fileSearchStores=new fM(this.apiClient)}}const OL=()=>{};var TS={};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const UC=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},PL=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const o=t[n++];e[r++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=t[n++],u=t[n++],d=t[n++],f=((s&7)<<18|(o&63)<<12|(u&63)<<6|d&63)-65536;e[r++]=String.fromCharCode(55296+(f>>10)),e[r++]=String.fromCharCode(56320+(f&1023))}else{const o=t[n++],u=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(o&63)<<6|u&63)}}return e.join("")},VC={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const o=t[s],u=s+1<t.length,d=u?t[s+1]:0,f=s+2<t.length,p=f?t[s+2]:0,v=o>>2,w=(o&3)<<4|d>>4;let S=(d&15)<<2|p>>6,I=p&63;f||(I=64,u||(S=64)),r.push(n[v],n[w],n[S],n[I])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(UC(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):PL(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const o=n[t.charAt(s++)],u=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const f=s<t.length?n[t.charAt(s)]:64;if(++s,o==null||u==null||d==null||f==null)throw new RL;const p=o<<2|u>>4;if(r.push(p),d!==64){const v=u<<4&240|d>>2;if(r.push(v),f!==64){const w=d<<6&192|f;r.push(w)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class RL extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const DL=function(t){const e=UC(t);return VC.encodeByteArray(e,!0)},vh=function(t){return DL(t).replace(/\./g,"")},FC=function(t){try{return VC.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function jL(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const ML=()=>jL().__FIREBASE_DEFAULTS__,LL=()=>{if(typeof process>"u"||typeof TS>"u")return;const t=TS.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},UL=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&FC(t[1]);return e&&JSON.parse(e)},Kh=()=>{try{return OL()||ML()||LL()||UL()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},qC=t=>{var e,n;return(n=(e=Kh())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},VL=t=>{const e=qC(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},HC=()=>{var t;return(t=Kh())==null?void 0:t.config},zC=t=>{var e;return(e=Kh())==null?void 0:e[`_${t}`]};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class FL{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
* @license
* Copyright 2025 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function sl(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function GC(t){return(await fetch(t,{credentials:"include"})).ok}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function qL(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...t};return[vh(JSON.stringify(n)),vh(JSON.stringify(u)),""].join(".")}const Au={};function HL(){const t={prod:[],emulator:[]};for(const e of Object.keys(Au))Au[e]?t.emulator.push(e):t.prod.push(e);return t}function zL(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let CS=!1;function BC(t,e){if(typeof window>"u"||typeof document>"u"||!sl(window.location.host)||Au[t]===e||Au[t]||CS)return;Au[t]=e;function n(w){return`__firebase__banner__${w}`}const r="__firebase__banner",s=HL().prod.length>0;function o(){const w=document.getElementById(r);w&&w.remove()}function u(w){w.style.display="flex",w.style.background="#7faaf0",w.style.position="fixed",w.style.bottom="5px",w.style.left="5px",w.style.padding=".5em",w.style.borderRadius="5px",w.style.alignItems="center"}function d(w,S){w.setAttribute("width","24"),w.setAttribute("id",S),w.setAttribute("height","24"),w.setAttribute("viewBox","0 0 24 24"),w.setAttribute("fill","none"),w.style.marginLeft="-6px"}function f(){const w=document.createElement("span");return w.style.cursor="pointer",w.style.marginLeft="16px",w.style.fontSize="24px",w.innerHTML=" &times;",w.onclick=()=>{CS=!0,o()},w}function p(w,S){w.setAttribute("id",S),w.innerText="Learn more",w.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",w.setAttribute("target","__blank"),w.style.paddingLeft="5px",w.style.textDecoration="underline"}function v(){const w=zL(r),S=n("text"),I=document.getElementById(S)||document.createElement("span"),P=n("learnmore"),j=document.getElementById(P)||document.createElement("a"),D=n("preprendIcon"),q=document.getElementById(D)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(w.created){const X=w.element;u(X),p(j,P);const B=f();d(q,D),X.append(q,I,j,B),document.body.appendChild(X)}s?(I.innerText="Preview backend disconnected.",q.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(q.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,I.innerText="Preview backend running in this workspace."),I.setAttribute("id",S)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function dn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function GL(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(dn())}function BL(){var t;const e=(t=Kh())==null?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function $L(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function $C(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function WL(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function KL(){const t=dn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function JL(){return!BL()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function WC(){try{return typeof indexedDB=="object"}catch{return!1}}function KC(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var o;e(((o=s.error)==null?void 0:o.message)||"")}}catch(n){e(n)}})}function YL(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const XL="FirebaseError";class kr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=XL,Object.setPrototypeOf(this,kr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ja.prototype.create)}}class ja{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,o=this.errors[e],u=o?QL(o,r):"Error",d=`${this.serviceName}: ${u} (${s}).`;return new kr(s,d,r)}}function QL(t,e){return t.replace(ZL,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const ZL=/\{\$([^}]+)}/g;function eU(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function As(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const o=t[s],u=e[s];if(IS(o)&&IS(u)){if(!As(o,u))return!1}else if(o!==u)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function IS(t){return t!==null&&typeof t=="object"}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Zu(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function xu(t){const e={};return t.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[r,s]=n.split("=");e[decodeURIComponent(r)]=decodeURIComponent(s)}}),e}function Tu(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function tU(t,e){const n=new nU(t,e);return n.subscribe.bind(n)}class nU{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");rU(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Tm),s.error===void 0&&(s.error=Tm),s.complete===void 0&&(s.complete=Tm);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function rU(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Tm(){}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const iU=1e3,sU=2,aU=14400*1e3,oU=.5;function kS(t,e=iU,n=sU){const r=e*Math.pow(n,t),s=Math.round(oU*r*(Math.random()-.5)*2);return Math.min(aU,r+s)}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Ut(t){return t&&t._delegate?t._delegate:t}class xr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Sa="[DEFAULT]";/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class lU{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new FL;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(cU(e))try{this.getOrInitializeService({instanceIdentifier:Sa})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:s});r.resolve(o)}catch{}}}}clearInstance(e=Sa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Sa){return this.instances.has(e)}getOptions(e=Sa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,u]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(o);r===d&&u.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const o=this.instances.get(r);return o&&e(o,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:uU(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Sa){return this.component?this.component.multipleInstances?e:Sa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function uU(t){return t===Sa?void 0:t}function cU(t){return t.instantiationMode==="EAGER"}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class dU{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new lU(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var He;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(He||(He={}));const hU={debug:He.DEBUG,verbose:He.VERBOSE,info:He.INFO,warn:He.WARN,error:He.ERROR,silent:He.SILENT},fU=He.INFO,pU={[He.DEBUG]:"log",[He.VERBOSE]:"log",[He.INFO]:"info",[He.WARN]:"warn",[He.ERROR]:"error"},mU=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=pU[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Jh{constructor(e){this.name=e,this._logLevel=fU,this._logHandler=mU,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in He))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?hU[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,He.DEBUG,...e),this._logHandler(this,He.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,He.VERBOSE,...e),this._logHandler(this,He.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,He.INFO,...e),this._logHandler(this,He.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,He.WARN,...e),this._logHandler(this,He.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,He.ERROR,...e),this._logHandler(this,He.ERROR,...e)}}const gU=(t,e)=>e.some(n=>t instanceof n);let _S,NS;function yU(){return _S||(_S=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function vU(){return NS||(NS=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const JC=new WeakMap,sg=new WeakMap,YC=new WeakMap,Cm=new WeakMap,ty=new WeakMap;function bU(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",o),t.removeEventListener("error",u)},o=()=>{n(Cs(t.result)),s()},u=()=>{r(t.error),s()};t.addEventListener("success",o),t.addEventListener("error",u)});return e.then(n=>{n instanceof IDBCursor&&JC.set(n,t)}).catch(()=>{}),ty.set(e,t),e}function wU(t){if(sg.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",u),t.removeEventListener("abort",u)},o=()=>{n(),s()},u=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",o),t.addEventListener("error",u),t.addEventListener("abort",u)});sg.set(t,e)}let ag={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return sg.get(t);if(e==="objectStoreNames")return t.objectStoreNames||YC.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Cs(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function EU(t){ag=t(ag)}function SU(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Im(this),e,...n);return YC.set(r,e.sort?e.sort():[e]),Cs(r)}:vU().includes(t)?function(...e){return t.apply(Im(this),e),Cs(JC.get(this))}:function(...e){return Cs(t.apply(Im(this),e))}}function xU(t){return typeof t=="function"?SU(t):(t instanceof IDBTransaction&&wU(t),gU(t,yU())?new Proxy(t,ag):t)}function Cs(t){if(t instanceof IDBRequest)return bU(t);if(Cm.has(t))return Cm.get(t);const e=xU(t);return e!==t&&(Cm.set(t,e),ty.set(e,t)),e}const Im=t=>ty.get(t);function XC(t,e,{blocked:n,upgrade:r,blocking:s,terminated:o}={}){const u=indexedDB.open(t,e),d=Cs(u);return r&&u.addEventListener("upgradeneeded",f=>{r(Cs(u.result),f.oldVersion,f.newVersion,Cs(u.transaction),f)}),n&&u.addEventListener("blocked",f=>n(f.oldVersion,f.newVersion,f)),d.then(f=>{o&&f.addEventListener("close",()=>o()),s&&f.addEventListener("versionchange",p=>s(p.oldVersion,p.newVersion,p))}).catch(()=>{}),d}const TU=["get","getKey","getAll","getAllKeys","count"],CU=["put","add","delete","clear"],km=new Map;function AS(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(km.get(e))return km.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=CU.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||TU.includes(n)))return;const o=async function(u,...d){const f=this.transaction(u,s?"readwrite":"readonly");let p=f.store;return r&&(p=p.index(d.shift())),(await Promise.all([p[n](...d),s&&f.done]))[0]};return km.set(e,o),o}EU(t=>({...t,get:(e,n,r)=>AS(e,n)||t.get(e,n,r),has:(e,n)=>!!AS(e,n)||t.has(e,n)}));/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class IU{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(kU(e)){const n=e.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(e=>e).join(" ")}}function kU(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const og="@firebase/app",OS="0.14.6";/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Ri=new Jh("@firebase/app"),_U="@firebase/app-compat",NU="@firebase/analytics-compat",AU="@firebase/analytics",OU="@firebase/app-check-compat",PU="@firebase/app-check",RU="@firebase/auth",DU="@firebase/auth-compat",jU="@firebase/database",MU="@firebase/data-connect",LU="@firebase/database-compat",UU="@firebase/functions",VU="@firebase/functions-compat",FU="@firebase/installations",qU="@firebase/installations-compat",HU="@firebase/messaging",zU="@firebase/messaging-compat",GU="@firebase/performance",BU="@firebase/performance-compat",$U="@firebase/remote-config",WU="@firebase/remote-config-compat",KU="@firebase/storage",JU="@firebase/storage-compat",YU="@firebase/firestore",XU="@firebase/ai",QU="@firebase/firestore-compat",ZU="firebase",e3="12.6.0";/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const lg="[DEFAULT]",t3={[og]:"fire-core",[_U]:"fire-core-compat",[AU]:"fire-analytics",[NU]:"fire-analytics-compat",[PU]:"fire-app-check",[OU]:"fire-app-check-compat",[RU]:"fire-auth",[DU]:"fire-auth-compat",[jU]:"fire-rtdb",[MU]:"fire-data-connect",[LU]:"fire-rtdb-compat",[UU]:"fire-fn",[VU]:"fire-fn-compat",[FU]:"fire-iid",[qU]:"fire-iid-compat",[HU]:"fire-fcm",[zU]:"fire-fcm-compat",[GU]:"fire-perf",[BU]:"fire-perf-compat",[$U]:"fire-rc",[WU]:"fire-rc-compat",[KU]:"fire-gcs",[JU]:"fire-gcs-compat",[YU]:"fire-fst",[QU]:"fire-fst-compat",[XU]:"fire-vertex","fire-js":"fire-js",[ZU]:"fire-js-all"};/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const bh=new Map,n3=new Map,ug=new Map;function PS(t,e){try{t.container.addComponent(e)}catch(n){Ri.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ri(t){const e=t.name;if(ug.has(e))return Ri.debug(`There were multiple attempts to register component ${e}.`),!1;ug.set(e,t);for(const n of bh.values())PS(n,t);for(const n of n3.values())PS(n,t);return!0}function Ma(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Zn(t){return t==null?!1:t.settings!==void 0}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const r3={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Is=new ja("app","Firebase",r3);/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class i3{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new xr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Is.create("app-deleted",{appName:this._name})}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const al=e3;function QC(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:lg,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw Is.create("bad-app-name",{appName:String(s)});if(n||(n=HC()),!n)throw Is.create("no-options");const o=bh.get(s);if(o){if(As(n,o.options)&&As(r,o.config))return o;throw Is.create("duplicate-app",{appName:s})}const u=new dU(s);for(const f of ug.values())u.addComponent(f);const d=new i3(n,r,u);return bh.set(s,d),d}function ny(t=lg){const e=bh.get(t);if(!e&&t===lg&&HC())return QC();if(!e)throw Is.create("no-app",{appName:t});return e}function nr(t,e,n){let r=t3[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const u=[`Unable to register library "${r}" with version "${e}":`];s&&u.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&u.push("and"),o&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ri.warn(u.join(" "));return}ri(new xr(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const s3="firebase-heartbeat-database",a3=1,Fu="firebase-heartbeat-store";let _m=null;function ZC(){return _m||(_m=XC(s3,a3,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Fu)}catch(n){console.warn(n)}}}}).catch(t=>{throw Is.create("idb-open",{originalErrorMessage:t.message})})),_m}async function o3(t){try{const e=(await ZC()).transaction(Fu),n=await e.objectStore(Fu).get(e1(t));return await e.done,n}catch(e){if(e instanceof kr)Ri.warn(e.message);else{const n=Is.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ri.warn(n.message)}}}async function RS(t,e){try{const n=(await ZC()).transaction(Fu,"readwrite");await n.objectStore(Fu).put(e,e1(t)),await n.done}catch(n){if(n instanceof kr)Ri.warn(n.message);else{const r=Is.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ri.warn(r.message)}}}function e1(t){return`${t.name}!${t.options.appId}`}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const l3=1024,u3=30;class c3{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new h3(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=DS();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats.length>u3){const o=f3(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Ri.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=DS(),{heartbeatsToSend:r,unsentEntries:s}=d3(this._heartbeatsCache.heartbeats),o=vh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return Ri.warn(n),""}}}function DS(){return new Date().toISOString().substring(0,10)}function d3(t,e=l3){const n=[];let r=t.slice();for(const s of t){const o=n.find(u=>u.agent===s.agent);if(o){if(o.dates.push(s.date),jS(n)>e){o.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),jS(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class h3{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return WC()?KC().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await o3(this.app);return e!=null&&e.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return RS(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return RS(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}else return}}function jS(t){return vh(JSON.stringify({version:2,heartbeats:t})).length}function f3(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function p3(t){ri(new xr("platform-logger",e=>new IU(e),"PRIVATE")),ri(new xr("heartbeat",e=>new c3(e),"PRIVATE")),nr(og,OS,t),nr(og,OS,"esm2020"),nr("fire-js","")}p3("");var MS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ks,t1;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(A,N){function O(){}O.prototype=N.prototype,A.F=N.prototype,A.prototype=new O,A.prototype.constructor=A,A.D=function(U,M,H){for(var R=Array(arguments.length-2),ae=2;ae<arguments.length;ae++)R[ae-2]=arguments[ae];return N.prototype[M].apply(U,R)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(A,N,O){O||(O=0);const U=Array(16);if(typeof N=="string")for(var M=0;M<16;++M)U[M]=N.charCodeAt(O++)|N.charCodeAt(O++)<<8|N.charCodeAt(O++)<<16|N.charCodeAt(O++)<<24;else for(M=0;M<16;++M)U[M]=N[O++]|N[O++]<<8|N[O++]<<16|N[O++]<<24;N=A.g[0],O=A.g[1],M=A.g[2];let H=A.g[3],R;R=N+(H^O&(M^H))+U[0]+3614090360&4294967295,N=O+(R<<7&4294967295|R>>>25),R=H+(M^N&(O^M))+U[1]+3905402710&4294967295,H=N+(R<<12&4294967295|R>>>20),R=M+(O^H&(N^O))+U[2]+606105819&4294967295,M=H+(R<<17&4294967295|R>>>15),R=O+(N^M&(H^N))+U[3]+3250441966&4294967295,O=M+(R<<22&4294967295|R>>>10),R=N+(H^O&(M^H))+U[4]+4118548399&4294967295,N=O+(R<<7&4294967295|R>>>25),R=H+(M^N&(O^M))+U[5]+1200080426&4294967295,H=N+(R<<12&4294967295|R>>>20),R=M+(O^H&(N^O))+U[6]+2821735955&4294967295,M=H+(R<<17&4294967295|R>>>15),R=O+(N^M&(H^N))+U[7]+4249261313&4294967295,O=M+(R<<22&4294967295|R>>>10),R=N+(H^O&(M^H))+U[8]+1770035416&4294967295,N=O+(R<<7&4294967295|R>>>25),R=H+(M^N&(O^M))+U[9]+2336552879&4294967295,H=N+(R<<12&4294967295|R>>>20),R=M+(O^H&(N^O))+U[10]+4294925233&4294967295,M=H+(R<<17&4294967295|R>>>15),R=O+(N^M&(H^N))+U[11]+2304563134&4294967295,O=M+(R<<22&4294967295|R>>>10),R=N+(H^O&(M^H))+U[12]+1804603682&4294967295,N=O+(R<<7&4294967295|R>>>25),R=H+(M^N&(O^M))+U[13]+4254626195&4294967295,H=N+(R<<12&4294967295|R>>>20),R=M+(O^H&(N^O))+U[14]+2792965006&4294967295,M=H+(R<<17&4294967295|R>>>15),R=O+(N^M&(H^N))+U[15]+1236535329&4294967295,O=M+(R<<22&4294967295|R>>>10),R=N+(M^H&(O^M))+U[1]+4129170786&4294967295,N=O+(R<<5&4294967295|R>>>27),R=H+(O^M&(N^O))+U[6]+3225465664&4294967295,H=N+(R<<9&4294967295|R>>>23),R=M+(N^O&(H^N))+U[11]+643717713&4294967295,M=H+(R<<14&4294967295|R>>>18),R=O+(H^N&(M^H))+U[0]+3921069994&4294967295,O=M+(R<<20&4294967295|R>>>12),R=N+(M^H&(O^M))+U[5]+3593408605&4294967295,N=O+(R<<5&4294967295|R>>>27),R=H+(O^M&(N^O))+U[10]+38016083&4294967295,H=N+(R<<9&4294967295|R>>>23),R=M+(N^O&(H^N))+U[15]+3634488961&4294967295,M=H+(R<<14&4294967295|R>>>18),R=O+(H^N&(M^H))+U[4]+3889429448&4294967295,O=M+(R<<20&4294967295|R>>>12),R=N+(M^H&(O^M))+U[9]+568446438&4294967295,N=O+(R<<5&4294967295|R>>>27),R=H+(O^M&(N^O))+U[14]+3275163606&4294967295,H=N+(R<<9&4294967295|R>>>23),R=M+(N^O&(H^N))+U[3]+4107603335&4294967295,M=H+(R<<14&4294967295|R>>>18),R=O+(H^N&(M^H))+U[8]+1163531501&4294967295,O=M+(R<<20&4294967295|R>>>12),R=N+(M^H&(O^M))+U[13]+2850285829&4294967295,N=O+(R<<5&4294967295|R>>>27),R=H+(O^M&(N^O))+U[2]+4243563512&4294967295,H=N+(R<<9&4294967295|R>>>23),R=M+(N^O&(H^N))+U[7]+1735328473&4294967295,M=H+(R<<14&4294967295|R>>>18),R=O+(H^N&(M^H))+U[12]+2368359562&4294967295,O=M+(R<<20&4294967295|R>>>12),R=N+(O^M^H)+U[5]+4294588738&4294967295,N=O+(R<<4&4294967295|R>>>28),R=H+(N^O^M)+U[8]+2272392833&4294967295,H=N+(R<<11&4294967295|R>>>21),R=M+(H^N^O)+U[11]+1839030562&4294967295,M=H+(R<<16&4294967295|R>>>16),R=O+(M^H^N)+U[14]+4259657740&4294967295,O=M+(R<<23&4294967295|R>>>9),R=N+(O^M^H)+U[1]+2763975236&4294967295,N=O+(R<<4&4294967295|R>>>28),R=H+(N^O^M)+U[4]+1272893353&4294967295,H=N+(R<<11&4294967295|R>>>21),R=M+(H^N^O)+U[7]+4139469664&4294967295,M=H+(R<<16&4294967295|R>>>16),R=O+(M^H^N)+U[10]+3200236656&4294967295,O=M+(R<<23&4294967295|R>>>9),R=N+(O^M^H)+U[13]+681279174&4294967295,N=O+(R<<4&4294967295|R>>>28),R=H+(N^O^M)+U[0]+3936430074&4294967295,H=N+(R<<11&4294967295|R>>>21),R=M+(H^N^O)+U[3]+3572445317&4294967295,M=H+(R<<16&4294967295|R>>>16),R=O+(M^H^N)+U[6]+76029189&4294967295,O=M+(R<<23&4294967295|R>>>9),R=N+(O^M^H)+U[9]+3654602809&4294967295,N=O+(R<<4&4294967295|R>>>28),R=H+(N^O^M)+U[12]+3873151461&4294967295,H=N+(R<<11&4294967295|R>>>21),R=M+(H^N^O)+U[15]+530742520&4294967295,M=H+(R<<16&4294967295|R>>>16),R=O+(M^H^N)+U[2]+3299628645&4294967295,O=M+(R<<23&4294967295|R>>>9),R=N+(M^(O|~H))+U[0]+4096336452&4294967295,N=O+(R<<6&4294967295|R>>>26),R=H+(O^(N|~M))+U[7]+1126891415&4294967295,H=N+(R<<10&4294967295|R>>>22),R=M+(N^(H|~O))+U[14]+2878612391&4294967295,M=H+(R<<15&4294967295|R>>>17),R=O+(H^(M|~N))+U[5]+4237533241&4294967295,O=M+(R<<21&4294967295|R>>>11),R=N+(M^(O|~H))+U[12]+1700485571&4294967295,N=O+(R<<6&4294967295|R>>>26),R=H+(O^(N|~M))+U[3]+2399980690&4294967295,H=N+(R<<10&4294967295|R>>>22),R=M+(N^(H|~O))+U[10]+4293915773&4294967295,M=H+(R<<15&4294967295|R>>>17),R=O+(H^(M|~N))+U[1]+2240044497&4294967295,O=M+(R<<21&4294967295|R>>>11),R=N+(M^(O|~H))+U[8]+1873313359&4294967295,N=O+(R<<6&4294967295|R>>>26),R=H+(O^(N|~M))+U[15]+4264355552&4294967295,H=N+(R<<10&4294967295|R>>>22),R=M+(N^(H|~O))+U[6]+2734768916&4294967295,M=H+(R<<15&4294967295|R>>>17),R=O+(H^(M|~N))+U[13]+1309151649&4294967295,O=M+(R<<21&4294967295|R>>>11),R=N+(M^(O|~H))+U[4]+4149444226&4294967295,N=O+(R<<6&4294967295|R>>>26),R=H+(O^(N|~M))+U[11]+3174756917&4294967295,H=N+(R<<10&4294967295|R>>>22),R=M+(N^(H|~O))+U[2]+718787259&4294967295,M=H+(R<<15&4294967295|R>>>17),R=O+(H^(M|~N))+U[9]+3951481745&4294967295,A.g[0]=A.g[0]+N&4294967295,A.g[1]=A.g[1]+(M+(R<<21&4294967295|R>>>11))&4294967295,A.g[2]=A.g[2]+M&4294967295,A.g[3]=A.g[3]+H&4294967295}r.prototype.v=function(A,N){N===void 0&&(N=A.length);const O=N-this.blockSize,U=this.C;let M=this.h,H=0;for(;H<N;){if(M==0)for(;H<=O;)s(this,A,H),H+=this.blockSize;if(typeof A=="string"){for(;H<N;)if(U[M++]=A.charCodeAt(H++),M==this.blockSize){s(this,U),M=0;break}}else for(;H<N;)if(U[M++]=A[H++],M==this.blockSize){s(this,U),M=0;break}}this.h=M,this.o+=N},r.prototype.A=function(){var A=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);A[0]=128;for(var N=1;N<A.length-8;++N)A[N]=0;N=this.o*8;for(var O=A.length-8;O<A.length;++O)A[O]=N&255,N/=256;for(this.v(A),A=Array(16),N=0,O=0;O<4;++O)for(let U=0;U<32;U+=8)A[N++]=this.g[O]>>>U&255;return A};function o(A,N){var O=d;return Object.prototype.hasOwnProperty.call(O,A)?O[A]:O[A]=N(A)}function u(A,N){this.h=N;const O=[];let U=!0;for(let M=A.length-1;M>=0;M--){const H=A[M]|0;U&&H==N||(O[M]=H,U=!1)}this.g=O}var d={};function f(A){return-128<=A&&A<128?o(A,function(N){return new u([N|0],N<0?-1:0)}):new u([A|0],A<0?-1:0)}function p(A){if(isNaN(A)||!isFinite(A))return w;if(A<0)return D(p(-A));const N=[];let O=1;for(let U=0;A>=O;U++)N[U]=A/O|0,O*=4294967296;return new u(N,0)}function v(A,N){if(A.length==0)throw Error("number format error: empty string");if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(A.charAt(0)=="-")return D(v(A.substring(1),N));if(A.indexOf("-")>=0)throw Error('number format error: interior "-" character');const O=p(Math.pow(N,8));let U=w;for(let H=0;H<A.length;H+=8){var M=Math.min(8,A.length-H);const R=parseInt(A.substring(H,H+M),N);M<8?(M=p(Math.pow(N,M)),U=U.j(M).add(p(R))):(U=U.j(O),U=U.add(p(R)))}return U}var w=f(0),S=f(1),I=f(16777216);t=u.prototype,t.m=function(){if(j(this))return-D(this).m();let A=0,N=1;for(let O=0;O<this.g.length;O++){const U=this.i(O);A+=(U>=0?U:4294967296+U)*N,N*=4294967296}return A},t.toString=function(A){if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(P(this))return"0";if(j(this))return"-"+D(this).toString(A);const N=p(Math.pow(A,6));var O=this;let U="";for(;;){const M=re(O,N).g;O=q(O,M.j(N));let H=((O.g.length>0?O.g[0]:O.h)>>>0).toString(A);if(O=M,P(O))return H+U;for(;H.length<6;)H="0"+H;U=H+U}},t.i=function(A){return A<0?0:A<this.g.length?this.g[A]:this.h};function P(A){if(A.h!=0)return!1;for(let N=0;N<A.g.length;N++)if(A.g[N]!=0)return!1;return!0}function j(A){return A.h==-1}t.l=function(A){return A=q(this,A),j(A)?-1:P(A)?0:1};function D(A){const N=A.g.length,O=[];for(let U=0;U<N;U++)O[U]=~A.g[U];return new u(O,~A.h).add(S)}t.abs=function(){return j(this)?D(this):this},t.add=function(A){const N=Math.max(this.g.length,A.g.length),O=[];let U=0;for(let M=0;M<=N;M++){let H=U+(this.i(M)&65535)+(A.i(M)&65535),R=(H>>>16)+(this.i(M)>>>16)+(A.i(M)>>>16);U=R>>>16,H&=65535,R&=65535,O[M]=R<<16|H}return new u(O,O[O.length-1]&-2147483648?-1:0)};function q(A,N){return A.add(D(N))}t.j=function(A){if(P(this)||P(A))return w;if(j(this))return j(A)?D(this).j(D(A)):D(D(this).j(A));if(j(A))return D(this.j(D(A)));if(this.l(I)<0&&A.l(I)<0)return p(this.m()*A.m());const N=this.g.length+A.g.length,O=[];for(var U=0;U<2*N;U++)O[U]=0;for(U=0;U<this.g.length;U++)for(let M=0;M<A.g.length;M++){const H=this.i(U)>>>16,R=this.i(U)&65535,ae=A.i(M)>>>16,Oe=A.i(M)&65535;O[2*U+2*M]+=R*Oe,X(O,2*U+2*M),O[2*U+2*M+1]+=H*Oe,X(O,2*U+2*M+1),O[2*U+2*M+1]+=R*ae,X(O,2*U+2*M+1),O[2*U+2*M+2]+=H*ae,X(O,2*U+2*M+2)}for(A=0;A<N;A++)O[A]=O[2*A+1]<<16|O[2*A];for(A=N;A<2*N;A++)O[A]=0;return new u(O,0)};function X(A,N){for(;(A[N]&65535)!=A[N];)A[N+1]+=A[N]>>>16,A[N]&=65535,N++}function B(A,N){this.g=A,this.h=N}function re(A,N){if(P(N))throw Error("division by zero");if(P(A))return new B(w,w);if(j(A))return N=re(D(A),N),new B(D(N.g),D(N.h));if(j(N))return N=re(A,D(N)),new B(D(N.g),N.h);if(A.g.length>30){if(j(A)||j(N))throw Error("slowDivide_ only works with positive integers.");for(var O=S,U=N;U.l(A)<=0;)O=ce(O),U=ce(U);var M=ue(O,1),H=ue(U,1);for(U=ue(U,2),O=ue(O,2);!P(U);){var R=H.add(U);R.l(A)<=0&&(M=M.add(O),H=R),U=ue(U,1),O=ue(O,1)}return N=q(A,M.j(N)),new B(M,N)}for(M=w;A.l(N)>=0;){for(O=Math.max(1,Math.floor(A.m()/N.m())),U=Math.ceil(Math.log(O)/Math.LN2),U=U<=48?1:Math.pow(2,U-48),H=p(O),R=H.j(N);j(R)||R.l(A)>0;)O-=U,H=p(O),R=H.j(N);P(H)&&(H=S),M=M.add(H),A=q(A,R)}return new B(M,A)}t.B=function(A){return re(this,A).h},t.and=function(A){const N=Math.max(this.g.length,A.g.length),O=[];for(let U=0;U<N;U++)O[U]=this.i(U)&A.i(U);return new u(O,this.h&A.h)},t.or=function(A){const N=Math.max(this.g.length,A.g.length),O=[];for(let U=0;U<N;U++)O[U]=this.i(U)|A.i(U);return new u(O,this.h|A.h)},t.xor=function(A){const N=Math.max(this.g.length,A.g.length),O=[];for(let U=0;U<N;U++)O[U]=this.i(U)^A.i(U);return new u(O,this.h^A.h)};function ce(A){const N=A.g.length+1,O=[];for(let U=0;U<N;U++)O[U]=A.i(U)<<1|A.i(U-1)>>>31;return new u(O,A.h)}function ue(A,N){const O=N>>5;N%=32;const U=A.g.length-O,M=[];for(let H=0;H<U;H++)M[H]=N>0?A.i(H+O)>>>N|A.i(H+O+1)<<32-N:A.i(H+O);return new u(M,A.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,t1=r,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.B,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=p,u.fromString=v,ks=u}).apply(typeof MS<"u"?MS:typeof self<"u"?self:typeof window<"u"?window:{});var Gd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var n1,Cu,r1,nh,cg,i1,s1,a1;(function(){var t,e=Object.defineProperty;function n(g){g=[typeof globalThis=="object"&&globalThis,g,typeof window=="object"&&window,typeof self=="object"&&self,typeof Gd=="object"&&Gd];for(var x=0;x<g.length;++x){var C=g[x];if(C&&C.Math==Math)return C}throw Error("Cannot find global object")}var r=n(this);function s(g,x){if(x)e:{var C=r;g=g.split(".");for(var _=0;_<g.length-1;_++){var $=g[_];if(!($ in C))break e;C=C[$]}g=g[g.length-1],_=C[g],x=x(_),x!=_&&x!=null&&e(C,g,{configurable:!0,writable:!0,value:x})}}s("Symbol.dispose",function(g){return g||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(g){return g||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(g){return g||function(x){var C=[],_;for(_ in x)Object.prototype.hasOwnProperty.call(x,_)&&C.push([_,x[_]]);return C}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},u=this||self;function d(g){var x=typeof g;return x=="object"&&g!=null||x=="function"}function f(g,x,C){return g.call.apply(g.bind,arguments)}function p(g,x,C){return p=f,p.apply(null,arguments)}function v(g,x){var C=Array.prototype.slice.call(arguments,1);return function(){var _=C.slice();return _.push.apply(_,arguments),g.apply(this,_)}}function w(g,x){function C(){}C.prototype=x.prototype,g.Z=x.prototype,g.prototype=new C,g.prototype.constructor=g,g.Ob=function(_,$,Q){for(var de=Array(arguments.length-2),je=2;je<arguments.length;je++)de[je-2]=arguments[je];return x.prototype[$].apply(_,de)}}var S=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?g=>g&&AsyncContext.Snapshot.wrap(g):g=>g;function I(g){const x=g.length;if(x>0){const C=Array(x);for(let _=0;_<x;_++)C[_]=g[_];return C}return[]}function P(g,x){for(let _=1;_<arguments.length;_++){const $=arguments[_];var C=typeof $;if(C=C!="object"?C:$?Array.isArray($)?"array":C:"null",C=="array"||C=="object"&&typeof $.length=="number"){C=g.length||0;const Q=$.length||0;g.length=C+Q;for(let de=0;de<Q;de++)g[C+de]=$[de]}else g.push($)}}class j{constructor(x,C){this.i=x,this.j=C,this.h=0,this.g=null}get(){let x;return this.h>0?(this.h--,x=this.g,this.g=x.next,x.next=null):x=this.i(),x}}function D(g){u.setTimeout(()=>{throw g},0)}function q(){var g=A;let x=null;return g.g&&(x=g.g,g.g=g.g.next,g.g||(g.h=null),x.next=null),x}class X{constructor(){this.h=this.g=null}add(x,C){const _=B.get();_.set(x,C),this.h?this.h.next=_:this.g=_,this.h=_}}var B=new j(()=>new re,g=>g.reset());class re{constructor(){this.next=this.g=this.h=null}set(x,C){this.h=x,this.g=C,this.next=null}reset(){this.next=this.g=this.h=null}}let ce,ue=!1,A=new X,N=()=>{const g=Promise.resolve(void 0);ce=()=>{g.then(O)}};function O(){for(var g;g=q();){try{g.h.call(g.g)}catch(C){D(C)}var x=B;x.j(g),x.h<100&&(x.h++,g.next=x.g,x.g=g)}ue=!1}function U(){this.u=this.u,this.C=this.C}U.prototype.u=!1,U.prototype.dispose=function(){this.u||(this.u=!0,this.N())},U.prototype[Symbol.dispose]=function(){this.dispose()},U.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function M(g,x){this.type=g,this.g=this.target=x,this.defaultPrevented=!1}M.prototype.h=function(){this.defaultPrevented=!0};var H=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var g=!1,x=Object.defineProperty({},"passive",{get:function(){g=!0}});try{const C=()=>{};u.addEventListener("test",C,x),u.removeEventListener("test",C,x)}catch{}return g})();function R(g){return/^[\s\xa0]*$/.test(g)}function ae(g,x){M.call(this,g?g.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,g&&this.init(g,x)}w(ae,M),ae.prototype.init=function(g,x){const C=this.type=g.type,_=g.changedTouches&&g.changedTouches.length?g.changedTouches[0]:null;this.target=g.target||g.srcElement,this.g=x,x=g.relatedTarget,x||(C=="mouseover"?x=g.fromElement:C=="mouseout"&&(x=g.toElement)),this.relatedTarget=x,_?(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0):(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0),this.button=g.button,this.key=g.key||"",this.ctrlKey=g.ctrlKey,this.altKey=g.altKey,this.shiftKey=g.shiftKey,this.metaKey=g.metaKey,this.pointerId=g.pointerId||0,this.pointerType=g.pointerType,this.state=g.state,this.i=g,g.defaultPrevented&&ae.Z.h.call(this)},ae.prototype.h=function(){ae.Z.h.call(this);const g=this.i;g.preventDefault?g.preventDefault():g.returnValue=!1};var Oe="closure_listenable_"+(Math.random()*1e6|0),J=0;function le(g,x,C,_,$){this.listener=g,this.proxy=null,this.src=x,this.type=C,this.capture=!!_,this.ha=$,this.key=++J,this.da=this.fa=!1}function be(g){g.da=!0,g.listener=null,g.proxy=null,g.src=null,g.ha=null}function Re(g,x,C){for(const _ in g)x.call(C,g[_],_,g)}function Le(g,x){for(const C in g)x.call(void 0,g[C],C,g)}function F(g){const x={};for(const C in g)x[C]=g[C];return x}const ie="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function he(g,x){let C,_;for(let $=1;$<arguments.length;$++){_=arguments[$];for(C in _)g[C]=_[C];for(let Q=0;Q<ie.length;Q++)C=ie[Q],Object.prototype.hasOwnProperty.call(_,C)&&(g[C]=_[C])}}function ge(g){this.src=g,this.g={},this.h=0}ge.prototype.add=function(g,x,C,_,$){const Q=g.toString();g=this.g[Q],g||(g=this.g[Q]=[],this.h++);const de=De(g,x,_,$);return de>-1?(x=g[de],C||(x.fa=!1)):(x=new le(x,this.src,Q,!!_,$),x.fa=C,g.push(x)),x};function Ie(g,x){const C=x.type;if(C in g.g){var _=g.g[C],$=Array.prototype.indexOf.call(_,x,void 0),Q;(Q=$>=0)&&Array.prototype.splice.call(_,$,1),Q&&(be(x),g.g[C].length==0&&(delete g.g[C],g.h--))}}function De(g,x,C,_){for(let $=0;$<g.length;++$){const Q=g[$];if(!Q.da&&Q.listener==x&&Q.capture==!!C&&Q.ha==_)return $}return-1}var $e="closure_lm_"+(Math.random()*1e6|0),Vt={};function ft(g,x,C,_,$){if(Array.isArray(x)){for(let Q=0;Q<x.length;Q++)ft(g,x[Q],C,_,$);return null}return C=ml(C),g&&g[Oe]?g.J(x,C,d(_)?!!_.capture:!1,$):zs(g,x,C,!1,_,$)}function zs(g,x,C,_,$,Q){if(!x)throw Error("Invalid event type");const de=d($)?!!$.capture:!!$;let je=Gs(g);if(je||(g[$e]=je=new ge(g)),C=je.add(x,C,_,de,Q),C.proxy)return C;if(_=qa(),C.proxy=_,_.src=g,_.listener=C,g.addEventListener)H||($=de),$===void 0&&($=!1),g.addEventListener(x.toString(),_,$);else if(g.attachEvent)g.attachEvent(_r(x.toString()),_);else if(g.addListener&&g.removeListener)g.addListener(_);else throw Error("addEventListener and attachEvent are unavailable.");return C}function qa(){function g(C){return x.call(g.src,g.listener,C)}const x=fl;return g}function Ha(g,x,C,_,$){if(Array.isArray(x))for(var Q=0;Q<x.length;Q++)Ha(g,x[Q],C,_,$);else _=d(_)?!!_.capture:!!_,C=ml(C),g&&g[Oe]?(g=g.i,Q=String(x).toString(),Q in g.g&&(x=g.g[Q],C=De(x,C,_,$),C>-1&&(be(x[C]),Array.prototype.splice.call(x,C,1),x.length==0&&(delete g.g[Q],g.h--)))):g&&(g=Gs(g))&&(x=g.g[x.toString()],g=-1,x&&(g=De(x,C,_,$)),(C=g>-1?x[g]:null)&&za(C))}function za(g){if(typeof g!="number"&&g&&!g.da){var x=g.src;if(x&&x[Oe])Ie(x.i,g);else{var C=g.type,_=g.proxy;x.removeEventListener?x.removeEventListener(C,_,g.capture):x.detachEvent?x.detachEvent(_r(C),_):x.addListener&&x.removeListener&&x.removeListener(_),(C=Gs(x))?(Ie(C,g),C.h==0&&(C.src=null,x[$e]=null)):be(g)}}}function _r(g){return g in Vt?Vt[g]:Vt[g]="on"+g}function fl(g,x){if(g.da)g=!0;else{x=new ae(x,this);const C=g.listener,_=g.ha||g.src;g.fa&&za(g),g=C.call(_,x)}return g}function Gs(g){return g=g[$e],g instanceof ge?g:null}var pl="__closure_events_fn_"+(Math.random()*1e9>>>0);function ml(g){return typeof g=="function"?g:(g[pl]||(g[pl]=function(x){return g.handleEvent(x)}),g[pl])}function It(){U.call(this),this.i=new ge(this),this.M=this,this.G=null}w(It,U),It.prototype[Oe]=!0,It.prototype.removeEventListener=function(g,x,C,_){Ha(this,g,x,C,_)};function Ft(g,x){var C,_=g.G;if(_)for(C=[];_;_=_.G)C.push(_);if(g=g.M,_=x.type||x,typeof x=="string")x=new M(x,g);else if(x instanceof M)x.target=x.target||g;else{var $=x;x=new M(_,g),he(x,$)}$=!0;let Q,de;if(C)for(de=C.length-1;de>=0;de--)Q=x.g=C[de],$=Fi(Q,_,!0,x)&&$;if(Q=x.g=g,$=Fi(Q,_,!0,x)&&$,$=Fi(Q,_,!1,x)&&$,C)for(de=0;de<C.length;de++)Q=x.g=C[de],$=Fi(Q,_,!1,x)&&$}It.prototype.N=function(){if(It.Z.N.call(this),this.i){var g=this.i;for(const x in g.g){const C=g.g[x];for(let _=0;_<C.length;_++)be(C[_]);delete g.g[x],g.h--}}this.G=null},It.prototype.J=function(g,x,C,_){return this.i.add(String(g),x,!1,C,_)},It.prototype.K=function(g,x,C,_){return this.i.add(String(g),x,!0,C,_)};function Fi(g,x,C,_){if(x=g.i.g[String(x)],!x)return!0;x=x.concat();let $=!0;for(let Q=0;Q<x.length;++Q){const de=x[Q];if(de&&!de.da&&de.capture==C){const je=de.listener,Et=de.ha||de.src;de.fa&&Ie(g.i,de),$=je.call(Et,_)!==!1&&$}}return $&&!_.defaultPrevented}function bf(g,x){if(typeof g!="function")if(g&&typeof g.handleEvent=="function")g=p(g.handleEvent,g);else throw Error("Invalid listener argument");return Number(x)>2147483647?-1:u.setTimeout(g,x||0)}function dc(g){g.g=bf(()=>{g.g=null,g.i&&(g.i=!1,dc(g))},g.l);const x=g.h;g.h=null,g.m.apply(null,x)}class hn extends U{constructor(x,C){super(),this.m=x,this.l=C,this.h=null,this.i=!1,this.g=null}j(x){this.h=arguments,this.g?this.i=!0:dc(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Bs(g){U.call(this),this.h=g,this.g={}}w(Bs,U);var gl=[];function yl(g){Re(g.g,function(x,C){this.g.hasOwnProperty(C)&&za(x)},g),g.g={}}Bs.prototype.N=function(){Bs.Z.N.call(this),yl(this)},Bs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var qi=u.JSON.stringify,wf=u.JSON.parse,hc=class{stringify(g){return u.JSON.stringify(g,void 0)}parse(g){return u.JSON.parse(g,void 0)}};function fc(){}function pc(){}var sr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Jt(){M.call(this,"d")}w(Jt,M);function qn(){M.call(this,"c")}w(qn,M);var wt={},mc=null;function Ga(){return mc=mc||new It}wt.Ia="serverreachability";function gc(g){M.call(this,wt.Ia,g)}w(gc,M);function Nr(g){const x=Ga();Ft(x,new gc(x))}wt.STAT_EVENT="statevent";function $s(g,x){M.call(this,wt.STAT_EVENT,g),this.stat=x}w($s,M);function kt(g){const x=Ga();Ft(x,new $s(x,g))}wt.Ja="timingevent";function Ar(g,x){M.call(this,wt.Ja,g),this.size=x}w(Ar,M);function Or(g,x){if(typeof g!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){g()},x)}function ar(){this.g=!0}ar.prototype.ua=function(){this.g=!1};function Ef(g,x,C,_,$,Q){g.info(function(){if(g.g)if(Q){var de="",je=Q.split("&");for(let et=0;et<je.length;et++){var Et=je[et].split("=");if(Et.length>1){const pt=Et[0];Et=Et[1];const Bn=pt.split("_");de=Bn.length>=2&&Bn[1]=="type"?de+(pt+"="+Et+"&"):de+(pt+"=redacted&")}}}else de=null;else de=Q;return"XMLHTTP REQ ("+_+") [attempt "+$+"]: "+x+`
`+C+`
`+de})}function yc(g,x,C,_,$,Q,de){g.info(function(){return"XMLHTTP RESP ("+_+") [ attempt "+$+"]: "+x+`
`+C+`
`+Q+" "+de})}function Pr(g,x,C,_){g.info(function(){return"XMLHTTP TEXT ("+x+"): "+Sf(g,C)+(_?" "+_:"")})}function Ws(g,x){g.info(function(){return"TIMEOUT: "+x})}ar.prototype.info=function(){};function Sf(g,x){if(!g.g)return x;if(!x)return null;try{const Q=JSON.parse(x);if(Q){for(g=0;g<Q.length;g++)if(Array.isArray(Q[g])){var C=Q[g];if(!(C.length<2)){var _=C[1];if(Array.isArray(_)&&!(_.length<1)){var $=_[0];if($!="noop"&&$!="stop"&&$!="close")for(let de=1;de<_.length;de++)_[de]=""}}}}return qi(Q)}catch{return x}}var Ks={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},vl={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},bl;function Js(){}w(Js,fc),Js.prototype.g=function(){return new XMLHttpRequest},bl=new Js;function ai(g){return encodeURIComponent(String(g))}function vc(g){var x=1;g=g.split(":");const C=[];for(;x>0&&g.length;)C.push(g.shift()),x--;return g.length&&C.push(g.join(":")),C}function or(g,x,C,_){this.j=g,this.i=x,this.l=C,this.S=_||1,this.V=new Bs(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new lr}function lr(){this.i=null,this.g="",this.h=!1}var _t={},Gt={};function Rr(g,x,C){g.M=1,g.A=Ys(At(x)),g.u=C,g.R=!0,Ba(g,null)}function Ba(g,x){g.F=Date.now(),Dr(g),g.B=At(g.A);var C=g.B,_=g.S;Array.isArray(_)||(_=[String(_)]),Ja(C.i,"t",_),g.C=0,C=g.j.L,g.h=new lr,g.g=Rc(g.j,C?x:null,!g.u),g.P>0&&(g.O=new hn(p(g.Y,g,g.g),g.P)),x=g.V,C=g.g,_=g.ba;var $="readystatechange";Array.isArray($)||($&&(gl[0]=$.toString()),$=gl);for(let Q=0;Q<$.length;Q++){const de=ft(C,$[Q],_||x.handleEvent,!1,x.h||x);if(!de)break;x.g[de.key]=de}x=g.J?F(g.J):{},g.u?(g.v||(g.v="POST"),x["Content-Type"]="application/x-www-form-urlencoded",g.g.ea(g.B,g.v,g.u,x)):(g.v="GET",g.g.ea(g.B,g.v,null,x)),Nr(),Ef(g.i,g.v,g.B,g.l,g.S,g.u)}or.prototype.ba=function(g){g=g.target;const x=this.O;x&&dr(g)==3?x.j():this.Y(g)},or.prototype.Y=function(g){try{if(g==this.g)e:{const je=dr(this.g),Et=this.g.ya(),et=this.g.ca();if(!(je<3)&&(je!=3||this.g&&(this.h.h||this.g.la()||Yt(this.g)))){this.K||je!=4||Et==7||(Et==8||et<=0?Nr(3):Nr(2)),jr(this);var x=this.g.ca();this.X=x;var C=xf(this);if(this.o=x==200,yc(this.i,this.v,this.B,this.l,this.S,je,x),this.o){if(this.U&&!this.L){t:{if(this.g){var _,$=this.g;if((_=$.g?$.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!R(_)){var Q=_;break t}}Q=null}if(g=Q)Pr(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Mr(this,g);else{this.o=!1,this.m=3,kt(12),kn(this),Hn(this);break e}}if(this.R){g=!0;let pt;for(;!this.K&&this.C<C.length;)if(pt=wc(this,C),pt==Gt){je==4&&(this.m=4,kt(14),g=!1),Pr(this.i,this.l,null,"[Incomplete Response]");break}else if(pt==_t){this.m=4,kt(15),Pr(this.i,this.l,C,"[Invalid Chunk]"),g=!1;break}else Pr(this.i,this.l,pt,null),Mr(this,pt);if(bc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),je!=4||C.length!=0||this.h.h||(this.m=1,kt(16),g=!1),this.o=this.o&&g,!g)Pr(this.i,this.l,C,"[Invalid Chunked Response]"),kn(this),Hn(this);else if(C.length>0&&!this.W){this.W=!0;var de=this.j;de.g==this&&de.aa&&!de.P&&(de.j.info("Great, no buffering proxy detected. Bytes received: "+C.length),Dl(de),de.P=!0,kt(11))}}else Pr(this.i,this.l,C,null),Mr(this,C);je==4&&kn(this),this.o&&!this.K&&(je==4?Nc(this.j,this):(this.o=!1,Dr(this)))}else li(this.g),x==400&&C.indexOf("Unknown SID")>0?(this.m=3,kt(12)):(this.m=0,kt(13)),kn(this),Hn(this)}}}catch{}finally{}};function xf(g){if(!bc(g))return g.g.la();const x=Yt(g.g);if(x==="")return"";let C="";const _=x.length,$=dr(g.g)==4;if(!g.h.i){if(typeof TextDecoder>"u")return kn(g),Hn(g),"";g.h.i=new u.TextDecoder}for(let Q=0;Q<_;Q++)g.h.h=!0,C+=g.h.i.decode(x[Q],{stream:!($&&Q==_-1)});return x.length=0,g.h.g+=C,g.C=0,g.h.g}function bc(g){return g.g?g.v=="GET"&&g.M!=2&&g.j.Aa:!1}function wc(g,x){var C=g.C,_=x.indexOf(`
`,C);return _==-1?Gt:(C=Number(x.substring(C,_)),isNaN(C)?_t:(_+=1,_+C>x.length?Gt:(x=x.slice(_,_+C),g.C=_+C,x)))}or.prototype.cancel=function(){this.K=!0,kn(this)};function Dr(g){g.T=Date.now()+g.H,$a(g,g.H)}function $a(g,x){if(g.D!=null)throw Error("WatchDog timer not null");g.D=Or(p(g.aa,g),x)}function jr(g){g.D&&(u.clearTimeout(g.D),g.D=null)}or.prototype.aa=function(){this.D=null;const g=Date.now();g-this.T>=0?(Ws(this.i,this.B),this.M!=2&&(Nr(),kt(17)),kn(this),this.m=2,Hn(this)):$a(this,this.T-g)};function Hn(g){g.j.I==0||g.K||Nc(g.j,g)}function kn(g){jr(g);var x=g.O;x&&typeof x.dispose=="function"&&x.dispose(),g.O=null,yl(g.V),g.g&&(x=g.g,g.g=null,x.abort(),x.dispose())}function Mr(g,x){try{var C=g.j;if(C.I!=0&&(C.g==g||Ur(C.h,g))){if(!g.L&&Ur(C.h,g)&&C.I==3){try{var _=C.Ba.g.parse(x)}catch{_=null}if(Array.isArray(_)&&_.length==3){var $=_;if($[0]==0){e:if(!C.v){if(C.g)if(C.g.F+3e3<g.F)eo(C),Ji(C);else break e;ra(C),kt(18)}}else C.xa=$[1],0<C.xa-C.K&&$[2]<37500&&C.F&&C.A==0&&!C.C&&(C.C=Or(p(C.Va,C),6e3));Lr(C.h)<=1&&C.ta&&(C.ta=void 0)}else Gr(C,11)}else if((g.L||C.g==g)&&eo(C),!R(x))for($=C.Ba.g.parse(x),x=0;x<$.length;x++){let et=$[x];const pt=et[0];if(!(pt<=C.K))if(C.K=pt,et=et[1],C.I==2)if(et[0]=="c"){C.M=et[1],C.ba=et[2];const Bn=et[3];Bn!=null&&(C.ka=Bn,C.j.info("VER="+C.ka));const ci=et[4];ci!=null&&(C.za=ci,C.j.info("SVER="+C.za));const hr=et[5];hr!=null&&typeof hr=="number"&&hr>0&&(_=1.5*hr,C.O=_,C.j.info("backChannelRequestTimeoutMs_="+_)),_=C;const fr=g.g;if(fr){const ia=fr.g?fr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ia){var Q=_.h;Q.g||ia.indexOf("spdy")==-1&&ia.indexOf("quic")==-1&&ia.indexOf("h2")==-1||(Q.j=Q.l,Q.g=new Set,Q.h&&(Sl(Q,Q.h),Q.h=null))}if(_.G){const to=fr.g?fr.g.getResponseHeader("X-HTTP-Session-Id"):null;to&&(_.wa=to,Ze(_.J,_.G,to))}}C.I=3,C.l&&C.l.ra(),C.aa&&(C.T=Date.now()-g.F,C.j.info("Handshake RTT: "+C.T+"ms")),_=C;var de=g;if(_.na=Pc(_,_.L?_.ba:null,_.W),de.L){xl(_.h,de);var je=de,Et=_.O;Et&&(je.H=Et),je.D&&(jr(je),Dr(je)),_.g=de}else kc(_);C.i.length>0&&zr(C)}else et[0]!="stop"&&et[0]!="close"||Gr(C,7);else C.I==3&&(et[0]=="stop"||et[0]=="close"?et[0]=="stop"?Gr(C,7):Pl(C):et[0]!="noop"&&C.l&&C.l.qa(et),C.A=0)}}Nr(4)}catch{}}var Nt=class{constructor(g,x){this.g=g,this.map=x}};function wl(g){this.l=g||10,u.PerformanceNavigationTiming?(g=u.performance.getEntriesByType("navigation"),g=g.length>0&&(g[0].nextHopProtocol=="hq"||g[0].nextHopProtocol=="h2")):g=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=g?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function El(g){return g.h?!0:g.g?g.g.size>=g.j:!1}function Lr(g){return g.h?1:g.g?g.g.size:0}function Ur(g,x){return g.h?g.h==x:g.g?g.g.has(x):!1}function Sl(g,x){g.g?g.g.add(x):g.h=x}function xl(g,x){g.h&&g.h==x?g.h=null:g.g&&g.g.has(x)&&g.g.delete(x)}wl.prototype.cancel=function(){if(this.i=Tl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const g of this.g.values())g.cancel();this.g.clear()}};function Tl(g){if(g.h!=null)return g.i.concat(g.h.G);if(g.g!=null&&g.g.size!==0){let x=g.i;for(const C of g.g.values())x=x.concat(C.G);return x}return I(g.i)}var Ec=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Wa(g,x){if(g){g=g.split("&");for(let C=0;C<g.length;C++){const _=g[C].indexOf("=");let $,Q=null;_>=0?($=g[C].substring(0,_),Q=g[C].substring(_+1)):$=g[C],x($,Q?decodeURIComponent(Q.replace(/\+/g," ")):"")}}}function _n(g){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let x;g instanceof _n?(this.l=g.l,Bt(this,g.j),this.o=g.o,this.g=g.g,Hi(this,g.u),this.h=g.h,Cl(this,Cc(g.i)),this.m=g.m):g&&(x=String(g).match(Ec))?(this.l=!1,Bt(this,x[1]||"",!0),this.o=Vr(x[2]||""),this.g=Vr(x[3]||"",!0),Hi(this,x[4]),this.h=Vr(x[5]||"",!0),Cl(this,x[6]||"",!0),this.m=Vr(x[7]||"")):(this.l=!1,this.i=new Gi(null,this.l))}_n.prototype.toString=function(){const g=[];var x=this.j;x&&g.push(Xs(x,Ka,!0),":");var C=this.g;return(C||x=="file")&&(g.push("//"),(x=this.o)&&g.push(Xs(x,Ka,!0),"@"),g.push(ai(C).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),C=this.u,C!=null&&g.push(":",String(C))),(C=this.h)&&(this.g&&C.charAt(0)!="/"&&g.push("/"),g.push(Xs(C,C.charAt(0)=="/"?Il:Sc,!0))),(C=this.i.toString())&&g.push("?",C),(C=this.m)&&g.push("#",Xs(C,xc)),g.join("")},_n.prototype.resolve=function(g){const x=At(this);let C=!!g.j;C?Bt(x,g.j):C=!!g.o,C?x.o=g.o:C=!!g.g,C?x.g=g.g:C=g.u!=null;var _=g.h;if(C)Hi(x,g.u);else if(C=!!g.h){if(_.charAt(0)!="/")if(this.g&&!this.h)_="/"+_;else{var $=x.h.lastIndexOf("/");$!=-1&&(_=x.h.slice(0,$+1)+_)}if($=_,$==".."||$==".")_="";else if($.indexOf("./")!=-1||$.indexOf("/.")!=-1){_=$.lastIndexOf("/",0)==0,$=$.split("/");const Q=[];for(let de=0;de<$.length;){const je=$[de++];je=="."?_&&de==$.length&&Q.push(""):je==".."?((Q.length>1||Q.length==1&&Q[0]!="")&&Q.pop(),_&&de==$.length&&Q.push("")):(Q.push(je),_=!0)}_=Q.join("/")}else _=$}return C?x.h=_:C=g.i.toString()!=="",C?Cl(x,Cc(g.i)):C=!!g.m,C&&(x.m=g.m),x};function At(g){return new _n(g)}function Bt(g,x,C){g.j=C?Vr(x,!0):x,g.j&&(g.j=g.j.replace(/:$/,""))}function Hi(g,x){if(x){if(x=Number(x),isNaN(x)||x<0)throw Error("Bad port number "+x);g.u=x}else g.u=null}function Cl(g,x,C){x instanceof Gi?(g.i=x,Ya(g.i,g.l)):(C||(x=Xs(x,zi)),g.i=new Gi(x,g.l))}function Ze(g,x,C){g.i.set(x,C)}function Ys(g){return Ze(g,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),g}function Vr(g,x){return g?x?decodeURI(g.replace(/%25/g,"%2525")):decodeURIComponent(g):""}function Xs(g,x,C){return typeof g=="string"?(g=encodeURI(g).replace(x,Nn),C&&(g=g.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g):null}function Nn(g){return g=g.charCodeAt(0),"%"+(g>>4&15).toString(16)+(g&15).toString(16)}var Ka=/[#\/\?@]/g,Sc=/[#\?:]/g,Il=/[#\?]/g,zi=/[#\?@]/g,xc=/#/g;function Gi(g,x){this.h=this.g=null,this.i=g||null,this.j=!!x}function bn(g){g.g||(g.g=new Map,g.h=0,g.i&&Wa(g.i,function(x,C){g.add(decodeURIComponent(x.replace(/\+/g," ")),C)}))}t=Gi.prototype,t.add=function(g,x){bn(this),this.i=null,g=Bi(this,g);let C=this.g.get(g);return C||this.g.set(g,C=[]),C.push(x),this.h+=1,this};function Tc(g,x){bn(g),x=Bi(g,x),g.g.has(x)&&(g.i=null,g.h-=g.g.get(x).length,g.g.delete(x))}function kl(g,x){return bn(g),x=Bi(g,x),g.g.has(x)}t.forEach=function(g,x){bn(this),this.g.forEach(function(C,_){C.forEach(function($){g.call(x,$,_,this)},this)},this)};function _l(g,x){bn(g);let C=[];if(typeof x=="string")kl(g,x)&&(C=C.concat(g.g.get(Bi(g,x))));else for(g=Array.from(g.g.values()),x=0;x<g.length;x++)C=C.concat(g[x]);return C}t.set=function(g,x){return bn(this),this.i=null,g=Bi(this,g),kl(this,g)&&(this.h-=this.g.get(g).length),this.g.set(g,[x]),this.h+=1,this},t.get=function(g,x){return g?(g=_l(this,g),g.length>0?String(g[0]):x):x};function Ja(g,x,C){Tc(g,x),C.length>0&&(g.i=null,g.g.set(Bi(g,x),I(C)),g.h+=C.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const g=[],x=Array.from(this.g.keys());for(let _=0;_<x.length;_++){var C=x[_];const $=ai(C);C=_l(this,C);for(let Q=0;Q<C.length;Q++){let de=$;C[Q]!==""&&(de+="="+ai(C[Q])),g.push(de)}}return this.i=g.join("&")};function Cc(g){const x=new Gi;return x.i=g.i,g.g&&(x.g=new Map(g.g),x.h=g.h),x}function Bi(g,x){return x=String(x),g.j&&(x=x.toLowerCase()),x}function Ya(g,x){x&&!g.j&&(bn(g),g.i=null,g.g.forEach(function(C,_){const $=_.toLowerCase();_!=$&&(Tc(this,_),Ja(this,$,C))},g)),g.j=x}function ur(g,x){const C=new ar;if(u.Image){const _=new Image;_.onload=v(zn,C,"TestLoadImage: loaded",!0,x,_),_.onerror=v(zn,C,"TestLoadImage: error",!1,x,_),_.onabort=v(zn,C,"TestLoadImage: abort",!1,x,_),_.ontimeout=v(zn,C,"TestLoadImage: timeout",!1,x,_),u.setTimeout(function(){_.ontimeout&&_.ontimeout()},1e4),_.src=g}else x(!1)}function Nl(g,x){const C=new ar,_=new AbortController,$=setTimeout(()=>{_.abort(),zn(C,"TestPingServer: timeout",!1,x)},1e4);fetch(g,{signal:_.signal}).then(Q=>{clearTimeout($),Q.ok?zn(C,"TestPingServer: ok",!0,x):zn(C,"TestPingServer: server error",!1,x)}).catch(()=>{clearTimeout($),zn(C,"TestPingServer: error",!1,x)})}function zn(g,x,C,_,$){try{$&&($.onload=null,$.onerror=null,$.onabort=null,$.ontimeout=null),_(C)}catch{}}function $i(){this.g=new hc}function Fr(g){this.i=g.Sb||null,this.h=g.ab||!1}w(Fr,fc),Fr.prototype.g=function(){return new Qs(this.i,this.h)};function Qs(g,x){It.call(this),this.H=g,this.o=x,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}w(Qs,It),t=Qs.prototype,t.open=function(g,x){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=g,this.D=x,this.readyState=1,cr(this)},t.send=function(g){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const x={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};g&&(x.body=g),(this.H||u).fetch(new Request(this.D,x)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Wi(this)),this.readyState=0},t.Pa=function(g){if(this.g&&(this.l=g,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=g.headers,this.readyState=2,cr(this)),this.g&&(this.readyState=3,cr(this),this.g)))if(this.responseType==="arraybuffer")g.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in g){if(this.j=g.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Xa(this)}else g.text().then(this.Oa.bind(this),this.ga.bind(this))};function Xa(g){g.j.read().then(g.Ma.bind(g)).catch(g.ga.bind(g))}t.Ma=function(g){if(this.g){if(this.o&&g.value)this.response.push(g.value);else if(!this.o){var x=g.value?g.value:new Uint8Array(0);(x=this.B.decode(x,{stream:!g.done}))&&(this.response=this.responseText+=x)}g.done?Wi(this):cr(this),this.readyState==3&&Xa(this)}},t.Oa=function(g){this.g&&(this.response=this.responseText=g,Wi(this))},t.Na=function(g){this.g&&(this.response=g,Wi(this))},t.ga=function(){this.g&&Wi(this)};function Wi(g){g.readyState=4,g.l=null,g.j=null,g.B=null,cr(g)}t.setRequestHeader=function(g,x){this.A.append(g,x)},t.getResponseHeader=function(g){return this.h&&this.h.get(g.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const g=[],x=this.h.entries();for(var C=x.next();!C.done;)C=C.value,g.push(C[0]+": "+C[1]),C=x.next();return g.join(`\r
`)};function cr(g){g.onreadystatechange&&g.onreadystatechange.call(g)}Object.defineProperty(Qs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(g){this.m=g?"include":"same-origin"}});function Gn(g){let x="";return Re(g,function(C,_){x+=_,x+=":",x+=C,x+=`\r
`}),x}function Zs(g,x,C){e:{for(_ in C){var _=!1;break e}_=!0}_||(C=Gn(C),typeof g=="string"?C!=null&&ai(C):Ze(g,x,C))}function it(g){It.call(this),this.headers=new Map,this.L=g||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}w(it,It);var qr=/^https?$/i,Al=["POST","PUT"];t=it.prototype,t.Fa=function(g){this.H=g},t.ea=function(g,x,C,_){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+g);x=x?x.toUpperCase():"GET",this.D=g,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():bl.g(),this.g.onreadystatechange=S(p(this.Ca,this));try{this.B=!0,this.g.open(x,String(g),!0),this.B=!1}catch(Q){ea(this,Q);return}if(g=C||"",C=new Map(this.headers),_)if(Object.getPrototypeOf(_)===Object.prototype)for(var $ in _)C.set($,_[$]);else if(typeof _.keys=="function"&&typeof _.get=="function")for(const Q of _.keys())C.set(Q,_.get(Q));else throw Error("Unknown input type for opt_headers: "+String(_));_=Array.from(C.keys()).find(Q=>Q.toLowerCase()=="content-type"),$=u.FormData&&g instanceof u.FormData,!(Array.prototype.indexOf.call(Al,x,void 0)>=0)||_||$||C.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Q,de]of C)this.g.setRequestHeader(Q,de);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(g),this.v=!1}catch(Q){ea(this,Q)}};function ea(g,x){g.h=!1,g.g&&(g.j=!0,g.g.abort(),g.j=!1),g.l=x,g.o=5,Ol(g),oi(g)}function Ol(g){g.A||(g.A=!0,Ft(g,"complete"),Ft(g,"error"))}t.abort=function(g){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=g||7,Ft(this,"complete"),Ft(this,"abort"),oi(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),oi(this,!0)),it.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?ta(this):this.Xa())},t.Xa=function(){ta(this)};function ta(g){if(g.h&&typeof o<"u"){if(g.v&&dr(g)==4)setTimeout(g.Ca.bind(g),0);else if(Ft(g,"readystatechange"),dr(g)==4){g.h=!1;try{const Q=g.ca();e:switch(Q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var x=!0;break e;default:x=!1}var C;if(!(C=x)){var _;if(_=Q===0){let de=String(g.D).match(Ec)[1]||null;!de&&u.self&&u.self.location&&(de=u.self.location.protocol.slice(0,-1)),_=!qr.test(de?de.toLowerCase():"")}C=_}if(C)Ft(g,"complete"),Ft(g,"success");else{g.o=6;try{var $=dr(g)>2?g.g.statusText:""}catch{$=""}g.l=$+" ["+g.ca()+"]",Ol(g)}}finally{oi(g)}}}}function oi(g,x){if(g.g){g.m&&(clearTimeout(g.m),g.m=null);const C=g.g;g.g=null,x||Ft(g,"ready");try{C.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function dr(g){return g.g?g.g.readyState:0}t.ca=function(){try{return dr(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(g){if(this.g){var x=this.g.responseText;return g&&x.indexOf(g)==0&&(x=x.substring(g.length)),wf(x)}};function Yt(g){try{if(!g.g)return null;if("response"in g.g)return g.g.response;switch(g.F){case"":case"text":return g.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in g.g)return g.g.mozResponseArrayBuffer}return null}catch{return null}}function li(g){const x={};g=(g.g&&dr(g)>=2&&g.g.getAllResponseHeaders()||"").split(`\r
`);for(let _=0;_<g.length;_++){if(R(g[_]))continue;var C=vc(g[_]);const $=C[0];if(C=C[1],typeof C!="string")continue;C=C.trim();const Q=x[$]||[];x[$]=Q,Q.push(C)}Le(x,function(_){return _.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Hr(g,x,C){return C&&C.internalChannelParams&&C.internalChannelParams[g]||x}function Ki(g){this.za=0,this.i=[],this.j=new ar,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Hr("failFast",!1,g),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Hr("baseRetryDelayMs",5e3,g),this.Za=Hr("retryDelaySeedMs",1e4,g),this.Ta=Hr("forwardChannelMaxRetries",2,g),this.va=Hr("forwardChannelRequestTimeoutMs",2e4,g),this.ma=g&&g.xmlHttpFactory||void 0,this.Ua=g&&g.Rb||void 0,this.Aa=g&&g.useFetchStreams||!1,this.O=void 0,this.L=g&&g.supportsCrossDomainXhr||!1,this.M="",this.h=new wl(g&&g.concurrentRequestLimit),this.Ba=new $i,this.S=g&&g.fastHandshake||!1,this.R=g&&g.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=g&&g.Pb||!1,g&&g.ua&&this.j.ua(),g&&g.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&g&&g.detectBufferingProxy||!1,this.ia=void 0,g&&g.longPollingTimeout&&g.longPollingTimeout>0&&(this.ia=g.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Ki.prototype,t.ka=8,t.I=1,t.connect=function(g,x,C,_){kt(0),this.W=g,this.H=x||{},C&&_!==void 0&&(this.H.OSID=C,this.H.OAID=_),this.F=this.X,this.J=Pc(this,null,this.W),zr(this)};function Pl(g){if(Qa(g),g.I==3){var x=g.V++,C=At(g.J);if(Ze(C,"SID",g.M),Ze(C,"RID",x),Ze(C,"TYPE","terminate"),na(g,C),x=new or(g,g.j,x),x.M=2,x.A=Ys(At(C)),C=!1,u.navigator&&u.navigator.sendBeacon)try{C=u.navigator.sendBeacon(x.A.toString(),"")}catch{}!C&&u.Image&&(new Image().src=x.A,C=!0),C||(x.g=Rc(x.j,null),x.g.ea(x.A)),x.F=Date.now(),Dr(x)}Oc(g)}function Ji(g){g.g&&(Dl(g),g.g.cancel(),g.g=null)}function Qa(g){Ji(g),g.v&&(u.clearTimeout(g.v),g.v=null),eo(g),g.h.cancel(),g.m&&(typeof g.m=="number"&&u.clearTimeout(g.m),g.m=null)}function zr(g){if(!El(g.h)&&!g.m){g.m=!0;var x=g.Ea;ce||N(),ue||(ce(),ue=!0),A.add(x,g),g.D=0}}function Za(g,x){return Lr(g.h)>=g.h.j-(g.m?1:0)?!1:g.m?(g.i=x.G.concat(g.i),!0):g.I==1||g.I==2||g.D>=(g.Sa?0:g.Ta)?!1:(g.m=Or(p(g.Ea,g,x),Ac(g,g.D)),g.D++,!0)}t.Ea=function(g){if(this.m)if(this.m=null,this.I==1){if(!g){this.V=Math.floor(Math.random()*1e5),g=this.V++;const $=new or(this,this.j,g);let Q=this.o;if(this.U&&(Q?(Q=F(Q),he(Q,this.U)):Q=this.U),this.u!==null||this.R||($.J=Q,Q=null),this.S)e:{for(var x=0,C=0;C<this.i.length;C++){t:{var _=this.i[C];if("__data__"in _.map&&(_=_.map.__data__,typeof _=="string")){_=_.length;break t}_=void 0}if(_===void 0)break;if(x+=_,x>4096){x=C;break e}if(x===4096||C===this.i.length-1){x=C+1;break e}}x=1e3}else x=1e3;x=Ic(this,$,x),C=At(this.J),Ze(C,"RID",g),Ze(C,"CVER",22),this.G&&Ze(C,"X-HTTP-Session-Id",this.G),na(this,C),Q&&(this.R?x="headers="+ai(Gn(Q))+"&"+x:this.u&&Zs(C,this.u,Q)),Sl(this.h,$),this.Ra&&Ze(C,"TYPE","init"),this.S?(Ze(C,"$req",x),Ze(C,"SID","null"),$.U=!0,Rr($,C,null)):Rr($,C,x),this.I=2}}else this.I==3&&(g?Rl(this,g):this.i.length==0||El(this.h)||Rl(this))};function Rl(g,x){var C;x?C=x.l:C=g.V++;const _=At(g.J);Ze(_,"SID",g.M),Ze(_,"RID",C),Ze(_,"AID",g.K),na(g,_),g.u&&g.o&&Zs(_,g.u,g.o),C=new or(g,g.j,C,g.D+1),g.u===null&&(C.J=g.o),x&&(g.i=x.G.concat(g.i)),x=Ic(g,C,1e3),C.H=Math.round(g.va*.5)+Math.round(g.va*.5*Math.random()),Sl(g.h,C),Rr(C,_,x)}function na(g,x){g.H&&Re(g.H,function(C,_){Ze(x,_,C)}),g.l&&Re({},function(C,_){Ze(x,_,C)})}function Ic(g,x,C){C=Math.min(g.i.length,C);const _=g.l?p(g.l.Ka,g.l,g):null;e:{var $=g.i;let je=-1;for(;;){const Et=["count="+C];je==-1?C>0?(je=$[0].g,Et.push("ofs="+je)):je=0:Et.push("ofs="+je);let et=!0;for(let pt=0;pt<C;pt++){var Q=$[pt].g;const Bn=$[pt].map;if(Q-=je,Q<0)je=Math.max(0,$[pt].g-100),et=!1;else try{Q="req"+Q+"_"||"";try{var de=Bn instanceof Map?Bn:Object.entries(Bn);for(const[ci,hr]of de){let fr=hr;d(hr)&&(fr=qi(hr)),Et.push(Q+ci+"="+encodeURIComponent(fr))}}catch(ci){throw Et.push(Q+"type="+encodeURIComponent("_badmap")),ci}}catch{_&&_(Bn)}}if(et){de=Et.join("&");break e}}de=void 0}return g=g.i.splice(0,C),x.G=g,de}function kc(g){if(!g.g&&!g.v){g.Y=1;var x=g.Da;ce||N(),ue||(ce(),ue=!0),A.add(x,g),g.A=0}}function ra(g){return g.g||g.v||g.A>=3?!1:(g.Y++,g.v=Or(p(g.Da,g),Ac(g,g.A)),g.A++,!0)}t.Da=function(){if(this.v=null,_c(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var g=4*this.T;this.j.info("BP detection timer enabled: "+g),this.B=Or(p(this.Wa,this),g)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,kt(10),Ji(this),_c(this))};function Dl(g){g.B!=null&&(u.clearTimeout(g.B),g.B=null)}function _c(g){g.g=new or(g,g.j,"rpc",g.Y),g.u===null&&(g.g.J=g.o),g.g.P=0;var x=At(g.na);Ze(x,"RID","rpc"),Ze(x,"SID",g.M),Ze(x,"AID",g.K),Ze(x,"CI",g.F?"0":"1"),!g.F&&g.ia&&Ze(x,"TO",g.ia),Ze(x,"TYPE","xmlhttp"),na(g,x),g.u&&g.o&&Zs(x,g.u,g.o),g.O&&(g.g.H=g.O);var C=g.g;g=g.ba,C.M=1,C.A=Ys(At(x)),C.u=null,C.R=!0,Ba(C,g)}t.Va=function(){this.C!=null&&(this.C=null,Ji(this),ra(this),kt(19))};function eo(g){g.C!=null&&(u.clearTimeout(g.C),g.C=null)}function Nc(g,x){var C=null;if(g.g==x){eo(g),Dl(g),g.g=null;var _=2}else if(Ur(g.h,x))C=x.G,xl(g.h,x),_=1;else return;if(g.I!=0){if(x.o)if(_==1){C=x.u?x.u.length:0,x=Date.now()-x.F;var $=g.D;_=Ga(),Ft(_,new Ar(_,C)),zr(g)}else kc(g);else if($=x.m,$==3||$==0&&x.X>0||!(_==1&&Za(g,x)||_==2&&ra(g)))switch(C&&C.length>0&&(x=g.h,x.i=x.i.concat(C)),$){case 1:Gr(g,5);break;case 4:Gr(g,10);break;case 3:Gr(g,6);break;default:Gr(g,2)}}}function Ac(g,x){let C=g.Qa+Math.floor(Math.random()*g.Za);return g.isActive()||(C*=2),C*x}function Gr(g,x){if(g.j.info("Error code "+x),x==2){var C=p(g.bb,g),_=g.Ua;const $=!_;_=new _n(_||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||Bt(_,"https"),Ys(_),$?ur(_.toString(),C):Nl(_.toString(),C)}else kt(2);g.I=0,g.l&&g.l.pa(x),Oc(g),Qa(g)}t.bb=function(g){g?(this.j.info("Successfully pinged google.com"),kt(2)):(this.j.info("Failed to ping google.com"),kt(1))};function Oc(g){if(g.I=0,g.ja=[],g.l){const x=Tl(g.h);(x.length!=0||g.i.length!=0)&&(P(g.ja,x),P(g.ja,g.i),g.h.i.length=0,I(g.i),g.i.length=0),g.l.oa()}}function Pc(g,x,C){var _=C instanceof _n?At(C):new _n(C);if(_.g!="")x&&(_.g=x+"."+_.g),Hi(_,_.u);else{var $=u.location;_=$.protocol,x=x?x+"."+$.hostname:$.hostname,$=+$.port;const Q=new _n(null);_&&Bt(Q,_),x&&(Q.g=x),$&&Hi(Q,$),C&&(Q.h=C),_=Q}return C=g.G,x=g.wa,C&&x&&Ze(_,C,x),Ze(_,"VER",g.ka),na(g,_),_}function Rc(g,x,C){if(x&&!g.L)throw Error("Can't create secondary domain capable XhrIo object.");return x=g.Aa&&!g.ma?new it(new Fr({ab:C})):new it(g.ma),x.Fa(g.L),x}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Dc(){}t=Dc.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Yi(){}Yi.prototype.g=function(g,x){return new fn(g,x)};function fn(g,x){It.call(this),this.g=new Ki(x),this.l=g,this.h=x&&x.messageUrlParams||null,g=x&&x.messageHeaders||null,x&&x.clientProtocolHeaderRequired&&(g?g["X-Client-Protocol"]="webchannel":g={"X-Client-Protocol":"webchannel"}),this.g.o=g,g=x&&x.initMessageHeaders||null,x&&x.messageContentType&&(g?g["X-WebChannel-Content-Type"]=x.messageContentType:g={"X-WebChannel-Content-Type":x.messageContentType}),x&&x.sa&&(g?g["X-WebChannel-Client-Profile"]=x.sa:g={"X-WebChannel-Client-Profile":x.sa}),this.g.U=g,(g=x&&x.Qb)&&!R(g)&&(this.g.u=g),this.A=x&&x.supportsCrossDomainXhr||!1,this.v=x&&x.sendRawJson||!1,(x=x&&x.httpSessionIdParam)&&!R(x)&&(this.g.G=x,g=this.h,g!==null&&x in g&&(g=this.h,x in g&&delete g[x])),this.j=new ui(this)}w(fn,It),fn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},fn.prototype.close=function(){Pl(this.g)},fn.prototype.o=function(g){var x=this.g;if(typeof g=="string"){var C={};C.__data__=g,g=C}else this.v&&(C={},C.__data__=qi(g),g=C);x.i.push(new Nt(x.Ya++,g)),x.I==3&&zr(x)},fn.prototype.N=function(){this.g.l=null,delete this.j,Pl(this.g),delete this.g,fn.Z.N.call(this)};function jc(g){Jt.call(this),g.__headers__&&(this.headers=g.__headers__,this.statusCode=g.__status__,delete g.__headers__,delete g.__status__);var x=g.__sm__;if(x){e:{for(const C in x){g=C;break e}g=void 0}(this.i=g)&&(g=this.i,x=x!==null&&g in x?x[g]:void 0),this.data=x}else this.data=g}w(jc,Jt);function Mc(){qn.call(this),this.status=1}w(Mc,qn);function ui(g){this.g=g}w(ui,Dc),ui.prototype.ra=function(){Ft(this.g,"a")},ui.prototype.qa=function(g){Ft(this.g,new jc(g))},ui.prototype.pa=function(g){Ft(this.g,new Mc)},ui.prototype.oa=function(){Ft(this.g,"b")},Yi.prototype.createWebChannel=Yi.prototype.g,fn.prototype.send=fn.prototype.o,fn.prototype.open=fn.prototype.m,fn.prototype.close=fn.prototype.close,a1=function(){return new Yi},s1=function(){return Ga()},i1=wt,cg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ks.NO_ERROR=0,Ks.TIMEOUT=8,Ks.HTTP_ERROR=6,nh=Ks,vl.COMPLETE="complete",r1=vl,pc.EventType=sr,sr.OPEN="a",sr.CLOSE="b",sr.ERROR="c",sr.MESSAGE="d",It.prototype.listen=It.prototype.J,Cu=pc,it.prototype.listenOnce=it.prototype.K,it.prototype.getLastError=it.prototype.Ha,it.prototype.getLastErrorCode=it.prototype.ya,it.prototype.getStatus=it.prototype.ca,it.prototype.getResponseJson=it.prototype.La,it.prototype.getResponseText=it.prototype.la,it.prototype.send=it.prototype.ea,it.prototype.setWithCredentials=it.prototype.Fa,n1=it}).apply(typeof Gd<"u"?Gd:typeof self<"u"?self:typeof window<"u"?window:{});const LS="@firebase/firestore",US="4.9.3";/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ln{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ln.UNAUTHENTICATED=new ln(null),ln.GOOGLE_CREDENTIALS=new ln("google-credentials-uid"),ln.FIRST_PARTY=new ln("first-party-uid"),ln.MOCK_USER=new ln("mock-user");/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let ol="12.7.0";/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Ca=new Jh("@firebase/firestore");function Ro(){return Ca.logLevel}function me(t,...e){if(Ca.logLevel<=He.DEBUG){const n=e.map(ry);Ca.debug(`Firestore (${ol}): ${t}`,...n)}}function Di(t,...e){if(Ca.logLevel<=He.ERROR){const n=e.map(ry);Ca.error(`Firestore (${ol}): ${t}`,...n)}}function Jo(t,...e){if(Ca.logLevel<=He.WARN){const n=e.map(ry);Ca.warn(`Firestore (${ol}): ${t}`,...n)}}function ry(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(e){return JSON.stringify(e)})(t)}catch{return t}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Te(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,o1(t,r,n)}function o1(t,e,n){let r=`FIRESTORE (${ol}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Di(r),new Error(r)}function Qe(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||o1(e,s,r)}function Ae(t,e){return t}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const ne={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class pe extends kr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class _s{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class l1{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class m3{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(ln.UNAUTHENTICATED)))}shutdown(){}}class g3{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class y3{constructor(e){this.t=e,this.currentUser=ln.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Qe(this.o===void 0,42304);let r=this.i;const s=f=>this.i!==r?(r=this.i,n(f)):Promise.resolve();let o=new _s;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new _s,e.enqueueRetryable((()=>s(this.currentUser)))};const u=()=>{const f=o;e.enqueueRetryable((async()=>{await f.promise,await s(this.currentUser)}))},d=f=>{me("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((f=>d(f))),setTimeout((()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?d(f):(me("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new _s)}}),0),u()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(me("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Qe(typeof r.accessToken=="string",31837,{l:r}),new l1(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Qe(e===null||typeof e=="string",2055,{h:e}),new ln(e)}}class v3{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=ln.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class b3{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new v3(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(ln.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class VS{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class w3{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Zn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Qe(this.o===void 0,3512);const r=o=>{o.error!=null&&me("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const u=o.token!==this.m;return this.m=o.token,me("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable((()=>r(o)))};const s=o=>{me("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((o=>s(o))),setTimeout((()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?s(o):me("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new VS(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Qe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new VS(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function E3(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class iy{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=E3(40);for(let o=0;o<s.length;++o)r.length<20&&s[o]<n&&(r+=e.charAt(s[o]%62))}return r}}function ze(t,e){return t<e?-1:t>e?1:0}function dg(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),o=e.charAt(r);if(s!==o)return Nm(s)===Nm(o)?ze(s,o):Nm(s)?1:-1}return ze(t.length,e.length)}const S3=55296,x3=57343;function Nm(t){const e=t.charCodeAt(0);return e>=S3&&e<=x3}function Yo(t,e,n){return t.length===e.length&&t.every(((r,s)=>n(r,e[s])))}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const FS="__name__";class Yr{constructor(e,n,r){n===void 0?n=0:n>e.length&&Te(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Te(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Yr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Yr?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const o=Yr.compareSegments(e.get(s),n.get(s));if(o!==0)return o}return ze(e.length,n.length)}static compareSegments(e,n){const r=Yr.isNumericId(e),s=Yr.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?Yr.extractNumericId(e).compare(Yr.extractNumericId(n)):dg(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ks.fromString(e.substring(4,e.length-2))}}class ut extends Yr{construct(e,n,r){return new ut(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new pe(ne.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((s=>s.length>0)))}return new ut(n)}static emptyPath(){return new ut([])}}const T3=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class nn extends Yr{construct(e,n,r){return new nn(e,n,r)}static isValidIdentifier(e){return T3.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),nn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===FS}static keyField(){return new nn([FS])}static fromServerFormat(e){const n=[];let r="",s=0;const o=()=>{if(r.length===0)throw new pe(ne.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let u=!1;for(;s<e.length;){const d=e[s];if(d==="\\"){if(s+1===e.length)throw new pe(ne.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[s+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new pe(ne.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=f,s+=2}else d==="`"?(u=!u,s++):d!=="."||u?(r+=d,s++):(o(),s++)}if(o(),u)throw new pe(ne.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new nn(n)}static emptyPath(){return new nn([])}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Ee{constructor(e){this.path=e}static fromPath(e){return new Ee(ut.fromString(e))}static fromName(e){return new Ee(ut.fromString(e).popFirst(5))}static empty(){return new Ee(ut.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ut.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ut.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ee(new ut(e.slice()))}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function u1(t,e,n){if(!n)throw new pe(ne.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function C3(t,e,n,r){if(e===!0&&r===!0)throw new pe(ne.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function qS(t){if(!Ee.isDocumentKey(t))throw new pe(ne.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function HS(t){if(Ee.isDocumentKey(t))throw new pe(ne.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function c1(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Yh(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(n){return n.constructor?n.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Te(12329,{type:typeof t})}function Ia(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new pe(ne.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Yh(t);throw new pe(ne.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
* @license
* Copyright 2025 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Lt(t,e){const n={typeString:t};return e&&(n.value=e),n}function ec(t,e){if(!c1(t))throw new pe(ne.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const u=t[r];if(s&&typeof u!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(o!==void 0&&u!==o.value){n=`Expected '${r}' field to equal '${o.value}'`;break}}if(n)throw new pe(ne.INVALID_ARGUMENT,n);return!0}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const zS=-62135596800,GS=1e6;class ht{static now(){return ht.fromMillis(Date.now())}static fromDate(e){return ht.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*GS);return new ht(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new pe(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new pe(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<zS)throw new pe(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new pe(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/GS}_compareTo(e){return this.seconds===e.seconds?ze(this.nanoseconds,e.nanoseconds):ze(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ht._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ec(e,ht._jsonSchema))return new ht(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-zS;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ht._jsonSchemaVersion="firestore/timestamp/1.0",ht._jsonSchema={type:Lt("string",ht._jsonSchemaVersion),seconds:Lt("number"),nanoseconds:Lt("number")};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class _e{static fromTimestamp(e){return new _e(e)}static min(){return new _e(new ht(0,0))}static max(){return new _e(new ht(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const qu=-1;function I3(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=_e.fromTimestamp(r===1e9?new ht(n+1,0):new ht(n,r));return new Os(s,Ee.empty(),e)}function k3(t){return new Os(t.readTime,t.key,qu)}class Os{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Os(_e.min(),Ee.empty(),qu)}static max(){return new Os(_e.max(),Ee.empty(),qu)}}function _3(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Ee.comparator(t.documentKey,e.documentKey),n!==0?n:ze(t.largestBatchId,e.largestBatchId))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const N3="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class A3{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function ll(t){if(t.code!==ne.FAILED_PRECONDITION||t.message!==N3)throw t;me("LocalStore","Unexpectedly lost primary lease")}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class oe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Te(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new oe(((r,s)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,s)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,s)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof oe?n:oe.resolve(n)}catch(n){return oe.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):oe.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):oe.reject(n)}static resolve(e){return new oe(((n,r)=>{n(e)}))}static reject(e){return new oe(((n,r)=>{r(e)}))}static waitFor(e){return new oe(((n,r)=>{let s=0,o=0,u=!1;e.forEach((d=>{++s,d.next((()=>{++o,u&&o===s&&n()}),(f=>r(f)))})),u=!0,o===s&&n()}))}static or(e){let n=oe.resolve(!1);for(const r of e)n=n.next((s=>s?oe.resolve(s):r()));return n}static forEach(e,n){const r=[];return e.forEach(((s,o)=>{r.push(n.call(this,s,o))})),this.waitFor(r)}static mapArray(e,n){return new oe(((r,s)=>{const o=e.length,u=new Array(o);let d=0;for(let f=0;f<o;f++){const p=f;n(e[p]).next((v=>{u[p]=v,++d,d===o&&r(u)}),(v=>s(v)))}}))}static doWhile(e,n){return new oe(((r,s)=>{const o=()=>{e()===!0?n().next((()=>{o()}),s):r()};o()}))}}function O3(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ul(t){return t.name==="IndexedDbTransactionError"}/**
* @license
* Copyright 2018 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Xh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Xh.ce=-1;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const sy=-1;function Qh(t){return t==null}function wh(t){return t===0&&1/t==-1/0}function P3(t){return typeof t=="number"&&Number.isInteger(t)&&!wh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const d1="";function R3(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=BS(e)),e=D3(t.get(n),e);return BS(e)}function D3(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const o=t.charAt(s);switch(o){case"\0":n+="";break;case d1:n+="";break;default:n+=o}}return n}function BS(t){return t+d1+""}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function $S(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Vs(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function h1(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class yt{constructor(e,n){this.comparator=e,this.root=n||tn.EMPTY}insert(e,n){return new yt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,tn.BLACK,null,null))}remove(e){return new yt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,tn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Bd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Bd(this.root,e,this.comparator,!1)}getReverseIterator(){return new Bd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Bd(this.root,e,this.comparator,!0)}}class Bd{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&s&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class tn{constructor(e,n,r,s,o){this.key=e,this.value=n,this.color=r??tn.RED,this.left=s??tn.EMPTY,this.right=o??tn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,o){return new tn(e??this.key,n??this.value,r??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const o=r(e,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(e,n,r),null):o===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return tn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return tn.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,tn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,tn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Te(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Te(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Te(27949);return e+(this.isRed()?0:1)}}tn.EMPTY=null,tn.RED=!0,tn.BLACK=!1;tn.EMPTY=new class{constructor(){this.size=0}get key(){throw Te(57766)}get value(){throw Te(16141)}get color(){throw Te(16727)}get left(){throw Te(29726)}get right(){throw Te(36894)}copy(t,e,n,r,s){return this}insert(t,e,n){return new tn(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class zt{constructor(e){this.comparator=e,this.data=new yt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new WS(this.data.getIterator())}getIteratorFrom(e){return new WS(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof zt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,o=r.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new zt(this.comparator);return n.data=e,n}}class WS{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Un{constructor(e){this.fields=e,e.sort(nn.comparator)}static empty(){return new Un([])}unionWith(e){let n=new zt(nn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Un(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Yo(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class f1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class rn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new f1("Invalid base64 string: "+s):s}})(e);return new rn(n)}static fromUint8Array(e){const n=(function(r){let s="";for(let o=0;o<r.length;++o)s+=String.fromCharCode(r[o]);return s})(e);return new rn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(e){return btoa(e)})(this.binaryString)}toUint8Array(){return(function(e){const n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ze(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}rn.EMPTY_BYTE_STRING=new rn("");const j3=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ps(t){if(Qe(!!t,39018),typeof t=="string"){let e=0;const n=j3.exec(t);if(Qe(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ct(t.seconds),nanos:Ct(t.nanos)}}function Ct(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Rs(t){return typeof t=="string"?rn.fromBase64String(t):rn.fromUint8Array(t)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const p1="server_timestamp",m1="__type__",g1="__previous_value__",y1="__local_write_time__";function ay(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)==null?void 0:e.fields)||{})[m1])==null?void 0:n.stringValue)===p1}function Zh(t){const e=t.mapValue.fields[g1];return ay(e)?Zh(e):e}function Hu(t){const e=Ps(t.mapValue.fields[y1].timestampValue);return new ht(e.seconds,e.nanos)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class M3{constructor(e,n,r,s,o,u,d,f,p,v){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=o,this.forceLongPolling=u,this.autoDetectLongPolling=d,this.longPollingOptions=f,this.useFetchStreams=p,this.isUsingEmulator=v}}const Eh="(default)";class zu{constructor(e,n){this.projectId=e,this.database=n||Eh}static empty(){return new zu("","")}get isDefaultDatabase(){return this.database===Eh}isEqual(e){return e instanceof zu&&e.projectId===this.projectId&&e.database===this.database}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const v1="__type__",L3="__max__",$d={mapValue:{}},b1="__vector__",Sh="value";function Ds(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?ay(t)?4:V3(t)?9007199254740991:U3(t)?10:11:Te(28295,{value:t})}function ii(t,e){if(t===e)return!0;const n=Ds(t);if(n!==Ds(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Hu(t).isEqual(Hu(e));case 3:return(function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const o=Ps(r.timestampValue),u=Ps(s.timestampValue);return o.seconds===u.seconds&&o.nanos===u.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(r,s){return Rs(r.bytesValue).isEqual(Rs(s.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(r,s){return Ct(r.geoPointValue.latitude)===Ct(s.geoPointValue.latitude)&&Ct(r.geoPointValue.longitude)===Ct(s.geoPointValue.longitude)})(t,e);case 2:return(function(r,s){if("integerValue"in r&&"integerValue"in s)return Ct(r.integerValue)===Ct(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const o=Ct(r.doubleValue),u=Ct(s.doubleValue);return o===u?wh(o)===wh(u):isNaN(o)&&isNaN(u)}return!1})(t,e);case 9:return Yo(t.arrayValue.values||[],e.arrayValue.values||[],ii);case 10:case 11:return(function(r,s){const o=r.mapValue.fields||{},u=s.mapValue.fields||{};if($S(o)!==$S(u))return!1;for(const d in o)if(o.hasOwnProperty(d)&&(u[d]===void 0||!ii(o[d],u[d])))return!1;return!0})(t,e);default:return Te(52216,{left:t})}}function Gu(t,e){return(t.values||[]).find((n=>ii(n,e)))!==void 0}function Xo(t,e){if(t===e)return 0;const n=Ds(t),r=Ds(e);if(n!==r)return ze(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ze(t.booleanValue,e.booleanValue);case 2:return(function(s,o){const u=Ct(s.integerValue||s.doubleValue),d=Ct(o.integerValue||o.doubleValue);return u<d?-1:u>d?1:u===d?0:isNaN(u)?isNaN(d)?0:-1:1})(t,e);case 3:return KS(t.timestampValue,e.timestampValue);case 4:return KS(Hu(t),Hu(e));case 5:return dg(t.stringValue,e.stringValue);case 6:return(function(s,o){const u=Rs(s),d=Rs(o);return u.compareTo(d)})(t.bytesValue,e.bytesValue);case 7:return(function(s,o){const u=s.split("/"),d=o.split("/");for(let f=0;f<u.length&&f<d.length;f++){const p=ze(u[f],d[f]);if(p!==0)return p}return ze(u.length,d.length)})(t.referenceValue,e.referenceValue);case 8:return(function(s,o){const u=ze(Ct(s.latitude),Ct(o.latitude));return u!==0?u:ze(Ct(s.longitude),Ct(o.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return JS(t.arrayValue,e.arrayValue);case 10:return(function(s,o){var u,d,f,p;const v=s.fields||{},w=o.fields||{},S=(u=v[Sh])==null?void 0:u.arrayValue,I=(d=w[Sh])==null?void 0:d.arrayValue,P=ze(((f=S==null?void 0:S.values)==null?void 0:f.length)||0,((p=I==null?void 0:I.values)==null?void 0:p.length)||0);return P!==0?P:JS(S,I)})(t.mapValue,e.mapValue);case 11:return(function(s,o){if(s===$d.mapValue&&o===$d.mapValue)return 0;if(s===$d.mapValue)return 1;if(o===$d.mapValue)return-1;const u=s.fields||{},d=Object.keys(u),f=o.fields||{},p=Object.keys(f);d.sort(),p.sort();for(let v=0;v<d.length&&v<p.length;++v){const w=dg(d[v],p[v]);if(w!==0)return w;const S=Xo(u[d[v]],f[p[v]]);if(S!==0)return S}return ze(d.length,p.length)})(t.mapValue,e.mapValue);default:throw Te(23264,{he:n})}}function KS(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ze(t,e);const n=Ps(t),r=Ps(e),s=ze(n.seconds,r.seconds);return s!==0?s:ze(n.nanos,r.nanos)}function JS(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const o=Xo(n[s],r[s]);if(o)return o}return ze(n.length,r.length)}function Qo(t){return hg(t)}function hg(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(e){const n=Ps(e);return`time(${n.seconds},${n.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(e){return Rs(e).toBase64()})(t.bytesValue):"referenceValue"in t?(function(e){return Ee.fromName(e).toString()})(t.referenceValue):"geoPointValue"in t?(function(e){return`geo(${e.latitude},${e.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(e){let n="[",r=!0;for(const s of e.values||[])r?r=!1:n+=",",n+=hg(s);return n+"]"})(t.arrayValue):"mapValue"in t?(function(e){const n=Object.keys(e.fields||{}).sort();let r="{",s=!0;for(const o of n)s?s=!1:r+=",",r+=`${o}:${hg(e.fields[o])}`;return r+"}"})(t.mapValue):Te(61005,{value:t})}function rh(t){switch(Ds(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Zh(t);return e?16+rh(e):16;case 5:return 2*t.stringValue.length;case 6:return Rs(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(n){return(n.values||[]).reduce(((r,s)=>r+rh(s)),0)})(t.arrayValue);case 10:case 11:return(function(n){let r=0;return Vs(n.fields,((s,o)=>{r+=s.length+rh(o)})),r})(t.mapValue);default:throw Te(13486,{value:t})}}function YS(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function fg(t){return!!t&&"integerValue"in t}function oy(t){return!!t&&"arrayValue"in t}function XS(t){return!!t&&"nullValue"in t}function QS(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ih(t){return!!t&&"mapValue"in t}function U3(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)==null?void 0:e.fields)||{})[v1])==null?void 0:n.stringValue)===b1}function Ou(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Vs(t.mapValue.fields,((n,r)=>e.mapValue.fields[n]=Ou(r))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ou(t.arrayValue.values[n]);return e}return{...t}}function V3(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===L3}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class In{constructor(e){this.value=e}static empty(){return new In({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!ih(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ou(n)}setAll(e){let n=nn.emptyPath(),r={},s=[];e.forEach(((u,d)=>{if(!n.isImmediateParentOf(d)){const f=this.getFieldsMap(n);this.applyChanges(f,r,s),r={},s=[],n=d.popLast()}u?r[d.lastSegment()]=Ou(u):s.push(d.lastSegment())}));const o=this.getFieldsMap(n);this.applyChanges(o,r,s)}delete(e){const n=this.field(e.popLast());ih(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ii(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];ih(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Vs(n,((s,o)=>e[s]=o));for(const s of r)delete e[s]}clone(){return new In(Ou(this.value))}}function w1(t){const e=[];return Vs(t.fields,((n,r)=>{const s=new nn([n]);if(ih(r)){const o=w1(r.mapValue).fields;if(o.length===0)e.push(s);else for(const u of o)e.push(s.child(u))}else e.push(s)})),new Un(e)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class un{constructor(e,n,r,s,o,u,d){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=o,this.data=u,this.documentState=d}static newInvalidDocument(e){return new un(e,0,_e.min(),_e.min(),_e.min(),In.empty(),0)}static newFoundDocument(e,n,r,s){return new un(e,1,n,_e.min(),r,s,0)}static newNoDocument(e,n){return new un(e,2,n,_e.min(),_e.min(),In.empty(),0)}static newUnknownDocument(e,n){return new un(e,3,n,_e.min(),_e.min(),In.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(_e.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=In.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=In.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=_e.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof un&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new un(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class xh{constructor(e,n){this.position=e,this.inclusive=n}}function ZS(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const o=e[s],u=t.position[s];if(o.field.isKeyField()?r=Ee.comparator(Ee.fromName(u.referenceValue),n.key):r=Xo(u,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function ex(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ii(t.position[n],e.position[n]))return!1;return!0}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Bu{constructor(e,n="asc"){this.field=e,this.dir=n}}function F3(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class E1{}class Mt extends E1{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new H3(e,n,r):n==="array-contains"?new B3(e,r):n==="in"?new $3(e,r):n==="not-in"?new W3(e,r):n==="array-contains-any"?new K3(e,r):new Mt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new z3(e,r):new G3(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Xo(n,this.value)):n!==null&&Ds(this.value)===Ds(n)&&this.matchesComparison(Xo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Te(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Tr extends E1{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Tr(e,n)}matches(e){return S1(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function S1(t){return t.op==="and"}function x1(t){return q3(t)&&S1(t)}function q3(t){for(const e of t.filters)if(e instanceof Tr)return!1;return!0}function pg(t){if(t instanceof Mt)return t.field.canonicalString()+t.op.toString()+Qo(t.value);if(x1(t))return t.filters.map((e=>pg(e))).join(",");{const e=t.filters.map((n=>pg(n))).join(",");return`${t.op}(${e})`}}function T1(t,e){return t instanceof Mt?(function(n,r){return r instanceof Mt&&n.op===r.op&&n.field.isEqual(r.field)&&ii(n.value,r.value)})(t,e):t instanceof Tr?(function(n,r){return r instanceof Tr&&n.op===r.op&&n.filters.length===r.filters.length?n.filters.reduce(((s,o,u)=>s&&T1(o,r.filters[u])),!0):!1})(t,e):void Te(19439)}function C1(t){return t instanceof Mt?(function(e){return`${e.field.canonicalString()} ${e.op} ${Qo(e.value)}`})(t):t instanceof Tr?(function(e){return e.op.toString()+" {"+e.getFilters().map(C1).join(" ,")+"}"})(t):"Filter"}class H3 extends Mt{constructor(e,n,r){super(e,n,r),this.key=Ee.fromName(r.referenceValue)}matches(e){const n=Ee.comparator(e.key,this.key);return this.matchesComparison(n)}}class z3 extends Mt{constructor(e,n){super(e,"in",n),this.keys=I1("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class G3 extends Mt{constructor(e,n){super(e,"not-in",n),this.keys=I1("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function I1(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map((r=>Ee.fromName(r.referenceValue)))}class B3 extends Mt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return oy(n)&&Gu(n.arrayValue,this.value)}}class $3 extends Mt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Gu(this.value.arrayValue,n)}}class W3 extends Mt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Gu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Gu(this.value.arrayValue,n)}}class K3 extends Mt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!oy(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>Gu(this.value.arrayValue,r)))}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class J3{constructor(e,n=null,r=[],s=[],o=null,u=null,d=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=o,this.startAt=u,this.endAt=d,this.Te=null}}function tx(t,e=null,n=[],r=[],s=null,o=null,u=null){return new J3(t,e,n,r,s,o,u)}function ly(t){const e=Ae(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>pg(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(s){return s.field.canonicalString()+s.dir})(r))).join(","),Qh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>Qo(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>Qo(r))).join(",")),e.Te=n}return e.Te}function uy(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!F3(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!T1(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!ex(t.startAt,e.startAt)&&ex(t.endAt,e.endAt)}function mg(t){return Ee.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class cl{constructor(e,n=null,r=[],s=[],o=null,u="F",d=null,f=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=o,this.limitType=u,this.startAt=d,this.endAt=f,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Y3(t,e,n,r,s,o,u,d){return new cl(t,e,n,r,s,o,u,d)}function k1(t){return new cl(t)}function nx(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function _1(t){return t.collectionGroup!==null}function Pu(t){const e=Ae(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let o=new zt(nn.comparator);return s.filters.forEach((u=>{u.getFlattenedFilters().forEach((d=>{d.isInequality()&&(o=o.add(d.field))}))})),o})(e).forEach((s=>{n.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new Bu(s,r))})),n.has(nn.keyField().canonicalString())||e.Ie.push(new Bu(nn.keyField(),r))}return e.Ie}function Xr(t){const e=Ae(t);return e.Ee||(e.Ee=X3(e,Pu(t))),e.Ee}function X3(t,e){if(t.limitType==="F")return tx(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((s=>{const o=s.dir==="desc"?"asc":"desc";return new Bu(s.field,o)}));const n=t.endAt?new xh(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new xh(t.startAt.position,t.startAt.inclusive):null;return tx(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function gg(t,e){const n=t.filters.concat([e]);return new cl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function yg(t,e,n){return new cl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ef(t,e){return uy(Xr(t),Xr(e))&&t.limitType===e.limitType}function N1(t){return`${ly(Xr(t))}|lt:${t.limitType}`}function Do(t){return`Query(target=${(function(e){let n=e.path.canonicalString();return e.collectionGroup!==null&&(n+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(n+=`, filters: [${e.filters.map((r=>C1(r))).join(", ")}]`),Qh(e.limit)||(n+=", limit: "+e.limit),e.orderBy.length>0&&(n+=`, orderBy: [${e.orderBy.map((r=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(r))).join(", ")}]`),e.startAt&&(n+=", startAt: ",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>Qo(r))).join(",")),e.endAt&&(n+=", endAt: ",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>Qo(r))).join(",")),`Target(${n})`})(Xr(t))}; limitType=${t.limitType})`}function tf(t,e){return e.isFoundDocument()&&(function(n,r){const s=r.key.path;return n.collectionGroup!==null?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(s):Ee.isDocumentKey(n.path)?n.path.isEqual(s):n.path.isImmediateParentOf(s)})(t,e)&&(function(n,r){for(const s of Pu(n))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0})(t,e)&&(function(n,r){for(const s of n.filters)if(!s.matches(r))return!1;return!0})(t,e)&&(function(n,r){return!(n.startAt&&!(function(s,o,u){const d=ZS(s,o,u);return s.inclusive?d<=0:d<0})(n.startAt,Pu(n),r)||n.endAt&&!(function(s,o,u){const d=ZS(s,o,u);return s.inclusive?d>=0:d>0})(n.endAt,Pu(n),r))})(t,e)}function Q3(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function A1(t){return(e,n)=>{let r=!1;for(const s of Pu(t)){const o=Z3(s,e,n);if(o!==0)return o;r=r||s.field.isKeyField()}return 0}}function Z3(t,e,n){const r=t.field.isKeyField()?Ee.comparator(e.key,n.key):(function(s,o,u){const d=o.data.field(s),f=u.data.field(s);return d!==null&&f!==null?Xo(d,f):Te(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Te(19790,{direction:t.dir})}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class La{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,o]of r)if(this.equalsFn(s,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return void(s[o]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Vs(this.inner,((n,r)=>{for(const[s,o]of r)e(s,o)}))}isEmpty(){return h1(this.inner)}size(){return this.innerSize}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const e6=new yt(Ee.comparator);function ji(){return e6}const O1=new yt(Ee.comparator);function Iu(...t){let e=O1;for(const n of t)e=e.insert(n.key,n);return e}function P1(t){let e=O1;return t.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function xa(){return Ru()}function R1(){return Ru()}function Ru(){return new La((t=>t.toString()),((t,e)=>t.isEqual(e)))}const t6=new yt(Ee.comparator),n6=new zt(Ee.comparator);function Ge(...t){let e=n6;for(const n of t)e=e.add(n);return e}const r6=new zt(ze);function i6(){return r6}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function cy(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:wh(e)?"-0":e}}function D1(t){return{integerValue:""+t}}function s6(t,e){return P3(e)?D1(e):cy(t,e)}/**
* @license
* Copyright 2018 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class nf{constructor(){this._=void 0}}function a6(t,e,n){return t instanceof Th?(function(r,s){const o={fields:{[m1]:{stringValue:p1},[y1]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&ay(s)&&(s=Zh(s)),s&&(o.fields[g1]=s),{mapValue:o}})(n,e):t instanceof $u?M1(t,e):t instanceof Wu?L1(t,e):(function(r,s){const o=j1(r,s),u=rx(o)+rx(r.Ae);return fg(o)&&fg(r.Ae)?D1(u):cy(r.serializer,u)})(t,e)}function o6(t,e,n){return t instanceof $u?M1(t,e):t instanceof Wu?L1(t,e):n}function j1(t,e){return t instanceof Ch?(function(n){return fg(n)||(function(r){return!!r&&"doubleValue"in r})(n)})(e)?e:{integerValue:0}:null}class Th extends nf{}class $u extends nf{constructor(e){super(),this.elements=e}}function M1(t,e){const n=U1(e);for(const r of t.elements)n.some((s=>ii(s,r)))||n.push(r);return{arrayValue:{values:n}}}class Wu extends nf{constructor(e){super(),this.elements=e}}function L1(t,e){let n=U1(e);for(const r of t.elements)n=n.filter((s=>!ii(s,r)));return{arrayValue:{values:n}}}class Ch extends nf{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function rx(t){return Ct(t.integerValue||t.doubleValue)}function U1(t){return oy(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function l6(t,e){return t.field.isEqual(e.field)&&(function(n,r){return n instanceof $u&&r instanceof $u||n instanceof Wu&&r instanceof Wu?Yo(n.elements,r.elements,ii):n instanceof Ch&&r instanceof Ch?ii(n.Ae,r.Ae):n instanceof Th&&r instanceof Th})(t.transform,e.transform)}class u6{constructor(e,n){this.version=e,this.transformResults=n}}class Sr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Sr}static exists(e){return new Sr(void 0,e)}static updateTime(e){return new Sr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function sh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class rf{}function V1(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new dy(t.key,Sr.none()):new tc(t.key,t.data,Sr.none());{const n=t.data,r=In.empty();let s=new zt(nn.comparator);for(let o of e.fields)if(!s.has(o)){let u=n.field(o);u===null&&o.length>1&&(o=o.popLast(),u=n.field(o)),u===null?r.delete(o):r.set(o,u),s=s.add(o)}return new Fs(t.key,r,new Un(s.toArray()),Sr.none())}}function c6(t,e,n){t instanceof tc?(function(r,s,o){const u=r.value.clone(),d=sx(r.fieldTransforms,s,o.transformResults);u.setAll(d),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()})(t,e,n):t instanceof Fs?(function(r,s,o){if(!sh(r.precondition,s))return void s.convertToUnknownDocument(o.version);const u=sx(r.fieldTransforms,s,o.transformResults),d=s.data;d.setAll(F1(r)),d.setAll(u),s.convertToFoundDocument(o.version,d).setHasCommittedMutations()})(t,e,n):(function(r,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,n)}function Du(t,e,n,r){return t instanceof tc?(function(s,o,u,d){if(!sh(s.precondition,o))return u;const f=s.value.clone(),p=ax(s.fieldTransforms,d,o);return f.setAll(p),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),null})(t,e,n,r):t instanceof Fs?(function(s,o,u,d){if(!sh(s.precondition,o))return u;const f=ax(s.fieldTransforms,d,o),p=o.data;return p.setAll(F1(s)),p.setAll(f),o.convertToFoundDocument(o.version,p).setHasLocalMutations(),u===null?null:u.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map((v=>v.field)))})(t,e,n,r):(function(s,o,u){return sh(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):u})(t,e,n)}function d6(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),o=j1(r.transform,s||null);o!=null&&(n===null&&(n=In.empty()),n.set(r.field,o))}return n||null}function ix(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(n,r){return n===void 0&&r===void 0||!(!n||!r)&&Yo(n,r,((s,o)=>l6(s,o)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class tc extends rf{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Fs extends rf{constructor(e,n,r,s,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function F1(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function sx(t,e,n){const r=new Map;Qe(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const o=t[s],u=o.transform,d=e.data.field(o.field);r.set(o.field,o6(u,d,n[s]))}return r}function ax(t,e,n){const r=new Map;for(const s of t){const o=s.transform,u=n.data.field(s.field);r.set(s.field,a6(o,u,e))}return r}class dy extends rf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class h6 extends rf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class f6{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(e.key)&&c6(o,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Du(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Du(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=R1();return this.mutations.forEach((s=>{const o=e.get(s.key),u=o.overlayedDocument;let d=this.applyToLocalView(u,o.mutatedFields);d=n.has(s.key)?null:d;const f=V1(u,d);f!==null&&r.set(s.key,f),u.isValidDocument()||u.convertToNoDocument(_e.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Ge())}isEqual(e){return this.batchId===e.batchId&&Yo(this.mutations,e.mutations,((n,r)=>ix(n,r)))&&Yo(this.baseMutations,e.baseMutations,((n,r)=>ix(n,r)))}}class hy{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Qe(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=(function(){return t6})();const o=e.mutations;for(let u=0;u<o.length;u++)s=s.insert(o[u].key,r[u].version);return new hy(e,n,r,s)}}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class p6{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class m6{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var jt,We;function g6(t){switch(t){case ne.OK:return Te(64938);case ne.CANCELLED:case ne.UNKNOWN:case ne.DEADLINE_EXCEEDED:case ne.RESOURCE_EXHAUSTED:case ne.INTERNAL:case ne.UNAVAILABLE:case ne.UNAUTHENTICATED:return!1;case ne.INVALID_ARGUMENT:case ne.NOT_FOUND:case ne.ALREADY_EXISTS:case ne.PERMISSION_DENIED:case ne.FAILED_PRECONDITION:case ne.ABORTED:case ne.OUT_OF_RANGE:case ne.UNIMPLEMENTED:case ne.DATA_LOSS:return!0;default:return Te(15467,{code:t})}}function q1(t){if(t===void 0)return Di("GRPC error has no .code"),ne.UNKNOWN;switch(t){case jt.OK:return ne.OK;case jt.CANCELLED:return ne.CANCELLED;case jt.UNKNOWN:return ne.UNKNOWN;case jt.DEADLINE_EXCEEDED:return ne.DEADLINE_EXCEEDED;case jt.RESOURCE_EXHAUSTED:return ne.RESOURCE_EXHAUSTED;case jt.INTERNAL:return ne.INTERNAL;case jt.UNAVAILABLE:return ne.UNAVAILABLE;case jt.UNAUTHENTICATED:return ne.UNAUTHENTICATED;case jt.INVALID_ARGUMENT:return ne.INVALID_ARGUMENT;case jt.NOT_FOUND:return ne.NOT_FOUND;case jt.ALREADY_EXISTS:return ne.ALREADY_EXISTS;case jt.PERMISSION_DENIED:return ne.PERMISSION_DENIED;case jt.FAILED_PRECONDITION:return ne.FAILED_PRECONDITION;case jt.ABORTED:return ne.ABORTED;case jt.OUT_OF_RANGE:return ne.OUT_OF_RANGE;case jt.UNIMPLEMENTED:return ne.UNIMPLEMENTED;case jt.DATA_LOSS:return ne.DATA_LOSS;default:return Te(39323,{code:t})}}(We=jt||(jt={}))[We.OK=0]="OK",We[We.CANCELLED=1]="CANCELLED",We[We.UNKNOWN=2]="UNKNOWN",We[We.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",We[We.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",We[We.NOT_FOUND=5]="NOT_FOUND",We[We.ALREADY_EXISTS=6]="ALREADY_EXISTS",We[We.PERMISSION_DENIED=7]="PERMISSION_DENIED",We[We.UNAUTHENTICATED=16]="UNAUTHENTICATED",We[We.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",We[We.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",We[We.ABORTED=10]="ABORTED",We[We.OUT_OF_RANGE=11]="OUT_OF_RANGE",We[We.UNIMPLEMENTED=12]="UNIMPLEMENTED",We[We.INTERNAL=13]="INTERNAL",We[We.UNAVAILABLE=14]="UNAVAILABLE",We[We.DATA_LOSS=15]="DATA_LOSS";/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function y6(){return new TextEncoder}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const v6=new ks([4294967295,4294967295],0);function ox(t){const e=y6().encode(t),n=new t1;return n.update(e),new Uint8Array(n.digest())}function lx(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new ks([n,r],0),new ks([s,o],0)]}class fy{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ku(`Invalid padding: ${n}`);if(r<0)throw new ku(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ku(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ku(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=ks.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(ks.fromNumber(r)));return s.compare(v6)===1&&(s=new ks([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=ox(e),[r,s]=lx(n);for(let o=0;o<this.hashCount;o++){const u=this.ye(r,s,o);if(!this.we(u))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),u=new fy(o,s,n);return r.forEach((d=>u.insert(d))),u}insert(e){if(this.ge===0)return;const n=ox(e),[r,s]=lx(n);for(let o=0;o<this.hashCount;o++){const u=this.ye(r,s,o);this.Se(u)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class ku extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class sf{constructor(e,n,r,s,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,nc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new sf(_e.min(),s,new yt(ze),ji(),Ge())}}class nc{constructor(e,n,r,s,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new nc(r,n,Ge(),Ge(),Ge())}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ah{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class H1{constructor(e,n){this.targetId=e,this.Ce=n}}class z1{constructor(e,n,r=rn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class ux{constructor(){this.ve=0,this.Fe=cx(),this.Me=rn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ge(),n=Ge(),r=Ge();return this.Fe.forEach(((s,o)=>{switch(o){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:Te(38017,{changeType:o})}})),new nc(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=cx()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Qe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class b6{constructor(e){this.Ge=e,this.ze=new Map,this.je=ji(),this.Je=Wd(),this.He=Wd(),this.Ye=new yt(ze)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:Te(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,s)=>{this.rt(s)&&n(s)}))}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const o=s.target;if(mg(o))if(r===0){const u=new Ee(o.path);this.et(n,u,un.newNoDocument(u,_e.min()))}else Qe(r===1,20013,{expectedCount:r});else{const u=this._t(n);if(u!==r){const d=this.ut(e),f=d?this.ct(d,e,u):1;if(f!==0){this.it(n);const p=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,p)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:o=0}=n;let u,d;try{u=Rs(r).toUint8Array()}catch(f){if(f instanceof f1)return Jo("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{d=new fy(u,s,o)}catch(f){return Jo(f instanceof ku?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return d.ge===0?null:d}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach((o=>{const u=this.Ge.ht(),d=`projects/${u.projectId}/databases/${u.database}/documents/${o.path.canonicalString()}`;e.mightContain(d)||(this.et(n,o,null),s++)})),s}Tt(e){const n=new Map;this.ze.forEach(((o,u)=>{const d=this.ot(u);if(d){if(o.current&&mg(d.target)){const f=new Ee(d.target.path);this.It(f).has(u)||this.Et(u,f)||this.et(u,f,un.newNoDocument(f,e))}o.Be&&(n.set(u,o.ke()),o.qe())}}));let r=Ge();this.He.forEach(((o,u)=>{let d=!0;u.forEachWhile((f=>{const p=this.ot(f);return!p||p.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(r=r.add(o))})),this.je.forEach(((o,u)=>u.setReadTime(e)));const s=new sf(e,n,this.Ye,this.je,r);return this.je=ji(),this.Je=Wd(),this.He=Wd(),this.Ye=new yt(ze),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new ux,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new zt(ze),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new zt(ze),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||me("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new ux),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Wd(){return new yt(Ee.comparator)}function cx(){return new yt(Ee.comparator)}const w6={asc:"ASCENDING",desc:"DESCENDING"},E6={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},S6={and:"AND",or:"OR"};class x6{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function vg(t,e){return t.useProto3Json||Qh(e)?e:{value:e}}function Ih(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function G1(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function T6(t,e){return Ih(t,e.toTimestamp())}function Qr(t){return Qe(!!t,49232),_e.fromTimestamp((function(e){const n=Ps(e);return new ht(n.seconds,n.nanos)})(t))}function py(t,e){return bg(t,e).canonicalString()}function bg(t,e){const n=(function(r){return new ut(["projects",r.projectId,"databases",r.database])})(t).child("documents");return e===void 0?n:n.child(e)}function B1(t){const e=ut.fromString(t);return Qe(Y1(e),10190,{key:e.toString()}),e}function wg(t,e){return py(t.databaseId,e.path)}function Am(t,e){const n=B1(e);if(n.get(1)!==t.databaseId.projectId)throw new pe(ne.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new pe(ne.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Ee(W1(n))}function $1(t,e){return py(t.databaseId,e)}function C6(t){const e=B1(t);return e.length===4?ut.emptyPath():W1(e)}function Eg(t){return new ut(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function W1(t){return Qe(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function dx(t,e,n){return{name:wg(t,e),fields:n.value.mapValue.fields}}function I6(t,e){let n;if("targetChange"in e){e.targetChange;const r=(function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:Te(39313,{state:f})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],o=(function(f,p){return f.useProto3Json?(Qe(p===void 0||typeof p=="string",58123),rn.fromBase64String(p||"")):(Qe(p===void 0||p instanceof Buffer||p instanceof Uint8Array,16193),rn.fromUint8Array(p||new Uint8Array))})(t,e.targetChange.resumeToken),u=e.targetChange.cause,d=u&&(function(f){const p=f.code===void 0?ne.UNKNOWN:q1(f.code);return new pe(p,f.message||"")})(u);n=new z1(r,s,o,d||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Am(t,r.document.name),o=Qr(r.document.updateTime),u=r.document.createTime?Qr(r.document.createTime):_e.min(),d=new In({mapValue:{fields:r.document.fields}}),f=un.newFoundDocument(s,o,u,d),p=r.targetIds||[],v=r.removedTargetIds||[];n=new ah(p,v,f.key,f)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Am(t,r.document),o=r.readTime?Qr(r.readTime):_e.min(),u=un.newNoDocument(s,o),d=r.removedTargetIds||[];n=new ah([],d,u.key,u)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Am(t,r.document),o=r.removedTargetIds||[];n=new ah([],o,s,null)}else{if(!("filter"in e))return Te(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:o}=r,u=new m6(s,o),d=r.targetId;n=new H1(d,u)}}return n}function k6(t,e){let n;if(e instanceof tc)n={update:dx(t,e.key,e.value)};else if(e instanceof dy)n={delete:wg(t,e.key)};else if(e instanceof Fs)n={update:dx(t,e.key,e.data),updateMask:M6(e.fieldMask)};else{if(!(e instanceof h6))return Te(16599,{Vt:e.type});n={verify:wg(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(s,o){const u=o.transform;if(u instanceof Th)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof $u)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Wu)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Ch)return{fieldPath:o.field.canonicalString(),increment:u.Ae};throw Te(20930,{transform:o.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(r,s){return s.updateTime!==void 0?{updateTime:T6(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Te(27497)})(t,e.precondition)),n}function _6(t,e){return t&&t.length>0?(Qe(e!==void 0,14353),t.map((n=>(function(r,s){let o=r.updateTime?Qr(r.updateTime):Qr(s);return o.isEqual(_e.min())&&(o=Qr(s)),new u6(o,r.transformResults||[])})(n,e)))):[]}function N6(t,e){return{documents:[$1(t,e.path)]}}function A6(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=$1(t,s);const o=(function(f){if(f.length!==0)return J1(Tr.create(f,"and"))})(e.filters);o&&(n.structuredQuery.where=o);const u=(function(f){if(f.length!==0)return f.map((p=>(function(v){return{field:jo(v.field),direction:R6(v.dir)}})(p)))})(e.orderBy);u&&(n.structuredQuery.orderBy=u);const d=vg(t,e.limit);return d!==null&&(n.structuredQuery.limit=d),e.startAt&&(n.structuredQuery.startAt=(function(f){return{before:f.inclusive,values:f.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(f){return{before:!f.inclusive,values:f.position}})(e.endAt)),{ft:n,parent:s}}function O6(t){let e=C6(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Qe(r===1,65062);const v=n.from[0];v.allDescendants?s=v.collectionId:e=e.child(v.collectionId)}let o=[];n.where&&(o=(function(v){const w=K1(v);return w instanceof Tr&&x1(w)?w.getFilters():[w]})(n.where));let u=[];n.orderBy&&(u=(function(v){return v.map((w=>(function(S){return new Bu(Mo(S.field),(function(I){switch(I){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(S.direction))})(w)))})(n.orderBy));let d=null;n.limit&&(d=(function(v){let w;return w=typeof v=="object"?v.value:v,Qh(w)?null:w})(n.limit));let f=null;n.startAt&&(f=(function(v){const w=!!v.before,S=v.values||[];return new xh(S,w)})(n.startAt));let p=null;return n.endAt&&(p=(function(v){const w=!v.before,S=v.values||[];return new xh(S,w)})(n.endAt)),Y3(e,s,u,o,d,"F",f,p)}function P6(t,e){const n=(function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Te(28987,{purpose:r})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function K1(t){return t.unaryFilter!==void 0?(function(e){switch(e.unaryFilter.op){case"IS_NAN":const n=Mo(e.unaryFilter.field);return Mt.create(n,"==",{doubleValue:NaN});case"IS_NULL":const r=Mo(e.unaryFilter.field);return Mt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Mo(e.unaryFilter.field);return Mt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Mo(e.unaryFilter.field);return Mt.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Te(61313);default:return Te(60726)}})(t):t.fieldFilter!==void 0?(function(e){return Mt.create(Mo(e.fieldFilter.field),(function(n){switch(n){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Te(58110);default:return Te(50506)}})(e.fieldFilter.op),e.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(e){return Tr.create(e.compositeFilter.filters.map((n=>K1(n))),(function(n){switch(n){case"AND":return"and";case"OR":return"or";default:return Te(1026)}})(e.compositeFilter.op))})(t):Te(30097,{filter:t})}function R6(t){return w6[t]}function D6(t){return E6[t]}function j6(t){return S6[t]}function jo(t){return{fieldPath:t.canonicalString()}}function Mo(t){return nn.fromServerFormat(t.fieldPath)}function J1(t){return t instanceof Mt?(function(e){if(e.op==="=="){if(QS(e.value))return{unaryFilter:{field:jo(e.field),op:"IS_NAN"}};if(XS(e.value))return{unaryFilter:{field:jo(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(QS(e.value))return{unaryFilter:{field:jo(e.field),op:"IS_NOT_NAN"}};if(XS(e.value))return{unaryFilter:{field:jo(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:jo(e.field),op:D6(e.op),value:e.value}}})(t):t instanceof Tr?(function(e){const n=e.getFilters().map((r=>J1(r)));return n.length===1?n[0]:{compositeFilter:{op:j6(e.op),filters:n}}})(t):Te(54877,{filter:t})}function M6(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function Y1(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Ts{constructor(e,n,r,s,o=_e.min(),u=_e.min(),d=rn.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=d,this.expectedCount=f}withSequenceNumber(e){return new Ts(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ts(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ts(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ts(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class L6{constructor(e){this.yt=e}}function U6(t){const e=O6({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?yg(e,e.limit,"L"):e}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class V6{constructor(){this.Cn=new F6}addToCollectionParentIndex(e,n){return this.Cn.add(n),oe.resolve()}getCollectionParents(e,n){return oe.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return oe.resolve()}deleteFieldIndex(e,n){return oe.resolve()}deleteAllFieldIndexes(e){return oe.resolve()}createTargetIndexes(e,n){return oe.resolve()}getDocumentsMatchingTarget(e,n){return oe.resolve(null)}getIndexType(e,n){return oe.resolve(0)}getFieldIndexes(e,n){return oe.resolve([])}getNextCollectionGroupToUpdate(e){return oe.resolve(null)}getMinOffset(e,n){return oe.resolve(Os.min())}getMinOffsetFromCollectionGroup(e,n){return oe.resolve(Os.min())}updateCollectionGroup(e,n,r){return oe.resolve()}updateIndexEntries(e,n){return oe.resolve()}}class F6{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new zt(ut.comparator),o=!s.has(r);return this.index[n]=s.add(r),o}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new zt(ut.comparator)).toArray()}}/**
* @license
* Copyright 2018 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const hx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},X1=41943040;class Cn{static withCacheSize(e){return new Cn(e,Cn.DEFAULT_COLLECTION_PERCENTILE,Cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/Cn.DEFAULT_COLLECTION_PERCENTILE=10,Cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Cn.DEFAULT=new Cn(X1,Cn.DEFAULT_COLLECTION_PERCENTILE,Cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Cn.DISABLED=new Cn(-1,0,0);/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Zo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Zo(0)}static cr(){return new Zo(-1)}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const fx="LruGarbageCollector",q6=1048576;function px([t,e],[n,r]){const s=ze(t,n);return s===0?ze(e,r):s}class H6{constructor(e){this.Ir=e,this.buffer=new zt(px),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();px(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class z6{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){me(fx,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ul(n)?me(fx,"Ignoring IndexedDB error during garbage collection: ",n):await ll(n)}await this.Vr(3e5)}))}}class G6{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return oe.resolve(Xh.ce);const r=new H6(n);return this.mr.forEachTarget(e,(s=>r.Ar(s.sequenceNumber))).next((()=>this.mr.pr(e,(s=>r.Ar(s))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(me("LruGarbageCollector","Garbage collection skipped; disabled"),oe.resolve(hx)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(me("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),hx):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,o,u,d,f,p;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((w=>(w>this.params.maximumSequenceNumbersToCollect?(me("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),s=this.params.maximumSequenceNumbersToCollect):s=w,u=Date.now(),this.nthSequenceNumber(e,s)))).next((w=>(r=w,d=Date.now(),this.removeTargets(e,r,n)))).next((w=>(o=w,f=Date.now(),this.removeOrphanedDocuments(e,r)))).next((w=>(p=Date.now(),Ro()<=He.DEBUG&&me("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-v}ms
	Determined least recently used ${s} in `+(d-u)+`ms
	Removed ${o} targets in `+(f-d)+`ms
	Removed ${w} documents in `+(p-f)+`ms
Total Duration: ${p-v}ms`),oe.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:o,documentsRemoved:w}))))}}function B6(t,e){return new G6(t,e)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class $6{constructor(){this.changes=new La((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,un.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?oe.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*//**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class W6{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class K6{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((s=>(r=s,this.remoteDocumentCache.getEntry(e,n)))).next((s=>(r!==null&&Du(r.mutation,s,Un.empty(),ht.now()),s)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,Ge()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=Ge()){const s=xa();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,r).next((o=>{let u=Iu();return o.forEach(((d,f)=>{u=u.insert(d,f.overlayedDocument)})),u}))))}getOverlayedDocuments(e,n){const r=xa();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,Ge())))}populateOverlays(e,n,r){const s=[];return r.forEach((o=>{n.has(o)||s.push(o)})),this.documentOverlayCache.getOverlays(e,s).next((o=>{o.forEach(((u,d)=>{n.set(u,d)}))}))}computeViews(e,n,r,s){let o=ji();const u=Ru(),d=(function(){return Ru()})();return n.forEach(((f,p)=>{const v=r.get(p.key);s.has(p.key)&&(v===void 0||v.mutation instanceof Fs)?o=o.insert(p.key,p):v!==void 0?(u.set(p.key,v.mutation.getFieldMask()),Du(v.mutation,p,v.mutation.getFieldMask(),ht.now())):u.set(p.key,Un.empty())})),this.recalculateAndSaveOverlays(e,o).next((f=>(f.forEach(((p,v)=>u.set(p,v))),n.forEach(((p,v)=>d.set(p,new W6(v,u.get(p)??null)))),d)))}recalculateAndSaveOverlays(e,n){const r=Ru();let s=new yt(((u,d)=>u-d)),o=Ge();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((u=>{for(const d of u)d.keys().forEach((f=>{const p=n.get(f);if(p===null)return;let v=r.get(f)||Un.empty();v=d.applyToLocalView(p,v),r.set(f,v);const w=(s.get(d.batchId)||Ge()).add(f);s=s.insert(d.batchId,w)}))})).next((()=>{const u=[],d=s.getReverseIterator();for(;d.hasNext();){const f=d.getNext(),p=f.key,v=f.value,w=R1();v.forEach((S=>{if(!o.has(S)){const I=V1(n.get(S),r.get(S));I!==null&&w.set(S,I),o=o.add(S)}})),u.push(this.documentOverlayCache.saveOverlays(e,p,w))}return oe.waitFor(u)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,s){return(function(o){return Ee.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):_1(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next((o=>{const u=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-o.size):oe.resolve(xa());let d=qu,f=o;return u.next((p=>oe.forEach(p,((v,w)=>(d<w.largestBatchId&&(d=w.largestBatchId),o.get(v)?oe.resolve():this.remoteDocumentCache.getEntry(e,v).next((S=>{f=f.insert(v,S)}))))).next((()=>this.populateOverlays(e,p,o))).next((()=>this.computeViews(e,f,p,Ge()))).next((v=>({batchId:d,changes:P1(v)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ee(n)).next((r=>{let s=Iu();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const o=n.collectionGroup;let u=Iu();return this.indexManager.getCollectionParents(e,o).next((d=>oe.forEach(d,(f=>{const p=(function(v,w){return new cl(w,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)})(n,f.child(o));return this.getDocumentsMatchingCollectionQuery(e,p,r,s).next((v=>{v.forEach(((w,S)=>{u=u.insert(w,S)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,n,r,s){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((u=>(o=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,s)))).next((u=>{o.forEach(((f,p)=>{const v=p.getKey();u.get(v)===null&&(u=u.insert(v,un.newInvalidDocument(v)))}));let d=Iu();return u.forEach(((f,p)=>{const v=o.get(f);v!==void 0&&Du(v.mutation,p,Un.empty(),ht.now()),tf(n,p)&&(d=d.insert(f,p))})),d}))}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class J6{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return oe.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(r){return{id:r.id,version:r.version,createTime:Qr(r.createTime)}})(n)),oe.resolve()}getNamedQuery(e,n){return oe.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(r){return{name:r.name,query:U6(r.bundledQuery),readTime:Qr(r.readTime)}})(n)),oe.resolve()}}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Y6{constructor(){this.overlays=new yt(Ee.comparator),this.qr=new Map}getOverlay(e,n){return oe.resolve(this.overlays.get(n))}getOverlays(e,n){const r=xa();return oe.forEach(n,(s=>this.getOverlay(e,s).next((o=>{o!==null&&r.set(s,o)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((s,o)=>{this.St(e,n,o)})),oe.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach((o=>this.overlays=this.overlays.remove(o))),this.qr.delete(r)),oe.resolve()}getOverlaysForCollection(e,n,r){const s=xa(),o=n.length+1,u=new Ee(n.child("")),d=this.overlays.getIteratorFrom(u);for(;d.hasNext();){const f=d.getNext().value,p=f.getKey();if(!n.isPrefixOf(p.path))break;p.path.length===o&&f.largestBatchId>r&&s.set(f.getKey(),f)}return oe.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let o=new yt(((p,v)=>p-v));const u=this.overlays.getIterator();for(;u.hasNext();){const p=u.getNext().value;if(p.getKey().getCollectionGroup()===n&&p.largestBatchId>r){let v=o.get(p.largestBatchId);v===null&&(v=xa(),o=o.insert(p.largestBatchId,v)),v.set(p.getKey(),p)}}const d=xa(),f=o.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach(((p,v)=>d.set(p,v))),!(d.size()>=s)););return oe.resolve(d)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const u=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new p6(n,r));let o=this.qr.get(n);o===void 0&&(o=Ge(),this.qr.set(n,o)),this.qr.set(n,o.add(r.key))}}/**
* @license
* Copyright 2024 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class X6{constructor(){this.sessionToken=rn.EMPTY_BYTE_STRING}getSessionToken(e){return oe.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,oe.resolve()}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class my{constructor(){this.Qr=new zt(Wt.$r),this.Ur=new zt(Wt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Wt(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Gr(new Wt(e,n))}zr(e,n){e.forEach((r=>this.removeReference(r,n)))}jr(e){const n=new Ee(new ut([])),r=new Wt(n,e),s=new Wt(n,e+1),o=[];return this.Ur.forEachInRange([r,s],(u=>{this.Gr(u),o.push(u.key)})),o}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Ee(new ut([])),r=new Wt(n,e),s=new Wt(n,e+1);let o=Ge();return this.Ur.forEachInRange([r,s],(u=>{o=o.add(u.key)})),o}containsKey(e){const n=new Wt(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Wt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Ee.comparator(e.key,n.key)||ze(e.Yr,n.Yr)}static Kr(e,n){return ze(e.Yr,n.Yr)||Ee.comparator(e.key,n.key)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Q6{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new zt(Wt.$r)}checkEmpty(e){return oe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new f6(o,n,r,s);this.mutationQueue.push(u);for(const d of s)this.Zr=this.Zr.add(new Wt(d.key,o)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return oe.resolve(u)}lookupMutationBatch(e,n){return oe.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),o=s<0?0:s;return oe.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return oe.resolve(this.mutationQueue.length===0?sy:this.tr-1)}getAllMutationBatches(e){return oe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Wt(n,0),s=new Wt(n,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([r,s],(u=>{const d=this.Xr(u.Yr);o.push(d)})),oe.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new zt(ze);return n.forEach((s=>{const o=new Wt(s,0),u=new Wt(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,u],(d=>{r=r.add(d.Yr)}))})),oe.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let o=r;Ee.isDocumentKey(o)||(o=o.child(""));const u=new Wt(new Ee(o),0);let d=new zt(ze);return this.Zr.forEachWhile((f=>{const p=f.key.path;return!!r.isPrefixOf(p)&&(p.length===s&&(d=d.add(f.Yr)),!0)}),u),oe.resolve(this.ti(d))}ti(e){const n=[];return e.forEach((r=>{const s=this.Xr(r);s!==null&&n.push(s)})),n}removeMutationBatch(e,n){Qe(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return oe.forEach(n.mutations,(s=>{const o=new Wt(s.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,n){const r=new Wt(n,0),s=this.Zr.firstAfterOrEqual(r);return oe.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,oe.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Z6{constructor(e){this.ri=e,this.docs=(function(){return new yt(Ee.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),o=s?s.size:0,u=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:u}),this.size+=u-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return oe.resolve(r?r.document.mutableCopy():un.newInvalidDocument(n))}getEntries(e,n){let r=ji();return n.forEach((s=>{const o=this.docs.get(s);r=r.insert(s,o?o.document.mutableCopy():un.newInvalidDocument(s))})),oe.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let o=ji();const u=n.path,d=new Ee(u.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(d);for(;f.hasNext();){const{key:p,value:{document:v}}=f.getNext();if(!u.isPrefixOf(p.path))break;p.path.length>u.length+1||_3(k3(v),r)<=0||(s.has(v.key)||tf(n,v))&&(o=o.insert(v.key,v.mutableCopy()))}return oe.resolve(o)}getAllFromCollectionGroup(e,n,r,s){Te(9500)}ii(e,n){return oe.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new e5(this)}getSize(e){return oe.resolve(this.size)}}class e5 extends $6{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)})),oe.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class t5{constructor(e){this.persistence=e,this.si=new La((n=>ly(n)),uy),this.lastRemoteSnapshotVersion=_e.min(),this.highestTargetId=0,this.oi=0,this._i=new my,this.targetCount=0,this.ai=Zo.ur()}forEachTarget(e,n){return this.si.forEach(((r,s)=>n(s))),oe.resolve()}getLastRemoteSnapshotVersion(e){return oe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return oe.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),oe.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),oe.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Zo(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,oe.resolve()}updateTargetData(e,n){return this.Pr(n),oe.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,oe.resolve()}removeTargets(e,n,r){let s=0;const o=[];return this.si.forEach(((u,d)=>{d.sequenceNumber<=n&&r.get(d.targetId)===null&&(this.si.delete(u),o.push(this.removeMatchingKeysForTargetId(e,d.targetId)),s++)})),oe.waitFor(o).next((()=>s))}getTargetCount(e){return oe.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return oe.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),oe.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,o=[];return s&&n.forEach((u=>{o.push(s.markPotentiallyOrphaned(e,u))})),oe.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),oe.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return oe.resolve(r)}containsKey(e,n){return oe.resolve(this._i.containsKey(n))}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Q1{constructor(e,n){this.ui={},this.overlays={},this.ci=new Xh(0),this.li=!1,this.li=!0,this.hi=new X6,this.referenceDelegate=e(this),this.Pi=new t5(this),this.indexManager=new V6,this.remoteDocumentCache=(function(r){return new Z6(r)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new L6(n),this.Ii=new J6(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Y6,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new Q6(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){me("MemoryPersistence","Starting transaction:",e);const s=new n5(this.ci.next());return this.referenceDelegate.Ei(),r(s).next((o=>this.referenceDelegate.di(s).next((()=>o)))).toPromise().then((o=>(s.raiseOnCommittedEvent(),o)))}Ai(e,n){return oe.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,n))))}}class n5 extends A3{constructor(e){super(),this.currentSequenceNumber=e}}class gy{constructor(e){this.persistence=e,this.Ri=new my,this.Vi=null}static mi(e){return new gy(e)}get fi(){if(this.Vi)return this.Vi;throw Te(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),oe.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),oe.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),oe.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((s=>this.fi.add(s.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((s=>{s.forEach((o=>this.fi.add(o.toString())))})).next((()=>r.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return oe.forEach(this.fi,(r=>{const s=Ee.fromPath(r);return this.gi(e,s).next((o=>{o||n.removeEntry(s,_e.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return oe.or([()=>oe.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class kh{constructor(e,n){this.persistence=e,this.pi=new La((r=>R3(r.path)),((r,s)=>r.isEqual(s))),this.garbageCollector=B6(this,n)}static mi(e,n){return new kh(e,n)}Ei(){}di(e){return oe.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((s=>r+s))))}wr(e){let n=0;return this.pr(e,(r=>{n++})).next((()=>n))}pr(e,n){return oe.forEach(this.pi,((r,s)=>this.br(e,r,s).next((o=>o?oe.resolve():n(s)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),o=s.newChangeBuffer();return s.ii(e,(u=>this.br(e,u,n).next((d=>{d||(r++,o.removeEntry(u,_e.min()))})))).next((()=>o.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),oe.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),oe.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),oe.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),oe.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=rh(e.data.value)),n}br(e,n,r){return oe.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return oe.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class yy{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=Ge(),s=Ge();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new yy(e,n.fromCache,r,s)}}/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class r5{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class i5{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return JL()?8:O3(dn())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const o={result:null};return this.ys(e,n).next((u=>{o.result=u})).next((()=>{if(!o.result)return this.ws(e,n,s,r).next((u=>{o.result=u}))})).next((()=>{if(o.result)return;const u=new r5;return this.Ss(e,n,u).next((d=>{if(o.result=d,this.Vs)return this.bs(e,n,u,d.size)}))})).next((()=>o.result))}bs(e,n,r,s){return r.documentReadCount<this.fs?(Ro()<=He.DEBUG&&me("QueryEngine","SDK will not create cache indexes for query:",Do(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),oe.resolve()):(Ro()<=He.DEBUG&&me("QueryEngine","Query:",Do(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(Ro()<=He.DEBUG&&me("QueryEngine","The SDK decides to create cache indexes for query:",Do(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Xr(n))):oe.resolve())}ys(e,n){if(nx(n))return oe.resolve(null);let r=Xr(n);return this.indexManager.getIndexType(e,r).next((s=>s===0?null:(n.limit!==null&&s===1&&(n=yg(n,null,"F"),r=Xr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((o=>{const u=Ge(...o);return this.ps.getDocuments(e,u).next((d=>this.indexManager.getMinOffset(e,r).next((f=>{const p=this.Ds(n,d);return this.Cs(n,p,u,f.readTime)?this.ys(e,yg(n,null,"F")):this.vs(e,p,n,f)}))))})))))}ws(e,n,r,s){return nx(n)||s.isEqual(_e.min())?oe.resolve(null):this.ps.getDocuments(e,r).next((o=>{const u=this.Ds(n,o);return this.Cs(n,u,r,s)?oe.resolve(null):(Ro()<=He.DEBUG&&me("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Do(n)),this.vs(e,u,n,I3(s,qu)).next((d=>d)))}))}Ds(e,n){let r=new zt(A1(e));return n.forEach(((s,o)=>{tf(e,o)&&(r=r.add(o))})),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}Ss(e,n,r){return Ro()<=He.DEBUG&&me("QueryEngine","Using full collection scan to execute query:",Do(n)),this.ps.getDocumentsMatchingQuery(e,n,Os.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next((o=>(n.forEach((u=>{o=o.insert(u.key,u)})),o)))}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const vy="LocalStore",s5=3e8;class a5{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new yt(ze),this.xs=new La((o=>ly(o)),uy),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new K6(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function o5(t,e,n,r){return new a5(t,e,n,r)}async function Z1(t,e){const n=Ae(t);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next((o=>(s=o,n.Bs(e),n.mutationQueue.getAllMutationBatches(r)))).next((o=>{const u=[],d=[];let f=Ge();for(const p of s){u.push(p.batchId);for(const v of p.mutations)f=f.add(v.key)}for(const p of o){d.push(p.batchId);for(const v of p.mutations)f=f.add(v.key)}return n.localDocuments.getDocuments(r,f).next((p=>({Ls:p,removedBatchIds:u,addedBatchIds:d})))}))}))}function l5(t,e){const n=Ae(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const s=e.batch.keys(),o=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(u,d,f,p){const v=f.batch,w=v.keys();let S=oe.resolve();return w.forEach((I=>{S=S.next((()=>p.getEntry(d,I))).next((P=>{const j=f.docVersions.get(I);Qe(j!==null,48541),P.version.compareTo(j)<0&&(v.applyToRemoteDocument(P,f),P.isValidDocument()&&(P.setReadTime(f.commitVersion),p.addEntry(P)))}))})),S.next((()=>u.mutationQueue.removeMutationBatch(d,v)))})(n,r,e,o).next((()=>o.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(u){let d=Ge();for(let f=0;f<u.mutationResults.length;++f)u.mutationResults[f].transformResults.length>0&&(d=d.add(u.batch.mutations[f].key));return d})(e)))).next((()=>n.localDocuments.getDocuments(r,s)))}))}function eI(t){const e=Ae(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function u5(t,e){const n=Ae(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(o=>{const u=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const d=[];e.targetChanges.forEach(((v,w)=>{const S=s.get(w);if(!S)return;d.push(n.Pi.removeMatchingKeys(o,v.removedDocuments,w).next((()=>n.Pi.addMatchingKeys(o,v.addedDocuments,w))));let I=S.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(w)!==null?I=I.withResumeToken(rn.EMPTY_BYTE_STRING,_e.min()).withLastLimboFreeSnapshotVersion(_e.min()):v.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(v.resumeToken,r)),s=s.insert(w,I),(function(P,j,D){return P.resumeToken.approximateByteSize()===0||j.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=s5?!0:D.addedDocuments.size+D.modifiedDocuments.size+D.removedDocuments.size>0})(S,I,v)&&d.push(n.Pi.updateTargetData(o,I))}));let f=ji(),p=Ge();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&d.push(n.persistence.referenceDelegate.updateLimboDocument(o,v))})),d.push(c5(o,u,e.documentUpdates).next((v=>{f=v.ks,p=v.qs}))),!r.isEqual(_e.min())){const v=n.Pi.getLastRemoteSnapshotVersion(o).next((w=>n.Pi.setTargetsMetadata(o,o.currentSequenceNumber,r)));d.push(v)}return oe.waitFor(d).next((()=>u.apply(o))).next((()=>n.localDocuments.getLocalViewOfDocuments(o,f,p))).next((()=>f))})).then((o=>(n.Ms=s,o)))}function c5(t,e,n){let r=Ge(),s=Ge();return n.forEach((o=>r=r.add(o))),e.getEntries(t,r).next((o=>{let u=ji();return n.forEach(((d,f)=>{const p=o.get(d);f.isFoundDocument()!==p.isFoundDocument()&&(s=s.add(d)),f.isNoDocument()&&f.version.isEqual(_e.min())?(e.removeEntry(d,f.readTime),u=u.insert(d,f)):!p.isValidDocument()||f.version.compareTo(p.version)>0||f.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(f),u=u.insert(d,f)):me(vy,"Ignoring outdated watch update for ",d,". Current version:",p.version," Watch version:",f.version)})),{ks:u,qs:s}}))}function d5(t,e){const n=Ae(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=sy),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function h5(t,e){const n=Ae(t);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let s;return n.Pi.getTargetData(r,e).next((o=>o?(s=o,oe.resolve(s)):n.Pi.allocateTargetId(r).next((u=>(s=new Ts(e,u,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next((()=>s)))))))})).then((r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r}))}async function Sg(t,e,n){const r=Ae(t),s=r.Ms.get(e),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,(u=>r.persistence.referenceDelegate.removeTarget(u,s)))}catch(u){if(!ul(u))throw u;me(vy,`Failed to update sequence numbers for target ${e}: ${u}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function mx(t,e,n){const r=Ae(t);let s=_e.min(),o=Ge();return r.persistence.runTransaction("Execute query","readwrite",(u=>(function(d,f,p){const v=Ae(d),w=v.xs.get(p);return w!==void 0?oe.resolve(v.Ms.get(w)):v.Pi.getTargetData(f,p)})(r,u,Xr(e)).next((d=>{if(d)return s=d.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(u,d.targetId).next((f=>{o=f}))})).next((()=>r.Fs.getDocumentsMatchingQuery(u,e,n?s:_e.min(),n?o:Ge()))).next((d=>(f5(r,Q3(e),d),{documents:d,Qs:o})))))}function f5(t,e,n){let r=t.Os.get(e)||_e.min();n.forEach(((s,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)})),t.Os.set(e,r)}class gx{constructor(){this.activeTargetIds=i6()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class p5{constructor(){this.Mo=new gx,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new gx,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class m5{Oo(e){}shutdown(){}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const yx="ConnectivityMonitor";class vx{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){me(yx,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){me(yx,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let Kd=null;function xg(){return Kd===null?Kd=(function(){return 268435456+Math.round(2147483648*Math.random())})():Kd++,"0x"+Kd.toString(16)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Om="RestConnection",g5={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class y5{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===Eh?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,o){const u=xg(),d=this.zo(e,n.toUriEncodedString());me(Om,`Sending RPC '${e}' ${u}:`,d,r);const f={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(f,s,o);const{host:p}=new URL(d),v=sl(p);return this.Jo(e,d,f,r,v).then((w=>(me(Om,`Received RPC '${e}' ${u}: `,w),w)),(w=>{throw Jo(Om,`RPC '${e}' ${u} failed with error: `,w,"url: ",d,"request:",r),w}))}Ho(e,n,r,s,o,u){return this.Go(e,n,r,s,o)}jo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ol})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((s,o)=>e[o]=s)),r&&r.headers.forEach(((s,o)=>e[o]=s))}zo(e,n){const r=g5[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class v5{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const an="WebChannelConnection";class b5 extends y5{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,o){const u=xg();return new Promise(((d,f)=>{const p=new n1;p.setWithCredentials(!0),p.listenOnce(r1.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case nh.NO_ERROR:const w=p.getResponseJson();me(an,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(w)),d(w);break;case nh.TIMEOUT:me(an,`RPC '${e}' ${u} timed out`),f(new pe(ne.DEADLINE_EXCEEDED,"Request time out"));break;case nh.HTTP_ERROR:const S=p.getStatus();if(me(an,`RPC '${e}' ${u} failed with status:`,S,"response text:",p.getResponseText()),S>0){let I=p.getResponseJson();Array.isArray(I)&&(I=I[0]);const P=I==null?void 0:I.error;if(P&&P.status&&P.message){const j=(function(D){const q=D.toLowerCase().replace(/_/g,"-");return Object.values(ne).indexOf(q)>=0?q:ne.UNKNOWN})(P.status);f(new pe(j,P.message))}else f(new pe(ne.UNKNOWN,"Server responded with status "+p.getStatus()))}else f(new pe(ne.UNAVAILABLE,"Connection failed."));break;default:Te(9055,{l_:e,streamId:u,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{me(an,`RPC '${e}' ${u} completed.`)}}));const v=JSON.stringify(s);me(an,`RPC '${e}' ${u} sending request:`,s),p.send(n,"POST",v,r,15)}))}T_(e,n,r){const s=xg(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=a1(),d=s1(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(f.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(f.useFetchStreams=!0),this.jo(f.initMessageHeaders,n,r),f.encodeInitMessageHeaders=!0;const v=o.join("");me(an,`Creating RPC '${e}' stream ${s}: ${v}`,f);const w=u.createWebChannel(v,f);this.I_(w);let S=!1,I=!1;const P=new v5({Yo:D=>{I?me(an,`Not sending because RPC '${e}' stream ${s} is closed:`,D):(S||(me(an,`Opening RPC '${e}' stream ${s} transport.`),w.open(),S=!0),me(an,`RPC '${e}' stream ${s} sending:`,D),w.send(D))},Zo:()=>w.close()}),j=(D,q,X)=>{D.listen(q,(B=>{try{X(B)}catch(re){setTimeout((()=>{throw re}),0)}}))};return j(w,Cu.EventType.OPEN,(()=>{I||(me(an,`RPC '${e}' stream ${s} transport opened.`),P.o_())})),j(w,Cu.EventType.CLOSE,(()=>{I||(I=!0,me(an,`RPC '${e}' stream ${s} transport closed`),P.a_(),this.E_(w))})),j(w,Cu.EventType.ERROR,(D=>{I||(I=!0,Jo(an,`RPC '${e}' stream ${s} transport errored. Name:`,D.name,"Message:",D.message),P.a_(new pe(ne.UNAVAILABLE,"The operation could not be completed")))})),j(w,Cu.EventType.MESSAGE,(D=>{var q;if(!I){const X=D.data[0];Qe(!!X,16349);const B=X,re=(B==null?void 0:B.error)||((q=B[0])==null?void 0:q.error);if(re){me(an,`RPC '${e}' stream ${s} received error:`,re);const ce=re.status;let ue=(function(N){const O=jt[N];if(O!==void 0)return q1(O)})(ce),A=re.message;ue===void 0&&(ue=ne.INTERNAL,A="Unknown error status: "+ce+" with message "+re.message),I=!0,P.a_(new pe(ue,A)),w.close()}else me(an,`RPC '${e}' stream ${s} received:`,X),P.u_(X)}})),j(d,i1.STAT_EVENT,(D=>{D.stat===cg.PROXY?me(an,`RPC '${e}' stream ${s} detected buffering proxy`):D.stat===cg.NOPROXY&&me(an,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{P.__()}),0),P}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function Pm(){return typeof document<"u"?document:null}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function af(t){return new x6(t,!0)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class tI{constructor(e,n,r=1e3,s=1.5,o=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&me("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const bx="PersistentStream";class nI{constructor(e,n,r,s,o,u,d,f){this.Mi=e,this.S_=r,this.b_=s,this.connection=o,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=d,this.listener=f,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new tI(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===ne.RESOURCE_EXHAUSTED?(Di(n.toString()),Di("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===ne.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,s])=>{this.D_===n&&this.G_(r,s)}),(r=>{e((()=>{const s=new pe(ne.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)}))}))}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((s=>{r((()=>this.z_(s)))})),this.stream.onMessage((s=>{r((()=>++this.F_==1?this.J_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return me(bx,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(me(bx,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class w5 extends nI{constructor(e,n,r,s,o,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,u),this.serializer=o}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=I6(this.serializer,e),r=(function(s){if(!("targetChange"in s))return _e.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?_e.min():o.readTime?Qr(o.readTime):_e.min()})(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=Eg(this.serializer),n.addTarget=(function(s,o){let u;const d=o.target;if(u=mg(d)?{documents:N6(s,d)}:{query:A6(s,d).ft},u.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){u.resumeToken=G1(s,o.resumeToken);const f=vg(s,o.expectedCount);f!==null&&(u.expectedCount=f)}else if(o.snapshotVersion.compareTo(_e.min())>0){u.readTime=Ih(s,o.snapshotVersion.toTimestamp());const f=vg(s,o.expectedCount);f!==null&&(u.expectedCount=f)}return u})(this.serializer,e);const r=P6(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=Eg(this.serializer),n.removeTarget=e,this.q_(n)}}class E5 extends nI{constructor(e,n,r,s,o,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,u),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Qe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Qe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Qe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=_6(e.writeResults,e.commitTime),r=Qr(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=Eg(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>k6(this.serializer,r)))};this.q_(n)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class S5{}class x5 extends S5{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new pe(ne.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,u])=>this.connection.Go(e,bg(n,r),s,o,u))).catch((o=>{throw o.name==="FirebaseError"?(o.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new pe(ne.UNKNOWN,o.toString())}))}Ho(e,n,r,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,d])=>this.connection.Ho(e,bg(n,r),s,u,d,o))).catch((u=>{throw u.name==="FirebaseError"?(u.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new pe(ne.UNKNOWN,u.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class T5{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Di(n),this.aa=!1):me("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const ka="RemoteStore";class C5{constructor(e,n,r,s,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo((u=>{r.enqueueAndForget((async()=>{Ua(this)&&(me(ka,"Restarting streams for network reachability change."),await(async function(d){const f=Ae(d);f.Ea.add(4),await rc(f),f.Ra.set("Unknown"),f.Ea.delete(4),await of(f)})(this))}))})),this.Ra=new T5(r,s)}}async function of(t){if(Ua(t))for(const e of t.da)await e(!0)}async function rc(t){for(const e of t.da)await e(!1)}function rI(t,e){const n=Ae(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Sy(n)?Ey(n):dl(n).O_()&&wy(n,e))}function by(t,e){const n=Ae(t),r=dl(n);n.Ia.delete(e),r.O_()&&iI(n,e),n.Ia.size===0&&(r.O_()?r.L_():Ua(n)&&n.Ra.set("Unknown"))}function wy(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(_e.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}dl(t).Y_(e)}function iI(t,e){t.Va.Ue(e),dl(t).Z_(e)}function Ey(t){t.Va=new b6({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),dl(t).start(),t.Ra.ua()}function Sy(t){return Ua(t)&&!dl(t).x_()&&t.Ia.size>0}function Ua(t){return Ae(t).Ea.size===0}function sI(t){t.Va=void 0}async function I5(t){t.Ra.set("Online")}async function k5(t){t.Ia.forEach(((e,n)=>{wy(t,e)}))}async function _5(t,e){sI(t),Sy(t)?(t.Ra.ha(e),Ey(t)):t.Ra.set("Unknown")}async function N5(t,e,n){if(t.Ra.set("Online"),e instanceof z1&&e.state===2&&e.cause)try{await(async function(r,s){const o=s.cause;for(const u of s.targetIds)r.Ia.has(u)&&(await r.remoteSyncer.rejectListen(u,o),r.Ia.delete(u),r.Va.removeTarget(u))})(t,e)}catch(r){me(ka,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await _h(t,r)}else if(e instanceof ah?t.Va.Ze(e):e instanceof H1?t.Va.st(e):t.Va.tt(e),!n.isEqual(_e.min()))try{const r=await eI(t.localStore);n.compareTo(r)>=0&&await(function(s,o){const u=s.Va.Tt(o);return u.targetChanges.forEach(((d,f)=>{if(d.resumeToken.approximateByteSize()>0){const p=s.Ia.get(f);p&&s.Ia.set(f,p.withResumeToken(d.resumeToken,o))}})),u.targetMismatches.forEach(((d,f)=>{const p=s.Ia.get(d);if(!p)return;s.Ia.set(d,p.withResumeToken(rn.EMPTY_BYTE_STRING,p.snapshotVersion)),iI(s,d);const v=new Ts(p.target,d,f,p.sequenceNumber);wy(s,v)})),s.remoteSyncer.applyRemoteEvent(u)})(t,n)}catch(r){me(ka,"Failed to raise snapshot:",r),await _h(t,r)}}async function _h(t,e,n){if(!ul(e))throw e;t.Ea.add(1),await rc(t),t.Ra.set("Offline"),n||(n=()=>eI(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{me(ka,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await of(t)}))}function aI(t,e){return e().catch((n=>_h(t,n,e)))}async function lf(t){const e=Ae(t),n=js(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:sy;for(;A5(e);)try{const s=await d5(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,O5(e,s)}catch(s){await _h(e,s)}oI(e)&&lI(e)}function A5(t){return Ua(t)&&t.Ta.length<10}function O5(t,e){t.Ta.push(e);const n=js(t);n.O_()&&n.X_&&n.ea(e.mutations)}function oI(t){return Ua(t)&&!js(t).x_()&&t.Ta.length>0}function lI(t){js(t).start()}async function P5(t){js(t).ra()}async function R5(t){const e=js(t);for(const n of t.Ta)e.ea(n.mutations)}async function D5(t,e,n){const r=t.Ta.shift(),s=hy.from(r,e,n);await aI(t,(()=>t.remoteSyncer.applySuccessfulWrite(s))),await lf(t)}async function j5(t,e){e&&js(t).X_&&await(async function(n,r){if((function(s){return g6(s)&&s!==ne.ABORTED})(r.code)){const s=n.Ta.shift();js(n).B_(),await aI(n,(()=>n.remoteSyncer.rejectFailedWrite(s.batchId,r))),await lf(n)}})(t,e),oI(t)&&lI(t)}async function wx(t,e){const n=Ae(t);n.asyncQueue.verifyOperationInProgress(),me(ka,"RemoteStore received new credentials");const r=Ua(n);n.Ea.add(3),await rc(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await of(n)}async function M5(t,e){const n=Ae(t);e?(n.Ea.delete(2),await of(n)):e||(n.Ea.add(2),await rc(n),n.Ra.set("Unknown"))}function dl(t){return t.ma||(t.ma=(function(e,n,r){const s=Ae(e);return s.sa(),new w5(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)})(t.datastore,t.asyncQueue,{Xo:I5.bind(null,t),t_:k5.bind(null,t),r_:_5.bind(null,t),H_:N5.bind(null,t)}),t.da.push((async e=>{e?(t.ma.B_(),Sy(t)?Ey(t):t.Ra.set("Unknown")):(await t.ma.stop(),sI(t))}))),t.ma}function js(t){return t.fa||(t.fa=(function(e,n,r){const s=Ae(e);return s.sa(),new E5(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)})(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:P5.bind(null,t),r_:j5.bind(null,t),ta:R5.bind(null,t),na:D5.bind(null,t)}),t.da.push((async e=>{e?(t.fa.B_(),await lf(t)):(await t.fa.stop(),t.Ta.length>0&&(me(ka,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class xy{constructor(e,n,r,s,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=o,this.deferred=new _s,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,o){const u=Date.now()+r,d=new xy(e,n,u,s,o);return d.start(r),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new pe(ne.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ty(t,e){if(Di("AsyncQueue",`${e}: ${t}`),ul(t))return new pe(ne.UNAVAILABLE,`${e}: ${t}`);throw t}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Ho{static emptySet(e){return new Ho(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Ee.comparator(n.key,r.key):(n,r)=>Ee.comparator(n.key,r.key),this.keyedMap=Iu(),this.sortedSet=new yt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ho)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,o=r.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ho;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Ex{constructor(){this.ga=new yt(Ee.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Te(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class el{constructor(e,n,r,s,o,u,d,f,p){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=o,this.fromCache=u,this.syncStateChanged=d,this.excludesMetadataChanges=f,this.hasCachedResults=p}static fromInitialDocuments(e,n,r,s,o){const u=[];return n.forEach((d=>{u.push({type:0,doc:d})})),new el(e,n,Ho.emptySet(n),u,r,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ef(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class L5{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class U5{constructor(){this.queries=Sx(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(e,n){const r=Ae(e),s=r.queries;r.queries=Sx(),s.forEach(((o,u)=>{for(const d of u.Sa)d.onError(n)}))})(this,new pe(ne.ABORTED,"Firestore shutting down"))}}function Sx(){return new La((t=>N1(t)),ef)}async function V5(t,e){const n=Ae(t);let r=3;const s=e.query;let o=n.queries.get(s);o?!o.ba()&&e.Da()&&(r=2):(o=new L5,r=e.Da()?0:1);try{switch(r){case 0:o.wa=await n.onListen(s,!0);break;case 1:o.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(u){const d=Ty(u,`Initialization of query '${Do(e.query)}' failed`);return void e.onError(d)}n.queries.set(s,o),o.Sa.push(e),e.va(n.onlineState),o.wa&&e.Fa(o.wa)&&Cy(n)}async function F5(t,e){const n=Ae(t),r=e.query;let s=3;const o=n.queries.get(r);if(o){const u=o.Sa.indexOf(e);u>=0&&(o.Sa.splice(u,1),o.Sa.length===0?s=e.Da()?0:1:!o.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function q5(t,e){const n=Ae(t);let r=!1;for(const s of e){const o=s.query,u=n.queries.get(o);if(u){for(const d of u.Sa)d.Fa(s)&&(r=!0);u.wa=s}}r&&Cy(n)}function H5(t,e,n){const r=Ae(t),s=r.queries.get(e);if(s)for(const o of s.Sa)o.onError(n);r.queries.delete(e)}function Cy(t){t.Ca.forEach((e=>{e.next()}))}var Tg,xx;(xx=Tg||(Tg={})).Ma="default",xx.Cache="cache";class z5{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new el(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=el.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Tg.Cache}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class uI{constructor(e){this.key=e}}class cI{constructor(e){this.key=e}}class G5{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ge(),this.mutatedKeys=Ge(),this.eu=A1(e),this.tu=new Ho(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new Ex,s=n?n.tu:this.tu;let o=n?n.mutatedKeys:this.mutatedKeys,u=s,d=!1;const f=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,p=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((v,w)=>{const S=s.get(v),I=tf(this.query,w)?w:null,P=!!S&&this.mutatedKeys.has(S.key),j=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations);let D=!1;S&&I?S.data.isEqual(I.data)?P!==j&&(r.track({type:3,doc:I}),D=!0):this.su(S,I)||(r.track({type:2,doc:I}),D=!0,(f&&this.eu(I,f)>0||p&&this.eu(I,p)<0)&&(d=!0)):!S&&I?(r.track({type:0,doc:I}),D=!0):S&&!I&&(r.track({type:1,doc:S}),D=!0,(f||p)&&(d=!0)),D&&(I?(u=u.add(I),o=j?o.add(v):o.delete(v)):(u=u.delete(v),o=o.delete(v)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const v=this.query.limitType==="F"?u.last():u.first();u=u.delete(v.key),o=o.delete(v.key),r.track({type:1,doc:v})}return{tu:u,iu:r,Cs:d,mutatedKeys:o}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const u=e.iu.ya();u.sort(((v,w)=>(function(S,I){const P=j=>{switch(j){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Te(20277,{Rt:j})}};return P(S)-P(I)})(v.type,w.type)||this.eu(v.doc,w.doc))),this.ou(r),s=s??!1;const d=n&&!s?this._u():[],f=this.Xa.size===0&&this.current&&!s?1:0,p=f!==this.Za;return this.Za=f,u.length!==0||p?{snapshot:new el(this.query,e.tu,o,u,e.mutatedKeys,f===0,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:d}:{au:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Ex,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ge(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const n=[];return e.forEach((r=>{this.Xa.has(r)||n.push(new cI(r))})),this.Xa.forEach((r=>{e.has(r)||n.push(new uI(r))})),n}cu(e){this.Ya=e.Qs,this.Xa=Ge();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return el.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Iy="SyncEngine";class B5{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class $5{constructor(e){this.key=e,this.hu=!1}}class W5{constructor(e,n,r,s,o,u){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new La((d=>N1(d)),ef),this.Iu=new Map,this.Eu=new Set,this.du=new yt(Ee.comparator),this.Au=new Map,this.Ru=new my,this.Vu={},this.mu=new Map,this.fu=Zo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function K5(t,e,n=!0){const r=gI(t);let s;const o=r.Tu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),s=o.view.lu()):s=await dI(r,e,n,!0),s}async function J5(t,e){const n=gI(t);await dI(n,e,!0,!1)}async function dI(t,e,n,r){const s=await h5(t.localStore,Xr(e)),o=s.targetId,u=t.sharedClientState.addLocalQueryTarget(o,n);let d;return r&&(d=await Y5(t,e,o,u==="current",s.resumeToken)),t.isPrimaryClient&&n&&rI(t.remoteStore,s),d}async function Y5(t,e,n,r,s){t.pu=(w,S,I)=>(async function(P,j,D,q){let X=j.view.ru(D);X.Cs&&(X=await mx(P.localStore,j.query,!1).then((({documents:ue})=>j.view.ru(ue,X))));const B=q&&q.targetChanges.get(j.targetId),re=q&&q.targetMismatches.get(j.targetId)!=null,ce=j.view.applyChanges(X,P.isPrimaryClient,B,re);return Cx(P,j.targetId,ce.au),ce.snapshot})(t,w,S,I);const o=await mx(t.localStore,e,!0),u=new G5(e,o.Qs),d=u.ru(o.documents),f=nc.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),p=u.applyChanges(d,t.isPrimaryClient,f);Cx(t,n,p.au);const v=new B5(e,n,u);return t.Tu.set(e,v),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),p.snapshot}async function X5(t,e,n){const r=Ae(t),s=r.Tu.get(e),o=r.Iu.get(s.targetId);if(o.length>1)return r.Iu.set(s.targetId,o.filter((u=>!ef(u,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Sg(r.localStore,s.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(s.targetId),n&&by(r.remoteStore,s.targetId),Cg(r,s.targetId)})).catch(ll)):(Cg(r,s.targetId),await Sg(r.localStore,s.targetId,!0))}async function Q5(t,e){const n=Ae(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),by(n.remoteStore,r.targetId))}async function Z5(t,e,n){const r=aV(t);try{const s=await(function(o,u){const d=Ae(o),f=ht.now(),p=u.reduce(((S,I)=>S.add(I.key)),Ge());let v,w;return d.persistence.runTransaction("Locally write mutations","readwrite",(S=>{let I=ji(),P=Ge();return d.Ns.getEntries(S,p).next((j=>{I=j,I.forEach(((D,q)=>{q.isValidDocument()||(P=P.add(D))}))})).next((()=>d.localDocuments.getOverlayedDocuments(S,I))).next((j=>{v=j;const D=[];for(const q of u){const X=d6(q,v.get(q.key).overlayedDocument);X!=null&&D.push(new Fs(q.key,X,w1(X.value.mapValue),Sr.exists(!0)))}return d.mutationQueue.addMutationBatch(S,f,D,u)})).next((j=>{w=j;const D=j.applyToLocalDocumentSet(v,P);return d.documentOverlayCache.saveOverlays(S,j.batchId,D)}))})).then((()=>({batchId:w.batchId,changes:P1(v)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),(function(o,u,d){let f=o.Vu[o.currentUser.toKey()];f||(f=new yt(ze)),f=f.insert(u,d),o.Vu[o.currentUser.toKey()]=f})(r,s.batchId,n),await ic(r,s.changes),await lf(r.remoteStore)}catch(s){const o=Ty(s,"Failed to persist write");n.reject(o)}}async function hI(t,e){const n=Ae(t);try{const r=await u5(n.localStore,e);e.targetChanges.forEach(((s,o)=>{const u=n.Au.get(o);u&&(Qe(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?u.hu=!0:s.modifiedDocuments.size>0?Qe(u.hu,14607):s.removedDocuments.size>0&&(Qe(u.hu,42227),u.hu=!1))})),await ic(n,r,e)}catch(r){await ll(r)}}function Tx(t,e,n){const r=Ae(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach(((o,u)=>{const d=u.view.va(e);d.snapshot&&s.push(d.snapshot)})),(function(o,u){const d=Ae(o);d.onlineState=u;let f=!1;d.queries.forEach(((p,v)=>{for(const w of v.Sa)w.va(u)&&(f=!0)})),f&&Cy(d)})(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function eV(t,e,n){const r=Ae(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),o=s&&s.key;if(o){let u=new yt(Ee.comparator);u=u.insert(o,un.newNoDocument(o,_e.min()));const d=Ge().add(o),f=new sf(_e.min(),new Map,new yt(ze),u,d);await hI(r,f),r.du=r.du.remove(o),r.Au.delete(e),ky(r)}else await Sg(r.localStore,e,!1).then((()=>Cg(r,e,n))).catch(ll)}async function tV(t,e){const n=Ae(t),r=e.batch.batchId;try{const s=await l5(n.localStore,e);pI(n,r,null),fI(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ic(n,s)}catch(s){await ll(s)}}async function nV(t,e,n){const r=Ae(t);try{const s=await(function(o,u){const d=Ae(o);return d.persistence.runTransaction("Reject batch","readwrite-primary",(f=>{let p;return d.mutationQueue.lookupMutationBatch(f,u).next((v=>(Qe(v!==null,37113),p=v.keys(),d.mutationQueue.removeMutationBatch(f,v)))).next((()=>d.mutationQueue.performConsistencyCheck(f))).next((()=>d.documentOverlayCache.removeOverlaysForBatchId(f,p,u))).next((()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,p))).next((()=>d.localDocuments.getDocuments(f,p)))}))})(r.localStore,e);pI(r,e,n),fI(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await ic(r,s)}catch(s){await ll(s)}}function fI(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function pI(t,e,n){const r=Ae(t);let s=r.Vu[r.currentUser.toKey()];if(s){const o=s.get(e);o&&(n?o.reject(n):o.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function Cg(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach((r=>{t.Ru.containsKey(r)||mI(t,r)}))}function mI(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(by(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),ky(t))}function Cx(t,e,n){for(const r of n)r instanceof uI?(t.Ru.addReference(r.key,e),rV(t,r)):r instanceof cI?(me(Iy,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||mI(t,r.key)):Te(19791,{wu:r})}function rV(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(me(Iy,"New document in limbo: "+n),t.Eu.add(r),ky(t))}function ky(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new Ee(ut.fromString(e)),r=t.fu.next();t.Au.set(r,new $5(n)),t.du=t.du.insert(n,r),rI(t.remoteStore,new Ts(Xr(k1(n.path)),r,"TargetPurposeLimboResolution",Xh.ce))}}async function ic(t,e,n){const r=Ae(t),s=[],o=[],u=[];r.Tu.isEmpty()||(r.Tu.forEach(((d,f)=>{u.push(r.pu(f,e,n).then((p=>{var v;if((p||n)&&r.isPrimaryClient){const w=p?!p.fromCache:(v=n==null?void 0:n.targetChanges.get(f.targetId))==null?void 0:v.current;r.sharedClientState.updateQueryState(f.targetId,w?"current":"not-current")}if(p){s.push(p);const w=yy.As(f.targetId,p);o.push(w)}})))})),await Promise.all(u),r.Pu.H_(s),await(async function(d,f){const p=Ae(d);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",(v=>oe.forEach(f,(w=>oe.forEach(w.Es,(S=>p.persistence.referenceDelegate.addReference(v,w.targetId,S))).next((()=>oe.forEach(w.ds,(S=>p.persistence.referenceDelegate.removeReference(v,w.targetId,S)))))))))}catch(v){if(!ul(v))throw v;me(vy,"Failed to update sequence numbers: "+v)}for(const v of f){const w=v.targetId;if(!v.fromCache){const S=p.Ms.get(w),I=S.snapshotVersion,P=S.withLastLimboFreeSnapshotVersion(I);p.Ms=p.Ms.insert(w,P)}}})(r.localStore,o))}async function iV(t,e){const n=Ae(t);if(!n.currentUser.isEqual(e)){me(Iy,"User change. New user:",e.toKey());const r=await Z1(n.localStore,e);n.currentUser=e,(function(s,o){s.mu.forEach((u=>{u.forEach((d=>{d.reject(new pe(ne.CANCELLED,o))}))})),s.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ic(n,r.Ls)}}function sV(t,e){const n=Ae(t),r=n.Au.get(e);if(r&&r.hu)return Ge().add(r.key);{let s=Ge();const o=n.Iu.get(e);if(!o)return s;for(const u of o){const d=n.Tu.get(u);s=s.unionWith(d.view.nu)}return s}}function gI(t){const e=Ae(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=hI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=sV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=eV.bind(null,e),e.Pu.H_=q5.bind(null,e.eventManager),e.Pu.yu=H5.bind(null,e.eventManager),e}function aV(t){const e=Ae(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=tV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=nV.bind(null,e),e}class Nh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=af(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return o5(this.persistence,new i5,e.initialUser,this.serializer)}Cu(e){return new Q1(gy.mi,this.serializer)}Du(e){return new p5}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Nh.provider={build:()=>new Nh};class oV extends Nh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Qe(this.persistence.referenceDelegate instanceof kh,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new z6(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Cn.withCacheSize(this.cacheSizeBytes):Cn.DEFAULT;return new Q1((r=>kh.mi(r,n)),this.serializer)}}class Ig{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Tx(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=iV.bind(null,this.syncEngine),await M5(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new U5})()}createDatastore(e){const n=af(e.databaseInfo.databaseId),r=(function(s){return new b5(s)})(e.databaseInfo);return(function(s,o,u,d){return new x5(s,o,u,d)})(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(n,r,s,o,u){return new C5(n,r,s,o,u)})(this.localStore,this.datastore,e.asyncQueue,(n=>Tx(this.syncEngine,n,0)),(function(){return vx.v()?new vx:new m5})())}createSyncEngine(e,n){return(function(r,s,o,u,d,f,p){const v=new W5(r,s,o,u,d,f);return p&&(v.gu=!0),v})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(r){const s=Ae(r);me(ka,"RemoteStore shutting down."),s.Ea.add(5),await rc(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Ig.provider={build:()=>new Ig};/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*//**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class lV{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Di("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Ms="FirestoreClient";class uV{constructor(e,n,r,s,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=ln.UNAUTHENTICATED,this.clientId=iy.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,(async u=>{me(Ms,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(r,(u=>(me(Ms,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new _s;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Ty(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Rm(t,e){t.asyncQueue.verifyOperationInProgress(),me(Ms,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async s=>{r.isEqual(s)||(await Z1(e.localStore,s),r=s)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function Ix(t,e){t.asyncQueue.verifyOperationInProgress();const n=await cV(t);me(Ms,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((r=>wx(e.remoteStore,r))),t.setAppCheckTokenChangeListener(((r,s)=>wx(e.remoteStore,s))),t._onlineComponents=e}async function cV(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){me(Ms,"Using user provided OfflineComponentProvider");try{await Rm(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(r){return r.name==="FirebaseError"?r.code===ne.FAILED_PRECONDITION||r.code===ne.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11})(n))throw n;Jo("Error using user provided cache. Falling back to memory cache: "+n),await Rm(t,new Nh)}}else me(Ms,"Using default OfflineComponentProvider"),await Rm(t,new oV(void 0));return t._offlineComponents}async function yI(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(me(Ms,"Using user provided OnlineComponentProvider"),await Ix(t,t._uninitializedComponentsProvider._online)):(me(Ms,"Using default OnlineComponentProvider"),await Ix(t,new Ig))),t._onlineComponents}function dV(t){return yI(t).then((e=>e.syncEngine))}async function hV(t){const e=await yI(t),n=e.eventManager;return n.onListen=K5.bind(null,e.syncEngine),n.onUnlisten=X5.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=J5.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Q5.bind(null,e.syncEngine),n}function fV(t,e,n={}){const r=new _s;return t.asyncQueue.enqueueAndForget((async()=>(function(s,o,u,d,f){const p=new lV({next:w=>{p.Nu(),o.enqueueAndForget((()=>F5(s,v))),w.fromCache&&d.source==="server"?f.reject(new pe(ne.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(w)},error:w=>f.reject(w)}),v=new z5(u,p,{includeMetadataChanges:!0,qa:!0});return V5(s,v)})(await hV(t),t.asyncQueue,e,n,r))),r.promise}/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function vI(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const kx=new Map;/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const bI="firestore.googleapis.com",_x=!0;class Nx{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new pe(ne.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=bI,this.ssl=_x}else this.host=e.host,this.ssl=e.ssl??_x;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=X1;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<q6)throw new pe(ne.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}C3("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=vI(e.experimentalLongPollingOptions??{}),(function(n){if(n.timeoutSeconds!==void 0){if(isNaN(n.timeoutSeconds))throw new pe(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (must not be NaN)`);if(n.timeoutSeconds<5)throw new pe(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (minimum allowed value is 5)`);if(n.timeoutSeconds>30)throw new pe(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(n,r){return n.timeoutSeconds===r.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class uf{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Nx({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new pe(ne.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new pe(ne.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Nx(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(n){if(!n)return new m3;switch(n.type){case"firstParty":return new b3(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new pe(ne.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(e){const n=kx.get(e);n&&(me("ComponentProvider","Removing Datastore"),kx.delete(e),n.terminate())})(this),Promise.resolve()}}function pV(t,e,n,r={}){var s;t=Ia(t,uf);const o=sl(e),u=t._getSettings(),d={...u,emulatorOptions:t._getEmulatorOptions()},f=`${e}:${n}`;o&&(GC(`https://${f}`),BC("Firestore",!0)),u.host!==bI&&u.host!==f&&Jo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...u,host:f,ssl:o,emulatorOptions:r};if(!As(p,d)&&(t._setSettings(p),r.mockUserToken)){let v,w;if(typeof r.mockUserToken=="string")v=r.mockUserToken,w=ln.MOCK_USER;else{v=qL(r.mockUserToken,(s=t._app)==null?void 0:s.options.projectId);const S=r.mockUserToken.sub||r.mockUserToken.user_id;if(!S)throw new pe(ne.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");w=new ln(S)}t._authCredentials=new g3(new l1(v,w))}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Va{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Va(this.firestore,e,this._query)}}class Ht{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ns(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ht(this.firestore,e,this._key)}toJSON(){return{type:Ht._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(ec(n,Ht._jsonSchema))return new Ht(e,r||null,new Ee(ut.fromString(n.referencePath)))}}Ht._jsonSchemaVersion="firestore/documentReference/1.0",Ht._jsonSchema={type:Lt("string",Ht._jsonSchemaVersion),referencePath:Lt("string")};class Ns extends Va{constructor(e,n,r){super(e,n,k1(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ht(this.firestore,null,new Ee(e))}withConverter(e){return new Ns(this.firestore,e,this._path)}}function wa(t,e,...n){if(t=Ut(t),u1("collection","path",e),t instanceof uf){const r=ut.fromString(e,...n);return HS(r),new Ns(t,null,r)}{if(!(t instanceof Ht||t instanceof Ns))throw new pe(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ut.fromString(e,...n));return HS(r),new Ns(t.firestore,null,r)}}function _u(t,e,...n){if(t=Ut(t),arguments.length===1&&(e=iy.newId()),u1("doc","path",e),t instanceof uf){const r=ut.fromString(e,...n);return qS(r),new Ht(t,null,new Ee(r))}{if(!(t instanceof Ht||t instanceof Ns))throw new pe(ne.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ut.fromString(e,...n));return qS(r),new Ht(t.firestore,t instanceof Ns?t.converter:null,new Ee(r))}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Ax="AsyncQueue";class Ox{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new tI(this,"async_queue_retry"),this._c=()=>{const r=Pm();r&&me(Ax,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Pm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Pm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new _s;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ul(e))throw e;me(Ax,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Di("INTERNAL UNHANDLED ERROR: ",Px(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=xy.createAndSchedule(this,e,n,r,(o=>this.hc(o)));return this.tc.push(s),s}uc(){this.nc&&Te(47125,{Pc:Px(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Px(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class sc extends uf{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Ox,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Ox(e),this._firestoreClient=void 0,await e}}}function mV(t,e){const n=typeof t=="object"?t:ny(),r=typeof t=="string"?t:Eh,s=Ma(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const o=VL("firestore");o&&pV(s,...o)}return s}function wI(t){if(t._terminated)throw new pe(ne.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||gV(t),t._firestoreClient}function gV(t){var e,n,r;const s=t._freezeSettings(),o=(function(u,d,f,p){return new M3(u,d,f,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,vI(p.experimentalLongPollingOptions),p.useFetchStreams,p.isUsingEmulator)})(t._databaseId,((e=t._app)==null?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||(n=s.localCache)!=null&&n._offlineComponentProvider&&(r=s.localCache)!=null&&r._onlineComponentProvider&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new uV(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&(function(u){const d=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(d),_online:d}})(t._componentsProvider))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class er{constructor(e){this._byteString=e}static fromBase64String(e){try{return new er(rn.fromBase64String(e))}catch(n){throw new pe(ne.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new er(rn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:er._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ec(e,er._jsonSchema))return er.fromBase64String(e.bytes)}}er._jsonSchemaVersion="firestore/bytes/1.0",er._jsonSchema={type:Lt("string",er._jsonSchemaVersion),bytes:Lt("string")};/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class cf{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new pe(ne.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new nn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class _y{constructor(e){this._methodName=e}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Zr{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new pe(ne.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new pe(ne.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ze(this._lat,e._lat)||ze(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Zr._jsonSchemaVersion}}static fromJSON(e){if(ec(e,Zr._jsonSchema))return new Zr(e.latitude,e.longitude)}}Zr._jsonSchemaVersion="firestore/geoPoint/1.0",Zr._jsonSchema={type:Lt("string",Zr._jsonSchemaVersion),latitude:Lt("number"),longitude:Lt("number")};/**
* @license
* Copyright 2024 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ei{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(n,r){if(n.length!==r.length)return!1;for(let s=0;s<n.length;++s)if(n[s]!==r[s])return!1;return!0})(this._values,e._values)}toJSON(){return{type:ei._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ec(e,ei._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new ei(e.vectorValues);throw new pe(ne.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ei._jsonSchemaVersion="firestore/vectorValue/1.0",ei._jsonSchema={type:Lt("string",ei._jsonSchemaVersion),vectorValues:Lt("object")};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const yV=/^__.*__$/;class vV{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Fs(e,this.data,this.fieldMask,n,this.fieldTransforms):new tc(e,this.data,n,this.fieldTransforms)}}class EI{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Fs(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function SI(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Te(40011,{Ac:t})}}class Ny{constructor(e,n,r,s,o,u){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Ny({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var n;const r=(n=this.path)==null?void 0:n.child(e),s=this.Vc({path:r,fc:!1});return s.gc(e),s}yc(e){var n;const r=(n=this.path)==null?void 0:n.child(e),s=this.Vc({path:r,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Ah(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(SI(this.Ac)&&yV.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class bV{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||af(e)}Cc(e,n,r,s=!1){return new Ny({Ac:e,methodName:n,Dc:r,path:nn.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ay(t){const e=t._freezeSettings(),n=af(t._databaseId);return new bV(t._databaseId,!!e.ignoreUndefinedProperties,n)}function wV(t,e,n,r,s,o={}){const u=t.Cc(o.merge||o.mergeFields?2:0,e,n,s);Oy("Data must be an object, but it was:",u,r);const d=xI(r,u);let f,p;if(o.merge)f=new Un(u.fieldMask),p=u.fieldTransforms;else if(o.mergeFields){const v=[];for(const w of o.mergeFields){const S=kg(e,w,n);if(!u.contains(S))throw new pe(ne.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);CI(v,S)||v.push(S)}f=new Un(v),p=u.fieldTransforms.filter((w=>f.covers(w.field)))}else f=null,p=u.fieldTransforms;return new vV(new In(d),f,p)}class df extends _y{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof df}}function EV(t,e,n,r){const s=t.Cc(1,e,n);Oy("Data must be an object, but it was:",s,r);const o=[],u=In.empty();Vs(r,((f,p)=>{const v=Py(e,f,n);p=Ut(p);const w=s.yc(v);if(p instanceof df)o.push(v);else{const S=ac(p,w);S!=null&&(o.push(v),u.set(v,S))}}));const d=new Un(o);return new EI(u,d,s.fieldTransforms)}function SV(t,e,n,r,s,o){const u=t.Cc(1,e,n),d=[kg(e,r,n)],f=[s];if(o.length%2!=0)throw new pe(ne.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<o.length;S+=2)d.push(kg(e,o[S])),f.push(o[S+1]);const p=[],v=In.empty();for(let S=d.length-1;S>=0;--S)if(!CI(p,d[S])){const I=d[S];let P=f[S];P=Ut(P);const j=u.yc(I);if(P instanceof df)p.push(I);else{const D=ac(P,j);D!=null&&(p.push(I),v.set(I,D))}}const w=new Un(p);return new EI(v,w,u.fieldTransforms)}function xV(t,e,n,r=!1){return ac(n,t.Cc(r?4:3,e))}function ac(t,e){if(TI(t=Ut(t)))return Oy("Unsupported field value:",e,t),xI(t,e);if(t instanceof _y)return(function(n,r){if(!SI(r.Ac))throw r.Sc(`${n._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${n._methodName}() is not currently supported inside arrays`);const s=n._toFieldTransform(r);s&&r.fieldTransforms.push(s)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(n,r){const s=[];let o=0;for(const u of n){let d=ac(u,r.wc(o));d==null&&(d={nullValue:"NULL_VALUE"}),s.push(d),o++}return{arrayValue:{values:s}}})(t,e)}return(function(n,r){if((n=Ut(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return s6(r.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const s=ht.fromDate(n);return{timestampValue:Ih(r.serializer,s)}}if(n instanceof ht){const s=new ht(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Ih(r.serializer,s)}}if(n instanceof Zr)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof er)return{bytesValue:G1(r.serializer,n._byteString)};if(n instanceof Ht){const s=r.databaseId,o=n.firestore._databaseId;if(!o.isEqual(s))throw r.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:py(n.firestore._databaseId||r.databaseId,n._key.path)}}if(n instanceof ei)return(function(s,o){return{mapValue:{fields:{[v1]:{stringValue:b1},[Sh]:{arrayValue:{values:s.toArray().map((u=>{if(typeof u!="number")throw o.Sc("VectorValues must only contain numeric values.");return cy(o.serializer,u)}))}}}}}})(n,r);throw r.Sc(`Unsupported field value: ${Yh(n)}`)})(t,e)}function xI(t,e){const n={};return h1(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Vs(t,((r,s)=>{const o=ac(s,e.mc(r));o!=null&&(n[r]=o)})),{mapValue:{fields:n}}}function TI(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ht||t instanceof Zr||t instanceof er||t instanceof Ht||t instanceof _y||t instanceof ei)}function Oy(t,e,n){if(!TI(n)||!c1(n)){const r=Yh(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function kg(t,e,n){if((e=Ut(e))instanceof cf)return e._internalPath;if(typeof e=="string")return Py(t,e);throw Ah("Field path arguments must be of type string or ",t,!1,void 0,n)}const TV=new RegExp("[~\\*/\\[\\]]");function Py(t,e,n){if(e.search(TV)>=0)throw Ah(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new cf(...e.split("."))._internalPath}catch{throw Ah(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Ah(t,e,n,r,s){const o=r&&!r.isEmpty(),u=s!==void 0;let d=`Function ${e}() called with invalid data`;n&&(d+=" (via `toFirestore()`)"),d+=". ";let f="";return(o||u)&&(f+=" (found",o&&(f+=` in field ${r}`),u&&(f+=` in document ${s}`),f+=")"),new pe(ne.INVALID_ARGUMENT,d+t+f)}function CI(t,e){return t.some((n=>n.isEqual(e)))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class II{constructor(e,n,r,s,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Ht(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new CV(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(hf("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class CV extends II{data(){return super.data()}}function hf(t,e){return typeof e=="string"?Py(t,e):e instanceof cf?e._internalPath:e._delegate._internalPath}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function IV(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new pe(ne.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ry{}class kI extends Ry{}function kV(t,e,...n){let r=[];e instanceof Ry&&r.push(e),r=r.concat(n),(function(s){const o=s.filter((d=>d instanceof Dy)).length,u=s.filter((d=>d instanceof ff)).length;if(o>1||o>0&&u>0)throw new pe(ne.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const s of r)t=s._apply(t);return t}class ff extends kI{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new ff(e,n,r)}_apply(e){const n=this._parse(e);return _I(e._query,n),new Va(e.firestore,e.converter,gg(e._query,n))}_parse(e){const n=Ay(e.firestore);return(function(r,s,o,u,d,f,p){let v;if(d.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new pe(ne.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){Dx(p,f);const w=[];for(const S of p)w.push(Rx(u,r,S));v={arrayValue:{values:w}}}else v=Rx(u,r,p)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||Dx(p,f),v=xV(o,s,p,f==="in"||f==="not-in");return Mt.create(d,f,v)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function _V(t,e,n){const r=e,s=hf("where",t);return ff._create(s,r,n)}class Dy extends Ry{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Dy(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:Tr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(r,s){let o=r;const u=s.getFlattenedFilters();for(const d of u)_I(o,d),o=gg(o,d)})(e._query,n),new Va(e.firestore,e.converter,gg(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class jy extends kI{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new jy(e,n)}_apply(e){const n=(function(r,s,o){if(r.startAt!==null)throw new pe(ne.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new pe(ne.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Bu(s,o)})(e._query,this._field,this._direction);return new Va(e.firestore,e.converter,(function(r,s){const o=r.explicitOrderBy.concat([s]);return new cl(r.path,r.collectionGroup,o,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)})(e._query,n))}}function NV(t,e="asc"){const n=e,r=hf("orderBy",t);return jy._create(r,n)}function Rx(t,e,n){if(typeof(n=Ut(n))=="string"){if(n==="")throw new pe(ne.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!_1(e)&&n.indexOf("/")!==-1)throw new pe(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(ut.fromString(n));if(!Ee.isDocumentKey(r))throw new pe(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return YS(t,new Ee(r))}if(n instanceof Ht)return YS(t,n._key);throw new pe(ne.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Yh(n)}.`)}function Dx(t,e){if(!Array.isArray(t)||t.length===0)throw new pe(ne.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function _I(t,e){const n=(function(r,s){for(const o of r)for(const u of o.getFlattenedFilters())if(s.indexOf(u.op)>=0)return u.op;return null})(t.filters,(function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new pe(ne.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new pe(ne.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class AV{convertValue(e,n="none"){switch(Ds(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ct(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Rs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Te(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Vs(e,((s,o)=>{r[s]=this.convertValue(o,n)})),r}convertVectorValue(e){var n,r,s;const o=(s=(r=(n=e.fields)==null?void 0:n[Sh].arrayValue)==null?void 0:r.values)==null?void 0:s.map((u=>Ct(u.doubleValue)));return new ei(o)}convertGeoPoint(e){return new Zr(Ct(e.latitude),Ct(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Zh(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Hu(e));default:return null}}convertTimestamp(e){const n=Ps(e);return new ht(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ut.fromString(e);Qe(Y1(r),9688,{name:e});const s=new zu(r.get(1),r.get(3)),o=new Ee(r.popFirst(5));return s.isEqual(n)||Di(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function OV(t,e,n){let r;return r=t?t.toFirestore(e):e,r}class Jd{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class zo extends II{constructor(e,n,r,s,o,u){super(e,n,r,s,u),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new oh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(hf("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new pe(ne.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=zo._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()||(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED")),n}}zo._jsonSchemaVersion="firestore/documentSnapshot/1.0",zo._jsonSchema={type:Lt("string",zo._jsonSchemaVersion),bundleSource:Lt("string","DocumentSnapshot"),bundleName:Lt("string"),bundle:Lt("string")};class oh extends zo{data(e={}){return super.data(e)}}class Go{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Jd(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new oh(this._firestore,this._userDataWriter,r.key,r,new Jd(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new pe(ne.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(r,s){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map((u=>{const d=new oh(r._firestore,r._userDataWriter,u.doc.key,u.doc,new Jd(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);return u.doc,{type:"added",doc:d,oldIndex:-1,newIndex:o++}}))}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter((u=>s||u.type!==3)).map((u=>{const d=new oh(r._firestore,r._userDataWriter,u.doc.key,u.doc,new Jd(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);let f=-1,p=-1;return u.type!==0&&(f=o.indexOf(u.doc.key),o=o.delete(u.doc.key)),u.type!==1&&(o=o.add(u.doc),p=o.indexOf(u.doc.key)),{type:PV(u.type),doc:d,oldIndex:f,newIndex:p}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new pe(ne.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Go._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=iy.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach((o=>{o._document!==null&&(n.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),s.push(o.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function PV(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Te(61501,{type:t})}}Go._jsonSchemaVersion="firestore/querySnapshot/1.0",Go._jsonSchema={type:Lt("string",Go._jsonSchemaVersion),bundleSource:Lt("string","QuerySnapshot"),bundleName:Lt("string"),bundle:Lt("string")};class RV extends AV{constructor(e){super(),this.firestore=e}convertBytes(e){return new er(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ht(this.firestore,null,n)}}function Dm(t){t=Ia(t,Va);const e=Ia(t.firestore,sc),n=wI(e),r=new RV(e);return IV(t._query),fV(n,t._query).then((s=>new Go(e,r,t,s)))}function jx(t,e,n,...r){t=Ia(t,Ht);const s=Ia(t.firestore,sc),o=Ay(s);let u;return u=typeof(e=Ut(e))=="string"||e instanceof cf?SV(o,"updateDoc",t._key,e,n,r):EV(o,"updateDoc",t._key,e),My(s,[u.toMutation(t._key,Sr.exists(!0))])}function Mx(t){return My(Ia(t.firestore,sc),[new dy(t._key,Sr.none())])}function Yd(t,e){const n=Ia(t.firestore,sc),r=_u(t),s=OV(t.converter,e);return My(n,[wV(Ay(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Sr.exists(!1))]).then((()=>r))}function My(t,e){return(function(n,r){const s=new _s;return n.asyncQueue.enqueueAndForget((async()=>Z5(await dV(n),r,s))),s.promise})(wI(t),e)}(function(t,e=!0){(function(n){ol=n})(al),ri(new xr("firestore",((n,{instanceIdentifier:r,options:s})=>{const o=n.getProvider("app").getImmediate(),u=new sc(new y3(n.getProvider("auth-internal")),new w3(o,n.getProvider("app-check-internal")),(function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new pe(ne.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new zu(d.options.projectId,f)})(o,r),o);return s={useFetchStreams:e,...s},u._setSettings(s),u}),"PUBLIC").setMultipleInstances(!0)),nr(LS,US,t),nr(LS,US,"esm2020")})();function NI(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const DV=NI,AI=new ja("auth","Firebase",NI());/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Oh=new Jh("@firebase/auth");function jV(t,...e){Oh.logLevel<=He.WARN&&Oh.warn(`Auth (${al}): ${t}`,...e)}function lh(t,...e){Oh.logLevel<=He.ERROR&&Oh.error(`Auth (${al}): ${t}`,...e)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Cr(t,...e){throw Ly(t,...e)}function ti(t,...e){return Ly(t,...e)}function OI(t,e,n){const r={...DV(),[e]:n};return new ja("auth","Firebase",r).create(e,{appName:t.name})}function Ai(t){return OI(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ly(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return AI.create(t,...e)}function xe(t,e,...n){if(!t)throw Ly(e,...n)}function ki(t){const e="INTERNAL ASSERTION FAILED: "+t;throw lh(e),new Error(e)}function Mi(t,e){t||ki(e)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function _g(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function MV(){return Lx()==="http:"||Lx()==="https:"}function Lx(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function LV(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(MV()||$C()||"connection"in navigator)?navigator.onLine:!0}function UV(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class oc{constructor(e,n){this.shortDelay=e,this.longDelay=n,Mi(n>e,"Short delay should be less than long delay!"),this.isMobile=GL()||WL()}get(){return LV()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Uy(t,e){Mi(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class PI{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ki("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ki("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ki("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const VV={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const FV=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],qV=new oc(3e4,6e4);function qs(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Hs(t,e,n,r,s={}){return RI(t,s,async()=>{let o={},u={};r&&(e==="GET"?u=r:o={body:JSON.stringify(r)});const d=Zu({key:t.config.apiKey,...u}).slice(1),f=await t._getAdditionalHeaders();f["Content-Type"]="application/json",t.languageCode&&(f["X-Firebase-Locale"]=t.languageCode);const p={method:e,headers:f,...o};return $L()||(p.referrerPolicy="no-referrer"),t.emulatorConfig&&sl(t.emulatorConfig.host)&&(p.credentials="include"),PI.fetch()(await DI(t,t.config.apiHost,n,d),p)})}async function RI(t,e,n){t._canInitEmulator=!1;const r={...VV,...e};try{const s=new zV(t),o=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const u=await o.json();if("needConfirmation"in u)throw Xd(t,"account-exists-with-different-credential",u);if(o.ok&&!("errorMessage"in u))return u;{const d=o.ok?u.errorMessage:u.error.message,[f,p]=d.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw Xd(t,"credential-already-in-use",u);if(f==="EMAIL_EXISTS")throw Xd(t,"email-already-in-use",u);if(f==="USER_DISABLED")throw Xd(t,"user-disabled",u);const v=r[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw OI(t,v,p);Cr(t,v)}}catch(s){if(s instanceof kr)throw s;Cr(t,"network-request-failed",{message:String(s)})}}async function lc(t,e,n,r,s={}){const o=await Hs(t,e,n,r,s);return"mfaPendingCredential"in o&&Cr(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function DI(t,e,n,r){const s=`${e}${n}?${r}`,o=t,u=o.config.emulator?Uy(t.config,s):`${t.config.apiScheme}://${s}`;return FV.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(u).toString():u}function HV(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class zV{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(ti(this.auth,"network-request-failed")),qV.get())})}}function Xd(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=ti(t,e,r);return s.customData._tokenResponse=n,s}function Ux(t){return t!==void 0&&t.enterprise!==void 0}class GV{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return HV(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function BV(t,e){return Hs(t,"GET","/v2/recaptchaConfig",qs(t,e))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function $V(t,e){return Hs(t,"POST","/v1/accounts:delete",e)}async function Ph(t,e){return Hs(t,"POST","/v1/accounts:lookup",e)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function ju(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function WV(t,e=!1){const n=Ut(t),r=await n.getIdToken(e),s=Vy(r);xe(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const o=typeof s.firebase=="object"?s.firebase:void 0,u=o==null?void 0:o.sign_in_provider;return{claims:s,token:r,authTime:ju(jm(s.auth_time)),issuedAtTime:ju(jm(s.iat)),expirationTime:ju(jm(s.exp)),signInProvider:u||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function jm(t){return Number(t)*1e3}function Vy(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return lh("JWT malformed, contained fewer than 3 sections"),null;try{const s=FC(n);return s?JSON.parse(s):(lh("Failed to decode base64 JWT payload"),null)}catch(s){return lh("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Vx(t){const e=Vy(t);return xe(e,"internal-error"),xe(typeof e.exp<"u","internal-error"),xe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function Ku(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof kr&&KV(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function KV({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class JV{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const n=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,n)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Ng{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ju(this.lastLoginAt),this.creationTime=ju(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function Rh(t){var e;const n=t.auth,r=await t.getIdToken(),s=await Ku(t,Ph(n,{idToken:r}));xe(s==null?void 0:s.users.length,n,"internal-error");const o=s.users[0];t._notifyReloadListener(o);const u=(e=o.providerUserInfo)!=null&&e.length?jI(o.providerUserInfo):[],d=XV(t.providerData,u),f=t.isAnonymous,p=!(t.email&&o.passwordHash)&&!(d!=null&&d.length),v=f?p:!1,w={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:d,metadata:new Ng(o.createdAt,o.lastLoginAt),isAnonymous:v};Object.assign(t,w)}async function YV(t){const e=Ut(t);await Rh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function XV(t,e){return[...t.filter(n=>!e.some(r=>r.providerId===n.providerId)),...e]}function jI(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function QV(t,e){const n=await RI(t,{},async()=>{const r=Zu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:o}=t.config,u=await DI(t,s,"/v1/token",`key=${o}`),d=await t._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const f={method:"POST",headers:d,body:r};return t.emulatorConfig&&sl(t.emulatorConfig.host)&&(f.credentials="include"),PI.fetch()(u,f)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function ZV(t,e){return Hs(t,"POST","/v2/accounts:revokeToken",qs(t,e))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Bo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){xe(e.idToken,"internal-error"),xe(typeof e.idToken<"u","internal-error"),xe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Vx(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){xe(e.length!==0,"internal-error");const n=Vx(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(xe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:o}=await QV(e,n);this.updateTokensAndExpiration(r,s,Number(o))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:o}=n,u=new Bo;return r&&(xe(typeof r=="string","internal-error",{appName:e}),u.refreshToken=r),s&&(xe(typeof s=="string","internal-error",{appName:e}),u.accessToken=s),o&&(xe(typeof o=="number","internal-error",{appName:e}),u.expirationTime=o),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Bo,this.toJSON())}_performRefresh(){return ki("not implemented")}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function bs(t,e){xe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class br{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new JV(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Ng(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Ku(this,this.stsTokenManager.getToken(this.auth,e));return xe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return WV(this,e)}reload(){return YV(this)}_assign(e){this!==e&&(xe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new br({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){xe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Rh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Zn(this.auth.app))return Promise.reject(Ai(this.auth));const e=await this.getIdToken();return await Ku(this,$V(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,o=n.phoneNumber??void 0,u=n.photoURL??void 0,d=n.tenantId??void 0,f=n._redirectEventId??void 0,p=n.createdAt??void 0,v=n.lastLoginAt??void 0,{uid:w,emailVerified:S,isAnonymous:I,providerData:P,stsTokenManager:j}=n;xe(w&&j,e,"internal-error");const D=Bo.fromJSON(this.name,j);xe(typeof w=="string",e,"internal-error"),bs(r,e.name),bs(s,e.name),xe(typeof S=="boolean",e,"internal-error"),xe(typeof I=="boolean",e,"internal-error"),bs(o,e.name),bs(u,e.name),bs(d,e.name),bs(f,e.name),bs(p,e.name),bs(v,e.name);const q=new br({uid:w,auth:e,email:s,emailVerified:S,displayName:r,isAnonymous:I,photoURL:u,phoneNumber:o,tenantId:d,stsTokenManager:D,createdAt:p,lastLoginAt:v});return P&&Array.isArray(P)&&(q.providerData=P.map(X=>({...X}))),f&&(q._redirectEventId=f),q}static async _fromIdTokenResponse(e,n,r=!1){const s=new Bo;s.updateFromServerResponse(n);const o=new br({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Rh(o),o}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];xe(s.localId!==void 0,"internal-error");const o=s.providerUserInfo!==void 0?jI(s.providerUserInfo):[],u=!(s.email&&s.passwordHash)&&!(o!=null&&o.length),d=new Bo;d.updateFromIdToken(r);const f=new br({uid:s.localId,auth:e,stsTokenManager:d,isAnonymous:u}),p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new Ng(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(o!=null&&o.length)};return Object.assign(f,p),f}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Fx=new Map;function _i(t){Mi(t instanceof Function,"Expected a class definition");let e=Fx.get(t);return e?(Mi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Fx.set(t,e),e)}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class MI{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}MI.type="NONE";const qx=MI;/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function uh(t,e,n){return`firebase:${t}:${e}:${n}`}class $o{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:o}=this.auth;this.fullUserKey=uh(this.userKey,s.apiKey,o),this.fullPersistenceKey=uh("persistence",s.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Ph(this.auth,{idToken:e}).catch(()=>{});return n?br._fromGetAccountInfoResponse(this.auth,n,e):null}return br._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new $o(_i(qx),e,r);const s=(await Promise.all(n.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let o=s[0]||_i(qx);const u=uh(r,e.config.apiKey,e.name);let d=null;for(const p of n)try{const v=await p._get(u);if(v){let w;if(typeof v=="string"){const S=await Ph(e,{idToken:v}).catch(()=>{});if(!S)break;w=await br._fromGetAccountInfoResponse(e,S,v)}else w=br._fromJSON(e,v);p!==o&&(d=w),o=p;break}}catch{}const f=s.filter(p=>p._shouldAllowMigration);return!o._shouldAllowMigration||!f.length?new $o(o,e,r):(o=f[0],d&&await o._set(u,d.toJSON()),await Promise.all(n.map(async p=>{if(p!==o)try{await p._remove(u)}catch{}})),new $o(o,e,r))}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Hx(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(FI(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(LI(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(HI(e))return"Blackberry";if(zI(e))return"Webos";if(UI(e))return"Safari";if((e.includes("chrome/")||VI(e))&&!e.includes("edge/"))return"Chrome";if(qI(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function LI(t=dn()){return/firefox\//i.test(t)}function UI(t=dn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function VI(t=dn()){return/crios\//i.test(t)}function FI(t=dn()){return/iemobile/i.test(t)}function qI(t=dn()){return/android/i.test(t)}function HI(t=dn()){return/blackberry/i.test(t)}function zI(t=dn()){return/webos/i.test(t)}function Fy(t=dn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function eF(t=dn()){var e;return Fy(t)&&!!((e=window.navigator)!=null&&e.standalone)}function tF(){return KL()&&document.documentMode===10}function GI(t=dn()){return Fy(t)||qI(t)||zI(t)||HI(t)||/windows phone/i.test(t)||FI(t)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function BI(t,e=[]){let n;switch(t){case"Browser":n=Hx(dn());break;case"Worker":n=`${Hx(dn())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${al}/${r}`}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class nF{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=o=>new Promise((u,d)=>{try{const f=e(o);u(f)}catch(f){d(f)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function rF(t,e={}){return Hs(t,"GET","/v2/passwordPolicy",qs(t,e))}/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const iF=6;class sF{constructor(e){var n;const r=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=r.minPasswordLength??iF,r.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=r.maxPasswordLength),r.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=r.containsLowercaseCharacter),r.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=r.containsUppercaseCharacter),r.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=r.containsNumericCharacter),r.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=r.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((n=e.allowedNonAlphanumericCharacters)==null?void 0:n.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class aF{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new zx(this),this.idTokenSubscription=new zx(this),this.beforeStateQueue=new nF(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=AI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=_i(n)),this._initializationPromise=this.queue(async()=>{var r,s,o;if(!this._deleted&&(this.persistenceManager=await $o.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)==null?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Ph(this,{idToken:e}),r=await br._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Zn(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(d,d))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(n=this.redirectUser)==null?void 0:n._redirectEventId,d=s==null?void 0:s._redirectEventId,f=await this.tryRedirectSignIn(e);(!u||u===d)&&f!=null&&f.user&&(s=f.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(u){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return xe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Rh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=UV()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Zn(this.app))return Promise.reject(Ai(this));const n=e?Ut(e):null;return n&&xe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&xe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Zn(this.app)?Promise.reject(Ai(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Zn(this.app)?Promise.reject(Ai(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(_i(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await rF(this),n=new sF(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ja("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await ZV(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&_i(e)||this._popupRedirectResolver;xe(n,this,"argument-error"),this.redirectPersistenceManager=await $o.create(this,[_i(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=((e=this.currentUser)==null?void 0:e.uid)??null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let u=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(xe(d,this,"internal-error"),d.then(()=>{u||o(this.currentUser)}),typeof n=="function"){const f=e.addObserver(n,r,s);return()=>{u=!0,f()}}else{const f=e.addObserver(n);return()=>{u=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return xe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=BI(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;if(Zn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:e.getToken());return n!=null&&n.error&&jV(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Fa(t){return Ut(t)}class zx{constructor(e){this.auth=e,this.observer=null,this.addObserver=tU(n=>this.observer=n)}get next(){return xe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let pf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function oF(t){pf=t}function $I(t){return pf.loadJS(t)}function lF(){return pf.recaptchaEnterpriseScript}function uF(){return pf.gapiScript}function cF(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class dF{constructor(){this.enterprise=new hF}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class hF{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const fF="recaptcha-enterprise",WI="NO_RECAPTCHA";class pF{constructor(e){this.type=fF,this.auth=Fa(e)}async verify(e="verify",n=!1){async function r(o){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(u,d)=>{BV(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(f=>{if(f.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const p=new GV(f);return o.tenantId==null?o._agentRecaptchaConfig=p:o._tenantRecaptchaConfigs[o.tenantId]=p,u(p.siteKey)}}).catch(f=>{d(f)})})}function s(o,u,d){const f=window.grecaptcha;Ux(f)?f.enterprise.ready(()=>{f.enterprise.execute(o,{action:e}).then(p=>{u(p)}).catch(()=>{u(WI)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new dF().execute("siteKey",{action:"verify"}):new Promise((o,u)=>{r(this.auth).then(d=>{if(!n&&Ux(window.grecaptcha))s(d,o,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let f=lF();f.length!==0&&(f+=d),$I(f).then(()=>{s(d,o,u)}).catch(p=>{u(p)})}}).catch(d=>{u(d)})})}}async function Gx(t,e,n,r=!1,s=!1){const o=new pF(t);let u;if(s)u=WI;else try{u=await o.verify(n)}catch{u=await o.verify(n,!0)}const d={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const f=d.phoneEnrollmentInfo.phoneNumber,p=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:f,recaptchaToken:p,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const f=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:f,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return r?Object.assign(d,{captchaResp:u}):Object.assign(d,{captchaResponse:u}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function Ag(t,e,n,r,s){var o;if((o=t._getRecaptchaConfig())!=null&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await Gx(t,e,n,n==="getOobCode");return r(t,u)}else return r(t,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await Gx(t,e,n,n==="getOobCode");return r(t,d)}else return Promise.reject(u)})}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function mF(t,e){const n=Ma(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),s=n.getOptions();if(As(s,e??{}))return r;Cr(r,"already-initialized")}return n.initialize({options:e})}function gF(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(_i);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function yF(t,e,n){const r=Fa(t);xe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,o=KI(e),{host:u,port:d}=vF(e),f=d===null?"":`:${d}`,p={url:`${o}//${u}${f}/`},v=Object.freeze({host:u,port:d,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){xe(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),xe(As(p,r.config.emulator)&&As(v,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=p,r.emulatorConfig=v,r.settings.appVerificationDisabledForTesting=!0,sl(u)?(GC(`${o}//${u}${f}`),BC("Auth",!0)):bF()}function KI(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function vF(t){const e=KI(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const o=s[1];return{host:o,port:Bx(r.substr(o.length+1))}}else{const[o,u]=r.split(":");return{host:o,port:Bx(u)}}}function Bx(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function bF(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class qy{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ki("not implemented")}_getIdTokenResponse(e){return ki("not implemented")}_linkToIdToken(e,n){return ki("not implemented")}_getReauthenticationResolver(e){return ki("not implemented")}}async function wF(t,e){return Hs(t,"POST","/v1/accounts:signUp",e)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function EF(t,e){return lc(t,"POST","/v1/accounts:signInWithPassword",qs(t,e))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function SF(t,e){return lc(t,"POST","/v1/accounts:signInWithEmailLink",qs(t,e))}async function xF(t,e){return lc(t,"POST","/v1/accounts:signInWithEmailLink",qs(t,e))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Ju extends qy{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Ju(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Ju(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&n!=null&&n.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ag(e,n,"signInWithPassword",EF);case"emailLink":return SF(e,{email:this._email,oobCode:this._password});default:Cr(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ag(e,r,"signUpPassword",wF);case"emailLink":return xF(e,{idToken:n,email:this._email,oobCode:this._password});default:Cr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function Wo(t,e){return lc(t,"POST","/v1/accounts:signInWithIdp",qs(t,e))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const TF="http://localhost";class _a extends qy{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new _a(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Cr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...o}=n;if(!r||!s)return null;const u=new _a(r,s);return u.idToken=o.idToken||void 0,u.accessToken=o.accessToken||void 0,u.secret=o.secret,u.nonce=o.nonce,u.pendingToken=o.pendingToken||null,u}_getIdTokenResponse(e){const n=this.buildRequest();return Wo(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Wo(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Wo(e,n)}buildRequest(){const e={requestUri:TF,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Zu(n)}return e}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function CF(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function IF(t){const e=xu(Tu(t)).link,n=e?xu(Tu(e)).deep_link_id:null,r=xu(Tu(t)).deep_link_id;return(r?xu(Tu(r)).link:null)||r||n||e||t}class Hy{constructor(e){const n=xu(Tu(e)),r=n.apiKey??null,s=n.oobCode??null,o=CF(n.mode??null);xe(r&&s&&o,"argument-error"),this.apiKey=r,this.operation=o,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=IF(e);try{return new Hy(n)}catch{return null}}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class hl{constructor(){this.providerId=hl.PROVIDER_ID}static credential(e,n){return Ju._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Hy.parseLink(n);return xe(r,"argument-error"),Ju._fromEmailAndCode(e,r.code,r.tenantId)}}hl.PROVIDER_ID="password";hl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";hl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class JI{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class uc extends JI{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ws extends uc{constructor(){super("facebook.com")}static credential(e){return _a._fromParams({providerId:ws.PROVIDER_ID,signInMethod:ws.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ws.credentialFromTaggedObject(e)}static credentialFromError(e){return ws.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ws.credential(e.oauthAccessToken)}catch{return null}}}ws.FACEBOOK_SIGN_IN_METHOD="facebook.com";ws.PROVIDER_ID="facebook.com";/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Es extends uc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return _a._fromParams({providerId:Es.PROVIDER_ID,signInMethod:Es.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Es.credentialFromTaggedObject(e)}static credentialFromError(e){return Es.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Es.credential(n,r)}catch{return null}}}Es.GOOGLE_SIGN_IN_METHOD="google.com";Es.PROVIDER_ID="google.com";/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Ss extends uc{constructor(){super("github.com")}static credential(e){return _a._fromParams({providerId:Ss.PROVIDER_ID,signInMethod:Ss.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ss.credentialFromTaggedObject(e)}static credentialFromError(e){return Ss.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ss.credential(e.oauthAccessToken)}catch{return null}}}Ss.GITHUB_SIGN_IN_METHOD="github.com";Ss.PROVIDER_ID="github.com";/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class xs extends uc{constructor(){super("twitter.com")}static credential(e,n){return _a._fromParams({providerId:xs.PROVIDER_ID,signInMethod:xs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return xs.credentialFromTaggedObject(e)}static credentialFromError(e){return xs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return xs.credential(n,r)}catch{return null}}}xs.TWITTER_SIGN_IN_METHOD="twitter.com";xs.PROVIDER_ID="twitter.com";/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function kF(t,e){return lc(t,"POST","/v1/accounts:signUp",qs(t,e))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Na{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const o=await br._fromIdTokenResponse(e,r,s),u=$x(r);return new Na({user:o,providerId:u,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=$x(r);return new Na({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function $x(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Dh extends kr{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Dh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Dh(e,n,r,s)}}function YI(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Dh._fromErrorAndOperation(t,s,e,r):s})}async function _F(t,e,n=!1){const r=await Ku(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Na._forOperation(t,"link",r)}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function NF(t,e,n=!1){const{auth:r}=t;if(Zn(r.app))return Promise.reject(Ai(r));const s="reauthenticate";try{const o=await Ku(t,YI(r,s,e,t),n);xe(o.idToken,r,"internal-error");const u=Vy(o.idToken);xe(u,r,"internal-error");const{sub:d}=u;return xe(t.uid===d,r,"user-mismatch"),Na._forOperation(t,s,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&Cr(r,"user-mismatch"),o}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function XI(t,e,n=!1){if(Zn(t.app))return Promise.reject(Ai(t));const r="signIn",s=await YI(t,r,e),o=await Na._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(o.user),o}async function AF(t,e){return XI(Fa(t),e)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function QI(t){const e=Fa(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function OF(t,e,n){if(Zn(t.app))return Promise.reject(Ai(t));const r=Fa(t),s=await Ag(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",kF).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&QI(t),u}),o=await Na._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(o.user),o}function PF(t,e,n){return Zn(t.app)?Promise.reject(Ai(t)):AF(Ut(t),hl.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&QI(t),r})}function RF(t,e,n,r){return Ut(t).onIdTokenChanged(e,n,r)}function DF(t,e,n){return Ut(t).beforeAuthStateChanged(e,n)}function jF(t){return Ut(t).signOut()}const jh="__sak";/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ZI{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(jh,"1"),this.storage.removeItem(jh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const MF=1e3,LF=10;class ek extends ZI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=GI(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((u,d,f)=>{this.notifyListeners(u,f)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const u=this.storage.getItem(r);!n&&this.localCache[r]===u||this.notifyListeners(r,u)},o=this.storage.getItem(r);tF()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,LF):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},MF)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}ek.type="LOCAL";const UF=ek;/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class tk extends ZI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}tk.type="SESSION";const nk=tk;/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function VF(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class mf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new mf(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:o}=n.data,u=this.handlersMap[s];if(!(u!=null&&u.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const d=Array.from(u).map(async p=>p(n.origin,o)),f=await VF(d);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:f})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}mf.receivers=[];/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function zy(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class FF{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,u;return new Promise((d,f)=>{const p=zy("",20);s.port1.start();const v=setTimeout(()=>{f(new Error("unsupported_event"))},r);u={messageChannel:s,onMessage(w){const S=w;if(S.data.eventId===p)switch(S.data.status){case"ack":clearTimeout(v),o=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),d(S.data.response);break;default:clearTimeout(v),clearTimeout(o),f(new Error("invalid_response"));break}}},this.handlers.add(u),s.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:p,data:n},[s.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function ni(){return window}function qF(t){ni().location.href=t}/**
* @license
* Copyright 2020 Google LLC.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function rk(){return typeof ni().WorkerGlobalScope<"u"&&typeof ni().importScripts=="function"}async function HF(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function zF(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function GF(){return rk()?self:null}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const ik="firebaseLocalStorageDb",BF=1,Mh="firebaseLocalStorage",sk="fbase_key";class cc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function gf(t,e){return t.transaction([Mh],e?"readwrite":"readonly").objectStore(Mh)}function $F(){const t=indexedDB.deleteDatabase(ik);return new cc(t).toPromise()}function Og(){const t=indexedDB.open(ik,BF);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Mh,{keyPath:sk})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Mh)?e(r):(r.close(),await $F(),e(await Og()))})})}async function Wx(t,e,n){const r=gf(t,!0).put({[sk]:e,value:n});return new cc(r).toPromise()}async function WF(t,e){const n=gf(t,!1).get(e),r=await new cc(n).toPromise();return r===void 0?null:r.value}function Kx(t,e){const n=gf(t,!0).delete(e);return new cc(n).toPromise()}const KF=800,JF=3;class ak{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Og(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>JF)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return rk()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=mf._getInstance(GF()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await HF(),!this.activeServiceWorker)return;this.sender=new FF(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&(e=r[0])!=null&&e.fulfilled&&(n=r[0])!=null&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||zF()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Og();return await Wx(e,jh,"1"),await Kx(e,jh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Wx(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>WF(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Kx(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const o=gf(s,!1).getAll();return new cc(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:o}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),KF)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}ak.type="LOCAL";const YF=ak;new oc(3e4,6e4);/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function XF(t,e){return e?_i(e):(xe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Gy extends qy{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Wo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Wo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Wo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function QF(t){return XI(t.auth,new Gy(t),t.bypassAuthState)}function ZF(t){const{auth:e,user:n}=t;return xe(n,e,"internal-error"),NF(n,new Gy(t),t.bypassAuthState)}async function eq(t){const{auth:e,user:n}=t;return xe(n,e,"internal-error"),_F(n,new Gy(t),t.bypassAuthState)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ok{constructor(e,n,r,s,o=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:o,error:u,type:d}=e;if(u){this.reject(u);return}const f={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(f))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return QF;case"linkViaPopup":case"linkViaRedirect":return eq;case"reauthViaPopup":case"reauthViaRedirect":return ZF;default:Cr(this.auth,"internal-error")}}resolve(e){Mi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Mi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const tq=new oc(2e3,1e4);class Vo extends ok{constructor(e,n,r,s,o){super(e,n,s,o),this.provider=r,this.authWindow=null,this.pollId=null,Vo.currentPopupAction&&Vo.currentPopupAction.cancel(),Vo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return xe(e,this.auth,"internal-error"),e}async onExecution(){Mi(this.filter.length===1,"Popup operations only handle one event");const e=zy();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ti(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(ti(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Vo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ti(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,tq.get())};e()}}Vo.currentPopupAction=null;/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const nq="pendingRedirect",ch=new Map;class rq extends ok{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=ch.get(this.auth._key());if(!e){try{const n=await iq(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(n){e=()=>Promise.reject(n)}ch.set(this.auth._key(),e)}return this.bypassAuthState||ch.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function iq(t,e){const n=oq(e),r=aq(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function sq(t,e){ch.set(t._key(),e)}function aq(t){return _i(t._redirectPersistence)}function oq(t){return uh(nq,t.config.apiKey,t.name)}async function lq(t,e,n=!1){if(Zn(t.app))return Promise.reject(Ai(t));const r=Fa(t),s=XF(r,e),o=await new rq(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const uq=600*1e3;class cq{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!dq(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!lk(e)){const s=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(ti(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=uq&&this.cachedEventUids.clear(),this.cachedEventUids.has(Jx(e))}saveEventToCache(e){this.cachedEventUids.add(Jx(e)),this.lastProcessedEventTime=Date.now()}}function Jx(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function lk({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function dq(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return lk(t);default:return!1}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function hq(t,e={}){return Hs(t,"GET","/v1/projects",e)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const fq=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,pq=/^https?/;async function mq(t){if(t.config.emulator)return;const{authorizedDomains:e}=await hq(t);for(const n of e)try{if(gq(n))return}catch{}Cr(t,"unauthorized-domain")}function gq(t){const e=_g(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!pq.test(n))return!1;if(fq.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
* @license
* Copyright 2020 Google LLC.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const yq=new oc(3e4,6e4);function Yx(){const t=ni().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function vq(t){return new Promise((e,n)=>{var r,s,o;function u(){Yx(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Yx(),n(ti(t,"network-request-failed"))},timeout:yq.get()})}if((s=(r=ni().gapi)==null?void 0:r.iframes)!=null&&s.Iframe)e(gapi.iframes.getContext());else if((o=ni().gapi)!=null&&o.load)u();else{const d=cF("iframefcb");return ni()[d]=()=>{gapi.load?u():n(ti(t,"network-request-failed"))},$I(`${uF()}?onload=${d}`).catch(f=>n(f))}}).catch(e=>{throw dh=null,e})}let dh=null;function bq(t){return dh=dh||vq(t),dh}/**
* @license
* Copyright 2020 Google LLC.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const wq=new oc(5e3,15e3),Eq="__/auth/iframe",Sq="emulator/auth/iframe",xq={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Tq=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Cq(t){const e=t.config;xe(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Uy(e,Sq):`https://${t.config.authDomain}/${Eq}`,r={apiKey:e.apiKey,appName:t.name,v:al},s=Tq.get(t.config.apiHost);s&&(r.eid=s);const o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${Zu(r).slice(1)}`}async function Iq(t){const e=await bq(t),n=ni().gapi;return xe(n,t,"internal-error"),e.open({where:document.body,url:Cq(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:xq,dontclear:!0},r=>new Promise(async(s,o)=>{await r.restyle({setHideOnLeave:!1});const u=ti(t,"network-request-failed"),d=ni().setTimeout(()=>{o(u)},wq.get());function f(){ni().clearTimeout(d),s(r)}r.ping(f).then(f,()=>{o(u)})}))}/**
* @license
* Copyright 2020 Google LLC.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const kq={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},_q=500,Nq=600,Aq="_blank",Oq="http://localhost";class Xx{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Pq(t,e,n,r=_q,s=Nq){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),u=Math.max((window.screen.availWidth-r)/2,0).toString();let d="";const f={...kq,width:r.toString(),height:s.toString(),top:o,left:u},p=dn().toLowerCase();n&&(d=VI(p)?Aq:n),LI(p)&&(e=e||Oq,f.scrollbars="yes");const v=Object.entries(f).reduce((S,[I,P])=>`${S}${I}=${P},`,"");if(eF(p)&&d!=="_self")return Rq(e||"",d),new Xx(null);const w=window.open(e||"",d,v);xe(w,t,"popup-blocked");try{w.focus()}catch{}return new Xx(w)}function Rq(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Dq="__/auth/handler",jq="emulator/auth/handler",Mq=encodeURIComponent("fac");async function Qx(t,e,n,r,s,o){xe(t.config.authDomain,t,"auth-domain-config-required"),xe(t.config.apiKey,t,"invalid-api-key");const u={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:al,eventId:s};if(e instanceof JI){e.setDefaultLanguage(t.languageCode),u.providerId=e.providerId||"",eU(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,w]of Object.entries({}))u[v]=w}if(e instanceof uc){const v=e.getScopes().filter(w=>w!=="");v.length>0&&(u.scopes=v.join(","))}t.tenantId&&(u.tid=t.tenantId);const d=u;for(const v of Object.keys(d))d[v]===void 0&&delete d[v];const f=await t._getAppCheckToken(),p=f?`#${Mq}=${encodeURIComponent(f)}`:"";return`${Lq(t)}?${Zu(d).slice(1)}${p}`}function Lq({config:t}){return t.emulator?Uy(t,jq):`https://${t.authDomain}/${Dq}`}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Mm="webStorageSupport";class Uq{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=nk,this._completeRedirectFn=lq,this._overrideRedirectResult=sq}async _openPopup(e,n,r,s){var o;Mi((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const u=await Qx(e,n,r,_g(),s);return Pq(e,u,zy())}async _openRedirect(e,n,r,s){await this._originValidation(e);const o=await Qx(e,n,r,_g(),s);return qF(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:o}=this.eventManagers[n];return s?Promise.resolve(s):(Mi(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await Iq(e),r=new cq(e);return n.register("authEvent",s=>(xe(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Mm,{type:Mm},r=>{var s;const o=(s=r==null?void 0:r[0])==null?void 0:s[Mm];o!==void 0&&n(!!o),Cr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=mq(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return GI()||UI()||Fy()}}const Vq=Uq;var Zx="@firebase/auth",eT="1.12.0";/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Fq{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){xe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function qq(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Hq(t){ri(new xr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:u,authDomain:d}=r.options;xe(u&&!u.includes(":"),"invalid-api-key",{appName:r.name});const f={apiKey:u,authDomain:d,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:BI(t)},p=new aF(r,s,o,f);return gF(p,n),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),ri(new xr("auth-internal",e=>{const n=Fa(e.getProvider("auth").getImmediate());return(r=>new Fq(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),nr(Zx,eT,qq(t)),nr(Zx,eT,"esm2020")}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const zq=300,Gq=zC("authIdTokenMaxAge")||zq;let tT=null;const Bq=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Gq)return;const s=n==null?void 0:n.token;tT!==s&&(tT=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function $q(t=ny()){const e=Ma(t,"auth");if(e.isInitialized())return e.getImmediate();const n=mF(t,{popupRedirectResolver:Vq,persistence:[YF,UF,nk]}),r=zC("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const u=Bq(o.toString());DF(n,u,()=>u(n.currentUser)),RF(n,d=>u(d))}}const s=qC("auth");return s&&yF(n,`http://${s}`),n}function Wq(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}oF({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const o=ti("internal-error");o.customData=s,n(o)},r.type="text/javascript",r.charset="UTF-8",Wq().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Hq("Browser");var Kq="firebase",Jq="12.7.0";/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/nr(Kq,Jq,"app");const uk="@firebase/installations",By="0.6.19";/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const ck=1e4,dk=`w:${By}`,hk="FIS_v2",Yq="https://firebaseinstallations.googleapis.com/v1",Xq=3600*1e3,Qq="installations",Zq="Installations";/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const e9={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Aa=new ja(Qq,Zq,e9);function fk(t){return t instanceof kr&&t.code.includes("request-failed")}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function pk({projectId:t}){return`${Yq}/projects/${t}/installations`}function mk(t){return{token:t.token,requestStatus:2,expiresIn:n9(t.expiresIn),creationTime:Date.now()}}async function gk(t,e){const n=(await e.json()).error;return Aa.create("request-failed",{requestName:t,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function yk({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function t9(t,{refreshToken:e}){const n=yk(t);return n.append("Authorization",r9(e)),n}async function vk(t){const e=await t();return e.status>=500&&e.status<600?t():e}function n9(t){return Number(t.replace("s","000"))}function r9(t){return`${hk} ${t}`}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function i9({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=pk(t),s=yk(t),o=e.getImmediate({optional:!0});if(o){const p=await o.getHeartbeatsHeader();p&&s.append("x-firebase-client",p)}const u={fid:n,authVersion:hk,appId:t.appId,sdkVersion:dk},d={method:"POST",headers:s,body:JSON.stringify(u)},f=await vk(()=>fetch(r,d));if(f.ok){const p=await f.json();return{fid:p.fid||n,registrationStatus:2,refreshToken:p.refreshToken,authToken:mk(p.authToken)}}else throw await gk("Create Installation",f)}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function bk(t){return new Promise(e=>{setTimeout(e,t)})}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function s9(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const a9=/^[cdef][\w-]{21}$/,Pg="";function o9(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const e=l9(t);return a9.test(e)?e:Pg}catch{return Pg}}function l9(t){return s9(t).substr(0,22)}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function yf(t){return`${t.appName}!${t.appId}`}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const wk=new Map;function Ek(t,e){const n=yf(t);Sk(n,e),u9(n,e)}function Sk(t,e){const n=wk.get(t);if(n)for(const r of n)r(e)}function u9(t,e){const n=c9();n&&n.postMessage({key:t,fid:e}),d9()}let Ta=null;function c9(){return!Ta&&"BroadcastChannel"in self&&(Ta=new BroadcastChannel("[Firebase] FID Change"),Ta.onmessage=t=>{Sk(t.data.key,t.data.fid)}),Ta}function d9(){wk.size===0&&Ta&&(Ta.close(),Ta=null)}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const h9="firebase-installations-database",f9=1,Oa="firebase-installations-store";let Lm=null;function $y(){return Lm||(Lm=XC(h9,f9,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Oa)}}})),Lm}async function Lh(t,e){const n=yf(t),r=(await $y()).transaction(Oa,"readwrite"),s=r.objectStore(Oa),o=await s.get(n);return await s.put(e,n),await r.done,(!o||o.fid!==e.fid)&&Ek(t,e.fid),e}async function xk(t){const e=yf(t),n=(await $y()).transaction(Oa,"readwrite");await n.objectStore(Oa).delete(e),await n.done}async function vf(t,e){const n=yf(t),r=(await $y()).transaction(Oa,"readwrite"),s=r.objectStore(Oa),o=await s.get(n),u=e(o);return u===void 0?await s.delete(n):await s.put(u,n),await r.done,u&&(!o||o.fid!==u.fid)&&Ek(t,u.fid),u}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function Wy(t){let e;const n=await vf(t.appConfig,r=>{const s=p9(r),o=m9(t,s);return e=o.registrationPromise,o.installationEntry});return n.fid===Pg?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function p9(t){const e=t||{fid:o9(),registrationStatus:0};return Tk(e)}function m9(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(Aa.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=g9(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:y9(t)}:{installationEntry:e}}async function g9(t,e){try{const n=await i9(t,e);return Lh(t.appConfig,n)}catch(n){throw fk(n)&&n.customData.serverCode===409?await xk(t.appConfig):await Lh(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function y9(t){let e=await nT(t.appConfig);for(;e.registrationStatus===1;)await bk(100),e=await nT(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await Wy(t);return r||n}return e}function nT(t){return vf(t,e=>{if(!e)throw Aa.create("installation-not-found");return Tk(e)})}function Tk(t){return v9(t)?{fid:t.fid,registrationStatus:0}:t}function v9(t){return t.registrationStatus===1&&t.registrationTime+ck<Date.now()}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function b9({appConfig:t,heartbeatServiceProvider:e},n){const r=w9(t,n),s=t9(t,n),o=e.getImmediate({optional:!0});if(o){const p=await o.getHeartbeatsHeader();p&&s.append("x-firebase-client",p)}const u={installation:{sdkVersion:dk,appId:t.appId}},d={method:"POST",headers:s,body:JSON.stringify(u)},f=await vk(()=>fetch(r,d));if(f.ok){const p=await f.json();return mk(p)}else throw await gk("Generate Auth Token",f)}function w9(t,{fid:e}){return`${pk(t)}/${e}/authTokens:generate`}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function Ky(t,e=!1){let n;const r=await vf(t.appConfig,s=>{if(!Ck(s))throw Aa.create("not-registered");const o=s.authToken;if(!e&&x9(o))return s;if(o.requestStatus===1)return n=E9(t,e),s;{if(!navigator.onLine)throw Aa.create("app-offline");const u=C9(s);return n=S9(t,u),u}});return n?await n:r.authToken}async function E9(t,e){let n=await rT(t.appConfig);for(;n.authToken.requestStatus===1;)await bk(100),n=await rT(t.appConfig);const r=n.authToken;return r.requestStatus===0?Ky(t,e):r}function rT(t){return vf(t,e=>{if(!Ck(e))throw Aa.create("not-registered");const n=e.authToken;return I9(n)?{...e,authToken:{requestStatus:0}}:e})}async function S9(t,e){try{const n=await b9(t,e),r={...e,authToken:n};return await Lh(t.appConfig,r),n}catch(n){if(fk(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await xk(t.appConfig);else{const r={...e,authToken:{requestStatus:0}};await Lh(t.appConfig,r)}throw n}}function Ck(t){return t!==void 0&&t.registrationStatus===2}function x9(t){return t.requestStatus===2&&!T9(t)}function T9(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+Xq}function C9(t){const e={requestStatus:1,requestTime:Date.now()};return{...t,authToken:e}}function I9(t){return t.requestStatus===1&&t.requestTime+ck<Date.now()}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function k9(t){const e=t,{installationEntry:n,registrationPromise:r}=await Wy(e);return r?r.catch(console.error):Ky(e).catch(console.error),n.fid}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function _9(t,e=!1){const n=t;return await N9(n),(await Ky(n,e)).token}async function N9(t){const{registrationPromise:e}=await Wy(t);e&&await e}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function A9(t){if(!t||!t.options)throw Um("App Configuration");if(!t.name)throw Um("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw Um(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Um(t){return Aa.create("missing-app-config-values",{valueName:t})}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Ik="installations",O9="installations-internal",P9=t=>{const e=t.getProvider("app").getImmediate(),n=A9(e),r=Ma(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},R9=t=>{const e=t.getProvider("app").getImmediate(),n=Ma(e,Ik).getImmediate();return{getId:()=>k9(n),getToken:r=>_9(n,r)}};function D9(){ri(new xr(Ik,P9,"PUBLIC")),ri(new xr(O9,R9,"PRIVATE"))}D9();nr(uk,By);nr(uk,By,"esm2020");/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Uh="analytics",j9="firebase_id",M9="origin",L9=60*1e3,U9="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Jy="https://www.googletagmanager.com/gtag/js";/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const yn=new Jh("@firebase/analytics");/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const V9={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Vn=new ja("analytics","Analytics",V9);/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function F9(t){if(!t.startsWith(Jy)){const e=Vn.create("invalid-gtag-resource",{gtagURL:t});return yn.warn(e.message),""}return t}function kk(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function q9(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function H9(t,e){const n=q9("firebase-js-sdk-policy",{createScriptURL:F9}),r=document.createElement("script"),s=`${Jy}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(s):s,r.async=!0,document.head.appendChild(r)}function z9(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function G9(t,e,n,r,s,o){const u=r[s];try{if(u)await e[u];else{const d=(await kk(n)).find(f=>f.measurementId===s);d&&await e[d.appId]}}catch(d){yn.error(d)}t("config",s,o)}async function B9(t,e,n,r,s){try{let o=[];if(s&&s.send_to){let u=s.send_to;Array.isArray(u)||(u=[u]);const d=await kk(n);for(const f of u){const p=d.find(w=>w.measurementId===f),v=p&&e[p.appId];if(v)o.push(v);else{o=[];break}}}o.length===0&&(o=Object.values(e)),await Promise.all(o),t("event",r,s||{})}catch(o){yn.error(o)}}function $9(t,e,n,r){async function s(o,...u){try{if(o==="event"){const[d,f]=u;await B9(t,e,n,d,f)}else if(o==="config"){const[d,f]=u;await G9(t,e,n,r,d,f)}else if(o==="consent"){const[d,f]=u;t("consent",d,f)}else if(o==="get"){const[d,f,p]=u;t("get",d,f,p)}else if(o==="set"){const[d]=u;t("set",d)}else t(o,...u)}catch(d){yn.error(d)}}return s}function W9(t,e,n,r,s){let o=function(...u){window[r].push(arguments)};return window[s]&&typeof window[s]=="function"&&(o=window[s]),window[s]=$9(o,t,e,n),{gtagCore:o,wrappedGtag:window[s]}}function K9(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(Jy)&&n.src.includes(t))return n;return null}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const J9=30,Y9=1e3;class X9{constructor(e={},n=Y9){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const _k=new X9;function Q9(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function Z9(t){var e;const{appId:n,apiKey:r}=t,s={method:"GET",headers:Q9(r)},o=U9.replace("{app-id}",n),u=await fetch(o,s);if(u.status!==200&&u.status!==304){let d="";try{const f=await u.json();(e=f.error)!=null&&e.message&&(d=f.error.message)}catch{}throw Vn.create("config-fetch-failed",{httpStatus:u.status,responseMessage:d})}return u.json()}async function eH(t,e=_k,n){const{appId:r,apiKey:s,measurementId:o}=t.options;if(!r)throw Vn.create("no-app-id");if(!s){if(o)return{measurementId:o,appId:r};throw Vn.create("no-api-key")}const u=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},d=new rH;return setTimeout(async()=>{d.abort()},L9),Nk({appId:r,apiKey:s,measurementId:o},u,d,e)}async function Nk(t,{throttleEndTimeMillis:e,backoffCount:n},r,s=_k){var o;const{appId:u,measurementId:d}=t;try{await tH(r,e)}catch(f){if(d)return yn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${f==null?void 0:f.message}]`),{appId:u,measurementId:d};throw f}try{const f=await Z9(t);return s.deleteThrottleMetadata(u),f}catch(f){const p=f;if(!nH(p)){if(s.deleteThrottleMetadata(u),d)return yn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${p==null?void 0:p.message}]`),{appId:u,measurementId:d};throw f}const v=Number((o=p==null?void 0:p.customData)==null?void 0:o.httpStatus)===503?kS(n,s.intervalMillis,J9):kS(n,s.intervalMillis),w={throttleEndTimeMillis:Date.now()+v,backoffCount:n+1};return s.setThrottleMetadata(u,w),yn.debug(`Calling attemptFetch again in ${v} millis`),Nk(t,w,r,s)}}function tH(t,e){return new Promise((n,r)=>{const s=Math.max(e-Date.now(),0),o=setTimeout(n,s);t.addEventListener(()=>{clearTimeout(o),r(Vn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function nH(t){if(!(t instanceof kr)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class rH{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function iH(t,e,n,r,s){if(s&&s.global){t("event",n,r);return}else{const o=await e,u={...r,send_to:o};t("event",n,u)}}async function sH(t,e,n,r){if(r&&r.global){const s={};for(const o of Object.keys(n))s[`user_properties.${o}`]=n[o];return t("set",s),Promise.resolve()}else{const s=await e;t("config",s,{update:!0,user_properties:n})}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function aH(){if(WC())try{await KC()}catch(t){return yn.warn(Vn.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return yn.warn(Vn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function oH(t,e,n,r,s,o,u){const d=eH(t);d.then(S=>{n[S.measurementId]=S.appId,t.options.measurementId&&S.measurementId!==t.options.measurementId&&yn.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${S.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(S=>yn.error(S)),e.push(d);const f=aH().then(S=>{if(S)return r.getId()}),[p,v]=await Promise.all([d,f]);K9(o)||H9(o,p.measurementId),s("js",new Date);const w=(u==null?void 0:u.config)??{};return w[M9]="firebase",w.update=!0,v!=null&&(w[j9]=v),s("config",p.measurementId,w),p.measurementId}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class lH{constructor(e){this.app=e}_delete(){return delete Ko[this.app.options.appId],Promise.resolve()}}let Ko={},iT=[];const sT={};let Vm="dataLayer",uH="gtag",aT,Yy,oT=!1;function cH(){const t=[];if($C()&&t.push("This is a browser extension environment."),YL()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,s)=>`(${s+1}) ${r}`).join(" "),n=Vn.create("invalid-analytics-context",{errorInfo:e});yn.warn(n.message)}}function dH(t,e,n){cH();const r=t.options.appId;if(!r)throw Vn.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)yn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Vn.create("no-api-key");if(Ko[r]!=null)throw Vn.create("already-exists",{id:r});if(!oT){z9(Vm);const{wrappedGtag:s,gtagCore:o}=W9(Ko,iT,sT,Vm,uH);Yy=s,aT=o,oT=!0}return Ko[r]=oH(t,iT,sT,e,aT,Vm,n),new lH(t)}function hH(t=ny()){t=Ut(t);const e=Ma(t,Uh);return e.isInitialized()?e.getImmediate():fH(t)}function fH(t,e={}){const n=Ma(t,Uh);if(n.isInitialized()){const r=n.getImmediate();if(As(e,n.getOptions()))return r;throw Vn.create("already-initialized")}return n.initialize({options:e})}function pH(t,e,n){t=Ut(t),sH(Yy,Ko[t.app.options.appId],e,n).catch(r=>yn.error(r))}function mH(t,e,n,r){t=Ut(t),iH(Yy,Ko[t.app.options.appId],e,n,r).catch(s=>yn.error(s))}const lT="@firebase/analytics",uT="0.10.19";function gH(){ri(new xr(Uh,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return dH(r,s,n)},"PUBLIC")),ri(new xr("analytics-internal",t,"PRIVATE")),nr(lT,uT),nr(lT,uT,"esm2020");function t(e){try{const n=e.getProvider(Uh).getImmediate();return{logEvent:(r,s,o)=>mH(n,r,s,o),setUserProperties:(r,s)=>pH(n,r,s)}}catch(n){throw Vn.create("interop-component-reg-failed",{reason:n})}}}gH();const yH={apiKey:"AIzaSyC8HHHPVTtHpkunflCmD3FTbHTo1l9JbgQ",authDomain:"chatterbox-d7i21.firebaseapp.com",projectId:"chatterbox-d7i21",storageBucket:"chatterbox-d7i21.firebasestorage.app",messagingSenderId:"218217233946",appId:"1:218217233946:web:c7504871b112a8f4085ba3"},Xy=QC(yH),vr=mV(Xy),Fm=$q(Xy);hH(Xy);const qm={async getProducts(){return(await Dm(wa(vr,"products"))).docs.map(t=>({id:t.id,...t.data()}))},async addProduct(t){return{id:(await Yd(wa(vr,"products"),t)).id,...t}},async updateProduct(t,e){return await jx(_u(vr,"products",t),e),{id:t,...e}},async deleteProduct(t){await Mx(_u(vr,"products",t))},async registerUser(t,e,n){const r=await OF(Fm,t,e);return await Yd(wa(vr,"users"),{uid:r.user.uid,...n,createdAt:new Date}),r.user},async loginUser(t,e){return await PF(Fm,t,e)},async logoutUser(){await jF(Fm)},async createOrder(t){return{id:(await Yd(wa(vr,"orders"),{...t,createdAt:new Date,status:"pending"})).id,...t}},async getUserOrders(t){const e=kV(wa(vr,"orders"),_V("userId","==",t),NV("createdAt","desc"));return(await Dm(e)).docs.map(n=>({id:n.id,...n.data()}))},async getHeroSlides(){return(await Dm(wa(vr,"heroSlides"))).docs.map(t=>({id:t.id,...t.data()}))},async addHeroSlide(t){return{id:(await Yd(wa(vr,"heroSlides"),t)).id,...t}},async updateHeroSlide(t,e){return await jx(_u(vr,"heroSlides",t),e),{id:t,...e}},async deleteHeroSlide(t){await Mx(_u(vr,"heroSlides",t))}},Ii="/api",Rg=()=>localStorage.getItem("himalayan_token"),Jr=async(t,e={})=>{const n=Rg(),r={"Content-Type":"application/json",...e.headers};n&&(r.Authorization=`Bearer ${n}`);const s=await fetch(`${Ii}${t}`,{...e,headers:r});if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);return s.json()},Tt={getProducts:async()=>{try{return await qm.getProducts()}catch(t){return console.error("Firestore error:",t),[]}try{return await Jr("/products")}catch(t){return console.error("Failed to fetch products:",t),[]}},getProductById:async t=>{try{return await Jr(`/products/${t}`)}catch(e){console.error("Failed to fetch product:",e);return}},addProduct:async t=>await Jr("/products",{method:"POST",body:JSON.stringify(t)}),updateProduct:async(t,e)=>await Jr(`/products/${t}`,{method:"PUT",body:JSON.stringify(e)}),deleteProduct:async t=>{await Jr(`/products/${t}`,{method:"DELETE"})},login:async(t,e)=>{try{const n=await(await fetch(`${Ii}/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:e})})).json();return n.success&&n.token?(localStorage.setItem("himalayan_token",n.token),localStorage.setItem("himalayan_auth","true"),{success:!0,token:n.token}):{success:!1}}catch(n){return console.error("Login failed:",n),{success:!1}}},registerAdmin:async t=>{try{return{success:(await(await fetch(`${Ii}/auth/register`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).json()).success}}catch(e){return console.error("Registration failed:",e),{success:!1}}},logout:()=>{localStorage.removeItem("himalayan_token"),localStorage.removeItem("himalayan_auth")},isAuthenticated:()=>localStorage.getItem("himalayan_auth")==="true"&&Rg()!==null,uploadImage:async t=>{const e=new FormData;e.append("image",t);const n=Rg(),r=await fetch(`${Ii}/upload`,{method:"POST",headers:{Authorization:`Bearer ${n}`},body:e});if(!r.ok)throw new Error("Upload failed");return(await r.json()).imageUrl},getHeroSlides:async()=>{try{return await Jr("/hero-slides")}catch(t){return console.error("Failed to fetch hero slides:",t),[]}},addHeroSlide:async t=>{try{return await Jr("/hero-slides",{method:"POST",body:JSON.stringify(t)})}catch(e){throw console.error("API Error adding hero slide:",e),e}},updateHeroSlide:async(t,e)=>{try{return await Jr(`/hero-slides/${t}`,{method:"PUT",body:JSON.stringify(e)})}catch(n){throw console.error("API Error updating hero slide:",n),n}},deleteHeroSlide:async t=>{await Jr(`/hero-slides/${t}`,{method:"DELETE"})},submitContact:async t=>{try{return{success:(await(await fetch(`${Ii}/contact`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).json()).success}}catch(e){return console.error("Contact submission failed:",e),{success:!1}}},getContactMessages:async()=>{try{return await Jr("/contact")}catch(t){return console.error("Failed to fetch contact messages:",t),[]}},userRegister:async t=>{try{return{success:!0,user:{id:(await qm.registerUser(t.email,t.password,{name:t.name,phone:t.phone,email:t.email})).uid,name:t.name,email:t.email}}}catch(e){return{success:!1,error:e.message}}try{return await(await fetch(`${Ii}/users/register`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).json()}catch(e){return console.error("Registration failed:",e),{success:!1}}},userLogin:async(t,e)=>{try{const n=await qm.loginUser(t,e);return{success:!0,user:{id:n.user.uid,email:n.user.email,name:n.user.displayName||"User"}}}catch(n){return{success:!1,error:n.message}}try{return await(await fetch(`${Ii}/users/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:e})})).json()}catch(n){return console.error("Login failed:",n),{success:!1}}},createOrder:async t=>{try{return await(await fetch(`${Ii}/orders`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).json()}catch(e){return console.error("Order creation failed:",e),{success:!1}}},getUserOrders:async t=>{try{return await(await fetch(`${Ii}/orders/${t}`)).json()}catch(e){return console.error("Failed to fetch user orders:",e),[]}}};function vH(t){const e=atob(t),n=e.length,r=new Uint8Array(n);for(let s=0;s<n;s++)r[s]=e.charCodeAt(s);return r}function bH(t){let e="";const n=t.byteLength;for(let r=0;r<n;r++)e+=String.fromCharCode(t[r]);return btoa(e)}async function wH(t,e,n,r){const s=new Int16Array(t.buffer),o=s.length/r,u=e.createBuffer(r,o,n);for(let d=0;d<r;d++){const f=u.getChannelData(d);for(let p=0;p<o;p++)f[p]=s[p*r+d]/32768}return u}const EH=()=>{const[t,e]=z.useState(!1),[n,r]=z.useState(!1),[s,o]=z.useState(!1),[u,d]=z.useState(null),f=Ls(),{addToCart:p}=Ra(),v=z.useRef({addToCart:p});v.current={addToCart:p};const w=z.useRef({}),S=z.useRef(0),I=z.useRef(new Set),P=z.useRef(null),j=z.useRef(null),D=()=>{j.current=null,P.current&&(P.current.getTracks().forEach(B=>B.stop()),P.current=null),I.current.forEach(B=>{try{B.stop()}catch{}}),I.current.clear(),e(!1),r(!1),S.current=0},q=[{name:"navigate_to",parameters:{type:gn.OBJECT,description:"Navigate the user to specific parts of the Nepali store.",properties:{page:{type:gn.STRING,description:"Target: home, products, about, cart, contact"},category:{type:gn.STRING,description:"Filter: Jadibuti or Local Fruits"},search_query:{type:gn.STRING,description:"Product name in English or Nepali"}},required:["page"]}},{name:"add_product_to_cart",parameters:{type:gn.OBJECT,description:"Add a high-quality Himalayan product to the cart.",properties:{product_name:{type:gn.STRING,description:"Name of the product (e.g., Timur, Apple)"},quantity:{type:gn.NUMBER,description:"Quantity (defaults to 1)"}},required:["product_name"]}}],X=async()=>{d(null),r(!0);try{const B=new AL({apiKey:"PLACEHOLDER_API_KEY"}),re=await Tt.getProducts();(!w.current.input||w.current.input.state==="closed")&&(w.current.input=new(window.AudioContext||window.webkitAudioContext)({sampleRate:16e3})),(!w.current.output||w.current.output.state==="closed")&&(w.current.output=new(window.AudioContext||window.webkitAudioContext)({sampleRate:24e3})),await w.current.input.resume(),await w.current.output.resume();const ce=await navigator.mediaDevices.getUserMedia({audio:!0});P.current=ce;const ue=B.live.connect({model:"gemini-2.5-flash-native-audio-preview-09-2025",config:{responseModalities:[Vu.AUDIO],tools:[{functionDeclarations:q}],speechConfig:{voiceConfig:{prebuiltVoiceConfig:{voiceName:"Puck"}}},systemInstruction:` 'Himalayan Herbs & Fruits'    (Himalayan Sathi)  
          
          Persona & Culture:
          - Always start with a warm "Namaste". 
          - Be extremely polite, use "Hajur", "Dhanyabaad", and respect the Nepali value "Atithi Devo Bhava" (Guest is God).
          - You are an expert in local Jadibuti (Timur, Jatamasi) and organic Fruits from Jumla/Mustang.
          
          Technical Duties:
          - Inventory: ${JSON.stringify(re.map(A=>({name:A.name,nepali:A.nepaliName,price:A.price,benefits:A.benefits})))}
          - Commands:
            1. If they want to see products or categories, use 'navigate_to'.
            2. If they want to buy, use 'add_product_to_cart'.
            3. Always verbally confirm the action after calling the tool (e.g., "Hajur, I've added Timur to your cart!").
          - Language: You understand both Nepali and English perfectly.
          
          Respond naturally, keeping responses short enough for a voice conversation.`},callbacks:{onopen:()=>{r(!1),e(!0);const A=w.current.input.createMediaStreamSource(ce),N=w.current.input.createScriptProcessor(4096,1,1);N.onaudioprocess=O=>{const U=O.inputBuffer.getChannelData(0),M=U.length,H=new Int16Array(M);for(let ae=0;ae<M;ae++)H[ae]=U[ae]*32768;const R={data:bH(new Uint8Array(H.buffer)),mimeType:"audio/pcm;rate=16000"};ue.then(ae=>{ae.sendRealtimeInput({media:R})}).catch(()=>{})},A.connect(N),N.connect(w.current.input.destination)},onmessage:async A=>{var N,O,U,M,H;if(A.toolCall){const ae=[];for(const Oe of A.toolCall.functionCalls){let J="Action performed successfully.";if(Oe.name==="navigate_to"){const{page:le,category:be,search_query:Re}=Oe.args;let Le="/";le==="products"?Le="/products":le==="cart"?Le="/cart":le==="contact"&&(Le="/contact"),be?Le+=`?category=${encodeURIComponent(be)}`:Re&&(Le+=`?search=${encodeURIComponent(Re)}`),f(Le),J=`Navigation successful. User is now viewing ${le}.`}else if(Oe.name==="add_product_to_cart"){const{product_name:le,quantity:be=1}=Oe.args,Re=re.find(Le=>Le.name.toLowerCase().includes(le.toLowerCase())||Le.nepaliName.includes(le));Re?(v.current.addToCart(Re,Number(be)),J=`Added ${be} units of ${Re.name} to the cart. Price: Rs. ${Re.price}.`):J=`Product '${le}' not found.`}ae.push({id:Oe.id,name:Oe.name,response:{result:J}})}ae.length>0&&ue.then(Oe=>{Oe.sendToolResponse({functionResponses:ae})})}const R=(M=(U=(O=(N=A.serverContent)==null?void 0:N.modelTurn)==null?void 0:O.parts[0])==null?void 0:U.inlineData)==null?void 0:M.data;if(R&&w.current.output){const ae=w.current.output;S.current=Math.max(S.current,ae.currentTime);const Oe=await wH(vH(R),ae,24e3,1),J=ae.createBufferSource();J.buffer=Oe,J.connect(ae.destination),J.addEventListener("ended",()=>{I.current.delete(J),I.current.size===0&&o(!1)}),o(!0),J.start(S.current),S.current+=Oe.duration,I.current.add(J)}(H=A.serverContent)!=null&&H.interrupted&&(I.current.forEach(ae=>{try{ae.stop()}catch{}}),I.current.clear(),S.current=0,o(!1))},onerror:A=>{console.error("Live API Error:",A),d("Network error. Please try again."),D()},onclose:()=>{D()}}});j.current=await ue}catch(B){console.error("Assistant Start Error:",B),d("Connection failed. Check your microphone or network."),r(!1)}};return E.jsxs("div",{className:"fixed bottom-8 right-8 z-[100] flex flex-col items-end gap-4",children:[t&&E.jsxs("div",{className:"bg-white rounded-[3rem] shadow-2xl p-8 w-80 border-t-8 border-primary-green overflow-hidden animate-in slide-in-from-bottom-6 duration-500 relative",children:[E.jsx("div",{className:"absolute top-0 right-0 opacity-[0.03] pointer-events-none",children:E.jsx("div",{className:"grid grid-cols-4 gap-1",children:[...Array(20)].map((B,re)=>E.jsx("div",{className:"w-10 h-10 bg-red-500 rotate-45"},re))})}),E.jsxs("div",{className:"flex justify-between items-center mb-8",children:[E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx("div",{className:"w-3 h-3 bg-red-600 rounded-full animate-pulse shadow-sm shadow-red-500"}),E.jsxs("div",{className:"flex flex-col",children:[E.jsx("span",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-text-dark/40",children:"Himalayan Sathi"}),E.jsx("span",{className:"text-xs font-bold text-primary-green",children:"   LIVE"})]})]}),E.jsx("button",{onClick:D,className:"p-2 hover:bg-neutral-bg rounded-full transition-colors",children:E.jsx(Gg,{size:20,className:"text-text-dark/50"})})]}),E.jsxs("div",{className:"flex flex-col items-center py-6",children:[E.jsxs("div",{className:`w-28 h-28 rounded-full bg-accent-cream flex items-center justify-center relative transition-all duration-500 shadow-inner ${s?"scale-110 shadow-primary-green/20":"scale-100"}`,children:[E.jsx("div",{className:"flex gap-1.5 items-end h-10",children:[...Array(6)].map((B,re)=>E.jsx("div",{className:`w-1.5 bg-primary-green rounded-full transition-all duration-300 ${s?"animate-bounce":"h-2 opacity-30"}`,style:{animationDelay:`${re*.1}s`,height:s?`${20+Math.random()*30}px`:"8px"}},re))}),s&&E.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-primary-green/20 animate-ping"})]}),E.jsxs("div",{className:"mt-8 text-center",children:[E.jsx("p",{className:"text-lg font-bold text-text-dark mb-1",children:s?"Namaste! I'm speaking...":"Listening..."}),E.jsx("p",{className:"text-[10px] font-bold text-earth-brown uppercase tracking-widest opacity-60",children:s?"!  ?":"! ..."})]})]}),E.jsxs("div",{className:"mt-6 pt-6 border-t border-neutral-bg flex flex-col gap-3",children:[E.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-text-dark/40 bg-neutral-bg/50 px-3 py-2 rounded-xl italic",children:[E.jsx(F2,{size:12}),'"Show me Apples" or "  "']}),E.jsxs("button",{onClick:D,className:"w-full bg-red-50 text-red-600 py-4 rounded-[1.5rem] font-bold text-sm hover:bg-red-100 transition-all flex items-center justify-center gap-2 active:scale-95",children:[E.jsx(H2,{size:18})," End Session ( )"]})]})]}),!t&&E.jsxs("div",{className:"group flex items-center gap-4",children:[u&&E.jsx("div",{className:"bg-red-600 text-white text-[10px] font-black px-5 py-2.5 rounded-full shadow-2xl animate-in slide-in-from-right-4",children:u}),E.jsx("div",{className:"bg-white px-5 py-3 rounded-2xl shadow-xl border border-primary-green/10 opacity-0 group-hover:opacity-100 transition-all -translate-x-2 group-hover:translate-x-0",children:E.jsxs("div",{className:"flex flex-col items-end",children:[E.jsx("span",{className:"text-xs font-bold text-primary-green",children:"Ask our Himalayan Sathi"}),E.jsx("span",{className:"text-[9px] font-bold text-earth-brown/60 uppercase tracking-widest",children:"!  ?"})]})}),E.jsxs("button",{onClick:X,disabled:n,className:"w-20 h-20 bg-primary-green text-white rounded-full flex flex-col items-center justify-center shadow-[0_20px_50px_rgba(29,124,75,0.3)] hover:scale-110 active:scale-90 transition-all disabled:opacity-50 relative overflow-hidden group/btn",children:[n?E.jsx(Nu,{className:"animate-spin",size:32}):E.jsxs(E.Fragment,{children:[E.jsx(Lu,{size:32,className:"relative z-10 group-hover/btn:rotate-12 transition-transform"}),E.jsx("span",{className:"text-[8px] font-black uppercase tracking-tighter mt-1 opacity-60",children:"Voice"})]}),E.jsx("div",{className:"absolute top-0 left-0 w-full h-1/2 bg-white/10"})]})]})]})},SH=()=>{const t=localStorage.getItem("user_token"),e=localStorage.getItem("user_name"),n=()=>{localStorage.removeItem("user_token"),localStorage.removeItem("user_email"),localStorage.removeItem("user_name"),window.location.reload()};return t?E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsxs("span",{className:"text-sm text-earth-brown",children:["Hi, ",e||"User"]}),E.jsxs("button",{onClick:n,className:"flex items-center gap-1 text-sm font-medium text-text-dark hover:text-primary-green transition-colors",children:[E.jsx(MT,{size:16})," Logout"]})]}):E.jsxs("div",{className:"flex items-center gap-4",children:[E.jsx(rt,{to:"/login",className:"text-sm font-medium text-text-dark hover:text-primary-green transition-colors",children:"Login"}),E.jsx(rt,{to:"/signup",className:"bg-primary-green text-white px-4 py-2 rounded-xl text-sm font-medium hover:bg-primary-green/90 transition-colors",children:"Sign Up"})]})},xH=({children:t})=>{const[e,n]=dT.useState(!1),{totalItems:r}=Ra(),s=Li(),o=[{path:"/",label:"Home"},{path:"/products",label:"Products"},{path:"/about",label:"About"},{path:"/testimonials",label:"Testimonials"},{path:"/contact",label:"Contact"}];return s.pathname==="/admin/dashboard"?E.jsx(E.Fragment,{children:t}):E.jsxs("div",{className:"flex flex-col min-h-screen font-sans",children:[E.jsxs("nav",{className:"sticky top-0 z-50 bg-accent-cream shadow-sm border-b border-primary-green/10",children:[E.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:E.jsxs("div",{className:"flex justify-between h-20 items-center",children:[E.jsxs(rt,{to:"/",className:"flex items-center gap-2 group",children:[E.jsx("div",{className:"bg-primary-green p-2 rounded-lg text-white",children:E.jsx(Lu,{size:24})}),E.jsxs("div",{className:"flex flex-col",children:[E.jsx("span",{className:"text-primary-green font-bold text-xl leading-tight tracking-tight",children:"HIMALAYAN"}),E.jsx("span",{className:"text-earth-brown text-sm font-semibold tracking-wider",children:"HERBS & FRUITS"})]})]}),E.jsxs("div",{className:"hidden md:flex items-center space-x-8",children:[o.map(u=>E.jsx(rt,{to:u.path,className:`text-sm font-medium transition-colors hover:text-primary-green ${s.pathname===u.path?"text-primary-green border-b-2 border-primary-green":"text-text-dark"}`,children:u.label},u.path)),E.jsx(SH,{}),E.jsxs(rt,{to:"/cart",className:"relative p-2 text-text-dark hover:text-primary-green transition-colors",children:[E.jsx(Fw,{size:24}),r>0&&E.jsx("span",{className:"absolute top-0 right-0 bg-primary-green text-white text-[10px] font-bold h-5 w-5 rounded-full flex items-center justify-center border-2 border-accent-cream",children:r})]})]}),E.jsxs("div",{className:"md:hidden flex items-center gap-4",children:[E.jsxs(rt,{to:"/cart",className:"relative p-2 text-text-dark",children:[E.jsx(Fw,{size:24}),r>0&&E.jsx("span",{className:"absolute top-0 right-0 bg-primary-green text-white text-[10px] font-bold h-4 w-4 rounded-full flex items-center justify-center",children:r})]}),E.jsx("button",{onClick:()=>n(!e),className:"text-text-dark",children:e?E.jsx(Gg,{size:28}):E.jsx(U2,{size:28})})]})]})}),e&&E.jsx("div",{className:"md:hidden bg-accent-cream border-t border-primary-green/10 py-4 px-4 space-y-4",children:o.map(u=>E.jsx(rt,{to:u.path,className:"block text-lg font-medium text-text-dark",onClick:()=>n(!1),children:u.label},u.path))})]}),E.jsx("main",{className:"flex-grow",children:t}),E.jsx(EH,{}),E.jsx("footer",{className:"bg-text-dark text-accent-cream pt-16 pb-8",children:E.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[E.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-12 mb-12",children:[E.jsxs("div",{className:"col-span-1 md:col-span-2",children:[E.jsxs(rt,{to:"/",className:"flex items-center gap-2 mb-6",children:[E.jsx(Lu,{className:"text-primary-green",size:28}),E.jsx("span",{className:"text-2xl font-bold tracking-tight",children:"Himalayan Herbs & Fruits"})]}),E.jsx("p",{className:"text-accent-cream/70 leading-relaxed max-w-md",children:"Our mission is to support local Nepali farmers and promote organic Himalayan products. Bringing the authentic taste of the mountains and the ancient wisdom of Himalayan herbs to your doorstep."})]}),E.jsxs("div",{children:[E.jsx("h4",{className:"text-lg font-semibold mb-6 text-primary-green",children:"Quick Links"}),E.jsxs("ul",{className:"space-y-4 text-accent-cream/70",children:[E.jsx("li",{children:E.jsx(rt,{to:"/",className:"hover:text-primary-green transition-colors",children:"Home"})}),E.jsx("li",{children:E.jsx(rt,{to:"/products",className:"hover:text-primary-green transition-colors",children:"All Products"})}),E.jsx("li",{children:E.jsx(rt,{to:"/about",className:"hover:text-primary-green transition-colors",children:"About Us"})}),E.jsx("li",{children:E.jsx(rt,{to:"/contact",className:"hover:text-primary-green transition-colors",children:"Contact"})})]})]}),E.jsxs("div",{children:[E.jsx("h4",{className:"text-lg font-semibold mb-6 text-primary-green",children:"Stay Connected"}),E.jsxs("div",{className:"flex space-x-4 mb-8",children:[E.jsx("a",{href:"#",className:"p-2 bg-accent-cream/10 rounded-full hover:bg-primary-green transition-colors",children:E.jsx(C2,{size:20})}),E.jsx("a",{href:"#",className:"p-2 bg-accent-cream/10 rounded-full hover:bg-primary-green transition-colors",children:E.jsx(v2,{size:20})}),E.jsx("a",{href:"#",className:"p-2 bg-accent-cream/10 rounded-full hover:bg-primary-green transition-colors",children:E.jsx(pO,{size:20})})]}),E.jsxs(rt,{to:"/admin/login",className:"flex items-center gap-2 text-primary-green/60 hover:text-primary-green transition-colors text-sm font-medium",children:[E.jsx(HT,{size:16})," Admin Portal"]})]})]}),E.jsx("div",{className:"pt-8 border-t border-accent-cream/10 text-center text-sm text-accent-cream/50",children:E.jsx("p",{children:" 2025 Himalayan Herbs & Fruits. All rights reserved."})})]})})]})};var on=(t=>(t.HERBS="Jadibuti",t.FRUITS="Local Fruits",t))(on||{});on.HERBS,on.HERBS,on.HERBS,on.HERBS,on.HERBS,on.HERBS,on.FRUITS,on.FRUITS,on.FRUITS,on.FRUITS,on.FRUITS;const Ak=[{id:"t1",name:"Ram Kumar Shrestha",text:"             ",location:"Kathmandu, Nepal"},{id:"t2",name:"Anjali Gurung",text:"               ",location:"Pokhara, Nepal"},{id:"t3",name:"David Wilson",text:"Nepali local products with great packaging. The Kurilo roots are authentic and high quality.",location:"Expat in Nepal"}],TH=()=>{const[t,e]=z.useState([]),[n,r]=z.useState(0),[s,o]=z.useState(!0);z.useEffect(()=>{u()},[]),z.useEffect(()=>{if(t.length>1){const v=setInterval(()=>{r(w=>(w+1)%t.length)},5e3);return()=>clearInterval(v)}},[t.length]);const u=async()=>{try{const v=(await Tt.getHeroSlides()).filter(w=>w.isActive).sort((w,S)=>w.order-S.order);e(v)}catch(v){console.error("Failed to load hero slides:",v)}finally{o(!1)}},d=()=>{r(v=>(v+1)%t.length)},f=()=>{r(v=>(v-1+t.length)%t.length)},p=v=>{r(v)};return s?E.jsx("div",{className:"relative h-[70vh] bg-gradient-to-r from-primary-green to-earth-brown animate-pulse",children:E.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:E.jsx("div",{className:"text-white text-xl",children:"Loading..."})})}):t.length===0?E.jsx("div",{className:"relative h-[70vh] bg-gradient-to-r from-primary-green to-earth-brown",children:E.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:E.jsxs("div",{className:"text-center text-white",children:[E.jsx("h1",{className:"text-4xl font-bold mb-4",children:"Welcome to Himalayan Herbs & Fruits"}),E.jsx("p",{className:"text-xl",children:"Authentic organic products from Nepal"})]})})}):E.jsxs("div",{className:"relative h-[70vh] overflow-hidden",children:[E.jsx("div",{className:"flex transition-transform duration-500 ease-in-out h-full",style:{transform:`translateX(-${n*100}%)`},children:t.map((v,w)=>E.jsxs("div",{className:"min-w-full h-full relative",children:[E.jsx("div",{className:"absolute inset-0 bg-cover bg-center bg-no-repeat",style:{backgroundImage:`url(${v.image})`},children:E.jsx("div",{className:"absolute inset-0 bg-black/40"})}),E.jsx("div",{className:"relative z-10 h-full flex items-center",children:E.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:E.jsxs("div",{className:"max-w-3xl",children:[E.jsx("h1",{className:"text-4xl md:text-6xl font-bold text-white mb-6 leading-tight",children:v.title}),E.jsx("p",{className:"text-xl md:text-2xl text-white/90 mb-8 leading-relaxed",children:v.subtitle}),E.jsx(rt,{to:v.buttonLink,className:"inline-block bg-primary-green text-white px-8 py-4 rounded-2xl font-bold text-lg hover:bg-primary-green/90 transition-all shadow-lg hover:shadow-xl transform hover:scale-105",children:v.buttonText})]})})})]},v.id))}),t.length>1&&E.jsxs(E.Fragment,{children:[E.jsx("button",{onClick:f,className:"absolute left-4 top-1/2 -translate-y-1/2 bg-white/20 hover:bg-white/30 text-white p-3 rounded-full transition-all backdrop-blur-sm",children:E.jsx(u2,{size:24})}),E.jsx("button",{onClick:d,className:"absolute right-4 top-1/2 -translate-y-1/2 bg-white/20 hover:bg-white/30 text-white p-3 rounded-full transition-all backdrop-blur-sm",children:E.jsx(d2,{size:24})})]}),t.length>1&&E.jsx("div",{className:"absolute bottom-6 left-1/2 -translate-x-1/2 flex space-x-3",children:t.map((v,w)=>E.jsx("button",{onClick:()=>p(w),className:`w-3 h-3 rounded-full transition-all ${w===n?"bg-white scale-125":"bg-white/50 hover:bg-white/75"}`},w))})]})},CH=()=>{const[t,e]=z.useState([]),{addToCart:n}=Ra();return z.useEffect(()=>{Tt.getProducts().then(r=>{e(r.slice(0,4))})},[]),E.jsxs("div",{className:"animate-in fade-in duration-500",children:[E.jsx(TH,{}),E.jsxs("section",{className:"py-24 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[E.jsxs("div",{className:"text-center mb-16",children:[E.jsx("h3",{className:"text-3xl font-bold text-text-dark mb-4",children:"Our Categories"}),E.jsx("div",{className:"w-20 h-1 bg-primary-green mx-auto"})]}),E.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[E.jsxs(rt,{to:"/products?category=Jadibuti",className:"group relative h-80 rounded-3xl overflow-hidden shadow-xl",children:[E.jsx("img",{src:"https://picsum.photos/seed/herb-cat/800/600",className:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-110",alt:"Herbs"}),E.jsxs("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 to-transparent flex flex-col justify-end p-8",children:[E.jsx(Lu,{className:"text-primary-green mb-4",size:40}),E.jsx("h4",{className:"text-3xl font-bold text-white mb-2",children:"Jadibuti / Herbs"}),E.jsx("p",{className:"text-white/80",children:"Traditional medicinal herbs from the high Himalayas."})]})]}),E.jsxs(rt,{to:"/products?category=Local Fruits",className:"group relative h-80 rounded-3xl overflow-hidden shadow-xl",children:[E.jsx("img",{src:"https://picsum.photos/seed/fruit-cat/800/600",className:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-110",alt:"Fruits"}),E.jsxs("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 to-transparent flex flex-col justify-end p-8",children:[E.jsx(i2,{className:"text-primary-green mb-4",size:40}),E.jsx("h4",{className:"text-3xl font-bold text-white mb-2",children:"Local Fruits"}),E.jsx("p",{className:"text-white/80",children:"Sweet, sun-ripened organic fruits from Nepal's hills."})]})]})]})]}),E.jsx("section",{className:"py-24 bg-accent-cream",children:E.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[E.jsxs("div",{className:"flex justify-between items-end mb-12",children:[E.jsxs("div",{children:[E.jsx("h3",{className:"text-3xl font-bold text-text-dark mb-2",children:"Featured Products"}),E.jsx("p",{className:"text-earth-brown font-medium",children:"Hand-picked selections for your wellness."})]}),E.jsxs(rt,{to:"/products",className:"text-primary-green font-bold flex items-center gap-1 hover:gap-2 transition-all",children:["View All ",E.jsx(DT,{size:18})]})]}),E.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8",children:t.map(r=>E.jsxs("div",{className:"bg-white rounded-2xl overflow-hidden shadow-md hover:shadow-xl transition-shadow border border-neutral-bg group",children:[E.jsxs(rt,{to:`/product/${r.id}`,className:"block relative aspect-[4/3] overflow-hidden",children:[E.jsx("img",{src:r.image,alt:r.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500"}),E.jsx("div",{className:"absolute top-4 left-4 bg-primary-green text-white text-[10px] font-bold px-3 py-1 rounded-full uppercase tracking-widest",children:r.category})]}),E.jsxs("div",{className:"p-6",children:[E.jsx("h4",{className:"text-lg font-bold text-text-dark mb-1 line-clamp-1",children:r.name}),E.jsxs("p",{className:"text-primary-green font-bold text-lg mb-4",children:["Rs. ",r.price]}),E.jsx("button",{onClick:()=>n(r,1),className:"w-full py-3 bg-neutral-bg text-primary-green font-bold rounded-xl hover:bg-primary-green hover:text-white transition-colors border border-primary-green/10",children:"Add to Cart"})]})]},r.id))})]})}),E.jsxs("section",{className:"py-24 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[E.jsxs("div",{className:"text-center mb-16",children:[E.jsx("h3",{className:"text-3xl font-bold text-text-dark mb-4",children:"What Our Customers Say"}),E.jsx("div",{className:"w-20 h-1 bg-primary-green mx-auto"})]}),E.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:Ak.map(r=>E.jsxs("div",{className:"bg-white p-8 rounded-3xl shadow-sm border border-neutral-bg relative",children:[E.jsx("div",{className:"flex gap-1 text-yellow-500 mb-6",children:[...Array(5)].map((s,o)=>E.jsx(GT,{size:16,fill:"currentColor"},o))}),E.jsxs("p",{className:"text-text-dark/80 italic mb-6 leading-relaxed",children:['"',r.text,'"']}),E.jsxs("div",{children:[E.jsx("h5",{className:"font-bold text-text-dark",children:r.name}),E.jsx("p",{className:"text-sm text-earth-brown",children:r.location})]})]},r.id))})]})]})},IH=()=>{const[t,e]=z.useState([]),[n,r]=z.useState([]),[s,o]=z.useState(!0),[u,d]=$A(),[f,p]=z.useState(""),v=u.get("category"),{addToCart:w}=Ra();z.useEffect(()=>{Tt.getProducts().then(I=>{e(I),o(!1)})},[]),z.useEffect(()=>{let I=t;v&&(I=I.filter(P=>P.category===v)),f&&(I=I.filter(P=>P.name.toLowerCase().includes(f.toLowerCase())||P.nepaliName.includes(f))),r(I)},[t,v,f]);const S=Object.values(on);return E.jsx("div",{className:"bg-accent-cream min-h-screen py-12",children:E.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[E.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-6 mb-12",children:[E.jsxs("div",{children:[E.jsx("h1",{className:"text-4xl font-bold text-text-dark mb-2",children:"Our Store"}),E.jsx("p",{className:"text-earth-brown font-medium",children:"Authentic Himalayan Herbs & Local Fruits"})]}),E.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 w-full md:w-auto",children:[E.jsxs("div",{className:"relative",children:[E.jsx(Z2,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-earth-brown/50",size:18}),E.jsx("input",{type:"text",placeholder:"Search products...",value:f,onChange:I=>p(I.target.value),className:"pl-10 pr-4 py-3 rounded-xl border border-primary-green/10 bg-white w-full sm:w-64 focus:ring-2 focus:ring-primary-green outline-none"})]}),E.jsxs("div",{className:"flex items-center gap-2 overflow-x-auto pb-2 sm:pb-0 no-scrollbar",children:[E.jsx("button",{onClick:()=>d({}),className:`px-4 py-3 rounded-xl font-bold text-sm transition-all whitespace-nowrap ${v?"bg-white text-text-dark border border-primary-green/10 hover:border-primary-green/50":"bg-primary-green text-white shadow-lg shadow-primary-green/20"}`,children:"All"}),S.map(I=>E.jsx("button",{onClick:()=>d({category:I}),className:`px-4 py-3 rounded-xl font-bold text-sm transition-all whitespace-nowrap ${v===I?"bg-primary-green text-white shadow-lg shadow-primary-green/20":"bg-white text-text-dark border border-primary-green/10 hover:border-primary-green/50"}`,children:I},I))]})]})]}),s?E.jsx("div",{className:"flex justify-center items-center h-64",children:E.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-green"})}):n.length>0?E.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8 animate-in slide-in-from-bottom-4 duration-500",children:n.map(I=>E.jsxs("div",{className:"bg-white rounded-2xl overflow-hidden shadow-sm hover:shadow-xl transition-all border border-primary-green/5 group flex flex-col h-full",children:[E.jsxs(rt,{to:`/product/${I.id}`,className:"block relative aspect-[4/3] overflow-hidden",children:[E.jsx("img",{src:I.image,alt:I.name,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-700"}),E.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/10 transition-colors"})]}),E.jsxs("div",{className:"p-6 flex flex-col flex-grow",children:[E.jsxs("div",{className:"flex justify-between items-start mb-2",children:[E.jsx("span",{className:"text-xs font-bold text-primary-green uppercase tracking-widest",children:I.category}),E.jsx("span",{className:"text-xs font-medium text-earth-brown bg-neutral-bg px-2 py-1 rounded",children:I.nepaliName})]}),E.jsx("h3",{className:"text-xl font-bold text-text-dark mb-2 group-hover:text-primary-green transition-colors",children:I.name}),E.jsx("p",{className:"text-text-dark/60 text-sm mb-4 line-clamp-2 flex-grow",children:I.description}),E.jsxs("div",{className:"flex items-center justify-between mt-auto pt-4 border-t border-neutral-bg",children:[E.jsxs("span",{className:"text-2xl font-bold text-primary-green",children:["Rs. ",I.price]}),E.jsx("button",{onClick:()=>w(I,1),className:"p-3 bg-primary-green text-white rounded-xl hover:bg-primary-green/90 transition-transform active:scale-95",title:"Add to Cart",children:"Add to Cart"})]})]})]},I.id))}):E.jsxs("div",{className:"text-center py-24 bg-white rounded-3xl border border-dashed border-primary-green/20",children:[E.jsx(w2,{size:48,className:"mx-auto text-primary-green/20 mb-4"}),E.jsx("h3",{className:"text-xl font-bold text-text-dark mb-2",children:"No products found"}),E.jsx("p",{className:"text-earth-brown",children:"Try adjusting your search or filters to find what you're looking for."})]})]})})},kH=()=>{const{id:t}=tA(),[e,n]=z.useState(null),[r,s]=z.useState(1),[o,u]=z.useState(!0),{addToCart:d}=Ra(),f=Ls();if(z.useEffect(()=>{t&&Tt.getProductById(t).then(v=>{v&&n(v),u(!1)})},[t]),o)return E.jsx("div",{className:"h-screen flex items-center justify-center",children:E.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-primary-green"})});if(!e)return E.jsxs("div",{className:"p-20 text-center",children:["Product not found. ",E.jsx(rt,{to:"/products",className:"text-primary-green font-bold",children:"Back to shop"})]});const p=()=>{d(e,r),f("/cart")};return E.jsx("div",{className:"bg-neutral-bg min-h-screen py-12",children:E.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[E.jsxs(rt,{to:"/products",className:"inline-flex items-center gap-2 text-primary-green font-bold mb-8 hover:gap-3 transition-all",children:[E.jsx(RT,{size:20})," Back to Products"]}),E.jsxs("div",{className:"bg-white rounded-3xl overflow-hidden shadow-xl grid grid-cols-1 lg:grid-cols-2 animate-in fade-in zoom-in-95 duration-500",children:[E.jsxs("div",{className:"relative h-[400px] lg:h-auto overflow-hidden",children:[E.jsx("img",{src:e.image,alt:e.name,className:"w-full h-full object-cover"}),E.jsxs("div",{className:"absolute top-6 left-6 flex flex-col gap-2",children:[E.jsx("span",{className:"bg-primary-green text-white text-xs font-bold px-4 py-2 rounded-full uppercase tracking-widest shadow-lg",children:e.category}),E.jsx("span",{className:"bg-earth-brown text-white text-xs font-bold px-4 py-2 rounded-full uppercase tracking-widest shadow-lg",children:"100% Organic"})]})]}),E.jsxs("div",{className:"p-8 lg:p-16 flex flex-col",children:[E.jsxs("div",{className:"mb-8",children:[E.jsx("h1",{className:"text-4xl font-bold text-text-dark mb-2",children:e.name}),E.jsx("p",{className:"text-2xl text-primary-green font-bold mb-4",children:e.nepaliName}),E.jsxs("p",{className:"text-3xl font-extrabold text-earth-brown",children:["Rs. ",e.price]})]}),E.jsxs("div",{className:"space-y-6 mb-10",children:[E.jsxs("div",{children:[E.jsx("h3",{className:"text-sm font-bold uppercase tracking-widest text-primary-green/60 mb-2",children:"Description"}),E.jsx("p",{className:"text-text-dark/80 leading-relaxed text-lg",children:e.description})]}),E.jsxs("div",{className:"bg-neutral-bg/50 p-6 rounded-2xl border border-primary-green/5",children:[E.jsxs("h3",{className:"text-sm font-bold uppercase tracking-widest text-primary-green/60 mb-3 flex items-center gap-2",children:[E.jsx(S2,{size:16,className:"text-primary-green"})," Key Benefits"]}),E.jsx("p",{className:"text-text-dark font-medium",children:e.benefits})]})]}),E.jsxs("div",{className:"mt-auto space-y-6",children:[E.jsxs("div",{className:"flex items-center gap-6",children:[E.jsxs("div",{className:"flex items-center border-2 border-primary-green/20 rounded-2xl p-1 bg-neutral-bg/30",children:[E.jsx("button",{onClick:()=>s(Math.max(1,r-1)),className:"w-12 h-12 flex items-center justify-center font-bold text-2xl hover:bg-white rounded-xl transition-colors",children:"-"}),E.jsx("span",{className:"w-12 text-center font-bold text-xl",children:r}),E.jsx("button",{onClick:()=>s(r+1),className:"w-12 h-12 flex items-center justify-center font-bold text-2xl hover:bg-white rounded-xl transition-colors",children:"+"})]}),E.jsxs("button",{onClick:p,className:"flex-grow flex items-center justify-center gap-3 bg-primary-green text-white py-4 px-8 rounded-2xl font-bold text-xl hover:bg-primary-green/90 shadow-xl shadow-primary-green/20 transition-all hover:-translate-y-1 active:scale-95",children:[E.jsx(zT,{size:24})," Add to Cart"]})]}),E.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-8 border-t border-neutral-bg",children:[E.jsxs("div",{className:"flex items-center gap-3 text-sm text-text-dark/70 font-medium",children:[E.jsx(rO,{className:"text-primary-green",size:20}),"Quality Assured"]}),E.jsxs("div",{className:"flex items-center gap-3 text-sm text-text-dark/70 font-medium",children:[E.jsx(hO,{className:"text-primary-green",size:20}),"Delivery Available"]})]})]})]})]})]})})},_H=()=>E.jsxs("div",{className:"animate-in fade-in duration-700",children:[E.jsx("section",{className:"bg-primary-green text-white py-24",children:E.jsxs("div",{className:"max-w-7xl mx-auto px-4 text-center",children:[E.jsx("h1",{className:"text-5xl font-bold mb-6",children:"Our Himalayan Journey"}),E.jsx("p",{className:"text-xl text-white/80 max-w-2xl mx-auto leading-relaxed",children:"Preserving the ancient wisdom of Himalayan herbs and supporting the hardworking farmers of Nepal."})]})}),E.jsx("section",{className:"py-24 max-w-7xl mx-auto px-4",children:E.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-16 items-center",children:[E.jsxs("div",{children:[E.jsx("h2",{className:"text-4xl font-bold text-text-dark mb-6",children:"Our Mission"}),E.jsx("p",{className:"text-lg text-text-dark/70 leading-relaxed mb-6",children:"Himalayan Herbs & Fruits was founded with a simple yet powerful goal: to connect the incredible biodiversity of the Himalayas with the rest of the world."}),E.jsx("p",{className:"text-lg text-text-dark/70 leading-relaxed mb-8",children:"We specialize in sourcing high-quality Jadibuti (medicinal herbs) and organic fruits directly from local farmers in Jumla, Mustang, Dhankuta, and beyond. By cutting out middlemen, we ensure that farmers get fair prices and you get the freshest products."}),E.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[E.jsxs("div",{className:"flex flex-col items-center p-6 bg-accent-cream rounded-3xl text-center",children:[E.jsx(lO,{size:32,className:"text-primary-green mb-3"}),E.jsx("span",{className:"font-bold",children:"100% Organic"})]}),E.jsxs("div",{className:"flex flex-col items-center p-6 bg-accent-cream rounded-3xl text-center",children:[E.jsx(qw,{size:32,className:"text-primary-green mb-3"}),E.jsx("span",{className:"font-bold",children:"Fair Trade"})]})]})]}),E.jsxs("div",{className:"relative",children:[E.jsx("div",{className:"absolute -inset-4 bg-primary-green/10 rounded-[4rem] rotate-3"}),E.jsx("img",{src:"https://images.unsplash.com/photo-1595181048473-199468e8267d?auto=format&fit=crop&q=80&w=1200",className:"relative w-full h-[500px] object-cover rounded-[3rem] shadow-2xl",alt:"Farmers working"})]})]})}),E.jsx("section",{className:"py-24 bg-neutral-bg",children:E.jsxs("div",{className:"max-w-7xl mx-auto px-4",children:[E.jsxs("div",{className:"text-center mb-16",children:[E.jsx("h2",{className:"text-4xl font-bold text-text-dark mb-4",children:"Why Choose Us?"}),E.jsx("div",{className:"w-20 h-1 bg-primary-green mx-auto"})]}),E.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-12",children:[E.jsxs("div",{className:"text-center group",children:[E.jsx("div",{className:"w-20 h-20 bg-white rounded-full flex items-center justify-center mx-auto mb-6 shadow-md text-primary-green group-hover:bg-primary-green group-hover:text-white transition-all",children:E.jsx(HT,{size:32})}),E.jsx("h4",{className:"text-xl font-bold mb-4",children:"Guaranteed Purity"}),E.jsx("p",{className:"text-text-dark/60 leading-relaxed",children:"Our herbs are tested for purity and potency, ensuring you receive the true healing power of nature."})]}),E.jsxs("div",{className:"text-center group",children:[E.jsx("div",{className:"w-20 h-20 bg-white rounded-full flex items-center justify-center mx-auto mb-6 shadow-md text-primary-green group-hover:bg-primary-green group-hover:text-white transition-all",children:E.jsx(Lu,{size:32})}),E.jsx("h4",{className:"text-xl font-bold mb-4",children:"Sustainable Sourcing"}),E.jsx("p",{className:"text-text-dark/60 leading-relaxed",children:"We practice sustainable wild harvesting and support biodiversity conservation in the mountains."})]}),E.jsxs("div",{className:"text-center group",children:[E.jsx("div",{className:"w-20 h-20 bg-white rounded-full flex items-center justify-center mx-auto mb-6 shadow-md text-primary-green group-hover:bg-primary-green group-hover:text-white transition-all",children:E.jsx(qw,{size:32})}),E.jsx("h4",{className:"text-xl font-bold mb-4",children:"Empowering Communities"}),E.jsx("p",{className:"text-text-dark/60 leading-relaxed",children:"Every purchase directly impacts the lives of Nepali highland farming families and their children's education."})]})]})]})})]}),NH=()=>E.jsx("div",{className:"bg-accent-cream min-h-screen py-24",children:E.jsxs("div",{className:"max-w-4xl mx-auto px-4",children:[E.jsxs("div",{className:"text-center mb-16",children:[E.jsx(X2,{size:48,className:"mx-auto text-primary-green/30 mb-6"}),E.jsx("h1",{className:"text-4xl font-bold text-text-dark mb-4",children:"Customer Stories"}),E.jsx("p",{className:"text-lg text-earth-brown",children:"Real experiences from our community of Himalayan enthusiasts."})]}),E.jsx("div",{className:"space-y-8",children:Ak.map((t,e)=>E.jsxs("div",{className:"bg-white p-10 rounded-[3rem] shadow-sm border border-primary-green/5 animate-in slide-in-from-bottom-8 duration-700",style:{animationDelay:`${e*150}ms`},children:[E.jsx("div",{className:"flex gap-1 text-yellow-500 mb-6",children:[...Array(5)].map((n,r)=>E.jsx(GT,{size:20,fill:"currentColor"},r))}),E.jsxs("p",{className:"text-2xl text-text-dark leading-relaxed mb-8 italic",children:['"',t.text,'"']}),E.jsxs("div",{className:"flex items-center gap-4",children:[E.jsx("div",{className:"w-12 h-12 bg-primary-green/10 rounded-full flex items-center justify-center text-primary-green font-bold text-xl",children:t.name.charAt(0)}),E.jsxs("div",{children:[E.jsx("h4",{className:"text-lg font-bold text-text-dark",children:t.name}),E.jsx("p",{className:"text-primary-green text-sm font-medium",children:t.location})]})]})]},t.id))}),E.jsxs("div",{className:"mt-20 text-center p-12 bg-primary-green rounded-[3rem] text-white",children:[E.jsx("h3",{className:"text-2xl font-bold mb-4",children:"Share Your Experience"}),E.jsx("p",{className:"mb-8 text-white/80",children:"Have you tried our products? We would love to hear from you!"}),E.jsx("button",{className:"bg-white text-primary-green font-bold px-8 py-4 rounded-full hover:bg-neutral-bg transition-colors shadow-lg",children:"Write a Review"})]})]})}),AH=()=>{const[t,e]=z.useState({name:"",email:"",message:""}),[n,r]=z.useState("idle"),s=async o=>{o.preventDefault(),r("submitting"),await Tt.submitContact({...t,timestamp:new Date().toISOString()}),r("success"),e({name:"",email:"",message:""})};return E.jsx("div",{className:"bg-neutral-bg min-h-screen py-24",children:E.jsx("div",{className:"max-w-7xl mx-auto px-4",children:E.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-16",children:[E.jsxs("div",{className:"animate-in slide-in-from-left-8 duration-700",children:[E.jsx("h1",{className:"text-5xl font-bold text-text-dark mb-6",children:"Get in Touch"}),E.jsx("p",{className:"text-lg text-text-dark/70 mb-12 leading-relaxed",children:"Have questions about our herbs or seasonal fruit availability? Our team is here to help you choose the best products for your health and lifestyle."}),E.jsxs("div",{className:"space-y-8",children:[E.jsxs("div",{className:"flex gap-6 items-start",children:[E.jsx("div",{className:"w-14 h-14 bg-white rounded-2xl flex items-center justify-center text-primary-green shadow-sm shrink-0",children:E.jsx(M2,{size:28})}),E.jsxs("div",{children:[E.jsx("h4",{className:"text-lg font-bold text-text-dark",children:"Our Location"}),E.jsx("p",{className:"text-text-dark/60 italic",children:"Boudha, Kathmandu, Nepal"})]})]}),E.jsxs("div",{className:"flex gap-6 items-start",children:[E.jsx("div",{className:"w-14 h-14 bg-white rounded-2xl flex items-center justify-center text-primary-green shadow-sm shrink-0",children:E.jsx(FT,{size:28})}),E.jsxs("div",{children:[E.jsx("h4",{className:"text-lg font-bold text-text-dark",children:"Call Us"}),E.jsx("p",{className:"text-text-dark/60",children:"+977-1-4XXXXXX"})]})]}),E.jsxs("div",{className:"flex gap-6 items-start",children:[E.jsx("div",{className:"w-14 h-14 bg-white rounded-2xl flex items-center justify-center text-primary-green shadow-sm shrink-0",children:E.jsx(Hg,{size:28})}),E.jsxs("div",{children:[E.jsx("h4",{className:"text-lg font-bold text-text-dark",children:"Email Support"}),E.jsx("p",{className:"text-text-dark/60",children:"info@himalayanherbs.com"})]})]})]})]}),E.jsx("div",{className:"bg-white p-8 lg:p-12 rounded-[3rem] shadow-xl border border-primary-green/5 animate-in slide-in-from-right-8 duration-700",children:n==="success"?E.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center py-12",children:[E.jsx("div",{className:"w-20 h-20 bg-primary-green/10 text-primary-green rounded-full flex items-center justify-center mb-6",children:E.jsx(jT,{size:48})}),E.jsx("h3",{className:"text-2xl font-bold text-text-dark mb-4",children:"Message Sent!"}),E.jsx("p",{className:"text-text-dark/60 mb-8",children:"Thank you for reaching out. We will get back to you within 24-48 hours."}),E.jsx("button",{onClick:()=>r("idle"),className:"bg-primary-green text-white px-8 py-3 rounded-xl font-bold hover:bg-primary-green/90",children:"Send another message"})]}):E.jsxs("form",{onSubmit:s,className:"space-y-6",children:[E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-bold text-text-dark/70 uppercase tracking-widest mb-2",children:"Your Name"}),E.jsx("input",{required:!0,type:"text",value:t.name,onChange:o=>e({...t,name:o.target.value}),placeholder:"Ram Shrestha",className:"w-full bg-neutral-bg/50 border border-primary-green/10 rounded-2xl px-6 py-4 outline-none focus:ring-2 focus:ring-primary-green transition-all"})]}),E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-bold text-text-dark/70 uppercase tracking-widest mb-2",children:"Email Address"}),E.jsx("input",{required:!0,type:"email",value:t.email,onChange:o=>e({...t,email:o.target.value}),placeholder:"ram@example.com",className:"w-full bg-neutral-bg/50 border border-primary-green/10 rounded-2xl px-6 py-4 outline-none focus:ring-2 focus:ring-primary-green transition-all"})]}),E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-bold text-text-dark/70 uppercase tracking-widest mb-2",children:"Your Message"}),E.jsx("textarea",{required:!0,rows:4,value:t.message,onChange:o=>e({...t,message:o.target.value}),placeholder:"How can we help you?",className:"w-full bg-neutral-bg/50 border border-primary-green/10 rounded-2xl px-6 py-4 outline-none focus:ring-2 focus:ring-primary-green transition-all resize-none"})]}),E.jsx("button",{disabled:n==="submitting",className:"w-full bg-primary-green text-white py-5 rounded-2xl font-bold text-lg hover:bg-primary-green/90 transition-all shadow-lg shadow-primary-green/20 flex items-center justify-center gap-3 disabled:opacity-50",children:n==="submitting"?"Sending...":E.jsxs(E.Fragment,{children:["Send Message ",E.jsx(tO,{size:20})]})})]})})]})})})},OH=()=>{const{cart:t,removeFromCart:e,updateQuantity:n,totalPrice:r,totalItems:s}=Ra();return t.length===0?E.jsx("div",{className:"bg-neutral-bg min-h-screen py-24 flex items-center justify-center",children:E.jsxs("div",{className:"text-center bg-white p-12 rounded-[3rem] shadow-xl max-w-lg w-full mx-4",children:[E.jsx("div",{className:"w-24 h-24 bg-neutral-bg rounded-full flex items-center justify-center mx-auto mb-8 text-primary-green/30",children:E.jsx(zT,{size:48})}),E.jsx("h2",{className:"text-3xl font-bold text-text-dark mb-4",children:"Your cart is empty"}),E.jsx("p",{className:"text-text-dark/60 mb-8",children:"Looks like you haven't added any Himalayan goodness to your cart yet."}),E.jsx(rt,{to:"/products",className:"inline-block bg-primary-green text-white px-10 py-4 rounded-full font-bold text-lg hover:bg-primary-green/90 shadow-lg shadow-primary-green/20",children:"Start Shopping"})]})}):E.jsx("div",{className:"bg-neutral-bg min-h-screen py-12",children:E.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[E.jsxs("h1",{className:"text-4xl font-bold text-text-dark mb-12 flex items-center gap-4",children:["Shopping Cart ",E.jsxs("span",{className:"text-lg font-medium text-earth-brown bg-white px-3 py-1 rounded-full border border-primary-green/10",children:[s," items"]})]}),E.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-12",children:[E.jsx("div",{className:"lg:col-span-2 space-y-6",children:t.map(o=>E.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-sm border border-primary-green/5 flex flex-col sm:flex-row gap-6 animate-in slide-in-from-left-4 duration-500",children:[E.jsx("div",{className:"w-full sm:w-32 h-32 rounded-2xl overflow-hidden shrink-0",children:E.jsx("img",{src:o.product.image,alt:o.product.name,className:"w-full h-full object-cover"})}),E.jsxs("div",{className:"flex-grow flex flex-col justify-between",children:[E.jsxs("div",{className:"flex justify-between items-start",children:[E.jsxs("div",{children:[E.jsx("h3",{className:"text-xl font-bold text-text-dark mb-1",children:o.product.name}),E.jsx("p",{className:"text-primary-green font-medium text-sm",children:o.product.nepaliName})]}),E.jsx("button",{onClick:()=>e(o.product.id),className:"p-2 text-red-400 hover:text-red-600 hover:bg-red-50 rounded-xl transition-all",children:E.jsx(zg,{size:20})})]}),E.jsxs("div",{className:"flex justify-between items-center mt-4",children:[E.jsxs("div",{className:"flex items-center gap-4 bg-neutral-bg/50 rounded-xl p-1 border border-primary-green/10",children:[E.jsx("button",{onClick:()=>n(o.product.id,o.quantity-1),className:"w-8 h-8 flex items-center justify-center bg-white rounded-lg shadow-sm hover:text-primary-green transition-colors font-bold",children:E.jsx(G2,{size:14})}),E.jsx("span",{className:"w-6 text-center font-bold",children:o.quantity}),E.jsx("button",{onClick:()=>n(o.product.id,o.quantity+1),className:"w-8 h-8 flex items-center justify-center bg-white rounded-lg shadow-sm hover:text-primary-green transition-colors font-bold",children:E.jsx(qT,{size:14})})]}),E.jsxs("span",{className:"text-xl font-bold text-earth-brown",children:["Rs. ",o.product.price*o.quantity]})]})]})]},o.product.id))}),E.jsx("div",{className:"lg:col-span-1",children:E.jsxs("div",{className:"bg-white p-8 rounded-[2.5rem] shadow-xl border border-primary-green/5 sticky top-28",children:[E.jsx("h2",{className:"text-2xl font-bold text-text-dark mb-8",children:"Order Summary"}),E.jsxs("div",{className:"space-y-4 mb-8",children:[E.jsxs("div",{className:"flex justify-between text-text-dark/70",children:[E.jsx("span",{children:"Subtotal"}),E.jsxs("span",{className:"font-bold",children:["Rs. ",r]})]}),E.jsxs("div",{className:"flex justify-between text-text-dark/70",children:[E.jsx("span",{children:"Shipping"}),E.jsx("span",{className:"text-primary-green font-bold",children:"FREE"})]}),E.jsxs("div",{className:"pt-4 border-t border-neutral-bg flex justify-between items-center",children:[E.jsx("span",{className:"text-xl font-bold text-text-dark",children:"Total"}),E.jsxs("span",{className:"text-3xl font-extrabold text-primary-green",children:["Rs. ",r]})]})]}),E.jsxs(rt,{to:"/checkout",className:"w-full bg-primary-green text-white py-5 rounded-2xl font-bold text-xl hover:bg-primary-green/90 transition-all flex items-center justify-center gap-3 shadow-xl shadow-primary-green/20 mb-4",children:["Proceed to Checkout ",E.jsx(DT,{size:24})]}),E.jsx("p",{className:"text-center text-sm text-text-dark/50",children:"Prices inclusive of all local taxes."})]})})]})]})})},PH=()=>{const{clearCart:t,totalPrice:e}=Ra(),[n,r]=z.useState(!1),[s,o]=z.useState(!1),u=()=>{r(!0),setTimeout(()=>{r(!1),o(!0),t()},2e3)};return s?E.jsx("div",{className:"bg-neutral-bg min-h-screen py-24 flex items-center justify-center px-4",children:E.jsxs("div",{className:"text-center bg-white p-12 lg:p-20 rounded-[4rem] shadow-2xl max-w-2xl w-full animate-in zoom-in-95 duration-500",children:[E.jsx("div",{className:"w-24 h-24 bg-primary-green/10 text-primary-green rounded-full flex items-center justify-center mx-auto mb-8",children:E.jsx(jT,{size:64})}),E.jsx("h1",{className:"text-4xl font-extrabold text-text-dark mb-6 tracking-tight",children:"Order Placed Successfully!"}),E.jsxs("p",{className:"text-xl text-text-dark/60 mb-12 leading-relaxed",children:["Thank you for choosing ",E.jsx("span",{className:"text-primary-green font-bold",children:"Himalayan Herbs & Fruits"}),". Your order is being processed and will be delivered shortly."]}),E.jsx(rt,{to:"/products",className:"inline-block bg-primary-green text-white px-12 py-5 rounded-full font-bold text-xl hover:bg-primary-green/90 shadow-xl shadow-primary-green/20 transition-all",children:"Continue Shopping"})]})}):E.jsx("div",{className:"bg-neutral-bg min-h-screen py-24",children:E.jsxs("div",{className:"max-w-4xl mx-auto px-4",children:[E.jsx("h1",{className:"text-4xl font-bold text-text-dark mb-12",children:"Checkout"}),E.jsxs("div",{className:"bg-white p-8 lg:p-12 rounded-[3rem] shadow-xl border border-primary-green/5",children:[E.jsxs("div",{className:"mb-12 pb-8 border-b border-neutral-bg",children:[E.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Payment Method"}),E.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[E.jsxs("div",{className:"border-2 border-primary-green bg-primary-green/5 p-6 rounded-3xl cursor-pointer",children:[E.jsxs("div",{className:"flex justify-between mb-4",children:[E.jsx("div",{className:"w-6 h-6 rounded-full border-4 border-primary-green flex items-center justify-center",children:E.jsx("div",{className:"w-2 h-2 bg-primary-green rounded-full"})}),E.jsx("span",{className:"font-bold text-primary-green",children:"COD"})]}),E.jsx("p",{className:"font-bold",children:"Cash on Delivery"}),E.jsx("p",{className:"text-sm text-text-dark/50",children:"Pay when your order arrives"})]}),E.jsxs("div",{className:"border border-neutral-bg p-6 rounded-3xl opacity-50 cursor-not-allowed",children:[E.jsxs("div",{className:"flex justify-between mb-4",children:[E.jsx("div",{className:"w-6 h-6 rounded-full border-2 border-neutral-bg"}),E.jsx("span",{className:"font-bold",children:"eSewa/Khalti"})]}),E.jsx("p",{className:"font-bold",children:"Online Payment"}),E.jsx("p",{className:"text-sm text-text-dark/50",children:"Coming soon"})]})]})]}),E.jsxs("div",{className:"space-y-6",children:[E.jsxs("div",{className:"flex justify-between items-center",children:[E.jsx("span",{className:"text-lg text-text-dark/60",children:"Order Total"}),E.jsxs("span",{className:"text-4xl font-extrabold text-primary-green",children:["Rs. ",e]})]}),E.jsx("button",{onClick:u,disabled:n,className:"w-full bg-primary-green text-white py-6 rounded-[2rem] font-bold text-2xl hover:bg-primary-green/90 transition-all shadow-xl shadow-primary-green/20 flex items-center justify-center gap-4 disabled:opacity-70",children:n?E.jsxs(E.Fragment,{children:[E.jsx(Nu,{className:"animate-spin",size:28})," Processing..."]}):"Place Order"}),E.jsxs(rt,{to:"/cart",className:"flex items-center justify-center gap-2 text-text-dark/50 font-bold hover:text-primary-green transition-colors",children:[E.jsx(RT,{size:18})," Back to Cart"]})]})]})]})})},RH=()=>{const[t,e]=z.useState(""),[n,r]=z.useState(""),[s,o]=z.useState(!1),[u,d]=z.useState(!1),f=Ls(),p=async v=>{v.preventDefault(),d(!0);try{const w=await Tt.userLogin(t,n);w.success?(localStorage.setItem("user_token",w.token),localStorage.setItem("user_id",w.user.id),localStorage.setItem("user_email",w.user.email),localStorage.setItem("user_name",w.user.name),f("/")):alert("Invalid credentials")}catch{alert("Login failed. Please try again.")}finally{d(!1)}};return E.jsx("div",{className:"min-h-screen bg-neutral-bg flex items-center justify-center px-4",children:E.jsxs("div",{className:"max-w-md w-full bg-white rounded-3xl shadow-lg p-8",children:[E.jsxs("div",{className:"text-center mb-8",children:[E.jsx("h1",{className:"text-3xl font-bold text-text-dark mb-2",children:"Welcome Back"}),E.jsx("p",{className:"text-earth-brown",children:"Sign in to your account"})]}),E.jsxs("form",{onSubmit:p,className:"space-y-6",children:[E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-bold text-text-dark/70 mb-2",children:"Email"}),E.jsxs("div",{className:"relative",children:[E.jsx(BT,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-text-dark/30",size:18}),E.jsx("input",{type:"email",required:!0,value:t,onChange:v=>e(v.target.value),className:"w-full bg-neutral-bg/50 border border-primary-green/10 rounded-2xl pl-12 pr-4 py-3 outline-none focus:ring-2 focus:ring-primary-green",placeholder:"Enter your email"})]})]}),E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-bold text-text-dark/70 mb-2",children:"Password"}),E.jsxs("div",{className:"relative",children:[E.jsx(Uu,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-text-dark/30",size:18}),E.jsx("input",{type:s?"text":"password",required:!0,value:n,onChange:v=>r(v.target.value),className:"w-full bg-neutral-bg/50 border border-primary-green/10 rounded-2xl pl-12 pr-12 py-3 outline-none focus:ring-2 focus:ring-primary-green",placeholder:"Enter your password"}),E.jsx("button",{type:"button",onClick:()=>o(!s),className:"absolute right-4 top-1/2 -translate-y-1/2 text-text-dark/30",children:s?E.jsx(Fg,{size:18}):E.jsx(qg,{size:18})})]})]}),E.jsx("button",{type:"submit",disabled:u,className:"w-full bg-primary-green text-white py-4 rounded-2xl font-bold hover:bg-primary-green/90 transition-all disabled:opacity-70",children:u?"Signing In...":"Sign In"})]}),E.jsx("div",{className:"text-center mt-6",children:E.jsxs("p",{className:"text-earth-brown",children:["Don't have an account?"," ",E.jsx(rt,{to:"/signup",className:"text-primary-green font-bold hover:underline",children:"Sign Up"})]})})]})})},DH=()=>{const[t,e]=z.useState({name:"",email:"",phone:"",password:"",confirmPassword:""}),[n,r]=z.useState(!1),[s,o]=z.useState(!1),u=Ls(),d=async f=>{if(f.preventDefault(),t.password!==t.confirmPassword){alert("Passwords do not match");return}o(!0);try{const p=await Tt.userRegister({name:t.name,email:t.email,phone:t.phone,password:t.password});p.success?(localStorage.setItem("user_token",p.token),localStorage.setItem("user_id",p.user.id),localStorage.setItem("user_email",p.user.email),localStorage.setItem("user_name",p.user.name),u("/")):alert(p.error||"Registration failed")}catch{alert("Registration failed. Please try again.")}finally{o(!1)}};return E.jsx("div",{className:"min-h-screen bg-neutral-bg flex items-center justify-center px-4 py-8",children:E.jsxs("div",{className:"max-w-md w-full bg-white rounded-3xl shadow-lg p-8",children:[E.jsxs("div",{className:"text-center mb-8",children:[E.jsx("h1",{className:"text-3xl font-bold text-text-dark mb-2",children:"Create Account"}),E.jsx("p",{className:"text-earth-brown",children:"Join our community today"})]}),E.jsxs("form",{onSubmit:d,className:"space-y-6",children:[E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-bold text-text-dark/70 mb-2",children:"Full Name"}),E.jsxs("div",{className:"relative",children:[E.jsx(BT,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-text-dark/30",size:18}),E.jsx("input",{type:"text",required:!0,value:t.name,onChange:f=>e({...t,name:f.target.value}),className:"w-full bg-neutral-bg/50 border border-primary-green/10 rounded-2xl pl-12 pr-4 py-3 outline-none focus:ring-2 focus:ring-primary-green",placeholder:"Enter your full name"})]})]}),E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-bold text-text-dark/70 mb-2",children:"Email"}),E.jsxs("div",{className:"relative",children:[E.jsx(Hg,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-text-dark/30",size:18}),E.jsx("input",{type:"email",required:!0,value:t.email,onChange:f=>e({...t,email:f.target.value}),className:"w-full bg-neutral-bg/50 border border-primary-green/10 rounded-2xl pl-12 pr-4 py-3 outline-none focus:ring-2 focus:ring-primary-green",placeholder:"Enter your email"})]})]}),E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-bold text-text-dark/70 mb-2",children:"Phone"}),E.jsxs("div",{className:"relative",children:[E.jsx(FT,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-text-dark/30",size:18}),E.jsx("input",{type:"tel",required:!0,value:t.phone,onChange:f=>e({...t,phone:f.target.value}),className:"w-full bg-neutral-bg/50 border border-primary-green/10 rounded-2xl pl-12 pr-4 py-3 outline-none focus:ring-2 focus:ring-primary-green",placeholder:"Enter your phone number"})]})]}),E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-bold text-text-dark/70 mb-2",children:"Password"}),E.jsxs("div",{className:"relative",children:[E.jsx(Uu,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-text-dark/30",size:18}),E.jsx("input",{type:n?"text":"password",required:!0,value:t.password,onChange:f=>e({...t,password:f.target.value}),className:"w-full bg-neutral-bg/50 border border-primary-green/10 rounded-2xl pl-12 pr-12 py-3 outline-none focus:ring-2 focus:ring-primary-green",placeholder:"Create a password"}),E.jsx("button",{type:"button",onClick:()=>r(!n),className:"absolute right-4 top-1/2 -translate-y-1/2 text-text-dark/30",children:n?E.jsx(Fg,{size:18}):E.jsx(qg,{size:18})})]})]}),E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-bold text-text-dark/70 mb-2",children:"Confirm Password"}),E.jsxs("div",{className:"relative",children:[E.jsx(Uu,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-text-dark/30",size:18}),E.jsx("input",{type:"password",required:!0,value:t.confirmPassword,onChange:f=>e({...t,confirmPassword:f.target.value}),className:"w-full bg-neutral-bg/50 border border-primary-green/10 rounded-2xl pl-12 pr-4 py-3 outline-none focus:ring-2 focus:ring-primary-green",placeholder:"Confirm your password"})]})]}),E.jsx("button",{type:"submit",disabled:s,className:"w-full bg-primary-green text-white py-4 rounded-2xl font-bold hover:bg-primary-green/90 transition-all disabled:opacity-70",children:s?"Creating Account...":"Create Account"})]}),E.jsx("div",{className:"text-center mt-6",children:E.jsxs("p",{className:"text-earth-brown",children:["Already have an account?"," ",E.jsx(rt,{to:"/login",className:"text-primary-green font-bold hover:underline",children:"Sign In"})]})})]})})},jH=()=>{const[t,e]=z.useState(!1),[n,r]=z.useState(""),[s,o]=z.useState(""),[u,d]=z.useState(""),[f,p]=z.useState(!1),v=Ls(),w=async S=>{S.preventDefault(),d(""),p(!0),t?(await Tt.registerAdmin({email:n,password:s}),e(!1),d("Account created! Please login."),p(!1)):(await Tt.login(n,s)).success?v("/admin/dashboard"):(d("Invalid credentials. Try admin@himalayan.com / admin123"),p(!1))};return E.jsx("div",{className:"min-h-screen bg-neutral-bg flex items-center justify-center px-4",children:E.jsxs("div",{className:"max-w-md w-full bg-white rounded-[3rem] shadow-2xl overflow-hidden border border-primary-green/5",children:[E.jsxs("div",{className:"bg-primary-green p-8 text-white text-center",children:[E.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-2xl flex items-center justify-center mx-auto mb-4",children:E.jsx(Uu,{size:32})}),E.jsx("h1",{className:"text-2xl font-bold",children:"Admin Portal"}),E.jsx("p",{className:"text-white/70",children:"Manage Himalayan Herbs & Fruits"})]}),E.jsxs("form",{onSubmit:w,className:"p-8 space-y-6",children:[u&&E.jsxs("div",{className:"bg-red-50 text-red-600 p-4 rounded-xl flex items-center gap-3 text-sm",children:[E.jsx(f2,{size:18})," ",u]}),E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-bold text-text-dark/70 uppercase tracking-widest mb-2",children:"Email Address"}),E.jsxs("div",{className:"relative",children:[E.jsx(Hg,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-earth-brown/40",size:18}),E.jsx("input",{required:!0,type:"email",value:n,onChange:S=>r(S.target.value),className:"w-full bg-neutral-bg/50 border border-primary-green/10 rounded-2xl pl-12 pr-6 py-4 outline-none focus:ring-2 focus:ring-primary-green",placeholder:"admin@himalayan.com"})]})]}),E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-bold text-text-dark/70 uppercase tracking-widest mb-2",children:"Password"}),E.jsxs("div",{className:"relative",children:[E.jsx(Uu,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-earth-brown/40",size:18}),E.jsx("input",{required:!0,type:"password",value:s,onChange:S=>o(S.target.value),className:"w-full bg-neutral-bg/50 border border-primary-green/10 rounded-2xl pl-12 pr-6 py-4 outline-none focus:ring-2 focus:ring-primary-green",placeholder:""})]})]}),E.jsx("button",{disabled:f,className:"w-full bg-primary-green text-white py-4 rounded-2xl font-bold text-lg hover:bg-primary-green/90 transition-all flex items-center justify-center gap-2 shadow-lg shadow-primary-green/20",children:f?"Processing...":t?E.jsxs(E.Fragment,{children:[E.jsx(gO,{size:20})," Create Account"]}):E.jsxs(E.Fragment,{children:[E.jsx(P2,{size:20})," Login"]})}),E.jsxs("p",{className:"text-center text-sm text-text-dark/50",children:[t?"Already have an account?":"Need a new admin account?"," ",E.jsx("button",{type:"button",onClick:()=>e(!t),className:"text-primary-green font-bold hover:underline",children:t?"Login here":"Register here"})]})]})]})})},MH=()=>{const[t,e]=z.useState("products"),[n,r]=z.useState([]),[s,o]=z.useState([]),[u,d]=z.useState(!0),[f,p]=z.useState(!1),[v,w]=z.useState(!1),[S,I]=z.useState(null),[P,j]=z.useState(null),D=Ls(),[q,X]=z.useState({name:"",nepaliName:"",category:on.FRUITS,price:0,description:"",benefits:"",image:""}),[B,re]=z.useState({title:"",subtitle:"",image:"",buttonText:"",buttonLink:"",isActive:!0});z.useEffect(()=>{if(!Tt.isAuthenticated()){D("/admin/login");return}ce()},[]);const ce=async()=>{try{const[ae,Oe]=await Promise.all([Tt.getProducts(),Tt.getHeroSlides()]);r(ae),o(Oe.sort((J,le)=>J.order-le.order))}catch(ae){console.error("Failed to load data:",ae)}finally{d(!1)}},ue=()=>{Tt.logout(),D("/admin/login")},A=ae=>{ae?(I(ae),X({...ae})):(I(null),X({name:"",nepaliName:"",category:on.FRUITS,price:0,description:"",benefits:"",image:""})),j(null),w(!0)},N=ae=>{ae?(j(ae),re({...ae})):(j(null),re({title:"",subtitle:"",image:"",buttonText:"",buttonLink:"",isActive:!0})),I(null),w(!0)},O=async ae=>{ae.preventDefault(),p(!0);try{S?await Tt.updateProduct(S.id,q):await Tt.addProduct(q),w(!1),await ce()}catch{alert("Error saving product. Please try again.")}finally{p(!1)}},U=async ae=>{ae.preventDefault(),p(!0);try{console.log("Submitting slide data:",B),P?await Tt.updateHeroSlide(P.id,B):await Tt.addHeroSlide(B),w(!1),await ce()}catch(Oe){console.error("Error saving slide:",Oe),alert(`Error saving slide: ${Oe.message||"Please try again."}`)}finally{p(!1)}},M=async ae=>{if(window.confirm("Are you sure you want to delete this product?")){const Oe=[...n];r(n.filter(J=>J.id!==ae));try{await Tt.deleteProduct(ae)}catch(J){console.error("Delete failed:",J),alert("Failed to delete product. Please try again."),r(Oe)}}},H=async ae=>{if(window.confirm("Are you sure you want to delete this slide?")){const Oe=[...s];o(s.filter(J=>J.id!==ae));try{await Tt.deleteHeroSlide(ae)}catch(J){console.error("Delete failed:",J),alert("Failed to delete slide. Please try again."),o(Oe)}}},R=async ae=>{try{await Tt.updateHeroSlide(ae.id,{...ae,isActive:!ae.isActive}),await ce()}catch{alert("Failed to update slide status.")}};return E.jsxs("div",{className:"min-h-screen bg-neutral-bg flex",children:[E.jsxs("aside",{className:"w-64 bg-text-dark text-white hidden md:flex flex-col border-r border-white/5",children:[E.jsx("div",{className:"p-6 border-b border-white/10",children:E.jsxs("h2",{className:"text-xl font-bold flex items-center gap-2",children:[E.jsx(k2,{className:"text-primary-green"})," Admin Panel"]})}),E.jsxs("nav",{className:"flex-grow p-4 space-y-2",children:[E.jsxs("button",{onClick:()=>e("products"),className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl font-bold transition-all ${t==="products"?"bg-primary-green/20 text-primary-green":"text-white/60 hover:text-white hover:bg-white/5"}`,children:[E.jsx(UT,{size:20})," Products"]}),E.jsxs("button",{onClick:()=>e("hero"),className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl font-bold transition-all ${t==="hero"?"bg-primary-green/20 text-primary-green":"text-white/60 hover:text-white hover:bg-white/5"}`,children:[E.jsx(LT,{size:20})," Hero Slider"]})]}),E.jsx("div",{className:"p-4 border-t border-white/10",children:E.jsxs("button",{onClick:ue,className:"w-full flex items-center gap-3 px-4 py-3 text-white/60 hover:text-white transition-colors",children:[E.jsx(MT,{size:20})," Logout"]})})]}),E.jsx("main",{className:"flex-grow p-8 overflow-y-auto h-screen",children:E.jsxs("div",{className:"max-w-6xl mx-auto",children:[E.jsxs("div",{className:"flex justify-between items-center mb-8",children:[E.jsxs("div",{children:[E.jsx("h1",{className:"text-3xl font-bold text-text-dark",children:t==="products"?"Product Management":"Hero Slider Management"}),E.jsx("p",{className:"text-earth-brown",children:t==="products"?"Manage your store inventory and change pictures":"Manage homepage hero slider content"})]}),E.jsxs("button",{onClick:()=>t==="products"?A():N(),className:"bg-primary-green text-white px-6 py-3 rounded-xl font-bold flex items-center gap-2 hover:bg-primary-green/90 shadow-lg shadow-primary-green/20 active:scale-95 transition-all",children:[E.jsx(qT,{size:20})," ",t==="products"?"Add Product":"Add Slide"]})]}),u?E.jsxs("div",{className:"py-20 text-center flex flex-col items-center gap-4",children:[E.jsx(Nu,{className:"animate-spin text-primary-green",size:40}),E.jsx("p",{className:"text-earth-brown font-medium",children:"Loading data..."})]}):E.jsx("div",{className:"bg-white rounded-3xl shadow-sm border border-primary-green/5 overflow-hidden animate-in fade-in slide-in-from-bottom-4 duration-500",children:t==="products"?E.jsx(LH,{products:n,onEdit:A,onDelete:M}):E.jsx(UH,{slides:s,onEdit:N,onDelete:H,onToggleActive:R})})]})}),v&&E.jsx("div",{className:"fixed inset-0 z-[100] bg-text-dark/60 backdrop-blur-sm flex items-center justify-center p-4 overflow-hidden",children:E.jsxs("div",{className:"bg-white rounded-[3rem] w-full max-w-2xl max-h-[95vh] overflow-y-auto shadow-2xl animate-in zoom-in-95 duration-300",children:[E.jsxs("div",{className:"p-8 border-b border-neutral-bg flex justify-between items-center sticky top-0 bg-white z-20",children:[E.jsxs("div",{children:[E.jsx("h3",{className:"text-2xl font-bold text-text-dark",children:S?"Edit Product":P?"Edit Slide":t==="products"?"Add New Product":"Add New Slide"}),E.jsx("p",{className:"text-xs text-earth-brown mt-1",children:t==="products"?"Fill in the details below to update your store.":"Create engaging hero slider content."})]}),E.jsx("button",{onClick:()=>!f&&w(!1),className:"p-2 hover:bg-neutral-bg rounded-full transition-colors disabled:opacity-50",disabled:f,children:E.jsx(Gg,{})})]}),t==="products"?E.jsxs("form",{onSubmit:O,className:"p-8 space-y-6",children:[E.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-bold text-text-dark/70 mb-2 uppercase tracking-tight",children:"Product Name (EN)"}),E.jsx("input",{required:!0,value:q.name,onChange:ae=>X({...q,name:ae.target.value}),className:"w-full bg-neutral-bg/50 border border-primary-green/10 rounded-2xl px-4 py-3 outline-none focus:ring-2 focus:ring-primary-green",placeholder:"e.g. Organic Apple"})]}),E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-bold text-text-dark/70 mb-2 uppercase tracking-tight",children:"Product Name (NP)"}),E.jsx("input",{required:!0,value:q.nepaliName,onChange:ae=>X({...q,nepaliName:ae.target.value}),className:"w-full bg-neutral-bg/50 border border-primary-green/10 rounded-2xl px-4 py-3 outline-none focus:ring-2 focus:ring-primary-green",placeholder:"e.g.  "})]})]}),E.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-bold text-text-dark/70 mb-2 uppercase tracking-tight",children:"Category"}),E.jsx("select",{value:q.category,onChange:ae=>X({...q,category:ae.target.value}),className:"w-full bg-neutral-bg/50 border border-primary-green/10 rounded-2xl px-4 py-3 outline-none focus:ring-2 focus:ring-primary-green",children:Object.values(on).map(ae=>E.jsx("option",{value:ae,children:ae},ae))})]}),E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-bold text-text-dark/70 mb-2 uppercase tracking-tight",children:"Price (Rs.)"}),E.jsx("input",{type:"number",required:!0,value:q.price,onChange:ae=>X({...q,price:Number(ae.target.value)}),className:"w-full bg-neutral-bg/50 border border-primary-green/10 rounded-2xl px-4 py-3 outline-none focus:ring-2 focus:ring-primary-green"})]})]}),E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-bold text-text-dark/70 mb-2 uppercase tracking-tight",children:"Image URL"}),E.jsxs("div",{className:"flex gap-4",children:[E.jsxs("div",{className:"relative flex-grow",children:[E.jsx(qd,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-text-dark/30",size:18}),E.jsx("input",{required:!0,placeholder:"Paste image URL here...",value:q.image,onChange:ae=>X({...q,image:ae.target.value}),className:"w-full bg-neutral-bg/50 border border-primary-green/10 rounded-2xl pl-12 pr-4 py-3 outline-none focus:ring-2 focus:ring-primary-green"})]}),E.jsx("div",{className:"w-14 h-14 rounded-xl overflow-hidden border border-neutral-bg shrink-0 shadow-inner bg-neutral-bg flex items-center justify-center",children:q.image?E.jsx("img",{src:q.image,alt:"Preview",className:"w-full h-full object-cover",onError:ae=>{ae.target.src="https://via.placeholder.com/100?text=ERR"}}):E.jsx(qd,{size:24,className:"text-text-dark/20"})})]})]}),E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-bold text-text-dark/70 mb-2 uppercase tracking-tight",children:"Description"}),E.jsx("textarea",{required:!0,rows:2,value:q.description,onChange:ae=>X({...q,description:ae.target.value}),className:"w-full bg-neutral-bg/50 border border-primary-green/10 rounded-2xl px-4 py-3 outline-none focus:ring-2 focus:ring-primary-green resize-none"})]}),E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-bold text-text-dark/70 mb-2 uppercase tracking-tight",children:"Health Benefits"}),E.jsx("textarea",{required:!0,rows:2,value:q.benefits,onChange:ae=>X({...q,benefits:ae.target.value}),className:"w-full bg-neutral-bg/50 border border-primary-green/10 rounded-2xl px-4 py-3 outline-none focus:ring-2 focus:ring-primary-green resize-none"})]}),E.jsxs("div",{className:"flex gap-4 pt-4 sticky bottom-0 bg-white pb-2",children:[E.jsx("button",{type:"button",onClick:()=>w(!1),className:"flex-grow bg-neutral-bg py-4 rounded-2xl font-bold hover:bg-neutral-bg/80 transition-colors",disabled:f,children:"Cancel"}),E.jsx("button",{type:"submit",disabled:f,className:"flex-grow bg-primary-green text-white py-4 rounded-2xl font-bold flex items-center justify-center gap-2 hover:bg-primary-green/90 transition-all shadow-lg shadow-primary-green/20 disabled:opacity-70",children:f?E.jsx(Nu,{className:"animate-spin",size:20}):E.jsxs(E.Fragment,{children:[E.jsx(Vw,{size:20})," ",S?"Update Product":"Save Product"]})})]})]}):E.jsxs("form",{onSubmit:U,className:"p-8 space-y-6",children:[E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-bold text-text-dark/70 mb-2 uppercase tracking-tight",children:"Slide Title"}),E.jsx("input",{required:!0,value:B.title,onChange:ae=>re({...B,title:ae.target.value}),className:"w-full bg-neutral-bg/50 border border-primary-green/10 rounded-2xl px-4 py-3 outline-none focus:ring-2 focus:ring-primary-green",placeholder:"e.g. Authentic Himalayan Herbs"})]}),E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-bold text-text-dark/70 mb-2 uppercase tracking-tight",children:"Subtitle"}),E.jsx("textarea",{required:!0,rows:3,value:B.subtitle,onChange:ae=>re({...B,subtitle:ae.target.value}),className:"w-full bg-neutral-bg/50 border border-primary-green/10 rounded-2xl px-4 py-3 outline-none focus:ring-2 focus:ring-primary-green resize-none",placeholder:"Describe your slide content..."})]}),E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-bold text-text-dark/70 mb-2 uppercase tracking-tight",children:"Background Image URL"}),E.jsxs("div",{className:"flex gap-4",children:[E.jsxs("div",{className:"relative flex-grow",children:[E.jsx(qd,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-text-dark/30",size:18}),E.jsx("input",{required:!0,placeholder:"Paste image URL here...",value:B.image,onChange:ae=>re({...B,image:ae.target.value}),className:"w-full bg-neutral-bg/50 border border-primary-green/10 rounded-2xl pl-12 pr-4 py-3 outline-none focus:ring-2 focus:ring-primary-green"})]}),E.jsx("div",{className:"w-20 h-12 rounded-lg overflow-hidden border border-neutral-bg shrink-0 shadow-inner bg-neutral-bg flex items-center justify-center",children:B.image?E.jsx("img",{src:B.image,alt:"Preview",className:"w-full h-full object-cover",onError:ae=>{ae.target.src="https://via.placeholder.com/200x120?text=ERR"}}):E.jsx(qd,{size:16,className:"text-text-dark/20"})})]})]}),E.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-bold text-text-dark/70 mb-2 uppercase tracking-tight",children:"Button Text"}),E.jsx("input",{required:!0,value:B.buttonText,onChange:ae=>re({...B,buttonText:ae.target.value}),className:"w-full bg-neutral-bg/50 border border-primary-green/10 rounded-2xl px-4 py-3 outline-none focus:ring-2 focus:ring-primary-green",placeholder:"e.g. Shop Now"})]}),E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-bold text-text-dark/70 mb-2 uppercase tracking-tight",children:"Button Link"}),E.jsx("input",{required:!0,value:B.buttonLink,onChange:ae=>re({...B,buttonLink:ae.target.value}),className:"w-full bg-neutral-bg/50 border border-primary-green/10 rounded-2xl px-4 py-3 outline-none focus:ring-2 focus:ring-primary-green",placeholder:"e.g. /products"})]})]}),E.jsx("div",{children:E.jsxs("label",{className:"flex items-center gap-3",children:[E.jsx("input",{type:"checkbox",checked:B.isActive,onChange:ae=>re({...B,isActive:ae.target.checked}),className:"w-5 h-5 text-primary-green bg-neutral-bg border-primary-green/20 rounded focus:ring-primary-green focus:ring-2"}),E.jsx("span",{className:"text-sm font-bold text-text-dark/70 uppercase tracking-tight",children:"Active (Show on homepage)"})]})}),E.jsxs("div",{className:"flex gap-4 pt-4 sticky bottom-0 bg-white pb-2",children:[E.jsx("button",{type:"button",onClick:()=>w(!1),className:"flex-grow bg-neutral-bg py-4 rounded-2xl font-bold hover:bg-neutral-bg/80 transition-colors",disabled:f,children:"Cancel"}),E.jsx("button",{type:"submit",disabled:f,className:"flex-grow bg-primary-green text-white py-4 rounded-2xl font-bold flex items-center justify-center gap-2 hover:bg-primary-green/90 transition-all shadow-lg shadow-primary-green/20 disabled:opacity-70",children:f?E.jsx(Nu,{className:"animate-spin",size:20}):E.jsxs(E.Fragment,{children:[E.jsx(Vw,{size:20})," ",P?"Update Slide":"Save Slide"]})})]})]})]})})]})},LH=({products:t,onEdit:e,onDelete:n})=>E.jsx("div",{className:"overflow-x-auto",children:E.jsxs("table",{className:"w-full text-left",children:[E.jsx("thead",{className:"bg-neutral-bg/50 border-b border-primary-green/5",children:E.jsxs("tr",{children:[E.jsx("th",{className:"px-6 py-4 text-xs font-bold uppercase text-text-dark/50 tracking-widest",children:"Image"}),E.jsx("th",{className:"px-6 py-4 text-xs font-bold uppercase text-text-dark/50 tracking-widest",children:"Name"}),E.jsx("th",{className:"px-6 py-4 text-xs font-bold uppercase text-text-dark/50 tracking-widest",children:"Category"}),E.jsx("th",{className:"px-6 py-4 text-xs font-bold uppercase text-text-dark/50 tracking-widest",children:"Price"}),E.jsx("th",{className:"px-6 py-4 text-xs font-bold uppercase text-text-dark/50 tracking-widest",children:"Actions"})]})}),E.jsx("tbody",{className:"divide-y divide-neutral-bg",children:t.length>0?t.map(r=>E.jsxs("tr",{className:"hover:bg-neutral-bg/20 transition-colors group",children:[E.jsx("td",{className:"px-6 py-4",children:E.jsx("img",{src:r.image,className:"w-14 h-14 rounded-xl object-cover border border-neutral-bg shadow-sm group-hover:scale-105 transition-transform",alt:r.name,onError:s=>{s.target.src="https://via.placeholder.com/100?text=No+Image"}})}),E.jsxs("td",{className:"px-6 py-4",children:[E.jsx("div",{className:"font-bold text-text-dark leading-tight",children:r.name}),E.jsx("div",{className:"text-xs text-primary-green font-medium mt-1",children:r.nepaliName})]}),E.jsx("td",{className:"px-6 py-4",children:E.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wider bg-accent-cream px-3 py-1 rounded-full border border-primary-green/10 text-primary-green",children:r.category})}),E.jsxs("td",{className:"px-6 py-4 font-bold text-earth-brown",children:["Rs. ",r.price]}),E.jsx("td",{className:"px-6 py-4",children:E.jsxs("div",{className:"flex gap-2",children:[E.jsx("button",{onClick:()=>e(r),className:"p-2 text-primary-green hover:bg-primary-green/10 rounded-lg transition-all",title:"Edit Product",children:E.jsx(VT,{size:18})}),E.jsx("button",{onClick:()=>n(r.id),className:"p-2 text-red-500 hover:bg-red-50 rounded-lg transition-all",title:"Delete Product",children:E.jsx(zg,{size:18})})]})})]},r.id)):E.jsx("tr",{children:E.jsxs("td",{colSpan:5,className:"px-6 py-20 text-center",children:[E.jsx(UT,{size:48,className:"mx-auto text-neutral-bg mb-4"}),E.jsx("p",{className:"text-text-dark/50 font-medium",children:"No products found in the store."})]})})})]})}),UH=({slides:t,onEdit:e,onDelete:n,onToggleActive:r})=>E.jsx("div",{className:"overflow-x-auto",children:E.jsxs("table",{className:"w-full text-left",children:[E.jsx("thead",{className:"bg-neutral-bg/50 border-b border-primary-green/5",children:E.jsxs("tr",{children:[E.jsx("th",{className:"px-6 py-4 text-xs font-bold uppercase text-text-dark/50 tracking-widest",children:"Image"}),E.jsx("th",{className:"px-6 py-4 text-xs font-bold uppercase text-text-dark/50 tracking-widest",children:"Title"}),E.jsx("th",{className:"px-6 py-4 text-xs font-bold uppercase text-text-dark/50 tracking-widest",children:"Button"}),E.jsx("th",{className:"px-6 py-4 text-xs font-bold uppercase text-text-dark/50 tracking-widest",children:"Status"}),E.jsx("th",{className:"px-6 py-4 text-xs font-bold uppercase text-text-dark/50 tracking-widest",children:"Actions"})]})}),E.jsx("tbody",{className:"divide-y divide-neutral-bg",children:t.length>0?t.map(s=>E.jsxs("tr",{className:"hover:bg-neutral-bg/20 transition-colors group",children:[E.jsx("td",{className:"px-6 py-4",children:E.jsx("img",{src:s.image,className:"w-20 h-12 rounded-lg object-cover border border-neutral-bg shadow-sm group-hover:scale-105 transition-transform",alt:s.title,onError:o=>{o.target.src="https://via.placeholder.com/200x120?text=No+Image"}})}),E.jsxs("td",{className:"px-6 py-4",children:[E.jsx("div",{className:"font-bold text-text-dark leading-tight",children:s.title}),E.jsx("div",{className:"text-xs text-earth-brown mt-1 line-clamp-2",children:s.subtitle})]}),E.jsx("td",{className:"px-6 py-4",children:E.jsx("span",{className:"text-xs bg-primary-green/10 text-primary-green px-2 py-1 rounded-full",children:s.buttonText})}),E.jsx("td",{className:"px-6 py-4",children:E.jsxs("button",{onClick:()=>r(s),className:`flex items-center gap-2 px-3 py-1 rounded-full text-xs font-bold transition-all ${s.isActive?"bg-green-100 text-green-700 hover:bg-green-200":"bg-gray-100 text-gray-500 hover:bg-gray-200"}`,children:[s.isActive?E.jsx(qg,{size:14}):E.jsx(Fg,{size:14}),s.isActive?"Active":"Inactive"]})}),E.jsx("td",{className:"px-6 py-4",children:E.jsxs("div",{className:"flex gap-2",children:[E.jsx("button",{onClick:()=>e(s),className:"p-2 text-primary-green hover:bg-primary-green/10 rounded-lg transition-all",title:"Edit Slide",children:E.jsx(VT,{size:18})}),E.jsx("button",{onClick:()=>n(s.id),className:"p-2 text-red-500 hover:bg-red-50 rounded-lg transition-all",title:"Delete Slide",children:E.jsx(zg,{size:18})})]})})]},s.id)):E.jsx("tr",{children:E.jsxs("td",{colSpan:5,className:"px-6 py-20 text-center",children:[E.jsx(LT,{size:48,className:"mx-auto text-neutral-bg mb-4"}),E.jsx("p",{className:"text-text-dark/50 font-medium",children:"No hero slides found."})]})})})]})}),VH=()=>E.jsx(qA,{children:E.jsx(xH,{children:E.jsxs(gA,{children:[E.jsx(Ln,{path:"/",element:E.jsx(CH,{})}),E.jsx(Ln,{path:"/products",element:E.jsx(IH,{})}),E.jsx(Ln,{path:"/product/:id",element:E.jsx(kH,{})}),E.jsx(Ln,{path:"/about",element:E.jsx(_H,{})}),E.jsx(Ln,{path:"/testimonials",element:E.jsx(NH,{})}),E.jsx(Ln,{path:"/contact",element:E.jsx(AH,{})}),E.jsx(Ln,{path:"/cart",element:E.jsx(OH,{})}),E.jsx(Ln,{path:"/checkout",element:E.jsx(PH,{})}),E.jsx(Ln,{path:"/login",element:E.jsx(RH,{})}),E.jsx(Ln,{path:"/signup",element:E.jsx(DH,{})}),E.jsx(Ln,{path:"/admin/login",element:E.jsx(jH,{})}),E.jsx(Ln,{path:"/admin/dashboard",element:E.jsx(MH,{})})]})})}),Ok=document.getElementById("root");if(!Ok)throw new Error("Could not find root element to mount to");const FH=vN.createRoot(Ok);FH.render(E.jsx(dT.StrictMode,{children:E.jsx(VH,{})}));
